{"file_contents":{"app/(tabs)/index.tsx":{"content":"import React, { useState, useEffect, useRef } from 'react';\nimport { View, StyleSheet, Dimensions, Platform, TouchableOpacity, TextInput, Alert, ScrollView, Keyboard } from 'react-native';\nimport { useColorScheme } from '@/hooks/useColorScheme';\nimport { Colors } from '@/constants/Colors';\nimport { Theme } from '@/constants/Theme';\nimport * as Location from 'expo-location';\nimport { WebView } from 'react-native-webview';\nimport { BottomSheet } from '@/components/redesign/BottomSheet';\nimport { MapBottomDrawer } from '@/components/redesign/MapBottomDrawer';\nimport { FloatingControlsStack } from '@/components/redesign/FloatingControlsStack';\nimport { IconSymbol } from '@/components/ui/IconSymbol';\nimport { StatChip } from '@/components/redesign/StatChip';\nimport { QuickActionTile } from '@/components/redesign/QuickActionTile';\nimport { WeatherWidget } from '@/components/redesign/WeatherWidget';\nimport { Card } from '@/components/redesign/Card';\nimport { SectionHeader } from '@/components/redesign/SectionHeader';\nimport { getNearbyTrackedVessels } from '@/utils/trackingService';\nimport { getCurrentWeather } from '@/utils/maritimeIntelligence';\nimport { getNearbyHazards } from '@/utils/maritimeIntelligence';\nimport { useRouter } from 'expo-router';\nimport { Text } from 'react-native';\n\n// Port database\nconst PORTS_DATABASE = [\n  { id: '1', name: 'Port of Singapore', lat: 1.2644, lng: 103.8221, country: 'Singapore' },\n  { id: '2', name: 'Port of Shanghai', lat: 31.2304, lng: 121.4737, country: 'China' },\n  { id: '3', name: 'Port of Rotterdam', lat: 51.9244, lng: 4.4777, country: 'Netherlands' },\n  { id: '4', name: 'Port of Hong Kong', lat: 22.3193, lng: 114.1694, country: 'Hong Kong' },\n  { id: '5', name: 'Port of Chennai', lat: 13.0827, lng: 80.2707, country: 'India' },\n  { id: '6', name: 'Port of New York', lat: 40.6643, lng: -74.0395, country: 'USA' },\n  { id: '7', name: 'Port of Los Angeles', lat: 33.7405, lng: -118.2719, country: 'USA' },\n  { id: '8', name: 'Port of Dubai', lat: 25.2854, lng: 55.3607, country: 'UAE' },\n];\n\nconst { height: SCREEN_HEIGHT } = Dimensions.get('window');\n\nexport default function MapScreen() {\n  const router = useRouter();\n  const colorScheme = useColorScheme();\n  const isDark = colorScheme === 'dark';\n  const colors = Colors[isDark ? 'dark' : 'light'];\n\n  const [currentLocation, setCurrentLocation] = useState<{ latitude: number; longitude: number } | null>(null);\n  const [vessels, setVessels] = useState<any[]>([]);\n  const [weather, setWeather] = useState<any>(null);\n  const [hazards, setHazards] = useState<any[]>([]);\n  const [currentSpeed, setCurrentSpeed] = useState<number>(0);\n  const [showHazardReport, setShowHazardReport] = useState(false);\n  const [hazardType, setHazardType] = useState<string>('');\n  const [hazardDescription, setHazardDescription] = useState<string>('');\n  const [showSearch, setShowSearch] = useState(false);\n  const [searchMode, setSearchMode] = useState<'port' | 'coords'>('port');\n  const [searchQuery, setSearchQuery] = useState('');\n  const [searchResults, setSearchResults] = useState<any[]>([]);\n  const [destination, setDestination] = useState<{ lat: number; lng: number } | null>(null);\n  const [routeInfo, setRouteInfo] = useState<{ distance: number; time: number } | null>(null);\n  const webViewRef = useRef<WebView>(null);\n  const mapRef = useRef<any>(null); // Ref for the map component if it were a native map\n  const [drawerOpen, setDrawerOpen] = useState(false); // State to control bottom drawer\n  const [selectedVessel, setSelectedVessel] = useState<any>(null); // State for selected vessel\n\n  useEffect(() => {\n    getCurrentLocation();\n  }, []);\n\n  useEffect(() => {\n    if (currentLocation) {\n      loadData();\n    }\n  }, [currentLocation]);\n\n  const getCurrentLocation = async () => {\n    try {\n      const { status } = await Location.requestForegroundPermissionsAsync();\n      if (status === 'granted') {\n        // Watch position for continuous speed updates\n        await Location.watchPositionAsync(\n          {\n            accuracy: Location.Accuracy.High,\n            timeInterval: 1000,\n            distanceInterval: 1,\n          },\n          (location) => {\n            setCurrentLocation({\n              latitude: location.coords.latitude,\n              longitude: location.coords.longitude,\n            });\n            // Speed in m/s, convert to knots (1 m/s = 1.94384 knots)\n            const speedInKnots = (location.coords.speed || 0) * 1.94384;\n            setCurrentSpeed(speedInKnots);\n          }\n        );\n      } else {\n        // Default location if permission denied\n        setCurrentLocation({\n          latitude: 13.05,\n          longitude: 80.25,\n        });\n      }\n    } catch (error) {\n      console.error('Error getting location:', error);\n      setCurrentLocation({\n        latitude: 13.05,\n        longitude: 80.25,\n      });\n    }\n  };\n\n  const handleSearch = (text: string) => {\n    setSearchQuery(text);\n    if (searchMode === 'port' && text.length > 1) {\n      const filtered = PORTS_DATABASE.filter(port =>\n        port.name.toLowerCase().includes(text.toLowerCase()) ||\n        port.country.toLowerCase().includes(text.toLowerCase())\n      );\n      setSearchResults(filtered);\n    } else {\n      setSearchResults([]);\n    }\n  };\n\n  const selectPort = (port: any) => {\n    setDestination({ lat: port.lat, lng: port.lng });\n    setSearchQuery(port.name);\n    setSearchResults([]);\n    Keyboard.dismiss();\n    calculateRoute({ lat: port.lat, lng: port.lng });\n  };\n\n  const handleCoordinatesGo = () => {\n    const coords = searchQuery.split(',').map(c => parseFloat(c.trim()));\n    if (coords.length === 2 && !isNaN(coords[0]) && !isNaN(coords[1])) {\n      const dest = { lat: coords[0], lng: coords[1] };\n      setDestination(dest);\n      Keyboard.dismiss();\n      calculateRoute(dest);\n    } else {\n      Alert.alert('Invalid Coordinates', 'Please enter valid latitude, longitude (e.g., 13.08, 80.27)');\n    }\n  };\n\n  const calculateRoute = (dest: { lat: number; lng: number }) => {\n    if (!currentLocation) return;\n\n    const R = 6371; // Earth's radius in km\n    const dLat = (dest.lat - currentLocation.latitude) * Math.PI / 180;\n    const dLng = (dest.lng - currentLocation.longitude) * Math.PI / 180;\n    const a = Math.sin(dLat/2) * Math.sin(dLat/2) +\n              Math.cos(currentLocation.latitude * Math.PI / 180) * Math.cos(dest.lat * Math.PI / 180) *\n              Math.sin(dLng/2) * Math.sin(dLng/2);\n    const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));\n    const distance = R * c;\n    const time = (distance / 20) * 60; // Assuming 20 knots speed\n\n    setRouteInfo({ distance, time });\n  };\n\n  const cancelNavigation = () => {\n    setDestination(null);\n    setRouteInfo(null);\n    setSearchQuery('');\n    setShowSearch(false);\n  };\n\n  const submitHazardReport = async () => {\n    if (!currentLocation || !hazardType || !hazardDescription) {\n      Alert.alert('Error', 'Please fill in all fields');\n      return;\n    }\n\n    try {\n      const BACKEND_URL = process.env.EXPO_PUBLIC_BACKEND_URL || 'http://localhost:3000';\n      await fetch(`${BACKEND_URL}/api/hazards/report`, {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          type: hazardType,\n          description: hazardDescription,\n          lat: currentLocation.latitude,\n          lng: currentLocation.longitude,\n          severity: 'medium',\n          timestamp: new Date().toISOString(),\n        }),\n      });\n\n      Alert.alert('Success', 'Hazard reported successfully');\n      setShowHazardReport(false);\n      setHazardType('');\n      setHazardDescription('');\n      loadData();\n    } catch (error) {\n      console.error('Error reporting hazard:', error);\n      Alert.alert('Error', 'Failed to report hazard');\n    }\n  };\n\n  const loadData = async () => {\n    if (!currentLocation) return;\n\n    try {\n      const [nearbyVessels, weatherData, hazardData] = await Promise.all([\n        getNearbyTrackedVessels(currentLocation.latitude, currentLocation.longitude, 10),\n        getCurrentWeather(currentLocation.latitude, currentLocation.longitude),\n        getNearbyHazards(currentLocation.latitude, currentLocation.longitude, 50),\n      ]);\n\n      setVessels(nearbyVessels);\n      setWeather(weatherData);\n      setHazards(hazardData);\n    } catch (error) {\n      console.error('Error loading data:', error);\n    }\n  };\n\n  const quickActions = [\n    { id: '1', icon: 'cloud.fill', label: 'Weather', color: Theme.colors.iosOrange, route: '/weather' },\n    { id: '2', icon: 'exclamationmark.triangle.fill', label: 'SOS', color: Theme.colors.iosRed, route: '/sos' },\n    { id: '3', icon: 'anchor.fill', label: 'Ports', color: Theme.colors.iosPurple, route: '/ports' },\n    { id: '4', icon: 'bell.fill', label: 'Alerts', color: Theme.colors.iosTeal, route: '/notifications' },\n  ];\n\n  const defaultLat = currentLocation?.latitude || 13.05;\n  const defaultLng = currentLocation?.longitude || 80.25;\n\n  const escapeHtml = (text: string): string => {\n    return text.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;');\n  };\n\n  const vesselsMarkersHTML = vessels.map(v => {\n    const heading = v.location?.heading || 0;\n    const speedColor = v.location?.speed && v.location.speed > 10 ? '#ef4444' : '#22c55e';\n    const name = escapeHtml(v.vesselInfo?.vesselName || 'Unknown');\n    return `\n      L.marker([${v.location?.lat || 0}, ${v.location?.lng || 0}], {\n        icon: L.divIcon({\n          html: '<div style=\"transform: rotate(${heading}deg); font-size: 24px;\">‚õµ</div>',\n          className: 'vessel-marker',\n          iconSize: [30, 30],\n          iconAnchor: [15, 15]\n        })\n      }).addTo(map).bindPopup('<b>${name}</b><br>Speed: ${v.location?.speed?.toFixed(1) || 0} kn');\n    `;\n  }).join('\\n');\n\n  const userMarkerHTML = currentLocation ? `\n    L.marker([${currentLocation.latitude}, ${currentLocation.longitude}], {\n      icon: L.divIcon({\n        html: '<div style=\"width: 20px; height: 20px; background: #3da9fc; border: 3px solid white; border-radius: 50%; box-shadow: 0 2px 8px rgba(61, 169, 252, 0.6);\"></div>',\n        className: 'user-marker',\n        iconSize: [20, 20],\n        iconAnchor: [10, 10]\n      })\n    }).addTo(map);\n  ` : '';\n\n  const routeHTML = destination && currentLocation ? `\n    L.polyline([\n      [${currentLocation.latitude}, ${currentLocation.longitude}],\n      [${destination.lat}, ${destination.lng}]\n    ], {\n      color: '#007AFF',\n      weight: 4,\n      opacity: 0.7,\n      dashArray: '10, 5'\n    }).addTo(map);\n\n    L.marker([${destination.lat}, ${destination.lng}], {\n      icon: L.divIcon({\n        html: '<div style=\"background: #34C759; color: white; padding: 8px 12px; border-radius: 8px; font-weight: bold; box-shadow: 0 2px 8px rgba(52, 199, 89, 0.6);\">üéØ Destination</div>',\n        className: 'destination-marker',\n        iconSize: [null, null]\n      })\n    }).addTo(map);\n\n    map.fitBounds([\n      [${currentLocation.latitude}, ${currentLocation.longitude}],\n      [${destination.lat}, ${destination.lng}]\n    ], { padding: [50, 50] });\n  ` : '';\n\n  const htmlContent = `\n    <!DOCTYPE html>\n    <html>\n    <head>\n      <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" />\n      <link rel=\"stylesheet\" href=\"https://unpkg.com/leaflet@1.9.4/dist/leaflet.css\" />\n      <script src=\"https://unpkg.com/leaflet@1.9.4/dist/leaflet.js\"></script>\n      <style>\n        body { margin: 0; padding: 0; background: #1a1a2e; }\n        #map { width: 100%; height: 100vh; }\n      </style>\n    </head>\n    <body>\n      <div id=\"map\"></div>\n      <script>\n        var map = L.map('map', {\n          zoomControl: true,\n          attributionControl: false\n        }).setView([${defaultLat}, ${defaultLng}], 12);\n\n        L.tileLayer('https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png', {\n          maxZoom: 20,\n          minZoom: 3\n        }).addTo(map);\n\n        ${userMarkerHTML}\n        ${vesselsMarkersHTML}\n        ${routeHTML}\n      </script>\n    </body>\n    </html>\n  `;\n\n  return (\n    <View style={styles.container}>\n      {Platform.OS === 'web' ? (\n        <View style={[styles.webMapPlaceholder, { backgroundColor: colors.background }]}>\n          <Text style={{ fontSize: 48, marginBottom: 16 }}>üó∫Ô∏è</Text>\n          <Text style={{ fontSize: 18, fontWeight: '600', color: colors.text }}>\n            Interactive Map\n          </Text>\n          <Text style={{ fontSize: 14, color: colors.secondaryText, marginTop: 8 }}>\n            Pull up the drawer to access features\n          </Text>\n        </View>\n      ) : (\n        <WebView\n          ref={webViewRef}\n          source={{ html: htmlContent }}\n          style={styles.map}\n          javaScriptEnabled={true}\n          domStorageEnabled={true}\n        />\n      )}\n\n      {/* Hazard Report Modal */}\n      {showHazardReport && (\n        <View style={[styles.hazardModal, { backgroundColor: 'rgba(0, 0, 0, 0.5)' }]}>\n          <View style={[styles.hazardModalContent, { backgroundColor: colors.background }]}>\n            <View style={styles.hazardModalHeader}>\n              <Text style={[styles.hazardModalTitle, { color: colors.text }]}>Report Hazard</Text>\n              <TouchableOpacity onPress={() => setShowHazardReport(false)}>\n                <IconSymbol name=\"xmark.circle.fill\" size={28} color={colors.secondaryText} />\n              </TouchableOpacity>\n            </View>\n\n            <Text style={[styles.hazardLabel, { color: colors.text }]}>Hazard Type</Text>\n            <View style={styles.hazardTypeGrid}>\n              {['debris', 'weather', 'wildlife', 'other'].map((type) => (\n                <TouchableOpacity\n                  key={type}\n                  style={[\n                    styles.hazardTypeButton,\n                    { \n                      backgroundColor: hazardType === type ? Theme.colors.iosBlue : (isDark ? '#2C2C2E' : '#F2F2F7'),\n                      borderColor: hazardType === type ? Theme.colors.iosBlue : 'transparent',\n                    }\n                  ]}\n                  onPress={() => setHazardType(type)}\n                >\n                  <Text style={[\n                    styles.hazardTypeText,\n                    { color: hazardType === type ? '#FFFFFF' : colors.text }\n                  ]}>\n                    {type.charAt(0).toUpperCase() + type.slice(1)}\n                  </Text>\n                </TouchableOpacity>\n              ))}\n            </View>\n\n            <Text style={[styles.hazardLabel, { color: colors.text }]}>Description</Text>\n            <TextInput\n              style={[styles.hazardInput, { \n                backgroundColor: isDark ? '#2C2C2E' : '#F2F2F7',\n                color: colors.text,\n              }]}\n              placeholder=\"Describe the hazard...\"\n              placeholderTextColor={colors.secondaryText}\n              multiline\n              numberOfLines={4}\n              value={hazardDescription}\n              onChangeText={setHazardDescription}\n            />\n\n            <TouchableOpacity\n              style={[styles.submitButton, { backgroundColor: Theme.colors.iosBlue }]}\n              onPress={submitHazardReport}\n            >\n              <Text style={styles.submitButtonText}>Submit Report</Text>\n            </TouchableOpacity>\n          </View>\n        </View>\n      )}\n\n      <FloatingControlsStack \n        onLocationPress={getCurrentLocation}\n      />\n\n      {/* Bottom Sheet for drawer content */}\n      <BottomSheet \n        isOpen={drawerOpen}\n        onClose={() => setDrawerOpen(false)}\n        snapPoints={[SCREEN_HEIGHT * 0.25, SCREEN_HEIGHT * 0.75]} // Example snap points\n      >\n        <View style={styles.sheetContent}>\n          <View style={styles.drawerTopControls}>\n            <View style={[styles.searchBar, { backgroundColor: isDark ? '#2C2C2E' : '#F2F2F7' }]}>\n              <IconSymbol name=\"magnifyingglass\" size={20} color={colors.secondaryText} />\n              <TextInput\n                style={[styles.searchInput, { color: colors.text }]}\n                placeholder={searchMode === 'port' ? 'Search ports...' : 'Lat, Lng (e.g., 13.08, 80.27)'}\n                placeholderTextColor={colors.secondaryText}\n                value={searchQuery}\n                onChangeText={handleSearch}\n              />\n              {searchMode === 'coords' && searchQuery.length > 0 && (\n                <TouchableOpacity onPress={handleCoordinatesGo} style={styles.goButton}>\n                  <Text style={styles.goButtonText}>Go</Text>\n                </TouchableOpacity>\n              )}\n            </View>\n\n            <View style={styles.controlsRow}>\n              <TouchableOpacity\n                style={[styles.modeButton, searchMode === 'port' && { backgroundColor: Theme.colors.iosBlue }]}\n                onPress={() => { setSearchMode('port'); setSearchQuery(''); setSearchResults([]); }}\n              >\n                <Text style={[styles.modeText, searchMode === 'port' && { color: '#FFFFFF' }]}>Port</Text>\n              </TouchableOpacity>\n              <TouchableOpacity\n                style={[styles.modeButton, searchMode === 'coords' && { backgroundColor: Theme.colors.iosBlue }]}\n                onPress={() => { setSearchMode('coords'); setSearchQuery(''); setSearchResults([]); }}\n              >\n                <Text style={[styles.modeText, searchMode === 'coords' && { color: '#FFFFFF' }]}>Coordinates</Text>\n              </TouchableOpacity>\n\n              {/* Hazard Report Button */}\n              <TouchableOpacity\n                style={[styles.hazardButton, { backgroundColor: Theme.colors.iosRed }]}\n                onPress={() => setShowHazardReport(true)}\n              >\n                <IconSymbol name=\"exclamationmark.triangle.fill\" size={24} color=\"#FFFFFF\" />\n              </TouchableOpacity>\n            </View>\n\n            {/* Navigation Info Bar */}\n            {destination && routeInfo && (\n              <View style={[styles.navBar, { backgroundColor: Theme.colors.iosBlue }]}>\n                <View style={styles.navInfo}>\n                  <Text style={styles.navLabel}>Distance</Text>\n                  <Text style={styles.navValue}>{routeInfo.distance.toFixed(1)} km</Text>\n                </View>\n                <View style={styles.navInfo}>\n                  <Text style={styles.navLabel}>ETA</Text>\n                  <Text style={styles.navValue}>{routeInfo.time.toFixed(0)} min</Text>\n                </View>\n                <TouchableOpacity onPress={cancelNavigation} style={styles.cancelNav}>\n                  <IconSymbol name=\"xmark-circle-fill\" size={24} color=\"#FFFFFF\" />\n                </TouchableOpacity>\n              </View>\n            )}\n          </View>\n\n          {searchResults.length > 0 && (\n            <ScrollView style={styles.searchResults} keyboardShouldPersistTaps=\"handled\">\n              {searchResults.map((port) => (\n                <TouchableOpacity\n                  key={port.id}\n                  style={[styles.resultItem, { borderBottomColor: colors.border }]}\n                  onPress={() => selectPort(port)}\n                >\n                  <IconSymbol name=\"location.fill\" size={20} color={Theme.colors.iosBlue} />\n                  <View style={styles.resultInfo}>\n                    <Text style={[styles.resultName, { color: colors.text }]}>{port.name}</Text>\n                    <Text style={[styles.resultCountry, { color: colors.secondaryText }]}>{port.country}</Text>\n                  </View>\n                </TouchableOpacity>\n              ))}\n            </ScrollView>\n          )}\n\n          <Text style={[styles.welcomeTitle, { color: colors.text }]}>\n            Welcome back, Captain\n          </Text>\n          <Text style={[styles.welcomeDate, { color: colors.secondaryText }]}>\n            {new Date().toLocaleDateString('en-US', {\n              weekday: 'long',\n              month: 'long',\n              day: 'numeric',\n              year: 'numeric',\n            })}\n          </Text>\n\n          {weather && (\n            <View style={styles.weatherContainer}>\n              <WeatherWidget\n                temperature={`${weather.temperature}¬∞F`}\n                condition=\"Sunny\"\n                emoji=\"‚òÄÔ∏è\"\n                subtitle=\"Perfect for sailing!\"\n              />\n            </View>\n          )}\n\n          <View style={styles.statsRow}>\n            <StatChip value={vessels.length.toString()} label={`Nearby\\nVessels`} color=\"#007AFF\" />\n            <StatChip value={hazards.length.toString()} label={`Active\\nHazards`} color=\"#FF9500\" />\n            <StatChip value={weather ? `${weather.windSpeed}kn` : '--'} label={`Wind\\nSpeed`} color=\"#34C759\" />\n          </View>\n\n          <Text style={[styles.sectionTitle, { color: colors.secondaryText }]}>\n            Quick Actions\n          </Text>\n\n          <View style={styles.quickActionsGrid}>\n            {quickActions.map((action) => (\n              <QuickActionTile\n                key={action.id}\n                icon={action.icon}\n                label={action.label}\n                color={action.color}\n                onPress={() => action.route && router.push(action.route as any)}\n              />\n            ))}\n          </View>\n\n          {vessels.length > 0 && (\n            <View style={styles.section}>\n              <SectionHeader\n                title=\"Nearby Vessels\"\n                actionText=\"View All\"\n                onActionPress={() => router.push('/tracker')}\n              />\n              {vessels.slice(0, 3).map((vessel, index) => (\n                <Card key={index} style={styles.vesselCard}>\n                  <View style={styles.vesselHeader}>\n                    <Text style={[styles.vesselName, { color: colors.text }]}>\n                      {vessel.vesselInfo?.vesselName || 'Unknown Vessel'}\n                    </Text>\n                    <View style={[styles.statusBadge, { backgroundColor: '#34C75920' }]}>\n                      <Text style={[styles.statusBadgeText, { color: '#34C759' }]}>Live</Text>\n                    </View>\n                  </View>\n                  <Text style={[styles.vesselType, { color: colors.secondaryText }]}>\n                    {vessel.vesselInfo?.vesselType || 'Vessel'}\n                  </Text>\n                  <View style={styles.vesselMeta}>\n                    <View style={styles.vesselMetaItem}>\n                      <IconSymbol name=\"location.fill\" size={14} color={colors.primary} />\n                      <Text style={[styles.vesselMetaText, { color: colors.secondaryText }]}>\n                        {vessel.distance ? `${vessel.distance.toFixed(1)} km` : 'Nearby'}\n                      </Text>\n                    </View>\n                  </View>\n                </Card>\n              ))}\n            </View>\n          )}\n\n          <View style={styles.bottomSpacing} />\n        </View>\n      </BottomSheet>\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n  },\n  map: {\n    ...StyleSheet.absoluteFillObject,\n  },\n  webMapPlaceholder: {\n    ...StyleSheet.absoluteFillObject,\n    justifyContent: 'center',\n    alignItems: 'center',\n    padding: 32,\n  },\n  // Styles for FloatingControlsStack\n  mapContainer: {\n    ...StyleSheet.absoluteFillObject,\n    justifyContent: 'flex-end', // Align map content to the bottom by default\n  },\n  // Search and Navigation controls moved into BottomSheet\n  searchContainer: {\n    position: 'absolute',\n    top: 60,\n    left: 20,\n    right: 20,\n    borderRadius: 16,\n    padding: 16,\n    ...Theme.shadows.lg,\n    zIndex: 100,\n  },\n  searchModeToggle: {\n    flexDirection: 'row',\n    backgroundColor: 'rgba(0,0,0,0.05)',\n    borderRadius: 8,\n    padding: 4,\n    marginBottom: 12,\n  },\n  modeButton: {\n    flex: 1,\n    paddingVertical: 8,\n    alignItems: 'center',\n    borderRadius: 6,\n  },\n  modeText: {\n    fontSize: 14,\n    fontWeight: '600',\n    color: '#666',\n  },\n  searchInputRow: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: 12,\n  },\n  searchInput: {\n    flex: 1,\n    fontSize: 16,\n    paddingVertical: 4,\n  },\n  goButton: {\n    backgroundColor: Theme.colors.iosBlue,\n    paddingHorizontal: 16,\n    paddingVertical: 8,\n    borderRadius: 8,\n  },\n  goButtonText: {\n    color: '#FFFFFF',\n    fontWeight: '600',\n  },\n  searchResults: {\n    marginTop: 12,\n    maxHeight: 200,\n  },\n  resultItem: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    paddingVertical: 12,\n    borderBottomWidth: 1,\n    gap: 12,\n  },\n  resultInfo: {\n    flex: 1,\n  },\n  resultName: {\n    fontSize: 16,\n    fontWeight: '600',\n  },\n  resultCountry: {\n    fontSize: 14,\n    marginTop: 2,\n  },\n  navBar: {\n    position: 'absolute',\n    top: 60,\n    left: 20,\n    right: 20,\n    flexDirection: 'row',\n    alignItems: 'center',\n    padding: 16,\n    borderRadius: 16,\n    ...Theme.shadows.lg,\n    zIndex: 100,\n  },\n  navInfo: {\n    flex: 1,\n    alignItems: 'center',\n  },\n  navLabel: {\n    color: 'rgba(255,255,255,0.8)',\n    fontSize: 12,\n    fontWeight: '600',\n  },\n  navValue: {\n    color: '#FFFFFF',\n    fontSize: 18,\n    fontWeight: 'bold',\n    marginTop: 2,\n  },\n  cancelNav: {\n    marginLeft: 12,\n  },\n  speedHUD: {\n    position: 'absolute',\n    bottom: 140,\n    left: 20,\n    paddingHorizontal: 20,\n    paddingVertical: 12,\n    borderRadius: 16,\n    alignItems: 'center',\n    ...Theme.shadows.lg,\n    zIndex: 10,\n  },\n  speedValue: {\n    fontSize: 32,\n    fontWeight: Theme.fonts.weights.bold,\n  },\n  speedUnit: {\n    fontSize: 14,\n    fontWeight: Theme.fonts.weights.medium,\n    marginTop: -4,\n  },\n  hazardButton: {\n    position: 'absolute',\n    bottom: 140,\n    right: 20,\n    width: 56,\n    height: 56,\n    borderRadius: 28,\n    justifyContent: 'center',\n    alignItems: 'center',\n    ...Theme.shadows.lg,\n    zIndex: 10,\n  },\n  hazardModal: {\n    ...StyleSheet.absoluteFillObject,\n    justifyContent: 'center',\n    alignItems: 'center',\n    zIndex: 1000,\n  },\n  hazardModalContent: {\n    width: '90%',\n    maxWidth: 400,\n    borderRadius: 20,\n    padding: 24,\n    ...Theme.shadows.xl,\n  },\n  hazardModalHeader: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    marginBottom: 24,\n  },\n  hazardModalTitle: {\n    fontSize: 24,\n    fontWeight: Theme.fonts.weights.bold,\n  },\n  hazardLabel: {\n    fontSize: 16,\n    fontWeight: Theme.fonts.weights.semibold,\n    marginBottom: 12,\n    marginTop: 16,\n  },\n  hazardTypeGrid: {\n    flexDirection: 'row',\n    flexWrap: 'wrap',\n    gap: 12,\n  },\n  hazardTypeButton: {\n    paddingHorizontal: 20,\n    paddingVertical: 12,\n    borderRadius: 12,\n    borderWidth: 2,\n  },\n  hazardTypeText: {\n    fontSize: 14,\n    fontWeight: Theme.fonts.weights.semibold,\n  },\n  hazardInput: {\n    borderRadius: 12,\n    padding: 16,\n    fontSize: 16,\n    textAlignVertical: 'top',\n    minHeight: 100,\n  },\n  submitButton: {\n    marginTop: 24,\n    paddingVertical: 16,\n    borderRadius: 12,\n    alignItems: 'center',\n  },\n  submitButtonText: {\n    color: '#FFFFFF',\n    fontSize: 16,\n    fontWeight: Theme.fonts.weights.bold,\n  },\n  // Styles for controls within the BottomSheet\n  sheetContent: {\n    paddingHorizontal: Theme.spacing.lg,\n    paddingTop: Theme.spacing.md,\n  },\n  drawerTopControls: {\n    paddingHorizontal: 20,\n    paddingTop: 16,\n    paddingBottom: 12,\n    gap: 12,\n  },\n  searchBar: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    paddingHorizontal: 16,\n    paddingVertical: 12,\n    borderRadius: 12,\n    gap: 12,\n    ...Theme.shadows.sm,\n  },\n  searchInput: {\n    flex: 1,\n    fontSize: 16,\n    fontWeight: '500',\n  },\n  controlsRow: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    gap: 12,\n  },\n  speedHUD: {\n    flex: 1,\n    paddingHorizontal: 20,\n    paddingVertical: 12,\n    borderRadius: 16,\n    alignItems: 'center',\n    ...Theme.shadows.lg,\n  },\n  speedValue: {\n    fontSize: 32,\n    fontWeight: Theme.fonts.weights.bold,\n  },\n  speedUnit: {\n    fontSize: 14,\n    fontWeight: Theme.fonts.weights.medium,\n    marginTop: -4,\n  },\n  hazardButton: {\n    width: 56,\n    height: 56,\n    borderRadius: 28,\n    justifyContent: 'center',\n    alignItems: 'center',\n    ...Theme.shadows.lg,\n  },\n  welcomeTitle: {\n    fontSize: Theme.fonts.sizes.xxl,\n    fontWeight: Theme.fonts.weights.bold,\n    marginBottom: Theme.spacing.xs,\n  },\n  welcomeDate: {\n    fontSize: Theme.fonts.sizes.base,\n    marginBottom: Theme.spacing.lg,\n  },\n  weatherContainer: {\n    marginBottom: Theme.spacing.xl,\n  },\n  statsRow: {\n    flexDirection: 'row',\n    gap: Theme.spacing.md,\n    marginBottom: Theme.spacing.xl,\n  },\n  sectionTitle: {\n    fontSize: Theme.fonts.sizes.base,\n    marginBottom: Theme.spacing.base,\n    fontWeight: '600',\n  },\n  quickActionsGrid: {\n    flexDirection: 'row',\n    flexWrap: 'wrap',\n    gap: Theme.spacing.md,\n    marginBottom: Theme.spacing.xl,\n  },\n  section: {\n    marginBottom: Theme.spacing.xl,\n  },\n  vesselCard: {\n    marginBottom: Theme.spacing.md,\n  },\n  vesselHeader: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    marginBottom: Theme.spacing.xs,\n  },\n  vesselName: {\n    fontSize: Theme.fonts.sizes.base,\n    fontWeight: Theme.fonts.weights.semibold,\n    flex: 1,\n  },\n  statusBadge: {\n    paddingHorizontal: Theme.spacing.md,\n    paddingVertical: Theme.spacing.xs,\n    borderRadius: Theme.radius.sm,\n  },\n  statusBadgeText: {\n    fontSize: Theme.fonts.sizes.sm,\n    fontWeight: Theme.fonts.weights.semibold,\n  },\n  vesselType: {\n    fontSize: Theme.fonts.sizes.md,\n    marginBottom: Theme.spacing.md,\n  },\n  vesselMeta: {\n    flexDirection: 'row',\n    gap: Theme.spacing.lg,\n  },\n  vesselMetaItem: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: Theme.spacing.xs,\n  },\n  vesselMetaText: {\n    fontSize: Theme.fonts.sizes.md,\n  },\n  bottomSpacing: {\n    height: 100,\n  },\n});","size_bytes":29879},"components/ui/IconSymbol.tsx":{"content":"// Fallback for using MaterialIcons on Android and web.\n\nimport MaterialIcons from '@expo/vector-icons/MaterialIcons';\nimport { SymbolWeight, SymbolViewProps } from 'expo-symbols';\nimport { ComponentProps } from 'react';\nimport { OpaqueColorValue, type StyleProp, type TextStyle } from 'react-native';\n\ntype IconMapping = Record<SymbolViewProps['name'], ComponentProps<typeof MaterialIcons>['name']>;\ntype IconSymbolName = keyof typeof MAPPING;\n\n/**\n * Add your SF Symbols to Material Icons mappings here.\n * - see Material Icons in the [Icons Directory](https://icons.expo.fyi).\n * - see SF Symbols in the [SF Symbols](https://developer.apple.com/sf-symbols/) app.\n */\nconst MAPPING = {\n  'house.fill': 'home',\n  'paperplane.fill': 'send',\n  'chevron.left.forwardslash.chevron.right': 'code',\n  'chevron.right': 'chevron-right',\n  'map.fill': 'map',\n  'cloud.fill': 'cloud',\n  'exclamationmark.triangle.fill': 'warning',\n  'bubble.left.and.bubble.right.fill': 'chat',\n  'anchor.fill': 'anchor',\n  'location.fill': 'location-on',\n  'gear': 'settings',\n  'person.fill': 'person',\n  'bell.fill': 'notifications',\n  'message.fill': 'message',\n  'speedometer': 'speed',\n} as IconMapping;\n\n/**\n * An icon component that uses native SF Symbols on iOS, and Material Icons on Android and web.\n * This ensures a consistent look across platforms, and optimal resource usage.\n * Icon `name`s are based on SF Symbols and require manual mapping to Material Icons.\n */\nexport function IconSymbol({\n  name,\n  size = 24,\n  color,\n  style,\n}: {\n  name: IconSymbolName;\n  size?: number;\n  color: string | OpaqueColorValue;\n  style?: StyleProp<TextStyle>;\n  weight?: SymbolWeight;\n}) {\n  return <MaterialIcons color={color} size={size} name={MAPPING[name]} style={style} />;\n}\n","size_bytes":1758},"components/ui/TabBarBackground.tsx":{"content":"// This is a shim for web and Android where the tab bar is generally opaque.\nexport default undefined;\n\nexport function useBottomTabOverflow() {\n  return 0;\n}\n","size_bytes":159},"components/ParallaxScrollView.tsx":{"content":"import type { PropsWithChildren, ReactElement } from 'react';\nimport { StyleSheet } from 'react-native';\nimport Animated, {\n  interpolate,\n  useAnimatedRef,\n  useAnimatedStyle,\n  useScrollViewOffset,\n} from 'react-native-reanimated';\n\nimport { ThemedView } from '@/components/ThemedView';\nimport { useBottomTabOverflow } from '@/components/ui/TabBarBackground';\nimport { useColorScheme } from '@/hooks/useColorScheme';\n\nconst HEADER_HEIGHT = 250;\n\ntype Props = PropsWithChildren<{\n  headerImage: ReactElement;\n  headerBackgroundColor: { dark: string; light: string };\n}>;\n\nexport default function ParallaxScrollView({\n  children,\n  headerImage,\n  headerBackgroundColor,\n}: Props) {\n  const colorScheme = useColorScheme() ?? 'light';\n  const scrollRef = useAnimatedRef<Animated.ScrollView>();\n  const scrollOffset = useScrollViewOffset(scrollRef);\n  const bottom = useBottomTabOverflow();\n  const headerAnimatedStyle = useAnimatedStyle(() => {\n    return {\n      transform: [\n        {\n          translateY: interpolate(\n            scrollOffset.value,\n            [-HEADER_HEIGHT, 0, HEADER_HEIGHT],\n            [-HEADER_HEIGHT / 2, 0, HEADER_HEIGHT * 0.75]\n          ),\n        },\n        {\n          scale: interpolate(scrollOffset.value, [-HEADER_HEIGHT, 0, HEADER_HEIGHT], [2, 1, 1]),\n        },\n      ],\n    };\n  });\n\n  return (\n    <ThemedView style={styles.container}>\n      <Animated.ScrollView\n        ref={scrollRef}\n        scrollEventThrottle={16}\n        scrollIndicatorInsets={{ bottom }}\n        contentContainerStyle={{ paddingBottom: bottom }}>\n        <Animated.View\n          style={[\n            styles.header,\n            { backgroundColor: headerBackgroundColor[colorScheme] },\n            headerAnimatedStyle,\n          ]}>\n          {headerImage}\n        </Animated.View>\n        <ThemedView style={styles.content}>{children}</ThemedView>\n      </Animated.ScrollView>\n    </ThemedView>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n  },\n  header: {\n    height: HEADER_HEIGHT,\n    overflow: 'hidden',\n  },\n  content: {\n    flex: 1,\n    padding: 32,\n    gap: 16,\n    overflow: 'hidden',\n  },\n});\n","size_bytes":2143},"components/Collapsible.tsx":{"content":"import { PropsWithChildren, useState } from 'react';\nimport { StyleSheet, TouchableOpacity } from 'react-native';\n\nimport { ThemedText } from '@/components/ThemedText';\nimport { ThemedView } from '@/components/ThemedView';\nimport { IconSymbol } from '@/components/ui/IconSymbol';\nimport { Colors } from '@/constants/Colors';\nimport { useColorScheme } from '@/hooks/useColorScheme';\n\nexport function Collapsible({ children, title }: PropsWithChildren & { title: string }) {\n  const [isOpen, setIsOpen] = useState(false);\n  const theme = useColorScheme() ?? 'light';\n\n  return (\n    <ThemedView>\n      <TouchableOpacity\n        style={styles.heading}\n        onPress={() => setIsOpen((value) => !value)}\n        activeOpacity={0.8}>\n        <IconSymbol\n          name=\"chevron.right\"\n          size={18}\n          weight=\"medium\"\n          color={theme === 'light' ? Colors.light.icon : Colors.dark.icon}\n          style={{ transform: [{ rotate: isOpen ? '90deg' : '0deg' }] }}\n        />\n\n        <ThemedText type=\"defaultSemiBold\">{title}</ThemedText>\n      </TouchableOpacity>\n      {isOpen && <ThemedView style={styles.content}>{children}</ThemedView>}\n    </ThemedView>\n  );\n}\n\nconst styles = StyleSheet.create({\n  heading: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: 6,\n  },\n  content: {\n    marginTop: 6,\n    marginLeft: 24,\n  },\n});\n","size_bytes":1358},"scripts/reset-project.js":{"content":"#!/usr/bin/env node\n\n/**\n * This script is used to reset the project to a blank state.\n * It deletes or moves the /app, /components, /hooks, /scripts, and /constants directories to /app-example based on user input and creates a new /app directory with an index.tsx and _layout.tsx file.\n * You can remove the `reset-project` script from package.json and safely delete this file after running it.\n */\n\nconst fs = require(\"fs\");\nconst path = require(\"path\");\nconst readline = require(\"readline\");\n\nconst root = process.cwd();\nconst oldDirs = [\"app\", \"components\", \"hooks\", \"constants\", \"scripts\"];\nconst exampleDir = \"app-example\";\nconst newAppDir = \"app\";\nconst exampleDirPath = path.join(root, exampleDir);\n\nconst indexContent = `import { Text, View } from \"react-native\";\n\nexport default function Index() {\n  return (\n    <View\n      style={{\n        flex: 1,\n        justifyContent: \"center\",\n        alignItems: \"center\",\n      }}\n    >\n      <Text>Edit app/index.tsx to edit this screen.</Text>\n    </View>\n  );\n}\n`;\n\nconst layoutContent = `import { Stack } from \"expo-router\";\n\nexport default function RootLayout() {\n  return <Stack />;\n}\n`;\n\nconst rl = readline.createInterface({\n  input: process.stdin,\n  output: process.stdout,\n});\n\nconst moveDirectories = async (userInput) => {\n  try {\n    if (userInput === \"y\") {\n      // Create the app-example directory\n      await fs.promises.mkdir(exampleDirPath, { recursive: true });\n      console.log(`üìÅ /${exampleDir} directory created.`);\n    }\n\n    // Move old directories to new app-example directory or delete them\n    for (const dir of oldDirs) {\n      const oldDirPath = path.join(root, dir);\n      if (fs.existsSync(oldDirPath)) {\n        if (userInput === \"y\") {\n          const newDirPath = path.join(root, exampleDir, dir);\n          await fs.promises.rename(oldDirPath, newDirPath);\n          console.log(`‚û°Ô∏è /${dir} moved to /${exampleDir}/${dir}.`);\n        } else {\n          await fs.promises.rm(oldDirPath, { recursive: true, force: true });\n          console.log(`‚ùå /${dir} deleted.`);\n        }\n      } else {\n        console.log(`‚û°Ô∏è /${dir} does not exist, skipping.`);\n      }\n    }\n\n    // Create new /app directory\n    const newAppDirPath = path.join(root, newAppDir);\n    await fs.promises.mkdir(newAppDirPath, { recursive: true });\n    console.log(\"\\nüìÅ New /app directory created.\");\n\n    // Create index.tsx\n    const indexPath = path.join(newAppDirPath, \"index.tsx\");\n    await fs.promises.writeFile(indexPath, indexContent);\n    console.log(\"üìÑ app/index.tsx created.\");\n\n    // Create _layout.tsx\n    const layoutPath = path.join(newAppDirPath, \"_layout.tsx\");\n    await fs.promises.writeFile(layoutPath, layoutContent);\n    console.log(\"üìÑ app/_layout.tsx created.\");\n\n    console.log(\"\\n‚úÖ Project reset complete. Next steps:\");\n    console.log(\n      `1. Run \\`npx expo start\\` to start a development server.\\n2. Edit app/index.tsx to edit the main screen.${\n        userInput === \"y\"\n          ? `\\n3. Delete the /${exampleDir} directory when you're done referencing it.`\n          : \"\"\n      }`\n    );\n  } catch (error) {\n    console.error(`‚ùå Error during script execution: ${error.message}`);\n  }\n};\n\nrl.question(\n  \"Do you want to move existing files to /app-example instead of deleting them? (Y/n): \",\n  (answer) => {\n    const userInput = answer.trim().toLowerCase() || \"y\";\n    if (userInput === \"y\" || userInput === \"n\") {\n      moveDirectories(userInput).finally(() => rl.close());\n    } else {\n      console.log(\"‚ùå Invalid input. Please enter 'Y' or 'N'.\");\n      rl.close();\n    }\n  }\n);\n","size_bytes":3608},"app/_layout.tsx":{"content":"import { DarkTheme, DefaultTheme, ThemeProvider } from '@react-navigation/native';\nimport { useFonts } from 'expo-font';\nimport { Stack } from 'expo-router';\nimport { StatusBar } from 'expo-status-bar';\n\nimport { useColorScheme } from '@/hooks/useColorScheme';\n\nexport default function RootLayout() {\n  const colorScheme = useColorScheme();\n  const [loaded] = useFonts({\n    SpaceMono: require('../assets/fonts/SpaceMono-Regular.ttf'),\n  });\n\n  if (!loaded) {\n    return null;\n  }\n\n  return (\n    <ThemeProvider value={colorScheme === 'dark' ? DarkTheme : DefaultTheme}>\n      <Stack>\n        <Stack.Screen name=\"onboarding\" options={{ headerShown: false }} />\n        <Stack.Screen name=\"auth\" options={{ headerShown: false }} />\n        <Stack.Screen name=\"(tabs)\" options={{ headerShown: false }} />\n        <Stack.Screen name=\"+not-found\" />\n      </Stack>\n      <StatusBar style=\"auto\" />\n    </ThemeProvider>\n  );\n}\n","size_bytes":922},"components/HelloWave.tsx":{"content":"import { useEffect } from 'react';\nimport { StyleSheet } from 'react-native';\nimport Animated, {\n  useAnimatedStyle,\n  useSharedValue,\n  withRepeat,\n  withSequence,\n  withTiming,\n} from 'react-native-reanimated';\n\nimport { ThemedText } from '@/components/ThemedText';\n\nexport function HelloWave() {\n  const rotationAnimation = useSharedValue(0);\n\n  useEffect(() => {\n    rotationAnimation.value = withRepeat(\n      withSequence(withTiming(25, { duration: 150 }), withTiming(0, { duration: 150 })),\n      4 // Run the animation 4 times\n    );\n  }, [rotationAnimation]);\n\n  const animatedStyle = useAnimatedStyle(() => ({\n    transform: [{ rotate: `${rotationAnimation.value}deg` }],\n  }));\n\n  return (\n    <Animated.View style={animatedStyle}>\n      <ThemedText style={styles.text}>üëã</ThemedText>\n    </Animated.View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  text: {\n    fontSize: 28,\n    lineHeight: 32,\n    marginTop: -6,\n  },\n});\n","size_bytes":939},"app/(tabs)/_layout.tsx":{"content":"import { Tabs } from \"expo-router\";\nimport React from \"react\";\nimport { Platform, View } from \"react-native\";\n\nimport { HapticTab } from \"@/components/HapticTab\";\nimport { IconSymbol } from \"@/components/ui/IconSymbol\";\nimport TabBarBackground from \"@/components/ui/TabBarBackground\";\nimport { Theme } from \"@/constants/Theme\";\nimport { useColorScheme } from \"@/hooks/useColorScheme\";\n\nexport default function TabLayout() {\n  const colorScheme = useColorScheme();\n  const isDark = colorScheme === \"dark\";\n\n  return (\n    <Tabs\n      screenOptions={{\n        tabBarActiveTintColor: Theme.colors.iosBlue,\n        tabBarInactiveTintColor: isDark\n          ? Theme.colors.gray6\n          : Theme.colors.gray7,\n        headerShown: false,\n        tabBarButton: HapticTab,\n        tabBarBackground: TabBarBackground,\n        tabBarShowLabel: false,\n        tabBarStyle: {\n          backgroundColor: isDark ? Theme.colors.darkCard : Theme.colors.white,\n          borderTopWidth: 0,\n          height: 70,\n          paddingBottom: 10,\n          paddingTop: 10,\n          ...Theme.shadows.sm,\n          position: \"absolute\",\n          bottom: 0,\n          left: 0,\n          right: 0,\n        },\n      }}\n    >\n      <Tabs.Screen\n        name=\"index\"\n        options={{\n          title: \"\",\n          tabBarIcon: ({ color, focused }) => (\n            <View\n              style={{\n                alignItems: \"center\",\n                justifyContent: \"center\",\n                transform: [{ scale: focused ? 1.1 : 1 }],\n              }}\n            >\n              <IconSymbol size={26} name=\"map.fill\" color={color} />\n            </View>\n          ),\n        }}\n      />\n      <Tabs.Screen\n        name=\"dashboard\"\n        options={{\n          title: \"\",\n          tabBarIcon: ({ color, focused }) => (\n            <View\n              style={{\n                alignItems: \"center\",\n                justifyContent: \"center\",\n                transform: [{ scale: focused ? 1.1 : 1 }],\n              }}\n            >\n              <IconSymbol size={26} name=\"anchor.fill\" color={color} />\n            </View>\n          ),\n        }}\n      />\n      <Tabs.Screen\n        name=\"tracker\"\n        options={{\n          title: \"\",\n          tabBarIcon: ({ color, focused }) => (\n            <View\n              style={{\n                width: 56,\n                height: 56,\n                borderRadius: 28,\n                backgroundColor: focused\n                  ? Theme.colors.iosBlue\n                  : Theme.colors.iosBlue,\n                justifyContent: \"center\",\n                alignItems: \"center\",\n                marginBottom: 20,\n                ...Theme.shadows.md,\n              }}\n            >\n              <IconSymbol size={28} name=\"location.fill\" color=\"#FFFFFF\" />\n            </View>\n          ),\n        }}\n      />\n      <Tabs.Screen\n        name=\"notifications\"\n        options={{\n          title: \"\",\n          tabBarIcon: ({ color, focused }) => (\n            <View\n              style={{\n                alignItems: \"center\",\n                justifyContent: \"center\",\n                transform: [{ scale: focused ? 1.1 : 1 }],\n              }}\n            >\n              <IconSymbol size={26} name=\"bell.fill\" color={color} />\n            </View>\n          ),\n        }}\n      />\n      <Tabs.Screen\n        name=\"profile\"\n        options={{\n          title: \"\",\n          tabBarIcon: ({ color, focused }) => (\n            <View\n              style={{\n                alignItems: \"center\",\n                justifyContent: \"center\",\n                transform: [{ scale: focused ? 1.1 : 1 }],\n              }}\n            >\n              <IconSymbol size={26} name=\"person.fill\" color={color} />\n            </View>\n          ),\n        }}\n      />\n      <Tabs.Screen\n        name=\"chat\"\n        options={{\n          tabBarButton: () => null,\n        }}\n      />\n      <Tabs.Screen\n        name=\"map\"\n        options={{\n          tabBarButton: () => null,\n        }}\n      />\n      <Tabs.Screen\n        name=\"weather\"\n        options={{\n          tabBarButton: () => null,\n        }}\n      />\n      <Tabs.Screen\n        name=\"sos\"\n        options={{\n          tabBarButton: () => null,\n        }}\n      />\n      <Tabs.Screen\n        name=\"ports\"\n        options={{\n          tabBarButton: () => null,\n        }}\n      />\n      <Tabs.Screen\n        name=\"map_old\"\n        options={{\n          tabBarButton: () => null,\n        }}\n      />\n      <Tabs.Screen\n        name=\"settings\"\n        options={{\n          tabBarButton: () => null,\n        }}\n      />\n      <Tabs.Screen\n        name=\"index_backup\"\n        options={{\n          tabBarButton: () => null,\n        }}\n      />\n    </Tabs>\n  );\n}\n","size_bytes":4709},"components/ExternalLink.tsx":{"content":"import { Href, Link } from 'expo-router';\nimport { openBrowserAsync } from 'expo-web-browser';\nimport { type ComponentProps } from 'react';\nimport { Platform } from 'react-native';\n\ntype Props = Omit<ComponentProps<typeof Link>, 'href'> & { href: Href & string };\n\nexport function ExternalLink({ href, ...rest }: Props) {\n  return (\n    <Link\n      target=\"_blank\"\n      {...rest}\n      href={href}\n      onPress={async (event) => {\n        if (Platform.OS !== 'web') {\n          // Prevent the default behavior of linking to the default browser on native.\n          event.preventDefault();\n          // Open the link in an in-app browser.\n          await openBrowserAsync(href);\n        }\n      }}\n    />\n  );\n}\n","size_bytes":713},"eslint.config.js":{"content":"// https://docs.expo.dev/guides/using-eslint/\nconst { defineConfig } = require('eslint/config');\nconst expoConfig = require('eslint-config-expo/flat');\n\nmodule.exports = defineConfig([\n  expoConfig,\n  {\n    ignores: ['dist/*'],\n  },\n]);\n","size_bytes":237},"components/ThemedText.tsx":{"content":"import { StyleSheet, Text, type TextProps } from 'react-native';\n\nimport { useThemeColor } from '@/hooks/useThemeColor';\n\nexport type ThemedTextProps = TextProps & {\n  lightColor?: string;\n  darkColor?: string;\n  type?: 'default' | 'title' | 'defaultSemiBold' | 'subtitle' | 'link';\n};\n\nexport function ThemedText({\n  style,\n  lightColor,\n  darkColor,\n  type = 'default',\n  ...rest\n}: ThemedTextProps) {\n  const color = useThemeColor({ light: lightColor, dark: darkColor }, 'text');\n\n  return (\n    <Text\n      style={[\n        { color },\n        type === 'default' ? styles.default : undefined,\n        type === 'title' ? styles.title : undefined,\n        type === 'defaultSemiBold' ? styles.defaultSemiBold : undefined,\n        type === 'subtitle' ? styles.subtitle : undefined,\n        type === 'link' ? styles.link : undefined,\n        style,\n      ]}\n      {...rest}\n    />\n  );\n}\n\nconst styles = StyleSheet.create({\n  default: {\n    fontSize: 16,\n    lineHeight: 24,\n  },\n  defaultSemiBold: {\n    fontSize: 16,\n    lineHeight: 24,\n    fontWeight: '600',\n  },\n  title: {\n    fontSize: 32,\n    fontWeight: 'bold',\n    lineHeight: 32,\n  },\n  subtitle: {\n    fontSize: 20,\n    fontWeight: 'bold',\n  },\n  link: {\n    lineHeight: 30,\n    fontSize: 16,\n    color: '#0a7ea4',\n  },\n});\n","size_bytes":1283},"constants/Colors.ts":{"content":"// iOS-Inspired Color System\nconst tintColorLight = '#007AFF';\nconst tintColorDark = '#0A84FF';\n\nexport const Colors = {\n  light: {\n    text: '#000000',\n    background: '#F2F2F7',\n    tint: tintColorLight,\n    icon: '#8E8E93',\n    tabIconDefault: '#8E8E93',\n    tabIconSelected: tintColorLight,\n    primary: '#007AFF',\n    secondary: '#5AC8FA',\n    accent: '#AF52DE',\n    success: '#34C759',\n    danger: '#FF3B30',\n    warning: '#FF9500',\n    card: '#FFFFFF',\n    cardSecondary: '#F2F2F7',\n    border: '#E5E5EA',\n    separator: '#C7C7CC',\n    secondaryText: '#6C6C70',\n    tertiaryText: '#8E8E93',\n    placeholder: '#AEAEB2',\n  },\n  dark: {\n    text: '#FFFFFF',\n    background: '#000000',\n    tint: tintColorDark,\n    icon: '#8E8E93',\n    tabIconDefault: '#8E8E93',\n    tabIconSelected: tintColorDark,\n    primary: '#0A84FF',\n    secondary: '#64D2FF',\n    accent: '#BF5AF2',\n    success: '#30D158',\n    danger: '#FF453A',\n    warning: '#FF9F0A',\n    card: '#1C1C1E',\n    cardSecondary: '#2C2C2E',\n    border: '#38383A',\n    separator: '#48484A',\n    secondaryText: '#8E8E93',\n    tertiaryText: '#6C6C70',\n    placeholder: '#636366',\n  },\n};","size_bytes":1140},"app/(tabs)/explore.tsx":{"content":"import { Image } from 'expo-image';\nimport { Platform, StyleSheet } from 'react-native';\n\nimport { Collapsible } from '@/components/Collapsible';\nimport { ExternalLink } from '@/components/ExternalLink';\nimport ParallaxScrollView from '@/components/ParallaxScrollView';\nimport { ThemedText } from '@/components/ThemedText';\nimport { ThemedView } from '@/components/ThemedView';\nimport { IconSymbol } from '@/components/ui/IconSymbol';\n\nexport default function TabTwoScreen() {\n  return (\n    <ParallaxScrollView\n      headerBackgroundColor={{ light: '#D0D0D0', dark: '#353636' }}\n      headerImage={\n        <IconSymbol\n          size={310}\n          color=\"#808080\"\n          name=\"chevron.left.forwardslash.chevron.right\"\n          style={styles.headerImage}\n        />\n      }>\n      <ThemedView style={styles.titleContainer}>\n        <ThemedText type=\"title\">Explore</ThemedText>\n      </ThemedView>\n      <ThemedText>This app includes example code to help you get started.</ThemedText>\n      <Collapsible title=\"File-based routing\">\n        <ThemedText>\n          This app has two screens:{' '}\n          <ThemedText type=\"defaultSemiBold\">app/(tabs)/index.tsx</ThemedText> and{' '}\n          <ThemedText type=\"defaultSemiBold\">app/(tabs)/explore.tsx</ThemedText>\n        </ThemedText>\n        <ThemedText>\n          The layout file in <ThemedText type=\"defaultSemiBold\">app/(tabs)/_layout.tsx</ThemedText>{' '}\n          sets up the tab navigator.\n        </ThemedText>\n        <ExternalLink href=\"https://docs.expo.dev/router/introduction\">\n          <ThemedText type=\"link\">Learn more</ThemedText>\n        </ExternalLink>\n      </Collapsible>\n      <Collapsible title=\"Android, iOS, and web support\">\n        <ThemedText>\n          You can open this project on Android, iOS, and the web. To open the web version, press{' '}\n          <ThemedText type=\"defaultSemiBold\">w</ThemedText> in the terminal running this project.\n        </ThemedText>\n      </Collapsible>\n      <Collapsible title=\"Images\">\n        <ThemedText>\n          For static images, you can use the <ThemedText type=\"defaultSemiBold\">@2x</ThemedText> and{' '}\n          <ThemedText type=\"defaultSemiBold\">@3x</ThemedText> suffixes to provide files for\n          different screen densities\n        </ThemedText>\n        <Image source={require('@/assets/images/react-logo.png')} style={{ alignSelf: 'center' }} />\n        <ExternalLink href=\"https://reactnative.dev/docs/images\">\n          <ThemedText type=\"link\">Learn more</ThemedText>\n        </ExternalLink>\n      </Collapsible>\n      <Collapsible title=\"Custom fonts\">\n        <ThemedText>\n          Open <ThemedText type=\"defaultSemiBold\">app/_layout.tsx</ThemedText> to see how to load{' '}\n          <ThemedText style={{ fontFamily: 'SpaceMono' }}>\n            custom fonts such as this one.\n          </ThemedText>\n        </ThemedText>\n        <ExternalLink href=\"https://docs.expo.dev/versions/latest/sdk/font\">\n          <ThemedText type=\"link\">Learn more</ThemedText>\n        </ExternalLink>\n      </Collapsible>\n      <Collapsible title=\"Light and dark mode components\">\n        <ThemedText>\n          This template has light and dark mode support. The{' '}\n          <ThemedText type=\"defaultSemiBold\">useColorScheme()</ThemedText> hook lets you inspect\n          what the user&apos;s current color scheme is, and so you can adjust UI colors accordingly.\n        </ThemedText>\n        <ExternalLink href=\"https://docs.expo.dev/develop/user-interface/color-themes/\">\n          <ThemedText type=\"link\">Learn more</ThemedText>\n        </ExternalLink>\n      </Collapsible>\n      <Collapsible title=\"Animations\">\n        <ThemedText>\n          This template includes an example of an animated component. The{' '}\n          <ThemedText type=\"defaultSemiBold\">components/HelloWave.tsx</ThemedText> component uses\n          the powerful <ThemedText type=\"defaultSemiBold\">react-native-reanimated</ThemedText>{' '}\n          library to create a waving hand animation.\n        </ThemedText>\n        {Platform.select({\n          ios: (\n            <ThemedText>\n              The <ThemedText type=\"defaultSemiBold\">components/ParallaxScrollView.tsx</ThemedText>{' '}\n              component provides a parallax effect for the header image.\n            </ThemedText>\n          ),\n        })}\n      </Collapsible>\n    </ParallaxScrollView>\n  );\n}\n\nconst styles = StyleSheet.create({\n  headerImage: {\n    color: '#808080',\n    bottom: -90,\n    left: -35,\n    position: 'absolute',\n  },\n  titleContainer: {\n    flexDirection: 'row',\n    gap: 8,\n  },\n});\n","size_bytes":4576},"components/ui/IconSymbol.ios.tsx":{"content":"import { SymbolView, SymbolViewProps, SymbolWeight } from 'expo-symbols';\nimport { StyleProp, ViewStyle } from 'react-native';\n\nexport function IconSymbol({\n  name,\n  size = 24,\n  color,\n  style,\n  weight = 'regular',\n}: {\n  name: SymbolViewProps['name'];\n  size?: number;\n  color: string;\n  style?: StyleProp<ViewStyle>;\n  weight?: SymbolWeight;\n}) {\n  return (\n    <SymbolView\n      weight={weight}\n      tintColor={color}\n      resizeMode=\"scaleAspectFit\"\n      name={name}\n      style={[\n        {\n          width: size,\n          height: size,\n        },\n        style,\n      ]}\n    />\n  );\n}\n","size_bytes":598},"components/ThemedView.tsx":{"content":"import { View, type ViewProps } from 'react-native';\n\nimport { useThemeColor } from '@/hooks/useThemeColor';\n\nexport type ThemedViewProps = ViewProps & {\n  lightColor?: string;\n  darkColor?: string;\n};\n\nexport function ThemedView({ style, lightColor, darkColor, ...otherProps }: ThemedViewProps) {\n  const backgroundColor = useThemeColor({ light: lightColor, dark: darkColor }, 'background');\n\n  return <View style={[{ backgroundColor }, style]} {...otherProps} />;\n}\n","size_bytes":468},"components/HapticTab.tsx":{"content":"import { BottomTabBarButtonProps } from '@react-navigation/bottom-tabs';\nimport { PlatformPressable } from '@react-navigation/elements';\nimport * as Haptics from 'expo-haptics';\n\nexport function HapticTab(props: BottomTabBarButtonProps) {\n  return (\n    <PlatformPressable\n      {...props}\n      onPressIn={(ev) => {\n        if (process.env.EXPO_OS === 'ios') {\n          // Add a soft haptic feedback when pressing down on the tabs.\n          Haptics.impactAsync(Haptics.ImpactFeedbackStyle.Light);\n        }\n        props.onPressIn?.(ev);\n      }}\n    />\n  );\n}\n","size_bytes":564},"hooks/useThemeColor.ts":{"content":"/**\n * Learn more about light and dark modes:\n * https://docs.expo.dev/guides/color-schemes/\n */\n\nimport { Colors } from '@/constants/Colors';\nimport { useColorScheme } from '@/hooks/useColorScheme';\n\nexport function useThemeColor(\n  props: { light?: string; dark?: string },\n  colorName: keyof typeof Colors.light & keyof typeof Colors.dark\n) {\n  const theme = useColorScheme() ?? 'light';\n  const colorFromProps = props[theme];\n\n  if (colorFromProps) {\n    return colorFromProps;\n  } else {\n    return Colors[theme][colorName];\n  }\n}\n","size_bytes":536},"app/+not-found.tsx":{"content":"import { Link, Stack } from 'expo-router';\nimport { StyleSheet } from 'react-native';\n\nimport { ThemedText } from '@/components/ThemedText';\nimport { ThemedView } from '@/components/ThemedView';\n\nexport default function NotFoundScreen() {\n  return (\n    <>\n      <Stack.Screen options={{ title: 'Oops!' }} />\n      <ThemedView style={styles.container}>\n        <ThemedText type=\"title\">This screen does not exist.</ThemedText>\n        <Link href=\"/\" style={styles.link}>\n          <ThemedText type=\"link\">Go to home screen!</ThemedText>\n        </Link>\n      </ThemedView>\n    </>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    alignItems: 'center',\n    justifyContent: 'center',\n    padding: 20,\n  },\n  link: {\n    marginTop: 15,\n    paddingVertical: 15,\n  },\n});\n","size_bytes":793},"hooks/useColorScheme.web.ts":{"content":"import { useEffect, useState } from 'react';\nimport { useColorScheme as useRNColorScheme } from 'react-native';\n\n/**\n * To support static rendering, this value needs to be re-calculated on the client side for web\n */\nexport function useColorScheme() {\n  const [hasHydrated, setHasHydrated] = useState(false);\n\n  useEffect(() => {\n    setHasHydrated(true);\n  }, []);\n\n  const colorScheme = useRNColorScheme();\n\n  if (hasHydrated) {\n    return colorScheme;\n  }\n\n  return 'light';\n}\n","size_bytes":480},"components/ui/TabBarBackground.ios.tsx":{"content":"import { useBottomTabBarHeight } from '@react-navigation/bottom-tabs';\nimport { BlurView } from 'expo-blur';\nimport { StyleSheet } from 'react-native';\n\nexport default function BlurTabBarBackground() {\n  return (\n    <BlurView\n      // System chrome material automatically adapts to the system's theme\n      // and matches the native tab bar appearance on iOS.\n      tint=\"systemChromeMaterial\"\n      intensity={100}\n      style={StyleSheet.absoluteFill}\n    />\n  );\n}\n\nexport function useBottomTabOverflow() {\n  return useBottomTabBarHeight();\n}\n","size_bytes":547},"hooks/useColorScheme.ts":{"content":"export { useColorScheme } from 'react-native';\n","size_bytes":47},"README.md":{"content":"# MarineTrack - Marine Safety & Tracking App üö¢\n\nThis is an [Expo](https://expo.dev) project created with [`create-expo-app`](https://www.npmjs.com/package/create-expo-app).\n\n## üõ∞Ô∏è AIS Location Tracking Feature\n\nMarineTrack now includes a powerful AIS (Automatic Identification System) tracker that turns your phone into a marine beacon:\n\n### Features:\n- **Real-time GPS Tracking**: Broadcasts your vessel's position every 5 seconds\n- **AIS Beacon**: Your phone acts as an AIS transmitter for nearby vessels\n- **Vessel Information**: Store complete vessel details (Name, ID, Type, MMSI, IMO)\n- **Backend Integration**: All tracking data is sent to backend for storage and retrieval\n- **Nearby Vessels**: See other MarineTrack users within 10km radius\n- **Status Updates**: Set your vessel status (Active, Idle, Anchored)\n\n### How to Use:\n1. Go to the **Tracker** tab\n2. Fill in your vessel information (Name and ID are required)\n3. Enable the tracking switch\n4. Your location will be broadcast to nearby vessels\n5. View other tracked vessels in the dashboard\n\n### Backend Integration:\nThe app uses `utils/trackingService.ts` which stores data locally. To connect to your backend:\n\n1. Replace the mock API call in `sendTrackingData()` with your actual endpoint:\n```typescript\nconst response = await fetch('https://your-backend-api.com/api/tracking', {\n  method: 'POST',\n  headers: { 'Content-Type': 'application/json' },\n  body: JSON.stringify(data)\n});\n```\n\n2. Update `getNearbyTrackedVessels()` to fetch from your backend API\n\n## Get started\n\n1. Install dependencies\n\n   ```bash\n   npm install\n   ```\n\n2. Start the app\n\n   ```bash\n   npx expo start\n   ```\n\nIn the output, you'll find options to open the app in a\n\n- [development build](https://docs.expo.dev/develop/development-builds/introduction/)\n- [Android emulator](https://docs.expo.dev/workflow/android-studio-emulator/)\n- [iOS simulator](https://docs.expo.dev/workflow/ios-simulator/)\n- [Expo Go](https://expo.dev/go), a limited sandbox for trying out app development with Expo\n\nYou can start developing by editing the files inside the **app** directory. This project uses [file-based routing](https://docs.expo.dev/router/introduction).\n\n## Get a fresh project\n\nWhen you're ready, run:\n\n```bash\nnpm run reset-project\n```\n\nThis command will move the starter code to the **app-example** directory and create a blank **app** directory where you can start developing.\n\n## Learn more\n\nTo learn more about developing your project with Expo, look at the following resources:\n\n- [Expo documentation](https://docs.expo.dev/): Learn fundamentals, or go into advanced topics with our [guides](https://docs.expo.dev/guides).\n- [Learn Expo tutorial](https://docs.expo.dev/tutorial/introduction/): Follow a step-by-step tutorial where you'll create a project that runs on Android, iOS, and the web.\n\n## Join the community\n\nJoin our community of developers creating universal apps.\n\n- [Expo on GitHub](https://github.com/expo/expo): View our open source platform and contribute.\n- [Discord community](https://chat.expo.dev): Chat with Expo users and ask questions.\n","size_bytes":3117},"app/(tabs)/settings.tsx":{"content":"\nimport React, { useEffect, useState } from 'react';\nimport { View, Text, StyleSheet, ScrollView, TouchableOpacity, Switch, Alert } from 'react-native';\nimport { useColorScheme } from '@/hooks/useColorScheme';\nimport { Colors } from '@/constants/Colors';\nimport { Theme } from '@/constants/Theme';\nimport { getCurrentUser, signOut } from '@/utils/auth';\nimport { getUserFromDatabase } from '@/utils/database';\nimport { useRouter } from 'expo-router';\n\nexport default function SettingsScreen() {\n  const colorScheme = useColorScheme();\n  const colors = Colors[colorScheme ?? 'light'];\n  const router = useRouter();\n  const [notificationsEnabled, setNotificationsEnabled] = useState(true);\n  const [locationEnabled, setLocationEnabled] = useState(true);\n  const [userData, setUserData] = useState<any>(null);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    loadUserData();\n  }, []);\n\n  const loadUserData = async () => {\n    try {\n      const currentUser = await getCurrentUser();\n      if (currentUser) {\n        const dbUser = await getUserFromDatabase(currentUser.id);\n        setUserData(dbUser);\n      }\n      setLoading(false);\n    } catch (error) {\n      console.error('Error loading user data:', error);\n      setLoading(false);\n    }\n  };\n\n  const handleLogout = async () => {\n    Alert.alert(\n      'Logout',\n      'Are you sure you want to logout?',\n      [\n        { text: 'Cancel', style: 'cancel' },\n        {\n          text: 'Logout',\n          style: 'destructive',\n          onPress: async () => {\n            await signOut();\n            router.replace('/auth/login');\n          },\n        },\n      ]\n    );\n  };\n\n  if (loading) {\n    return (\n      <View style={[styles.container, { backgroundColor: colors.background }]}>\n        <Text style={[styles.loadingText, { color: colors.text }]}>Loading...</Text>\n      </View>\n    );\n  }\n\n  const vesselInfo = userData?.vesselInfo;\n  const contactInfo = userData?.contactInfo;\n\n  return (\n    <ScrollView style={[styles.container, { backgroundColor: colors.background }]}>\n      <View style={[styles.header, { backgroundColor: colors.primary }]}>\n        <Text style={styles.headerTitle}>Settings & Profile</Text>\n        <Text style={styles.headerSubtitle}>Manage your account</Text>\n      </View>\n\n      <View style={[styles.profileSection, { backgroundColor: colors.card }]}>\n        <View style={styles.profileAvatar}>\n          <Text style={styles.avatarIcon}>üë§</Text>\n        </View>\n        <Text style={[styles.profileName, { color: colors.text }]}>\n          {userData?.name || 'User'}\n        </Text>\n        <Text style={[styles.profileEmail, { color: colors.icon }]}>\n          {userData?.email || 'No email provided'}\n        </Text>\n        {vesselInfo && (\n          <Text style={[styles.vesselInfo, { color: colors.icon }]}>\n            üö¢ {vesselInfo.vesselName} ‚Ä¢ {vesselInfo.registrationNumber || 'No ID'}\n          </Text>\n        )}\n      </View>\n\n      {vesselInfo && (\n        <View style={styles.section}>\n          <Text style={[styles.sectionTitle, { color: colors.text }]}>Vessel Information</Text>\n          <View\n            style={[styles.settingItem, { backgroundColor: colors.card, borderColor: colors.border }]}\n          >\n            <Text style={[styles.settingLabel, { color: colors.text }]}>Vessel Name</Text>\n            <Text style={[styles.settingValue, { color: colors.icon }]}>\n              {vesselInfo.vesselName}\n            </Text>\n          </View>\n\n          <View\n            style={[styles.settingItem, { backgroundColor: colors.card, borderColor: colors.border }]}\n          >\n            <Text style={[styles.settingLabel, { color: colors.text }]}>Registration Number</Text>\n            <Text style={[styles.settingValue, { color: colors.icon }]}>\n              {vesselInfo.registrationNumber || 'N/A'}\n            </Text>\n          </View>\n\n          <View\n            style={[styles.settingItem, { backgroundColor: colors.card, borderColor: colors.border }]}\n          >\n            <Text style={[styles.settingLabel, { color: colors.text }]}>Vessel Type</Text>\n            <Text style={[styles.settingValue, { color: colors.icon }]}>\n              {vesselInfo.vesselType}\n            </Text>\n          </View>\n\n          {vesselInfo.imoNumber && (\n            <View\n              style={[styles.settingItem, { backgroundColor: colors.card, borderColor: colors.border }]}\n            >\n              <Text style={[styles.settingLabel, { color: colors.text }]}>IMO Number</Text>\n              <Text style={[styles.settingValue, { color: colors.icon }]}>\n                {vesselInfo.imoNumber}\n              </Text>\n            </View>\n          )}\n\n          <View\n            style={[styles.settingItem, { backgroundColor: colors.card, borderColor: colors.border }]}\n          >\n            <Text style={[styles.settingLabel, { color: colors.text }]}>Call Sign</Text>\n            <Text style={[styles.settingValue, { color: colors.icon }]}>\n              {vesselInfo.callSign}\n            </Text>\n          </View>\n\n          <View\n            style={[styles.settingItem, { backgroundColor: colors.card, borderColor: colors.border }]}\n          >\n            <Text style={[styles.settingLabel, { color: colors.text }]}>Home Port</Text>\n            <Text style={[styles.settingValue, { color: colors.icon }]}>\n              {vesselInfo.homePort}\n            </Text>\n          </View>\n\n          <View\n            style={[styles.settingItem, { backgroundColor: colors.card, borderColor: colors.border }]}\n          >\n            <Text style={[styles.settingLabel, { color: colors.text }]}>Dimensions</Text>\n            <Text style={[styles.settingValue, { color: colors.icon }]}>\n              L: {vesselInfo.vesselLength}m √ó B: {vesselInfo.vesselBeam}m\n            </Text>\n          </View>\n\n          <View\n            style={[styles.settingItem, { backgroundColor: colors.card, borderColor: colors.border }]}\n          >\n            <Text style={[styles.settingLabel, { color: colors.text }]}>Gross Tonnage</Text>\n            <Text style={[styles.settingValue, { color: colors.icon }]}>\n              {vesselInfo.grossTonnage} GT\n            </Text>\n          </View>\n        </View>\n      )}\n\n      {contactInfo && (\n        <View style={styles.section}>\n          <Text style={[styles.sectionTitle, { color: colors.text }]}>Contact Information</Text>\n          <View\n            style={[styles.settingItem, { backgroundColor: colors.card, borderColor: colors.border }]}\n          >\n            <Text style={[styles.settingLabel, { color: colors.text }]}>Phone Number</Text>\n            <Text style={[styles.settingValue, { color: colors.icon }]}>\n              {contactInfo.phone}\n            </Text>\n          </View>\n\n          {contactInfo.email && (\n            <View\n              style={[styles.settingItem, { backgroundColor: colors.card, borderColor: colors.border }]}\n            >\n              <Text style={[styles.settingLabel, { color: colors.text }]}>Email</Text>\n              <Text style={[styles.settingValue, { color: colors.icon }]}>\n                {contactInfo.email}\n              </Text>\n            </View>\n          )}\n\n          <View\n            style={[styles.settingItem, { backgroundColor: colors.card, borderColor: colors.border }]}\n          >\n            <Text style={[styles.settingLabel, { color: colors.text }]}>Emergency Contact</Text>\n            <Text style={[styles.settingValue, { color: colors.icon }]}>\n              {contactInfo.emergencyContact}\n            </Text>\n          </View>\n\n          <View\n            style={[styles.settingItem, { backgroundColor: colors.card, borderColor: colors.border }]}\n          >\n            <Text style={[styles.settingLabel, { color: colors.text }]}>Emergency Phone</Text>\n            <Text style={[styles.settingValue, { color: colors.icon }]}>\n              {contactInfo.emergencyPhone}\n            </Text>\n          </View>\n        </View>\n      )}\n\n      <View style={styles.section}>\n        <Text style={[styles.sectionTitle, { color: colors.text }]}>Preferences</Text>\n        <View\n          style={[styles.settingItem, { backgroundColor: colors.card, borderColor: colors.border }]}\n        >\n          <Text style={[styles.settingLabel, { color: colors.text }]}>\n            Push Notifications\n          </Text>\n          <Switch\n            value={notificationsEnabled}\n            onValueChange={setNotificationsEnabled}\n            trackColor={{ false: colors.border, true: colors.primary }}\n          />\n        </View>\n\n        <View\n          style={[styles.settingItem, { backgroundColor: colors.card, borderColor: colors.border }]}\n        >\n          <Text style={[styles.settingLabel, { color: colors.text }]}>\n            Location Services\n          </Text>\n          <Switch\n            value={locationEnabled}\n            onValueChange={setLocationEnabled}\n            trackColor={{ false: colors.border, true: colors.primary }}\n          />\n        </View>\n      </View>\n\n      <View style={styles.section}>\n        <Text style={[styles.sectionTitle, { color: colors.text }]}>\n          Sustainable Fishing Tips\n        </Text>\n        <View style={[styles.tipsCard, { backgroundColor: colors.card, borderColor: colors.border }]}>\n          <Text style={[styles.tipsTitle, { color: colors.primary }]}>\n            üåä Protect Our Oceans\n          </Text>\n          <Text style={[styles.tipsText, { color: colors.text }]}>\n            ‚Ä¢ Respect minimum size limits for fish{'\\n'}\n            ‚Ä¢ Avoid overfishing in breeding seasons{'\\n'}\n            ‚Ä¢ Use eco-friendly fishing gear{'\\n'}\n            ‚Ä¢ Report illegal fishing activities{'\\n'}\n            ‚Ä¢ Reduce plastic waste at sea\n          </Text>\n        </View>\n      </View>\n\n      <TouchableOpacity\n        style={[styles.logoutButton, { backgroundColor: colors.danger }]}\n        onPress={handleLogout}\n      >\n        <Text style={styles.logoutText}>Logout</Text>\n      </TouchableOpacity>\n    </ScrollView>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n  },\n  loadingText: {\n    textAlign: 'center',\n    marginTop: 100,\n    fontSize: Theme.fonts.sizes.lg,\n  },\n  header: {\n    paddingTop: 60,\n    paddingBottom: 24,\n    paddingHorizontal: Theme.spacing.lg,\n  },\n  headerTitle: {\n    fontSize: Theme.fonts.sizes.xxxl,\n    fontWeight: Theme.fonts.weights.bold,\n    color: '#fff',\n    letterSpacing: -0.5,\n  },\n  headerSubtitle: {\n    fontSize: Theme.fonts.sizes.base,\n    color: '#fff',\n    opacity: 0.95,\n    marginTop: Theme.spacing.xs,\n    fontWeight: Theme.fonts.weights.medium,\n  },\n  profileSection: {\n    padding: Theme.spacing.xxl,\n    alignItems: 'center',\n    marginBottom: Theme.spacing.lg,\n  },\n  profileAvatar: {\n    width: 100,\n    height: 100,\n    borderRadius: 50,\n    backgroundColor: '#007AFF',\n    justifyContent: 'center',\n    alignItems: 'center',\n    marginBottom: Theme.spacing.base,\n    ...Theme.shadows.md,\n  },\n  avatarIcon: {\n    fontSize: 48,\n  },\n  profileName: {\n    fontSize: 22,\n    fontWeight: 'bold',\n    marginBottom: 4,\n  },\n  profileEmail: {\n    fontSize: 14,\n    marginBottom: 8,\n  },\n  vesselInfo: {\n    fontSize: 14,\n  },\n  section: {\n    paddingHorizontal: Theme.spacing.lg,\n    marginBottom: Theme.spacing.xl,\n  },\n  sectionTitle: {\n    fontSize: Theme.fonts.sizes.xl,\n    fontWeight: Theme.fonts.weights.bold,\n    marginBottom: Theme.spacing.base,\n    letterSpacing: -0.3,\n  },\n  settingItem: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    padding: Theme.spacing.lg,\n    borderRadius: Theme.radius.md,\n    borderWidth: 0,\n    marginBottom: Theme.spacing.sm,\n    ...Theme.shadows.sm,\n  },\n  settingLabel: {\n    fontSize: Theme.fonts.sizes.base,\n    flex: 1,\n    fontWeight: Theme.fonts.weights.medium,\n  },\n  settingValue: {\n    fontSize: Theme.fonts.sizes.base,\n    flex: 1,\n    textAlign: 'right',\n  },\n  tipsCard: {\n    padding: Theme.spacing.xl,\n    borderRadius: Theme.radius.lg,\n    borderWidth: 0,\n    ...Theme.shadows.sm,\n  },\n  tipsTitle: {\n    fontSize: Theme.fonts.sizes.xl,\n    fontWeight: Theme.fonts.weights.bold,\n    marginBottom: Theme.spacing.base,\n  },\n  tipsText: {\n    fontSize: Theme.fonts.sizes.base,\n    lineHeight: Theme.fonts.lineHeights.relaxed * Theme.fonts.sizes.base,\n  },\n  logoutButton: {\n    marginHorizontal: Theme.spacing.lg,\n    marginBottom: Theme.spacing.xxxl,\n    padding: Theme.spacing.lg,\n    borderRadius: Theme.radius.md,\n    alignItems: 'center',\n    ...Theme.shadows.md,\n  },\n  logoutText: {\n    color: '#fff',\n    fontSize: Theme.fonts.sizes.lg,\n    fontWeight: Theme.fonts.weights.bold,\n  },\n});\n","size_bytes":12685},"components/PortMap.tsx":{"content":"\nimport React, { useState, useEffect } from 'react';\nimport { View, Text, StyleSheet, ScrollView, TouchableOpacity } from 'react-native';\nimport { useColorScheme } from '@/hooks/useColorScheme';\nimport { Colors } from '@/constants/Colors';\nimport { MAJOR_PORTS } from '@/utils/marineData';\nimport { fetchPortVesselData, getTotalVesselsCount, PortVesselData } from '@/utils/vesselScraper';\n\nexport default function PortMap() {\n  const colorScheme = useColorScheme();\n  const colors = Colors[colorScheme ?? 'light'];\n  const [selectedPort, setSelectedPort] = useState<string | null>(null);\n  const [portData, setPortData] = useState<PortVesselData | null>(null);\n  const [loading, setLoading] = useState(false);\n\n  const loadPortData = async (portCode: string) => {\n    setLoading(true);\n    const data = await fetchPortVesselData(portCode);\n    setPortData(data);\n    setLoading(false);\n  };\n\n  const handlePortPress = (portId: string) => {\n    if (selectedPort === portId) {\n      setSelectedPort(null);\n      setPortData(null);\n    } else {\n      setSelectedPort(portId);\n      loadPortData(portId);\n    }\n  };\n\n  return (\n    <View style={styles.container}>\n      <Text style={[styles.title, { color: colors.text }]}>Malaysian Ports</Text>\n      <Text style={[styles.subtitle, { color: colors.icon }]}>Real-time vessel tracking from VesselFinder</Text>\n      \n      <ScrollView style={styles.portsList}>\n        {MAJOR_PORTS.map((port) => (\n          <View key={port.id}>\n            <TouchableOpacity\n              style={[\n                styles.portItem, \n                { \n                  backgroundColor: colors.card, \n                  borderColor: selectedPort === port.id ? colors.primary : colors.border,\n                  borderWidth: selectedPort === port.id ? 2 : 1\n                }\n              ]}\n              onPress={() => handlePortPress(port.id)}\n            >\n              <View style={styles.portHeader}>\n                <Text style={[styles.portName, { color: colors.text }]}>‚öì {port.name}</Text>\n                <View style={[styles.vesselCount, { backgroundColor: colors.primary }]}>\n                  <Text style={styles.vesselCountText}>{port.vessels}</Text>\n                </View>\n              </View>\n              \n              <View style={styles.portInfo}>\n                <Text style={[styles.portDetail, { color: colors.icon }]}>\n                  üìç {port.lat.toFixed(4)}¬∞N, {port.lng.toFixed(4)}¬∞E\n                </Text>\n                <Text style={[styles.portDetail, { color: colors.icon }]}>\n                  üè¢ {port.type}\n                </Text>\n                <Text style={[styles.portDetail, { color: colors.icon }]}>\n                  üåç {port.country}\n                </Text>\n              </View>\n              \n              <View style={styles.portFooter}>\n                <Text style={[styles.footerText, { color: colors.accent }]}>\n                  {selectedPort === port.id ? 'Hide Details ‚ñ≤' : 'View Details ‚Üí'}\n                </Text>\n              </View>\n            </TouchableOpacity>\n\n            {selectedPort === port.id && portData && (\n              <View style={[styles.vesselDetails, { backgroundColor: colors.background }]}>\n                <View style={styles.vesselSection}>\n                  <Text style={[styles.vesselSectionTitle, { color: colors.primary }]}>\n                    üü¢ In Port ({portData.inPort.length})\n                  </Text>\n                  {portData.inPort.map((vessel, idx) => (\n                    <View key={idx} style={[styles.vesselItem, { backgroundColor: colors.card }]}>\n                      <Text style={[styles.vesselName, { color: colors.text }]}>{vessel.name}</Text>\n                      <Text style={[styles.vesselInfo, { color: colors.icon }]}>\n                        {vessel.type} ‚Ä¢ {vessel.flag} ‚Ä¢ IMO: {vessel.imo}\n                      </Text>\n                    </View>\n                  ))}\n                </View>\n\n                <View style={styles.vesselSection}>\n                  <Text style={[styles.vesselSectionTitle, { color: colors.accent }]}>\n                    üì• Expected ({portData.expected.length})\n                  </Text>\n                  {portData.expected.map((vessel, idx) => (\n                    <View key={idx} style={[styles.vesselItem, { backgroundColor: colors.card }]}>\n                      <Text style={[styles.vesselName, { color: colors.text }]}>{vessel.name}</Text>\n                      <Text style={[styles.vesselInfo, { color: colors.icon }]}>\n                        ETA: {new Date(vessel.eta).toLocaleDateString('en-MY')}\n                      </Text>\n                    </View>\n                  ))}\n                </View>\n\n                <View style={styles.vesselSection}>\n                  <Text style={[styles.vesselSectionTitle, { color: colors.secondary }]}>\n                    üö¢ Arrivals ({portData.arrivals.length}) ‚Ä¢ Departures ({portData.departures.length})\n                  </Text>\n                </View>\n              </View>\n            )}\n          </View>\n        ))}\n      </ScrollView>\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    padding: 16,\n  },\n  title: {\n    fontSize: 22,\n    fontWeight: 'bold',\n    marginBottom: 4,\n  },\n  subtitle: {\n    fontSize: 14,\n    marginBottom: 16,\n  },\n  portsList: {\n    flex: 1,\n  },\n  portItem: {\n    padding: 16,\n    borderRadius: 12,\n    borderWidth: 1,\n    marginBottom: 12,\n  },\n  portHeader: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    marginBottom: 12,\n  },\n  portName: {\n    fontSize: 18,\n    fontWeight: '600',\n    flex: 1,\n  },\n  vesselCount: {\n    paddingHorizontal: 12,\n    paddingVertical: 6,\n    borderRadius: 20,\n  },\n  vesselCountText: {\n    color: '#fff',\n    fontSize: 14,\n    fontWeight: 'bold',\n  },\n  portInfo: {\n    gap: 6,\n    marginBottom: 12,\n  },\n  portDetail: {\n    fontSize: 13,\n    lineHeight: 20,\n  },\n  portFooter: {\n    borderTopWidth: 1,\n    borderTopColor: '#E0E0E0',\n    paddingTop: 12,\n    marginTop: 4,\n  },\n  footerText: {\n    fontSize: 13,\n    fontWeight: '600',\n  },\n  vesselDetails: {\n    padding: 12,\n    marginHorizontal: 16,\n    marginBottom: 12,\n    borderRadius: 8,\n  },\n  vesselSection: {\n    marginBottom: 16,\n  },\n  vesselSectionTitle: {\n    fontSize: 15,\n    fontWeight: 'bold',\n    marginBottom: 8,\n  },\n  vesselItem: {\n    padding: 10,\n    borderRadius: 8,\n    marginBottom: 6,\n  },\n  vesselName: {\n    fontSize: 14,\n    fontWeight: '600',\n    marginBottom: 2,\n  },\n  vesselInfo: {\n    fontSize: 12,\n  },\n});\n","size_bytes":6613},"app/auth/vessel-registration.tsx":{"content":"import React, { useState } from 'react';\nimport {\n  View,\n  Text,\n  TextInput,\n  TouchableOpacity,\n  StyleSheet,\n  ScrollView,\n  KeyboardAvoidingView,\n  Platform,\n  Alert,\n} from 'react-native';\nimport { useRouter } from 'expo-router';\nimport { useColorScheme } from '@/hooks/useColorScheme';\nimport { Colors } from '@/constants/Colors';\nimport { storeUser } from '@/utils/auth';\nimport { saveUserToDatabase } from '@/utils/database';\n\nexport default function VesselRegistrationScreen() {\n  const colorScheme = useColorScheme();\n  const colors = Colors[colorScheme ?? 'light'];\n  const router = useRouter();\n  const [loading, setLoading] = useState(false);\n\n  const [formData, setFormData] = useState({\n    vesselName: '',\n    vesselType: '',\n    registrationNumber: '',\n    imoNumber: '',\n    callSign: '',\n    captainName: '',\n    phoneNumber: '',\n    email: '',\n    homePort: '',\n    vesselLength: '',\n    vesselBeam: '',\n    grossTonnage: '',\n    emergencyContact: '',\n    emergencyPhone: '',\n  });\n\n  const vesselTypes = [\n    'Fishing Vessel',\n    'Cargo Ship',\n    'Tanker',\n    'Passenger Ship',\n    'Tug Boat',\n    'Yacht',\n    'Ferry',\n    'Other',\n  ];\n\n  const updateField = (field: string, value: string) => {\n    setFormData(prev => ({ ...prev, [field]: value }));\n  };\n\n  const validateForm = () => {\n    if (!formData.vesselName.trim()) {\n      Alert.alert('Required Field', 'Please enter vessel name');\n      return false;\n    }\n    if (!formData.vesselType) {\n      Alert.alert('Required Field', 'Please select vessel type');\n      return false;\n    }\n    if (!formData.registrationNumber.trim()) {\n      Alert.alert('Required Field', 'Please enter vessel registration number');\n      return false;\n    }\n    if (!formData.callSign.trim()) {\n      Alert.alert('Required Field', 'Please enter radio call sign');\n      return false;\n    }\n    if (!formData.captainName.trim()) {\n      Alert.alert('Required Field', 'Please enter captain/operator name');\n      return false;\n    }\n    if (!formData.phoneNumber.trim()) {\n      Alert.alert('Required Field', 'Please enter contact phone number');\n      return false;\n    }\n    if (!formData.homePort.trim()) {\n      Alert.alert('Required Field', 'Please enter home port');\n      return false;\n    }\n    if (!formData.vesselLength.trim()) {\n      Alert.alert('Required Field', 'Please enter vessel length');\n      return false;\n    }\n    if (!formData.vesselBeam.trim()) {\n      Alert.alert('Required Field', 'Please enter vessel beam (width)');\n      return false;\n    }\n    if (!formData.grossTonnage.trim()) {\n      Alert.alert('Required Field', 'Please enter gross tonnage');\n      return false;\n    }\n    if (!formData.emergencyContact.trim()) {\n      Alert.alert('Required Field', 'Please enter emergency contact name');\n      return false;\n    }\n    if (!formData.emergencyPhone.trim()) {\n      Alert.alert('Required Field', 'Please enter emergency contact phone');\n      return false;\n    }\n    return true;\n  };\n\n  const handleSubmit = async () => {\n    if (!validateForm()) return;\n\n    setLoading(true);\n    try {\n      const userId = `vessel_${Date.now()}`;\n      \n      const user = {\n        id: userId,\n        name: formData.captainName,\n        email: formData.email || `${userId}@guest.marine`,\n        isGuest: true,\n        createdAt: new Date().toISOString(),\n      };\n\n      await storeUser(user);\n\n      await saveUserToDatabase({\n        id: userId,\n        email: user.email,\n        name: formData.captainName,\n        isGuest: true,\n        createdAt: user.createdAt,\n        lastLogin: new Date().toISOString(),\n        vesselInfo: {\n          vesselName: formData.vesselName,\n          vesselType: formData.vesselType,\n          registrationNumber: formData.registrationNumber,\n          imoNumber: formData.imoNumber,\n          callSign: formData.callSign,\n          homePort: formData.homePort,\n          vesselLength: formData.vesselLength,\n          vesselBeam: formData.vesselBeam,\n          grossTonnage: formData.grossTonnage,\n        },\n        contactInfo: {\n          phone: formData.phoneNumber,\n          email: formData.email,\n          emergencyContact: formData.emergencyContact,\n          emergencyPhone: formData.emergencyPhone,\n        },\n      });\n\n      setLoading(false);\n      router.replace('/(tabs)');\n    } catch (error) {\n      setLoading(false);\n      Alert.alert('Error', 'Failed to register vessel. Please try again.');\n      console.error('Registration error:', error);\n    }\n  };\n\n  return (\n    <KeyboardAvoidingView\n      behavior={Platform.OS === 'ios' ? 'padding' : 'height'}\n      style={[styles.container, { backgroundColor: colors.background }]}\n    >\n      <ScrollView style={styles.scrollView} showsVerticalScrollIndicator={false}>\n        <View style={styles.header}>\n          <Text style={styles.headerIcon}>‚öì</Text>\n          <Text style={[styles.title, { color: colors.primary }]}>Vessel Registration</Text>\n          <Text style={[styles.subtitle, { color: colors.text }]}>\n            Register your vessel to access MarineTrack services\n          </Text>\n        </View>\n\n        <View style={styles.section}>\n          <Text style={[styles.sectionTitle, { color: colors.text }]}>Vessel Information</Text>\n          \n          <Text style={[styles.label, { color: colors.text }]}>Vessel Name *</Text>\n          <TextInput\n            style={[styles.input, { backgroundColor: colors.card, color: colors.text, borderColor: colors.border }]}\n            placeholder=\"Enter vessel name\"\n            placeholderTextColor={colors.icon}\n            value={formData.vesselName}\n            onChangeText={(text) => updateField('vesselName', text)}\n          />\n\n          <Text style={[styles.label, { color: colors.text }]}>Vessel Type *</Text>\n          <View style={styles.typeGrid}>\n            {vesselTypes.map((type) => (\n              <TouchableOpacity\n                key={type}\n                style={[\n                  styles.typeButton,\n                  { borderColor: colors.border },\n                  formData.vesselType === type && { backgroundColor: colors.primary, borderColor: colors.primary }\n                ]}\n                onPress={() => updateField('vesselType', type)}\n              >\n                <Text style={[\n                  styles.typeButtonText,\n                  { color: formData.vesselType === type ? '#fff' : colors.text }\n                ]}>\n                  {type}\n                </Text>\n              </TouchableOpacity>\n            ))}\n          </View>\n\n          <Text style={[styles.label, { color: colors.text }]}>Registration Number</Text>\n          <TextInput\n            style={[styles.input, { backgroundColor: colors.card, color: colors.text, borderColor: colors.border }]}\n            placeholder=\"e.g., MY-12345\"\n            placeholderTextColor={colors.icon}\n            value={formData.registrationNumber}\n            onChangeText={(text) => updateField('registrationNumber', text)}\n          />\n\n          <Text style={[styles.label, { color: colors.text }]}>IMO Number (if applicable)</Text>\n          <TextInput\n            style={[styles.input, { backgroundColor: colors.card, color: colors.text, borderColor: colors.border }]}\n            placeholder=\"International Maritime Organization number\"\n            placeholderTextColor={colors.icon}\n            value={formData.imoNumber}\n            onChangeText={(text) => updateField('imoNumber', text)}\n            keyboardType=\"numeric\"\n          />\n\n          <Text style={[styles.label, { color: colors.text }]}>Call Sign</Text>\n          <TextInput\n            style={[styles.input, { backgroundColor: colors.card, color: colors.text, borderColor: colors.border }]}\n            placeholder=\"Radio call sign\"\n            placeholderTextColor={colors.icon}\n            value={formData.callSign}\n            onChangeText={(text) => updateField('callSign', text.toUpperCase())}\n            autoCapitalize=\"characters\"\n          />\n\n          <Text style={[styles.label, { color: colors.text }]}>Home Port *</Text>\n          <TextInput\n            style={[styles.input, { backgroundColor: colors.card, color: colors.text, borderColor: colors.border }]}\n            placeholder=\"e.g., Port Klang, Malaysia\"\n            placeholderTextColor={colors.icon}\n            value={formData.homePort}\n            onChangeText={(text) => updateField('homePort', text)}\n          />\n\n          <View style={styles.row}>\n            <View style={styles.halfWidth}>\n              <Text style={[styles.label, { color: colors.text }]}>Length (m)</Text>\n              <TextInput\n                style={[styles.input, { backgroundColor: colors.card, color: colors.text, borderColor: colors.border }]}\n                placeholder=\"0.0\"\n                placeholderTextColor={colors.icon}\n                value={formData.vesselLength}\n                onChangeText={(text) => updateField('vesselLength', text)}\n                keyboardType=\"decimal-pad\"\n              />\n            </View>\n            <View style={styles.halfWidth}>\n              <Text style={[styles.label, { color: colors.text }]}>Beam (m)</Text>\n              <TextInput\n                style={[styles.input, { backgroundColor: colors.card, color: colors.text, borderColor: colors.border }]}\n                placeholder=\"0.0\"\n                placeholderTextColor={colors.icon}\n                value={formData.vesselBeam}\n                onChangeText={(text) => updateField('vesselBeam', text)}\n                keyboardType=\"decimal-pad\"\n              />\n            </View>\n          </View>\n\n          <Text style={[styles.label, { color: colors.text }]}>Gross Tonnage (GT)</Text>\n          <TextInput\n            style={[styles.input, { backgroundColor: colors.card, color: colors.text, borderColor: colors.border }]}\n            placeholder=\"Tonnage\"\n            placeholderTextColor={colors.icon}\n            value={formData.grossTonnage}\n            onChangeText={(text) => updateField('grossTonnage', text)}\n            keyboardType=\"numeric\"\n          />\n        </View>\n\n        <View style={styles.section}>\n          <Text style={[styles.sectionTitle, { color: colors.text }]}>Captain/Operator Information</Text>\n          \n          <Text style={[styles.label, { color: colors.text }]}>Full Name *</Text>\n          <TextInput\n            style={[styles.input, { backgroundColor: colors.card, color: colors.text, borderColor: colors.border }]}\n            placeholder=\"Captain or operator name\"\n            placeholderTextColor={colors.icon}\n            value={formData.captainName}\n            onChangeText={(text) => updateField('captainName', text)}\n          />\n\n          <Text style={[styles.label, { color: colors.text }]}>Phone Number *</Text>\n          <TextInput\n            style={[styles.input, { backgroundColor: colors.card, color: colors.text, borderColor: colors.border }]}\n            placeholder=\"+60 12-345 6789\"\n            placeholderTextColor={colors.icon}\n            value={formData.phoneNumber}\n            onChangeText={(text) => updateField('phoneNumber', text)}\n            keyboardType=\"phone-pad\"\n          />\n\n          <Text style={[styles.label, { color: colors.text }]}>Email (optional)</Text>\n          <TextInput\n            style={[styles.input, { backgroundColor: colors.card, color: colors.text, borderColor: colors.border }]}\n            placeholder=\"your.email@example.com\"\n            placeholderTextColor={colors.icon}\n            value={formData.email}\n            onChangeText={(text) => updateField('email', text)}\n            keyboardType=\"email-address\"\n            autoCapitalize=\"none\"\n          />\n        </View>\n\n        <View style={styles.section}>\n          <Text style={[styles.sectionTitle, { color: colors.text }]}>Emergency Contact</Text>\n          \n          <Text style={[styles.label, { color: colors.text }]}>Emergency Contact Name</Text>\n          <TextInput\n            style={[styles.input, { backgroundColor: colors.card, color: colors.text, borderColor: colors.border }]}\n            placeholder=\"Shore contact name\"\n            placeholderTextColor={colors.icon}\n            value={formData.emergencyContact}\n            onChangeText={(text) => updateField('emergencyContact', text)}\n          />\n\n          <Text style={[styles.label, { color: colors.text }]}>Emergency Contact Phone</Text>\n          <TextInput\n            style={[styles.input, { backgroundColor: colors.card, color: colors.text, borderColor: colors.border }]}\n            placeholder=\"+60 12-345 6789\"\n            placeholderTextColor={colors.icon}\n            value={formData.emergencyPhone}\n            onChangeText={(text) => updateField('emergencyPhone', text)}\n            keyboardType=\"phone-pad\"\n          />\n        </View>\n\n        <TouchableOpacity\n          style={[styles.submitButton, { backgroundColor: colors.primary }]}\n          onPress={handleSubmit}\n          disabled={loading}\n        >\n          <Text style={styles.submitButtonText}>\n            {loading ? 'Registering...' : 'Complete Registration'}\n          </Text>\n        </TouchableOpacity>\n\n        <View style={{ height: 40 }} />\n      </ScrollView>\n    </KeyboardAvoidingView>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n  },\n  scrollView: {\n    flex: 1,\n  },\n  header: {\n    alignItems: 'center',\n    paddingTop: 60,\n    paddingBottom: 20,\n    paddingHorizontal: 20,\n  },\n  headerIcon: {\n    fontSize: 60,\n    marginBottom: 16,\n  },\n  title: {\n    fontSize: 28,\n    fontWeight: 'bold',\n    marginBottom: 8,\n  },\n  subtitle: {\n    fontSize: 14,\n    textAlign: 'center',\n    opacity: 0.7,\n  },\n  section: {\n    paddingHorizontal: 20,\n    marginBottom: 24,\n  },\n  sectionTitle: {\n    fontSize: 20,\n    fontWeight: 'bold',\n    marginBottom: 16,\n  },\n  label: {\n    fontSize: 14,\n    fontWeight: '600',\n    marginBottom: 8,\n    marginTop: 12,\n  },\n  input: {\n    height: 48,\n    borderRadius: 8,\n    borderWidth: 1,\n    paddingHorizontal: 16,\n    fontSize: 16,\n  },\n  typeGrid: {\n    flexDirection: 'row',\n    flexWrap: 'wrap',\n    gap: 8,\n  },\n  typeButton: {\n    paddingVertical: 12,\n    paddingHorizontal: 16,\n    borderRadius: 8,\n    borderWidth: 1,\n  },\n  typeButtonText: {\n    fontSize: 14,\n    fontWeight: '500',\n  },\n  row: {\n    flexDirection: 'row',\n    gap: 12,\n  },\n  halfWidth: {\n    flex: 1,\n  },\n  submitButton: {\n    marginHorizontal: 20,\n    height: 56,\n    borderRadius: 12,\n    justifyContent: 'center',\n    alignItems: 'center',\n    marginTop: 20,\n  },\n  submitButtonText: {\n    color: '#fff',\n    fontSize: 18,\n    fontWeight: 'bold',\n  },\n});\n","size_bytes":14614},"utils/database.ts":{"content":"import AsyncStorage from '@react-native-async-storage/async-storage';\n\n// Database keys\nconst DB_USERS_KEY = 'marinetrack_users';\nconst DB_BOATS_KEY = 'marinetrack_boats';\nconst DB_TRACKING_KEY = 'marinetrack_tracking';\n\nexport interface UserData {\n  id: string;\n  email: string | null;\n  name: string;\n  photoUrl?: string;\n  phoneNumber?: string;\n  isGuest: boolean;\n  createdAt: string;\n  lastLogin: string;\n  vesselInfo?: {\n    vesselName: string;\n    vesselType: string;\n    registrationNumber?: string;\n    imoNumber?: string;\n    callSign: string;\n    homePort: string;\n    vesselLength: string;\n    vesselBeam: string;\n    grossTonnage: string;\n  };\n  contactInfo?: {\n    phone: string;\n    email?: string;\n    emergencyContact: string;\n    emergencyPhone: string;\n  };\n}\n\nexport interface BoatData {\n  userId: string;\n  vesselName: string;\n  vesselId: string;\n  vesselType: string;\n  mmsi?: string;\n  imo?: string;\n  length?: number;\n  beam?: number;\n  draft?: number;\n  registrationNumber?: string;\n  homePort?: string;\n  updatedAt: string;\n}\n\nexport interface TrackingData {\n  userId: string;\n  vesselName: string;\n  location: {\n    latitude: number;\n    longitude: number;\n    speed: number;\n    heading: number;\n    timestamp: string;\n  };\n  status: 'Active' | 'Idle' | 'Anchored';\n}\n\n// User operations\nexport const saveUserToDatabase = async (user: UserData): Promise<void> => {\n  try {\n    const usersData = await getAllUsers();\n    const existingIndex = usersData.findIndex(u => u.id === user.id);\n\n    if (existingIndex >= 0) {\n      usersData[existingIndex] = { ...user, lastLogin: new Date().toISOString() };\n    } else {\n      usersData.push(user);\n    }\n\n    await AsyncStorage.setItem(DB_USERS_KEY, JSON.stringify(usersData));\n  } catch (error) {\n    console.error('Error saving user to database:', error);\n  }\n};\n\nexport const getUserFromDatabase = async (userId: string): Promise<UserData | null> => {\n  try {\n    const users = await getAllUsers();\n    return users.find(u => u.id === userId) || null;\n  } catch (error) {\n    console.error('Error getting user from database:', error);\n    return null;\n  }\n};\n\nexport const getAllUsers = async (): Promise<UserData[]> => {\n  try {\n    const data = await AsyncStorage.getItem(DB_USERS_KEY);\n    return data ? JSON.parse(data) : [];\n  } catch (error) {\n    console.error('Error getting all users:', error);\n    return [];\n  }\n};\n\n// Boat operations\nexport const saveBoatData = async (boat: BoatData): Promise<void> => {\n  try {\n    const boatsData = await getAllBoats();\n    const existingIndex = boatsData.findIndex(b => b.userId === boat.userId);\n\n    const updatedBoat = { ...boat, updatedAt: new Date().toISOString() };\n\n    if (existingIndex >= 0) {\n      boatsData[existingIndex] = updatedBoat;\n    } else {\n      boatsData.push(updatedBoat);\n    }\n\n    await AsyncStorage.setItem(DB_BOATS_KEY, JSON.stringify(boatsData));\n  } catch (error) {\n    console.error('Error saving boat data:', error);\n  }\n};\n\nexport const getBoatData = async (userId: string): Promise<BoatData | null> => {\n  try {\n    const boats = await getAllBoats();\n    return boats.find(b => b.userId === userId) || null;\n  } catch (error) {\n    console.error('Error getting boat data:', error);\n    return null;\n  }\n};\n\nexport const getAllBoats = async (): Promise<BoatData[]> => {\n  try {\n    const data = await AsyncStorage.getItem(DB_BOATS_KEY);\n    return data ? JSON.parse(data) : [];\n  } catch (error) {\n    console.error('Error getting all boats:', error);\n    return [];\n  }\n};\n\n// Tracking operations\nexport const saveTrackingData = async (data: TrackingData): Promise<void> => {\n  try {\n    const trackingData = await getAllTrackingData();\n    const existingIndex = trackingData.findIndex(t => t.userId === data.userId);\n\n    if (existingIndex >= 0) {\n      trackingData[existingIndex] = data;\n    } else {\n      trackingData.push(data);\n    }\n\n    await AsyncStorage.setItem(DB_TRACKING_KEY, JSON.stringify(trackingData));\n  } catch (error) {\n    console.error('Error saving tracking data:', error);\n  }\n};\n\nexport const getAllTrackingData = async (): Promise<TrackingData[]> => {\n  try {\n    const data = await AsyncStorage.getItem(DB_TRACKING_KEY);\n    return data ? JSON.parse(data) : [];\n  } catch (error) {\n    console.error('Error getting tracking data:', error);\n    return [];\n  }\n};\n\nexport const getNearbyBoats = async (\n  latitude: number,\n  longitude: number,\n  radiusKm: number = 50\n): Promise<TrackingData[]> => {\n  try {\n    const allTracking = await getAllTrackingData();\n\n    return allTracking.filter(tracking => {\n      const distance = calculateDistance(\n        latitude,\n        longitude,\n        tracking.location.latitude,\n        tracking.location.longitude\n      );\n      return distance <= radiusKm;\n    });\n  } catch (error) {\n    console.error('Error getting nearby boats:', error);\n    return [];\n  }\n};\n\n// Helper function to calculate distance\nconst calculateDistance = (\n  lat1: number,\n  lon1: number,\n  lat2: number,\n  lon2: number\n): number => {\n  const R = 6371; // Earth's radius in km\n  const dLat = ((lat2 - lat1) * Math.PI) / 180;\n  const dLon = ((lon2 - lon1) * Math.PI) / 180;\n  const a =\n    Math.sin(dLat / 2) * Math.sin(dLat / 2) +\n    Math.cos((lat1 * Math.PI) / 180) *\n      Math.cos((lat2 * Math.PI) / 180) *\n      Math.sin(dLon / 2) *\n      Math.sin(dLon / 2);\n  const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n  return R * c;\n};\n\n// Delete operations (for user account deletion)\nexport const deleteUserData = async (userId: string): Promise<void> => {\n  try {\n    // Delete user\n    const users = await getAllUsers();\n    const filteredUsers = users.filter(u => u.id !== userId);\n    await AsyncStorage.setItem(DB_USERS_KEY, JSON.stringify(filteredUsers));\n\n    // Delete boat\n    const boats = await getAllBoats();\n    const filteredBoats = boats.filter(b => b.userId !== userId);\n    await AsyncStorage.setItem(DB_BOATS_KEY, JSON.stringify(filteredBoats));\n\n    // Delete tracking\n    const tracking = await getAllTrackingData();\n    const filteredTracking = tracking.filter(t => t.userId !== userId);\n    await AsyncStorage.setItem(DB_TRACKING_KEY, JSON.stringify(filteredTracking));\n  } catch (error) {\n    console.error('Error deleting user data:', error);\n  }\n};","size_bytes":6286},"metro.config.js":{"content":"const { getDefaultConfig } = require('expo/metro-config');\n\n/** @type {import('expo/metro-config').MetroConfig} */\nconst config = getDefaultConfig(__dirname);\n\nmodule.exports = config;","size_bytes":184},"utils/weatherApi.ts":{"content":"\n// Weather API Keys\nconst STORMGLASS_API_KEY = '5cf7a41a-b626-11f0-a8f4-0242ac130003-5cf7a492-b626-11f0-a8f4-0242ac130003';\nconst AISTREAM_API_KEY = '786e06e04c50efda09a5075482678ca8b48014fd';\nconst WEATHERAPI_KEY = 'b8662263280e4b65a6864833253110';\n\n// Cache for failed API calls\nlet stormGlassFailedAt: number | null = null;\nconst STORMGLASS_RETRY_DELAY = 10 * 60 * 1000; // 10 minutes in milliseconds\n\nexport interface WeatherData {\n  temperature: number;\n  windSpeed: number;\n  waveHeight: number;\n  visibility: number;\n  condition: string;\n  icon: string;\n}\n\nexport interface HourlyForecast {\n  time: string;\n  temp: string;\n  icon: string;\n  wind: string;\n  condition: string;\n}\n\nexport const fetchStormGlassWeather = async (lat: number, lng: number): Promise<WeatherData | null> => {\n  // Check if we recently failed and should not retry yet\n  if (stormGlassFailedAt) {\n    const timeSinceFailure = Date.now() - stormGlassFailedAt;\n    if (timeSinceFailure < STORMGLASS_RETRY_DELAY) {\n      // Silently return null during cooldown\n      return null;\n    }\n  }\n\n  try {\n    const response = await fetch(\n      `https://api.stormglass.io/v2/weather/point?lat=${lat}&lng=${lng}&params=airTemperature,windSpeed,waveHeight,visibility`,\n      {\n        headers: {\n          'Authorization': STORMGLASS_API_KEY\n        }\n      }\n    );\n    \n    if (!response.ok) {\n      // Silently mark failure and return null - no console errors\n      stormGlassFailedAt = Date.now();\n      return null;\n    }\n    \n    // Reset failure timer on success\n    stormGlassFailedAt = null;\n    \n    const data = await response.json();\n    const current = data.hours[0];\n    \n    return {\n      temperature: Math.round(current.airTemperature.noaa || 28),\n      windSpeed: Math.round(current.windSpeed.noaa || 15),\n      waveHeight: parseFloat((current.waveHeight.noaa || 1.2).toFixed(1)),\n      visibility: Math.round(current.visibility.noaa || 8),\n      condition: 'Partly Cloudy',\n      icon: '‚õÖ'\n    };\n  } catch (error) {\n    // Silently mark failure and return null - no console errors\n    stormGlassFailedAt = Date.now();\n    return null;\n  }\n};\n\nexport const fetchWeatherAPIData = async (lat: number, lng: number): Promise<any> => {\n  try {\n    const response = await fetch(\n      `https://api.weatherapi.com/v1/forecast.json?key=${WEATHERAPI_KEY}&q=${lat},${lng}&days=1&aqi=no&alerts=yes`\n    );\n    \n    if (!response.ok) {\n      console.error('WeatherAPI error:', response.status);\n      return null;\n    }\n    \n    return await response.json();\n  } catch (error) {\n    console.error('Error fetching WeatherAPI data:', error);\n    return null;\n  }\n};\n\nexport const getWeatherIcon = (condition: string): string => {\n  const lowerCondition = condition.toLowerCase();\n  if (lowerCondition.includes('sunny') || lowerCondition.includes('clear')) return '‚òÄÔ∏è';\n  if (lowerCondition.includes('partly cloudy')) return '‚õÖ';\n  if (lowerCondition.includes('cloudy') || lowerCondition.includes('overcast')) return '‚òÅÔ∏è';\n  if (lowerCondition.includes('rain') || lowerCondition.includes('drizzle')) return 'üåßÔ∏è';\n  if (lowerCondition.includes('storm') || lowerCondition.includes('thunder')) return '‚õàÔ∏è';\n  if (lowerCondition.includes('snow')) return '‚ùÑÔ∏è';\n  if (lowerCondition.includes('fog') || lowerCondition.includes('mist')) return 'üå´Ô∏è';\n  return '‚õÖ';\n};\n\nexport const getMockWeatherData = (): WeatherData => {\n  return {\n    temperature: 28,\n    windSpeed: 15,\n    waveHeight: 1.2,\n    visibility: 8,\n    condition: 'Partly Cloudy',\n    icon: '‚õÖ'\n  };\n};\n\nexport const getMockHourlyForecast = (): HourlyForecast[] => {\n  return [\n    { time: '10 AM', temp: '27¬∞C', icon: '‚òÄÔ∏è', wind: '12 km/h', condition: 'Sunny' },\n    { time: '11 AM', temp: '28¬∞C', icon: '‚õÖ', wind: '15 km/h', condition: 'Partly Cloudy' },\n    { time: '12 PM', temp: '29¬∞C', icon: '‚õÖ', wind: '18 km/h', condition: 'Partly Cloudy' },\n    { time: '1 PM', temp: '30¬∞C', icon: '‚òÅÔ∏è', wind: '20 km/h', condition: 'Cloudy' },\n    { time: '2 PM', temp: '29¬∞C', icon: 'üåßÔ∏è', wind: '22 km/h', condition: 'Light Rain' },\n    { time: '3 PM', temp: '28¬∞C', icon: 'üåßÔ∏è', wind: '20 km/h', condition: 'Rain' },\n    { time: '4 PM', temp: '27¬∞C', icon: '‚õÖ', wind: '18 km/h', condition: 'Clearing' },\n    { time: '5 PM', temp: '26¬∞C', icon: '‚õÖ', wind: '16 km/h', condition: 'Partly Cloudy' },\n  ];\n};\n\nexport const getCurrentWeather = async (lat: number, lng: number): Promise<WeatherData | null> => {\n  // Try StormGlass API first\n  const stormGlassData = await fetchStormGlassWeather(lat, lng);\n  if (stormGlassData) {\n    return stormGlassData;\n  }\n\n  // Fallback to WeatherAPI\n  const weatherApiData = await fetchWeatherAPIData(lat, lng);\n  if (weatherApiData) {\n    return {\n      temperature: Math.round(weatherApiData.current.temp_c),\n      windSpeed: Math.round(weatherApiData.current.wind_kph / 1.852), // Convert to knots\n      waveHeight: 1.2, // WeatherAPI doesn't provide wave height\n      visibility: Math.round(weatherApiData.current.vis_km),\n      condition: weatherApiData.current.condition.text,\n      icon: getWeatherIcon(weatherApiData.current.condition.text),\n    };\n  }\n\n  // Final fallback to mock data\n  return getMockWeatherData();\n};\n","size_bytes":5255},"utils/realtimeChat.ts":{"content":"\nimport AsyncStorage from '@react-native-async-storage/async-storage';\n\ninterface ChatMessage {\n  id: string;\n  chatId: string;\n  senderId: string;\n  senderName: string;\n  text: string;\n  timestamp: string;\n}\n\ninterface ChatRoom {\n  id: string;\n  participants: string[];\n  lastMessage?: ChatMessage;\n}\n\nconst MESSAGES_KEY = '@marinetrack_messages';\nconst CHAT_ROOMS_KEY = '@marinetrack_chat_rooms';\n\n// Send a message\nexport const sendMessage = async (\n  chatId: string,\n  senderId: string,\n  senderName: string,\n  text: string\n): Promise<ChatMessage> => {\n  const message: ChatMessage = {\n    id: `msg_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`,\n    chatId,\n    senderId,\n    senderName,\n    text,\n    timestamp: new Date().toISOString(),\n  };\n\n  try {\n    // Send to backend server\n    const { getBackendUrl } = await import('../config');\n    const backendUrl = getBackendUrl();\n    \n    const response = await fetch(`${backendUrl}/api/messages`, {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify(message)\n    });\n\n    if (!response.ok) {\n      throw new Error(`Backend responded with status: ${response.status}`);\n    }\n\n    const result = await response.json();\n    \n    // Also store locally as backup\n    const stored = await AsyncStorage.getItem(MESSAGES_KEY);\n    const messages: ChatMessage[] = stored ? JSON.parse(stored) : [];\n    messages.push(message);\n    await AsyncStorage.setItem(MESSAGES_KEY, JSON.stringify(messages));\n\n    // Update chat room\n    await updateChatRoom(chatId, message);\n\n    return result.message || message;\n  } catch (error) {\n    console.error('Error sending message to backend:', error);\n    \n    // Fallback to local storage only\n    const stored = await AsyncStorage.getItem(MESSAGES_KEY);\n    const messages: ChatMessage[] = stored ? JSON.parse(stored) : [];\n    messages.push(message);\n    await AsyncStorage.setItem(MESSAGES_KEY, JSON.stringify(messages));\n    \n    await updateChatRoom(chatId, message);\n    return message;\n  }\n};\n\n// Get messages for a chat\nexport const getChatMessages = async (chatId: string): Promise<ChatMessage[]> => {\n  try {\n    // Try to fetch from backend server first\n    const { getBackendUrl } = await import('../config');\n    const backendUrl = getBackendUrl();\n    \n    const response = await fetch(`${backendUrl}/api/messages`, {\n      method: 'GET',\n      headers: { 'Content-Type': 'application/json' },\n    });\n\n    if (!response.ok) {\n      throw new Error(`Backend responded with status: ${response.status}`);\n    }\n\n    const allMessages: ChatMessage[] = await response.json();\n    \n    // Filter messages for this chat room\n    const chatMessages = allMessages.filter(m => m.chatId === chatId).sort((a, b) => \n      new Date(a.timestamp).getTime() - new Date(b.timestamp).getTime()\n    );\n    \n    // Store locally as backup\n    await AsyncStorage.setItem(MESSAGES_KEY, JSON.stringify(allMessages));\n    \n    return chatMessages;\n  } catch (error) {\n    console.error('Error fetching messages from backend:', error);\n    \n    // Fallback to local storage\n    const stored = await AsyncStorage.getItem(MESSAGES_KEY);\n    const messages: ChatMessage[] = stored ? JSON.parse(stored) : [];\n    return messages.filter(m => m.chatId === chatId).sort((a, b) => \n      new Date(a.timestamp).getTime() - new Date(b.timestamp).getTime()\n    );\n  }\n};\n\n// Create or get chat room between two users\nexport const getChatRoom = async (user1Id: string, user2Id: string): Promise<string> => {\n  const chatId = [user1Id, user2Id].sort().join('_');\n  \n  const stored = await AsyncStorage.getItem(CHAT_ROOMS_KEY);\n  const rooms: ChatRoom[] = stored ? JSON.parse(stored) : [];\n  \n  const existing = rooms.find(r => r.id === chatId);\n  if (existing) return chatId;\n\n  const newRoom: ChatRoom = {\n    id: chatId,\n    participants: [user1Id, user2Id],\n  };\n  \n  rooms.push(newRoom);\n  await AsyncStorage.setItem(CHAT_ROOMS_KEY, JSON.stringify(rooms));\n  \n  return chatId;\n};\n\n// Update chat room with last message\nconst updateChatRoom = async (chatId: string, message: ChatMessage): Promise<void> => {\n  const stored = await AsyncStorage.getItem(CHAT_ROOMS_KEY);\n  const rooms: ChatRoom[] = stored ? JSON.parse(stored) : [];\n  \n  const room = rooms.find(r => r.id === chatId);\n  if (room) {\n    room.lastMessage = message;\n    await AsyncStorage.setItem(CHAT_ROOMS_KEY, JSON.stringify(rooms));\n  }\n};\n\n// Subscribe to new messages (polling from backend every 2 seconds)\nexport const subscribeToMessages = (\n  chatId: string,\n  callback: (message: ChatMessage) => void\n): { unsubscribe: () => void } => {\n  let lastMessageTimestamp: string | null = null;\n  \n  const interval = setInterval(async () => {\n    try {\n      // Fetch from backend to get real-time messages from other devices\n      const messages = await getChatMessages(chatId);\n      \n      // Filter messages based on the last seen message timestamp, not local clock\n      let newMessages: ChatMessage[] = [];\n      if (lastMessageTimestamp) {\n        const lastTimestamp = new Date(lastMessageTimestamp);\n        newMessages = messages.filter(m => new Date(m.timestamp) > lastTimestamp);\n      }\n      \n      newMessages.forEach(callback);\n      \n      // Update last message timestamp if we have messages\n      if (messages.length > 0) {\n        const latestMessage = messages[messages.length - 1];\n        lastMessageTimestamp = latestMessage.timestamp;\n      }\n    } catch (error) {\n      // Silently fail - will retry on next poll\n    }\n  }, 2000); // Check every 2 seconds\n\n  return {\n    unsubscribe: () => clearInterval(interval),\n  };\n};\n","size_bytes":5643},"app/(tabs)/ports.tsx":{"content":"\nimport React, { useState } from 'react';\nimport { View, Text, StyleSheet, ScrollView, RefreshControl, TouchableOpacity, Image } from 'react-native';\nimport { useRouter } from 'expo-router';\nimport { useColorScheme } from '@/hooks/useColorScheme';\nimport { Colors } from '@/constants/Colors';\nimport { IconSymbol } from '@/components/ui/IconSymbol';\n\nexport default function PortsScreen() {\n  const router = useRouter();\n  const colorScheme = useColorScheme();\n  const isDark = colorScheme === 'dark';\n  const colors = Colors[isDark ? 'dark' : 'light'];\n\n  const [refreshing, setRefreshing] = useState(false);\n  const [activeTab, setActiveTab] = useState('all');\n\n  const tabs = [\n    { id: 'all', label: 'All', icon: 'square.grid.2x2' },\n    { id: 'live', label: 'Live', icon: 'record.circle' },\n    { id: 'docked', label: 'Docked', icon: 'anchor' },\n  ];\n\n  const onRefresh = async () => {\n    setRefreshing(true);\n    await new Promise(resolve => setTimeout(resolve, 1000));\n    setRefreshing(false);\n  };\n\n  return (\n    <View style={[styles.container, { backgroundColor: colors.background }]}>\n      {/* Header */}\n      <View style={[styles.header, { backgroundColor: isDark ? colors.card : '#FFFFFF', borderBottomColor: isDark ? colors.border : 'rgba(0,0,0,0.05)' }]}>\n        <View style={styles.headerContent}>\n          <View>\n            <Text style={[styles.headerTitle, { color: colors.text }]}>Fleet</Text>\n            <View style={styles.locationRow}>\n              <IconSymbol name=\"location.fill\" size={14} color={colors.primary} />\n              <Text style={[styles.locationText, { color: colors.secondaryText }]}>Coastal City</Text>\n            </View>\n          </View>\n          <TouchableOpacity style={styles.settingsButton}>\n            <IconSymbol name=\"ellipsis.circle\" size={24} color={colors.text} />\n          </TouchableOpacity>\n        </View>\n\n        {/* Tabs */}\n        <ScrollView \n          horizontal \n          showsHorizontalScrollIndicator={false}\n          style={styles.tabsContainer}\n          contentContainerStyle={styles.tabsContent}\n        >\n          {tabs.map((tab) => (\n            <TouchableOpacity\n              key={tab.id}\n              style={[\n                styles.tab,\n                activeTab === tab.id && [styles.tabActive, { backgroundColor: colors.primary }]\n              ]}\n              onPress={() => setActiveTab(tab.id)}\n            >\n              <IconSymbol \n                name={tab.icon as any} \n                size={18} \n                color={activeTab === tab.id ? '#FFFFFF' : colors.text} \n              />\n              <Text style={[\n                styles.tabText,\n                { color: activeTab === tab.id ? '#FFFFFF' : colors.text }\n              ]}>\n                {tab.label}\n              </Text>\n            </TouchableOpacity>\n          ))}\n        </ScrollView>\n      </View>\n\n      <ScrollView\n        refreshControl={\n          <RefreshControl refreshing={refreshing} onRefresh={onRefresh} tintColor={colors.primary} />\n        }\n        showsVerticalScrollIndicator={false}\n      >\n        {/* Alert Banner */}\n        <View style={styles.alertBanner}>\n          <View style={styles.alertContent}>\n            <View style={styles.alertIcon}>\n              <IconSymbol name=\"exclamationmark.triangle.fill\" size={24} color=\"#FF9500\" />\n            </View>\n            <View style={styles.alertTextContainer}>\n              <Text style={styles.alertTitle}>Wave Alert</Text>\n              <Text style={styles.alertMessage}>Waves exceeding 6m into the bay</Text>\n            </View>\n          </View>\n        </View>\n\n        {/* Vessel Cards */}\n        <View style={styles.vesselsSection}>\n          <Text style={[styles.sectionTitle, { color: colors.text }]}>Your Fleet</Text>\n\n          <TouchableOpacity \n            style={[styles.vesselCard, { backgroundColor: isDark ? colors.card : '#FFFFFF' }]}\n            onPress={() => router.push('/map')}\n          >\n            <View style={styles.vesselHeader}>\n              <View style={styles.vesselAvatar}>\n                <Text style={styles.vesselAvatarText}>üö¢</Text>\n              </View>\n              <View style={styles.vesselInfo}>\n                <Text style={[styles.vesselName, { color: colors.text }]}>MT Golden Frigga</Text>\n                <Text style={[styles.vesselType, { color: colors.secondaryText }]}>Nayarit</Text>\n                <View style={styles.vesselStats}>\n                  <IconSymbol name=\"speedometer\" size={14} color={colors.secondaryText} />\n                  <Text style={[styles.statText, { color: colors.secondaryText }]}>12.4 kts</Text>\n                </View>\n              </View>\n              <View style={styles.liveBadge}>\n                <View style={styles.liveDot} />\n                <Text style={styles.liveText}>LIVE</Text>\n              </View>\n            </View>\n          </TouchableOpacity>\n\n          <TouchableOpacity \n            style={[styles.vesselCard, { backgroundColor: isDark ? colors.card : '#FFFFFF' }]}\n            onPress={() => router.push('/map')}\n          >\n            <View style={styles.vesselHeader}>\n              <View style={styles.vesselAvatar}>\n                <Text style={styles.vesselAvatarText}>‚öì</Text>\n              </View>\n              <View style={styles.vesselInfo}>\n                <Text style={[styles.vesselName, { color: colors.text }]}>Cargo Express</Text>\n                <Text style={[styles.vesselType, { color: colors.secondaryText }]}>Container Ship</Text>\n                <View style={styles.vesselStats}>\n                  <IconSymbol name=\"speedometer\" size={14} color={colors.secondaryText} />\n                  <Text style={[styles.statText, { color: colors.secondaryText }]}>0 kts</Text>\n                </View>\n              </View>\n              <View style={[styles.dockedBadge, { backgroundColor: colors.secondaryText }]}>\n                <Text style={styles.badgeText}>DOCKED</Text>\n              </View>\n            </View>\n          </TouchableOpacity>\n        </View>\n\n        {/* Forecast Section */}\n        <View style={styles.forecastSection}>\n          <Text style={[styles.sectionTitle, { color: colors.text }]}>Today's Forecast</Text>\n\n          <ScrollView horizontal showsHorizontalScrollIndicator={false}>\n            <View style={styles.forecastRow}>\n              <View style={[styles.forecastCard, { backgroundColor: isDark ? colors.card : '#FFFFFF' }]}>\n                <Text style={[styles.forecastVessel, { color: colors.text }]}>MT Golden Frigga</Text>\n                <Text style={[styles.forecastPeriod, { color: colors.secondaryText }]}>Today</Text>\n                <View style={styles.forecastStats}>\n                  <View style={styles.forecastItem}>\n                    <Text style={styles.forecastIcon}>üå°Ô∏è</Text>\n                    <Text style={[styles.forecastValue, { color: colors.text }]}>26¬∞C</Text>\n                  </View>\n                  <View style={styles.forecastItem}>\n                    <Text style={styles.forecastIcon}>üí®</Text>\n                    <Text style={[styles.forecastValue, { color: colors.text }]}>4 kts</Text>\n                  </View>\n                  <View style={styles.forecastItem}>\n                    <Text style={styles.forecastIcon}>üåä</Text>\n                    <Text style={[styles.forecastValue, { color: colors.text }]}>4 m</Text>\n                  </View>\n                </View>\n              </View>\n\n              <View style={[styles.forecastCard, { backgroundColor: isDark ? colors.card : '#FFFFFF' }]}>\n                <Text style={[styles.forecastVessel, { color: colors.text }]}>Cargo Express</Text>\n                <Text style={[styles.forecastPeriod, { color: colors.secondaryText }]}>Tomorrow</Text>\n                <View style={styles.forecastStats}>\n                  <View style={styles.forecastItem}>\n                    <Text style={styles.forecastIcon}>üå°Ô∏è</Text>\n                    <Text style={[styles.forecastValue, { color: colors.text }]}>24¬∞C</Text>\n                  </View>\n                  <View style={styles.forecastItem}>\n                    <Text style={styles.forecastIcon}>üí®</Text>\n                    <Text style={[styles.forecastValue, { color: colors.text }]}>3 kts</Text>\n                  </View>\n                  <View style={styles.forecastItem}>\n                    <Text style={styles.forecastIcon}>üåä</Text>\n                    <Text style={[styles.forecastValue, { color: colors.text }]}>3 m</Text>\n                  </View>\n                </View>\n              </View>\n            </View>\n          </ScrollView>\n        </View>\n\n        <View style={{ height: 100 }} />\n      </ScrollView>\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n  },\n  header: {\n    paddingTop: 60,\n    paddingBottom: 0,\n    borderBottomWidth: 1,\n  },\n  headerContent: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    paddingHorizontal: 16,\n    paddingBottom: 16,\n  },\n  headerTitle: {\n    fontSize: 28,\n    fontWeight: '700',\n    marginBottom: 4,\n  },\n  locationRow: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: 4,\n  },\n  locationText: {\n    fontSize: 14,\n  },\n  settingsButton: {\n    width: 40,\n    height: 40,\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  tabsContainer: {\n    paddingHorizontal: 16,\n    paddingVertical: 12,\n  },\n  tabsContent: {\n    gap: 8,\n  },\n  tab: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: 6,\n    paddingHorizontal: 16,\n    paddingVertical: 8,\n    borderRadius: 20,\n    backgroundColor: 'rgba(0,0,0,0.05)',\n  },\n  tabActive: {\n    backgroundColor: '#007AFF',\n  },\n  tabText: {\n    fontSize: 14,\n    fontWeight: '600',\n  },\n  alertBanner: {\n    margin: 16,\n    borderRadius: 16,\n    backgroundColor: '#FFF3CD',\n    padding: 16,\n  },\n  alertContent: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: 12,\n  },\n  alertIcon: {\n    width: 40,\n    height: 40,\n    borderRadius: 20,\n    backgroundColor: '#FF950020',\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  alertTextContainer: {\n    flex: 1,\n  },\n  alertTitle: {\n    fontSize: 16,\n    fontWeight: '700',\n    color: '#856404',\n    marginBottom: 4,\n  },\n  alertMessage: {\n    fontSize: 14,\n    color: '#856404',\n  },\n  vesselsSection: {\n    paddingHorizontal: 16,\n    marginBottom: 24,\n  },\n  sectionTitle: {\n    fontSize: 20,\n    fontWeight: '700',\n    marginBottom: 12,\n  },\n  vesselCard: {\n    borderRadius: 16,\n    padding: 16,\n    marginBottom: 12,\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.1,\n    shadowRadius: 8,\n    elevation: 3,\n  },\n  vesselHeader: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: 12,\n  },\n  vesselAvatar: {\n    width: 56,\n    height: 56,\n    borderRadius: 28,\n    backgroundColor: '#007AFF20',\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  vesselAvatarText: {\n    fontSize: 28,\n  },\n  vesselInfo: {\n    flex: 1,\n  },\n  vesselName: {\n    fontSize: 16,\n    fontWeight: '600',\n    marginBottom: 4,\n  },\n  vesselType: {\n    fontSize: 14,\n    marginBottom: 4,\n  },\n  vesselStats: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: 4,\n  },\n  statText: {\n    fontSize: 13,\n  },\n  liveBadge: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: 6,\n    paddingHorizontal: 12,\n    paddingVertical: 6,\n    borderRadius: 12,\n    backgroundColor: '#34C75920',\n  },\n  liveDot: {\n    width: 8,\n    height: 8,\n    borderRadius: 4,\n    backgroundColor: '#34C759',\n  },\n  liveText: {\n    fontSize: 12,\n    fontWeight: '700',\n    color: '#34C759',\n  },\n  dockedBadge: {\n    paddingHorizontal: 12,\n    paddingVertical: 6,\n    borderRadius: 12,\n  },\n  badgeText: {\n    fontSize: 12,\n    fontWeight: '700',\n    color: '#FFFFFF',\n  },\n  forecastSection: {\n    paddingHorizontal: 16,\n    marginBottom: 24,\n  },\n  forecastRow: {\n    flexDirection: 'row',\n    gap: 12,\n  },\n  forecastCard: {\n    width: 180,\n    borderRadius: 16,\n    padding: 16,\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.1,\n    shadowRadius: 8,\n    elevation: 3,\n  },\n  forecastVessel: {\n    fontSize: 15,\n    fontWeight: '600',\n    marginBottom: 4,\n  },\n  forecastPeriod: {\n    fontSize: 13,\n    marginBottom: 12,\n  },\n  forecastStats: {\n    gap: 8,\n  },\n  forecastItem: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: 8,\n  },\n  forecastIcon: {\n    fontSize: 16,\n  },\n  forecastValue: {\n    fontSize: 14,\n    fontWeight: '500',\n  },\n});\n","size_bytes":12601},"utils/vesselScraper.ts":{"content":"\n// Vessel scraper for Malaysia ports from VesselFinder\n// Note: In production, this should be done server-side to avoid CORS issues\n\nexport interface VesselDetails {\n  name: string;\n  imo: string;\n  mmsi: string;\n  type: string;\n  flag: string;\n  destination: string;\n  eta: string;\n  status: 'Expected' | 'Arrivals' | 'Departures' | 'In Port';\n  lastPosition: {\n    lat: number;\n    lng: number;\n    timestamp: string;\n  };\n}\n\nexport interface PortVesselData {\n  portName: string;\n  portCode: string;\n  expected: VesselDetails[];\n  arrivals: VesselDetails[];\n  departures: VesselDetails[];\n  inPort: VesselDetails[];\n}\n\n// Malaysia major ports\nexport const MALAYSIA_PORTS = [\n  { name: 'Port Klang', code: 'MYPKG', url: 'https://www.vesselfinder.com/ports/MYPKG' },\n  { name: 'Penang Port', code: 'MYPEN', url: 'https://www.vesselfinder.com/ports/MYPEN' },\n  { name: 'Johor Port', code: 'MYPGU', url: 'https://www.vesselfinder.com/ports/MYPGU' },\n  { name: 'Kuantan Port', code: 'MYKUA', url: 'https://www.vesselfinder.com/ports/MYKUA' },\n  { name: 'Bintulu Port', code: 'MYBTU', url: 'https://www.vesselfinder.com/ports/MYBTU' },\n  { name: 'Tanjung Pelepas', code: 'MYTPP', url: 'https://www.vesselfinder.com/ports/MYTPP' },\n  { name: 'Lumut Port', code: 'MYLMU', url: 'https://www.vesselfinder.com/ports/MYLMU' },\n  { name: 'Kemaman Port', code: 'MYKEM', url: 'https://www.vesselfinder.com/ports/MYKEM' },\n];\n\n// This function would need a backend API to avoid CORS\n// For now, we'll use mock data based on real vessel patterns\nexport const fetchPortVesselData = async (portCode: string): Promise<PortVesselData | null> => {\n  try {\n    // In production, this would call your backend API that scrapes VesselFinder\n    // For now, return realistic mock data\n    return getMockPortVesselData(portCode);\n  } catch (error) {\n    console.error('Error fetching vessel data:', error);\n    return null;\n  }\n};\n\nconst getMockPortVesselData = (portCode: string): PortVesselData => {\n  const port = MALAYSIA_PORTS.find(p => p.code === portCode);\n  \n  return {\n    portName: port?.name || 'Unknown Port',\n    portCode,\n    expected: [\n      {\n        name: 'MAERSK ESSEX',\n        imo: '9632495',\n        mmsi: '219635000',\n        type: 'Container Ship',\n        flag: 'Denmark',\n        destination: portCode,\n        eta: new Date(Date.now() + 86400000 * 2).toISOString(),\n        status: 'Expected',\n        lastPosition: { lat: 3.0, lng: 101.5, timestamp: new Date().toISOString() }\n      }\n    ],\n    arrivals: [\n      {\n        name: 'COSCO SHIPPING',\n        imo: '9728294',\n        mmsi: '477123400',\n        type: 'Container Ship',\n        flag: 'Hong Kong',\n        destination: portCode,\n        eta: new Date(Date.now() - 3600000).toISOString(),\n        status: 'Arrivals',\n        lastPosition: { lat: 3.1, lng: 101.4, timestamp: new Date().toISOString() }\n      }\n    ],\n    departures: [\n      {\n        name: 'MSC MEDITERRANEAN',\n        imo: '9456789',\n        mmsi: '372123456',\n        type: 'Container Ship',\n        flag: 'Panama',\n        destination: 'SGSIN',\n        eta: new Date(Date.now() + 43200000).toISOString(),\n        status: 'Departures',\n        lastPosition: { lat: 3.2, lng: 101.3, timestamp: new Date().toISOString() }\n      }\n    ],\n    inPort: [\n      {\n        name: 'EVER GIVEN',\n        imo: '9811000',\n        mmsi: '353136000',\n        type: 'Container Ship',\n        flag: 'Panama',\n        destination: portCode,\n        eta: new Date(Date.now() - 86400000).toISOString(),\n        status: 'In Port',\n        lastPosition: { lat: 3.0, lng: 101.4, timestamp: new Date().toISOString() }\n      },\n      {\n        name: 'PACIFIC TRADER',\n        imo: '9234567',\n        mmsi: '563789012',\n        type: 'Cargo Ship',\n        flag: 'Singapore',\n        destination: portCode,\n        eta: new Date(Date.now() - 172800000).toISOString(),\n        status: 'In Port',\n        lastPosition: { lat: 3.0, lng: 101.4, timestamp: new Date().toISOString() }\n      }\n    ]\n  };\n};\n\nexport const getTotalVesselsCount = (portData: PortVesselData): number => {\n  return portData.expected.length + portData.arrivals.length + \n         portData.departures.length + portData.inPort.length;\n};\n","size_bytes":4210},"app/onboarding.tsx":{"content":"import React, { useState, useRef } from 'react';\nimport { View, Text, StyleSheet, Dimensions, TouchableOpacity, Animated } from 'react-native';\nimport { useRouter } from 'expo-router';\nimport { useColorScheme } from '@/hooks/useColorScheme';\nimport { Colors } from '@/constants/Colors';\n\nconst { width } = Dimensions.get('window');\n\nconst slides = [\n  {\n    id: 1,\n    title: 'Track Your Vessel',\n    description: 'Monitor your vessel location in real-time with GPS tracking',\n    icon: 'üö¢',\n  },\n  {\n    id: 2,\n    title: 'Stay Safe',\n    description: 'Receive weather alerts and navigation warnings to ensure safe journeys',\n    icon: '‚õàÔ∏è',\n  },\n  {\n    id: 3,\n    title: 'Send SOS Instantly',\n    description: 'Emergency button to alert authorities and contacts when in danger',\n    icon: 'üö®',\n  },\n];\n\nexport default function OnboardingScreen() {\n  const [currentIndex, setCurrentIndex] = useState(0);\n  const scrollX = useRef(new Animated.Value(0)).current;\n  const colorScheme = useColorScheme();\n  const colors = Colors[colorScheme ?? 'light'];\n  const router = useRouter();\n\n  const handleNext = () => {\n    if (currentIndex < slides.length - 1) {\n      setCurrentIndex(currentIndex + 1);\n    } else {\n      router.replace('/auth/login');\n    }\n  };\n\n  const handleSkip = () => {\n    router.replace('/auth/login');\n  };\n\n  return (\n    <View style={[styles.container, { backgroundColor: colors.background }]}>\n      <View style={styles.slide}>\n        <Text style={styles.icon}>{slides[currentIndex].icon}</Text>\n        <Text style={[styles.title, { color: colors.primary }]}>\n          {slides[currentIndex].title}\n        </Text>\n        <Text style={[styles.description, { color: colors.text }]}>\n          {slides[currentIndex].description}\n        </Text>\n      </View>\n\n      <View style={styles.pagination}>\n        {slides.map((_, index) => (\n          <View\n            key={index}\n            style={[\n              styles.dot,\n              {\n                backgroundColor: index === currentIndex ? colors.primary : colors.border,\n                width: index === currentIndex ? 20 : 8,\n              },\n            ]}\n          />\n        ))}\n      </View>\n\n      <View style={styles.buttonContainer}>\n        <TouchableOpacity onPress={handleSkip}>\n          <Text style={[styles.skipText, { color: colors.icon }]}>Skip</Text>\n        </TouchableOpacity>\n        <TouchableOpacity\n          style={[styles.nextButton, { backgroundColor: colors.primary }]}\n          onPress={handleNext}\n        >\n          <Text style={styles.nextButtonText}>\n            {currentIndex === slides.length - 1 ? 'Get Started' : 'Next'}\n          </Text>\n        </TouchableOpacity>\n      </View>\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    justifyContent: 'space-between',\n    padding: 20,\n  },\n  slide: {\n    flex: 1,\n    alignItems: 'center',\n    justifyContent: 'center',\n    paddingHorizontal: 20,\n  },\n  icon: {\n    fontSize: 120,\n    marginBottom: 40,\n  },\n  title: {\n    fontSize: 28,\n    fontWeight: 'bold',\n    textAlign: 'center',\n    marginBottom: 16,\n  },\n  description: {\n    fontSize: 16,\n    textAlign: 'center',\n    lineHeight: 24,\n  },\n  pagination: {\n    flexDirection: 'row',\n    justifyContent: 'center',\n    alignItems: 'center',\n    gap: 8,\n    marginBottom: 40,\n  },\n  dot: {\n    height: 8,\n    borderRadius: 4,\n  },\n  buttonContainer: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    marginBottom: 20,\n  },\n  skipText: {\n    fontSize: 16,\n  },\n  nextButton: {\n    paddingVertical: 16,\n    paddingHorizontal: 40,\n    borderRadius: 30,\n  },\n  nextButtonText: {\n    color: '#fff',\n    fontSize: 16,\n    fontWeight: 'bold',\n  },\n});\n","size_bytes":3758},"app/(tabs)/tracker.tsx":{"content":"import React, { useState, useEffect, useRef } from 'react';\nimport { View, Text, StyleSheet, TouchableOpacity, Switch, TextInput, ScrollView, Alert, Platform } from 'react-native';\nimport { useColorScheme } from '@/hooks/useColorScheme';\nimport { Theme } from '@/constants/Theme';\nimport { Colors } from '@/constants/Colors';\nimport { AddItemModal } from '@/components/redesign/AddItemModal';\nimport * as Location from 'expo-location';\nimport { getCurrentUser, updateVesselInfo } from '@/utils/auth';\nimport { sendTrackingData, startTracking, getNearbyTrackedVessels } from '@/utils/trackingService';\nimport { saveBoatData } from '@/utils/database';\n\n// Constants for StormGlass API interaction\nconst STORMGLASS_API_URL = 'https://api.stormglass.io/v2/weather/point';\nconst STORMGLASS_API_KEY = 'YOUR_STORMGLASS_API_KEY'; // Replace with your actual API key\nconst CACHE_EXPIRY_MS = 10 * 60 * 1000; // 10 minutes\n\nlet lastStormGlassFetchTime = 0;\nlet cachedWeatherData: any = null;\n\nexport default function TrackerScreen() {\n  const colorScheme = useColorScheme();\n  const colors = Colors[colorScheme ?? 'light'];\n\n  const [isTracking, setIsTracking] = useState(false);\n  const [currentLocation, setCurrentLocation] = useState<{ latitude: number; longitude: number } | null>(null);\n  const [heading, setHeading] = useState<number>(0);\n  const [speed, setSpeed] = useState<number>(0);\n  const [vesselInfo, setVesselInfo] = useState({\n    vesselName: '',\n    vesselId: '',\n    vesselType: 'Fishing Vessel',\n    mmsi: '',\n    imo: '',\n  });\n  const [status, setStatus] = useState<'Active' | 'Idle' | 'Anchored'>('Idle');\n  const [nearbyVessels, setNearbyVessels] = useState<any[]>([]);\n  const [trackingSubscription, setTrackingSubscription] = useState<any>(null);\n  const [weatherData, setWeatherData] = useState<any>(null);\n  const [showAddVesselModal, setShowAddVesselModal] = useState(false);\n\n  // Effect to load initial user data and set up location tracking\n  useEffect(() => {\n    loadUserVesselInfo();\n    loadUserBoatData();\n\n    const requestLocationPermissions = async () => {\n      const { status } = await Location.requestForegroundPermissionsAsync();\n      if (status !== 'granted') {\n        Alert.alert('Permission Denied', 'Location permission is required for tracking and map display.');\n        return;\n      }\n\n      // Get initial location\n      try {\n        const location = await Location.getCurrentPositionAsync({\n          accuracy: Location.Accuracy.High,\n        });\n        setCurrentLocation({ latitude: location.coords.latitude, longitude: location.coords.longitude });\n      } catch (error) {\n        console.error(\"Error getting initial location:\", error);\n        Alert.alert('Location Error', 'Could not retrieve your current location. Please try again.');\n      }\n    };\n\n    requestLocationPermissions();\n\n    return () => {\n      if (trackingSubscription) {\n        trackingSubscription.remove();\n      }\n      // Clear any active intervals if the component unmounts\n      if ((trackingSubscription as any)?.updateInterval) {\n        clearInterval((trackingSubscription as any).updateInterval);\n      }\n    };\n  }, []);\n\n  // Effect to handle location updates and sending data when tracking is active\n  useEffect(() => {\n    if (isTracking && currentLocation) {\n      sendLocationUpdate();\n      loadNearbyVessels();\n      fetchWeatherData(currentLocation.latitude, currentLocation.longitude);\n    }\n  }, [currentLocation, isTracking]);\n\n  \n\n  const loadUserVesselInfo = async () => {\n    const user = await getCurrentUser();\n    if (user?.vesselInfo) {\n      setVesselInfo({\n        vesselName: user.vesselInfo.vesselName,\n        vesselId: user.vesselInfo.vesselId,\n        vesselType: user.vesselInfo.vesselType,\n        mmsi: user.vesselInfo.mmsi || '',\n        imo: user.vesselInfo.imo || '',\n      });\n    }\n  };\n\n  const loadUserBoatData = async () => {\n    const user = await getCurrentUser();\n    if (user) {\n      const { getBoatData, getUserFromDatabase } = await import('@/utils/database');\n      const boat = await getBoatData(user.id);\n      const userData = await getUserFromDatabase(user.id);\n\n      if (boat) {\n        setVesselInfo({\n          vesselName: boat.vesselName || vesselInfo.vesselName,\n          vesselId: boat.vesselId || vesselInfo.vesselId,\n          vesselType: boat.vesselType || vesselInfo.vesselType,\n          mmsi: boat.mmsi || '',\n          imo: boat.imo || '',\n        });\n      } else if (userData?.vesselInfo) {\n        setVesselInfo({\n          vesselName: userData.vesselInfo.vesselName || vesselInfo.vesselName,\n          vesselId: userData.vesselInfo.registrationNumber || vesselInfo.vesselId,\n          vesselType: userData.vesselInfo.vesselType || vesselInfo.vesselType,\n          mmsi: userData.vesselInfo.imoNumber || '',\n          imo: userData.vesselInfo.imoNumber || '',\n        });\n      }\n    }\n  };\n\n  const sendLocationUpdate = async () => {\n    if (!currentLocation) return;\n\n    const user = await getCurrentUser();\n    if (!user) return;\n\n    const trackingData = {\n      userId: user.id,\n      vesselInfo,\n      location: {\n        latitude: currentLocation.latitude,\n        longitude: currentLocation.longitude,\n        heading,\n        speed,\n        timestamp: new Date().toISOString(),\n      },\n      status,\n    };\n\n    try {\n      await sendTrackingData(trackingData);\n    } catch (error) {\n      console.error(\"Error sending location update:\", error);\n      // Potentially show an error to the user if sending fails repeatedly\n    }\n  };\n\n  const loadNearbyVessels = async () => {\n    if (!currentLocation) return;\n\n    try {\n      const vessels = await getNearbyTrackedVessels(\n        currentLocation.latitude,\n        currentLocation.longitude,\n        10 // Search radius in km\n      );\n      setNearbyVessels(vessels);\n    } catch (error) {\n      console.error(\"Error loading nearby vessels:\", error);\n      // Handle error, perhaps inform the user\n    }\n  };\n\n  const fetchWeatherData = async (latitude: number, longitude: number) => {\n    const now = Date.now();\n    // Check if cached data is still valid (within 10 minutes)\n    if (cachedWeatherData && (now - lastStormGlassFetchTime < CACHE_EXPIRY_MS)) {\n      setWeatherData(cachedWeatherData);\n      return;\n    }\n\n    // Prevent fetching too frequently\n    if (now - lastStormGlassFetchTime < CACHE_EXPIRY_MS) {\n      return;\n    }\n\n    lastStormGlassFetchTime = now;\n\n    try {\n      const response = await fetch(\n        `${STORMGLASS_API_URL}?lat=${latitude}&lng=${longitude}&params=waveHeight,windSpeed,airTemperature`,\n        {\n          headers: {\n            'Authorization': STORMGLASS_API_KEY,\n          },\n        }\n      );\n\n      if (!response.ok) {\n        // Handle specific error codes, e.g., 402 for invalid API key or exceeding limits\n        if (response.status === 402) {\n          console.error(\"StormGlass API error: Payment Required or Quota Exceeded. Please check your API key and usage limits.\");\n          Alert.alert('Weather API Error', 'Could not fetch weather data. Please check your API key and usage limits.');\n          cachedWeatherData = null; // Clear cache if there's an API error\n          lastStormGlassFetchTime = 0; // Reset timer to allow retry after 10 mins\n        } else {\n          console.error(`StormGlass API error: ${response.status} ${response.statusText}`);\n          Alert.alert('Weather API Error', `Failed to fetch weather data: ${response.statusText}`);\n          cachedWeatherData = null;\n          lastStormGlassFetchTime = 0;\n        }\n        return;\n      }\n\n      const data = await response.json();\n      cachedWeatherData = data; // Cache the fetched data\n      setWeatherData(data);\n    } catch (error) {\n      console.error(\"Error fetching weather data:\", error);\n      Alert.alert('Network Error', 'Could not fetch weather data. Please check your internet connection.');\n      cachedWeatherData = null;\n      lastStormGlassFetchTime = 0; // Reset timer on network error\n    }\n  };\n\n\n  const toggleTracking = async () => {\n    if (!vesselInfo.vesselName || !vesselInfo.vesselId) {\n      Alert.alert('Missing Info', 'Please fill in vessel name and ID before starting tracking');\n      return;\n    }\n\n    if (!isTracking) {\n      // Request permissions if not already granted\n      const { status: permissionStatus } = await Location.requestForegroundPermissionsAsync();\n      if (permissionStatus !== 'granted') {\n        Alert.alert('Permission Denied', 'Location permission is required for tracking');\n        return;\n      }\n\n      // Save vessel info to both auth and database\n      await updateVesselInfo({\n        vesselName: vesselInfo.vesselName,\n        vesselId: vesselInfo.vesselId,\n        vesselType: vesselInfo.vesselType,\n        mmsi: vesselInfo.mmsi,\n        imo: vesselInfo.imo,\n      });\n\n      const user = await getCurrentUser();\n      if (user) {\n        await saveBoatData({\n          userId: user.id,\n          vesselName: vesselInfo.vesselName,\n          vesselId: vesselInfo.vesselId,\n          vesselType: vesselInfo.vesselType,\n          mmsi: vesselInfo.mmsi,\n          imo: vesselInfo.imo,\n          updatedAt: new Date().toISOString(),\n        });\n      }\n\n      // Get initial location\n      let location;\n      try {\n        location = await Location.getCurrentPositionAsync({\n          accuracy: Location.Accuracy.High,\n        });\n      } catch (error) {\n        console.error(\"Error getting current position:\", error);\n        Alert.alert('Location Error', 'Could not get your current location to start tracking.');\n        return;\n      }\n\n      const newLocation = {\n        latitude: location.coords.latitude,\n        longitude: location.coords.longitude,\n      };\n\n      setCurrentLocation(newLocation);\n      setHeading(location.coords.heading || 0);\n      setSpeed(location.coords.speed ? location.coords.speed * 1.94384 : 0); // Convert m/s to knots\n\n      // Start continuous tracking with location updates\n      let subscription;\n      try {\n        subscription = await startTracking((loc) => {\n          setCurrentLocation({\n            latitude: loc.latitude,\n            longitude: loc.longitude,\n          });\n\n          // Update heading and speed more accurately if possible\n          Location.getCurrentPositionAsync({\n            accuracy: Location.Accuracy.BestForNavigation, // Use BestForNavigation for more frequent/accurate updates\n          }).then((currentLoc) => {\n            setHeading(currentLoc.coords.heading || 0);\n            setSpeed(currentLoc.coords.speed ? currentLoc.coords.speed * 1.94384 : 0);\n          }).catch(error => {\n            console.error(\"Error getting current position for heading/speed:\", error);\n          });\n        });\n        setTrackingSubscription(subscription);\n      } catch (error) {\n        console.error(\"Error starting tracking service:\", error);\n        Alert.alert('Tracking Error', 'Could not start location tracking service. Please try again.');\n        return;\n      }\n\n      setIsTracking(true);\n      setStatus('Active');\n\n      // Start periodic updates to send tracking data and fetch nearby vessels\n      const updateInterval = setInterval(async () => {\n        await sendLocationUpdate();\n        await loadNearbyVessels();\n      }, 5000); // Update every 5 seconds for better real-time tracking\n\n      // Store interval for cleanup\n      (subscription as any).updateInterval = updateInterval;\n\n      Alert.alert(\n        'AIS Broadcasting Started',\n        `Your vessel \"${vesselInfo.vesselName}\" is now broadcasting. Your location is being shared with nearby MarineTrack users.`,\n        [{ text: 'OK' }]\n      );\n    } else {\n      // Stop tracking\n      if (trackingSubscription) {\n        // Clear update interval\n        if ((trackingSubscription as any).updateInterval) {\n          clearInterval((trackingSubscription as any).updateInterval);\n        }\n        trackingSubscription.remove();\n        setTrackingSubscription(null); // Clear the subscription reference\n      }\n      setIsTracking(false);\n      setStatus('Idle');\n      setNearbyVessels([]);\n      setWeatherData(null); // Clear weather data when tracking stops\n      cachedWeatherData = null; // Clear cached weather data\n      lastStormGlassFetchTime = 0; // Reset fetch timer\n      Alert.alert('AIS Broadcasting Stopped', 'Your vessel is no longer broadcasting its position.');\n    }\n  };\n\n  const handleSaveVesselInfo = async () => {\n    if (!vesselInfo.vesselName || !vesselInfo.vesselId) {\n      Alert.alert('Error', 'Please fill in vessel name and ID');\n      return;\n    }\n\n    const user = await getCurrentUser();\n    if (user) {\n      await updateVesselInfo({\n        vesselName: vesselInfo.vesselName,\n        vesselId: vesselInfo.vesselId,\n        vesselType: vesselInfo.vesselType,\n        mmsi: vesselInfo.mmsi,\n        imo: vesselInfo.imo,\n      });\n\n      await saveBoatData({\n        userId: user.id,\n        vesselName: vesselInfo.vesselName,\n        vesselId: vesselInfo.vesselId,\n        vesselType: vesselInfo.vesselType,\n        mmsi: vesselInfo.mmsi,\n        imo: vesselInfo.imo,\n        updatedAt: new Date().toISOString(),\n      });\n\n      Alert.alert('Success', 'Vessel information saved to database');\n    }\n  };\n\n  const getWindSpeedUnit = () => {\n    // StormGlass API provides windSpeed in meters per second (m/s)\n    // Convert to knots for display\n    return 'kn';\n  };\n\n  const formatWindSpeed = (speedMs: number) => {\n    if (speedMs === undefined || speedMs === null) return 'N/A';\n    return (speedMs * 1.94384).toFixed(1); // m/s to knots\n  };\n\n  const formatWaveHeight = (heightMeters: number) => {\n    if (heightMeters === undefined || heightMeters === null) return 'N/A';\n    return `${(heightMeters * 3.28084).toFixed(1)} ft`; // meters to feet\n  };\n\n  const handleQuickAddVessel = async (data: any) => {\n    setVesselInfo({\n      vesselName: data.vesselName,\n      vesselId: data.vesselId,\n      vesselType: data.vesselType,\n      mmsi: data.mmsi || '',\n      imo: data.imo || '',\n    });\n    await handleSaveVesselInfo();\n  };\n\n  const vesselFormFields = [\n    { key: 'vesselName', label: 'Vessel Name', placeholder: 'e.g., Nelayan Jaya', required: true },\n    { key: 'vesselId', label: 'Vessel ID', placeholder: 'e.g., MYS-12345', required: true },\n    { \n      key: 'vesselType', \n      label: 'Vessel Type', \n      placeholder: 'Select type',\n      type: 'picker' as const,\n      options: ['Fishing Vessel', 'Cargo Ship', 'Yacht', 'Ferry', 'Tugboat'],\n      required: true \n    },\n    { key: 'mmsi', label: 'MMSI', placeholder: '9-digit MMSI number', type: 'number' as const },\n    { key: 'imo', label: 'IMO', placeholder: '7-digit IMO number', type: 'number' as const },\n  ];\n\n  return (\n    <View style={[styles.container, { backgroundColor: colors.background }]}>\n      <View style={[styles.header, { backgroundColor: colors.primary }]}>\n        <View style={styles.headerTop}>\n          <View>\n            <Text style={styles.headerTitle}>üõ∞Ô∏è AIS Location Tracker</Text>\n            <Text style={styles.headerSubtitle}>Broadcast your position to nearby vessels</Text>\n          </View>\n          <TouchableOpacity\n            style={styles.quickAddButton}\n            onPress={() => setShowAddVesselModal(true)}\n          >\n            <Text style={styles.quickAddIcon}>+</Text>\n          </TouchableOpacity>\n        </View>\n      </View>\n\n      <AddItemModal\n        visible={showAddVesselModal}\n        onClose={() => setShowAddVesselModal(false)}\n        onSubmit={handleQuickAddVessel}\n        title=\"Add Vessel\"\n        fields={vesselFormFields}\n        submitText=\"Save Vessel\"\n      />\n\n      <ScrollView style={styles.content}>\n        {/* Location Display */}\n        {currentLocation && (\n          <View style={[styles.mapContainer, { backgroundColor: colors.card }]}>\n            <Text style={[styles.sectionTitle, { color: colors.text }]}>üìç Your Location</Text>\n            <View style={styles.locationInfo}>\n              <Text style={[styles.coordinates, { color: colors.text }]}>\n                {currentLocation.latitude.toFixed(6)}¬∞N, {currentLocation.longitude.toFixed(6)}¬∞E\n              </Text>\n              <View style={styles.navigationInfo}>\n                <Text style={[styles.navText, { color: colors.icon }]}>\n                  ‚¨ÜÔ∏è Heading: {heading.toFixed(0)}¬∞ | üí® Speed: {speed.toFixed(1)} kn\n                </Text>\n              </View>\n            </View>\n          </View>\n        )}\n\n        {/* Tracking Status */}\n        <View style={[styles.statusCard, { backgroundColor: colors.card }]}>\n          <View style={styles.statusHeader}>\n            <View>\n              <Text style={[styles.statusTitle, { color: colors.text }]}>\n                {isTracking ? 'üü¢ Broadcasting' : 'üî¥ Offline'}\n              </Text>\n              <Text style={[styles.statusSubtitle, { color: colors.icon }]}>\n                {isTracking ? 'Your position is being shared' : 'Enable to broadcast your location'}\n              </Text>\n            </View>\n            <Switch\n              value={isTracking}\n              onValueChange={toggleTracking}\n              trackColor={{ false: colors.border, true: colors.accent }}\n              thumbColor={isTracking ? colors.primary : '#f4f4f4'}\n            />\n          </View>\n        </View>\n\n        {/* Vessel Information */}\n        <View style={[styles.section, { backgroundColor: colors.card }]}>\n          <Text style={[styles.sectionTitle, { color: colors.text }]}>‚öì Vessel Information</Text>\n\n          <View style={styles.inputGroup}>\n            <Text style={[styles.label, { color: colors.icon }]}>Vessel Name *</Text>\n            <TextInput\n              style={[styles.input, { backgroundColor: colors.background, color: colors.text, borderColor: colors.border }]}\n              value={vesselInfo.vesselName}\n              onChangeText={(text) => setVesselInfo({ ...vesselInfo, vesselName: text })}\n              placeholder=\"e.g., Nelayan Jaya\"\n              placeholderTextColor={colors.icon}\n              editable={!isTracking} // Make inputs not editable while tracking\n            />\n          </View>\n\n          <View style={styles.inputGroup}>\n            <Text style={[styles.label, { color: colors.icon }]}>Vessel ID *</Text>\n            <TextInput\n              style={[styles.input, { backgroundColor: colors.background, color: colors.text, borderColor: colors.border }]}\n              value={vesselInfo.vesselId}\n              onChangeText={(text) => setVesselInfo({ ...vesselInfo, vesselId: text })}\n              placeholder=\"e.g., MYS-12345\"\n              placeholderTextColor={colors.icon}\n              editable={!isTracking}\n            />\n          </View>\n\n          <View style={styles.inputGroup}>\n            <Text style={[styles.label, { color: colors.icon }]}>Vessel Type</Text>\n            <TextInput\n              style={[styles.input, { backgroundColor: colors.background, color: colors.text, borderColor: colors.border }]}\n              value={vesselInfo.vesselType}\n              onChangeText={(text) => setVesselInfo({ ...vesselInfo, vesselType: text })}\n              placeholder=\"e.g., Fishing Vessel\"\n              placeholderTextColor={colors.icon}\n              editable={!isTracking}\n            />\n          </View>\n\n          <View style={styles.inputGroup}>\n            <Text style={[styles.label, { color: colors.icon }]}>MMSI (Optional)</Text>\n            <TextInput\n              style={[styles.input, { backgroundColor: colors.background, color: colors.text, borderColor: colors.border }]}\n              value={vesselInfo.mmsi}\n              onChangeText={(text) => setVesselInfo({ ...vesselInfo, mmsi: text })}\n              placeholder=\"9-digit MMSI number\"\n              placeholderTextColor={colors.icon}\n              keyboardType=\"numeric\"\n              editable={!isTracking}\n            />\n          </View>\n\n          <View style={styles.inputGroup}>\n            <Text style={[styles.label, { color: colors.icon }]}>IMO (Optional)</Text>\n            <TextInput\n              style={[styles.input, { backgroundColor: colors.background, color: colors.text, borderColor: colors.border }]}\n              value={vesselInfo.imo}\n              onChangeText={(text) => setVesselInfo({ ...vesselInfo, imo: text })}\n              placeholder=\"7-digit IMO number\"\n              placeholderTextColor={colors.icon}\n              keyboardType=\"numeric\"\n              editable={!isTracking}\n            />\n          </View>\n\n          <TouchableOpacity\n            style={[styles.saveButton, { backgroundColor: colors.secondary }]}\n            onPress={handleSaveVesselInfo}\n            disabled={isTracking} // Disable save button while tracking\n          >\n            <Text style={styles.saveButtonText}>üíæ Save Vessel Info</Text>\n          </TouchableOpacity>\n        </View>\n\n        {/* Status Selection */}\n        <View style={[styles.section, { backgroundColor: colors.card }]}>\n          <Text style={[styles.sectionTitle, { color: colors.text }]}>üìä Vessel Status</Text>\n          <View style={styles.statusButtons}>\n            {(['Active', 'Idle', 'Anchored'] as const).map((s) => (\n              <TouchableOpacity\n                key={s}\n                style={[\n                  styles.statusButton,\n                  { borderColor: colors.border },\n                  status === s && { backgroundColor: colors.primary }\n                ]}\n                onPress={() => setStatus(s)}\n                disabled={!isTracking} // Only allow status change when tracking\n              >\n                <Text style={[styles.statusButtonText, { color: status === s ? '#fff' : colors.text }]}>\n                  {s}\n                </Text>\n              </TouchableOpacity>\n            ))}\n          </View>\n        </View>\n\n        {/* Nearby Vessels */}\n        {isTracking && nearbyVessels.length > 0 && (\n          <View style={[styles.section, { backgroundColor: colors.card }]}>\n            <Text style={[styles.sectionTitle, { color: colors.text }]}>\n              üö¢ Nearby Tracked Vessels ({nearbyVessels.length})\n            </Text>\n            {nearbyVessels.map((vessel, index) => (\n              <View key={index} style={[styles.vesselItem, { borderColor: colors.border }]}>\n                <Text style={[styles.vesselName, { color: colors.text }]}>\n                  {vessel.vesselInfo.vesselName}\n                </Text>\n                <Text style={[styles.vesselDetails, { color: colors.icon }]}>\n                  {vessel.vesselInfo.vesselType} ‚Ä¢ {vessel.status}\n                </Text>\n              </View>\n            ))}\n          </View>\n        )}\n\n        {/* Weather Information */}\n        {weatherData && (\n          <View style={[styles.section, { backgroundColor: colors.card }]}>\n            <Text style={[styles.sectionTitle, { color: colors.text }]}>‚òÄÔ∏è Weather Conditions</Text>\n            <View style={styles.weatherInfo}>\n              <Text style={[styles.weatherDetail, { color: colors.icon }]}>\n                Wind: {formatWindSpeed(weatherData.windSpeed?.value)} {getWindSpeedUnit()}\n              </Text>\n              <Text style={[styles.weatherDetail, { color: colors.icon }]}>\n                Wave Height: {formatWaveHeight(weatherData.waveHeight?.value)}\n              </Text>\n              <Text style={[styles.weatherDetail, { color: colors.icon }]}>\n                Air Temp: {weatherData.airTemperature?.value}¬∞C\n              </Text>\n            </View>\n          </View>\n        )}\n\n\n        {/* Information */}\n        <View style={[styles.infoCard, { backgroundColor: colors.card, borderColor: colors.border }]}>\n          <Text style={[styles.infoTitle, { color: colors.text }]}>‚ÑπÔ∏è How It Works</Text>\n          <Text style={[styles.infoText, { color: colors.icon }]}>\n            ‚Ä¢ Your phone acts as an AIS beacon when tracking is enabled{'\\n'}\n            ‚Ä¢ Location is updated frequently for real-time tracking{'\\n'}\n            ‚Ä¢ Other MarineTrack users can see your vessel within a 10km radius{'\\n'}\n            ‚Ä¢ All data is sent securely to the backend for real-time tracking{'\\n'}\n            ‚Ä¢ Tracking stops automatically when you close the app\n          </Text>\n        </View>\n      </ScrollView>\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n  },\n  header: {\n    paddingTop: 50,\n    paddingBottom: 20,\n    paddingHorizontal: 20,\n  },\n  headerTop: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n  },\n  headerTitle: {\n    fontSize: 24,\n    fontWeight: 'bold',\n    color: '#fff',\n  },\n  headerSubtitle: {\n    fontSize: 14,\n    color: '#fff',\n    opacity: 0.9,\n    marginTop: 4,\n  },\n  quickAddButton: {\n    width: 40,\n    height: 40,\n    borderRadius: 20,\n    backgroundColor: 'rgba(255,255,255,0.2)',\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  quickAddIcon: {\n    fontSize: 24,\n    color: '#fff',\n    fontWeight: '300',\n  },\n  content: {\n    flex: 1,\n    padding: 16,\n  },\n  mapContainer: {\n    padding: 16,\n    borderRadius: 12,\n    marginBottom: 16,\n  },\n  statusCard: {\n    padding: 16,\n    borderRadius: 12,\n    marginBottom: 16,\n  },\n  statusHeader: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n  },\n  statusTitle: {\n    fontSize: 18,\n    fontWeight: 'bold',\n  },\n  statusSubtitle: {\n    fontSize: 12,\n    marginTop: 4,\n  },\n  locationInfo: {\n    marginTop: 16,\n    paddingTop: 16,\n    borderTopWidth: 1,\n    borderTopColor: '#e0e0e0',\n  },\n  coordinates: {\n    fontSize: 14,\n    fontWeight: '600',\n  },\n  navigationInfo: {\n    marginTop: 8,\n  },\n  navText: {\n    fontSize: 12,\n  },\n  section: {\n    padding: 16,\n    borderRadius: 12,\n    marginBottom: 16,\n  },\n  sectionTitle: {\n    fontSize: 16,\n    fontWeight: 'bold',\n    marginBottom: 12,\n  },\n  inputGroup: {\n    marginBottom: 12,\n  },\n  label: {\n    fontSize: 12,\n    marginBottom: 6,\n    fontWeight: '600',\n  },\n  input: {\n    borderWidth: 1,\n    borderRadius: 8,\n    padding: 12,\n    fontSize: 14,\n  },\n  saveButton: {\n    paddingVertical: 14,\n    borderRadius: 8,\n    alignItems: 'center',\n    marginTop: 8,\n  },\n  saveButtonText: {\n    color: '#fff',\n    fontSize: 16,\n    fontWeight: 'bold',\n  },\n  statusButtons: {\n    flexDirection: 'row',\n    gap: 12,\n  },\n  statusButton: {\n    flex: 1,\n    paddingVertical: 12,\n    borderRadius: 8,\n    borderWidth: 2,\n    alignItems: 'center',\n  },\n  statusButtonText: {\n    fontSize: 14,\n    fontWeight: '600',\n  },\n  vesselItem: {\n    paddingVertical: 12,\n    borderBottomWidth: 1,\n  },\n  vesselName: {\n    fontSize: 14,\n    fontWeight: '600',\n  },\n  vesselDetails: {\n    fontSize: 12,\n    marginTop: 4,\n  },\n  infoCard: {\n    padding: 16,\n    borderRadius: 12,\n    borderWidth: 1,\n    marginBottom: 20,\n  },\n  infoTitle: {\n    fontSize: 14,\n    fontWeight: 'bold',\n    marginBottom: 8,\n  },\n  infoText: {\n    fontSize: 12,\n    lineHeight: 18,\n  },\n  weatherInfo: {\n    marginTop: 8,\n  },\n  weatherDetail: {\n    fontSize: 12,\n    marginBottom: 4,\n  },\n});","size_bytes":27124},"replit.md":{"content":"# MarineTrack Mobile Application\n\n**Last Updated:** November 10, 2025\n\n## Overview\nMarineTrack is a cross-platform mobile application designed for fishermen, seafarers, and small vessel operators to enhance safety, communication, and sustainable fishing at sea. Built with React Native and Expo for web, iOS, and Android platforms.\n\n## Project Purpose\nThis is a **functional prototype** demonstrating the complete UI/UX flow and core features of the MarineTrack application. The app uses mock data for demonstration purposes and is ready for backend integration.\n\n## Current State\n‚úÖ **Completed Features:**\n- **Modern Nintendo-style UI redesign** with navy blue (#082837) and coral (#FF6B61) color scheme\n- Comprehensive reusable component library (11 components) with proper TypeScript typing\n- Complete onboarding flow (3 slides)\n- Authentication screens (login/register)\n- Redesigned Dashboard with promotional banner, shortcuts, and vessel recommendations\n- Redesigned Fleet Tracking screen with wave alerts and vessel grid\n- Redesigned Weather screen with large weather widget and port information\n- Redesigned Map screen with vessel detail panel and live properties\n- SOS Emergency screen with alert functionality\n- Communication/Chat screen for vessel contacts\n- Settings & Profile screen with sustainable fishing tips\n- Tab-based navigation with 9 main sections\n- Responsive design optimized for mobile and web\n- Comprehensive notification system with all activity types\n- Enhanced map with safe fishing zones, restricted zones, and maritime borders\n- Waze-like navigation features with route planning and hazard warnings\n- Backend support for notifications, likes, comments, and nearby vessel alerts\n\n## Architecture\n\n### Screen Flow\n```\napp/\n‚îú‚îÄ‚îÄ index.tsx                    # Entry point (redirects to onboarding)\n‚îú‚îÄ‚îÄ onboarding.tsx              # 3-slide onboarding\n‚îú‚îÄ‚îÄ auth/\n‚îÇ   ‚îú‚îÄ‚îÄ login.tsx               # Login screen\n‚îÇ   ‚îú‚îÄ‚îÄ register.tsx            # Registration with vessel info\n‚îÇ   ‚îî‚îÄ‚îÄ _layout.tsx             # Auth navigation\n‚îî‚îÄ‚îÄ (tabs)/\n    ‚îú‚îÄ‚îÄ index.tsx               # Dashboard (map, vessels, weather)\n    ‚îú‚îÄ‚îÄ weather.tsx             # Weather forecasts & alerts\n    ‚îú‚îÄ‚îÄ sos.tsx                 # Emergency SOS\n    ‚îú‚îÄ‚îÄ chat.tsx                # Vessel communication\n    ‚îú‚îÄ‚îÄ settings.tsx            # Profile & settings\n    ‚îî‚îÄ‚îÄ _layout.tsx             # Tab navigation\n```\n\n### Tech Stack\n- **Frontend:** React Native + Expo\n- **Navigation:** Expo Router (file-based routing)\n- **Design System:** Custom Theme tokens (`constants/Theme.ts`) with navy/teal/coral palette\n- **Components:** Reusable UI library (`components/ui/redesign/`)\n- **Styling:** StyleSheet with Theme tokens (no hard-coded colors)\n- **State:** React Hooks (useState)\n- **Platform:** Web (port 5000), iOS, Android\n\n## Features\n\n### 1. Dashboard\n- Live GPS coordinates display\n- Nearby vessels list with distance and status\n- Weather summary (temperature, wind, waves)\n- Quick action buttons (SOS, Weather, Fishing zones)\n\n### 2. Weather & Navigation\n- Current weather conditions\n- Hourly forecast\n- Weather alerts\n- Safety tips for maritime navigation\n\n### 3. SOS Emergency\n- Large emergency button\n- GPS location sharing\n- Emergency contact list\n- Step-by-step emergency instructions\n\n### 4. Communication\n- Vessel-to-vessel chat\n- Contact list with location tracking\n- Message history\n- \"Last seen\" status\n\n### 5. Live Vessel Map (Enhanced)\n- **Safe Fishing Zones:** Green overlay showing prime fishing areas with abundant fish\n- **Good Fishing Zones:** Light green areas with moderate fishing potential\n- **Restricted Zones:** Red overlay marking naval areas and marine protected zones (NO ENTRY)\n- **Maritime Borders:** Yellow overlay showing international boundaries\n- **Interactive Zone Info:** Tap zones to see details, descriptions, and fishing potential\n- **Real-time Vessel Tracking:** See all nearby vessels on the map\n- **Waze-like Navigation:** Route planning with hazard detection\n  - Calculates optimal routes between points\n  - Detects route crossings through restricted zones\n  - Shows distance, estimated time, and hazard warnings\n  - Alerts if route crosses naval areas or protected zones\n- **Zone Alerts:** Automatic notifications when entering restricted areas\n\n### 6. Comprehensive Notification System\n- **Push Notifications:** Full local notification support with Expo Notifications\n- **Notification Types:**\n  - üí¨ Chat messages from other vessels\n  - üö¢ Nearby vessel alerts (within 2km)\n  - ‚ù§Ô∏è Boat likes from other users\n  - üí≠ Comments on your boat\n  - üÜò SOS emergency alerts\n  - ‚õî Restricted zone warnings\n  - ‚úÖ Safe fishing zone notifications\n  - ‚õàÔ∏è Weather warnings\n  - ‚õΩ Low fuel alerts\n- **Notification Features:**\n  - Notification history with read/unread status\n  - Time-based throttling (5-minute cooldown to prevent spam)\n  - Clear all notifications\n  - Tap to mark as read\n  - Color-coded by type\n  - Pull to refresh\n- **Smart Throttling:** Prevents notification spam while still keeping you informed\n\n### 7. Backend API Features\n- Real-time vessel tracking with Socket.IO\n- Chat message broadcasting\n- Boat likes and comments system\n- Automatic nearby vessel detection (2km radius)\n- Notification broadcasting for all activities\n- JSON-based data persistence\n- Multi-user support\n\n### 5. Settings & Profile\n- User and vessel information\n- Notification preferences\n- Emergency contacts management\n- Sustainable fishing tips and best practices\n\n## Recent Changes\n**November 10, 2025:**\n- ‚úÖ **Completed comprehensive UI redesign** based on Nintendo-style design concept\n- ‚úÖ Created 11 reusable UI components with proper TypeScript typing:\n  - HeroBanner, ShortcutGrid, SectionHeader, VesselCard, WeatherWidget\n  - ActionButton, AlertBanner, TabBar, ForecastCard, LivePropertyChip, VesselDetailHeader\n- ‚úÖ Redesigned 4 major screens (Dashboard, Ports/Fleet, Weather, Map) to match design concept\n- ‚úÖ Replaced all hard-coded colors with Theme tokens for consistent design system\n- ‚úÖ Fixed TypeScript import order issues and component structure\n- ‚úÖ Applied Theme tokens consistently across all components and screens\n- ‚úÖ Architect-reviewed and approved redesign implementation\n\n**November 6, 2025:**\n- ‚úÖ Added comprehensive notification system with 9 notification types\n- ‚úÖ Created EnhancedVesselMap component with maritime zone overlays\n- ‚úÖ Implemented safe fishing zones, restricted zones, and border markings\n- ‚úÖ Added Waze-like navigation with route planning and hazard detection\n- ‚úÖ Updated backend to support likes, comments, and notification broadcasting\n- ‚úÖ Added notification throttling to prevent spam (5-minute cooldown)\n- ‚úÖ Improved route calculation with 20-point sampling for accurate zone detection\n- ‚úÖ Created notifications tab with full notification history\n- ‚úÖ Added zone legend to map for easy identification\n\n**October 30, 2025:**\n- Created complete app structure with 13 screens\n- Implemented ocean-themed color scheme\n- Built navigation flow: onboarding ‚Üí auth ‚Üí main app\n- Added mock data for vessels, weather, contacts\n- Configured Expo web workflow on port 5000\n- Fixed deprecated shadow style props\n\n## Next Steps for Production\n\n### Backend Integration\n1. **Authentication:** Integrate Firebase Authentication or Supabase Auth\n   - Implement sign-up/sign-in flows\n   - Add session persistence\n   - Gate tab navigation behind auth state\n\n2. **Real-time Data:**\n   - Add MapView component (react-native-maps)\n   - Integrate OpenWeatherMap or StormGlass API for weather\n   - Set up vessel tracking with GPS\n   - Implement real-time chat with Firebase/Supabase\n\n3. **Emergency Features:**\n   - Connect SOS to Twilio for SMS alerts\n   - Integrate push notifications (FCM)\n   - Add offline data persistence\n\n### Additional Features\n- Fishing zone map overlays\n- Route planning and navigation\n- Vessel history tracking\n- Multi-language support\n- Offline-first data sync\n\n## User Preferences\n- Focus on maritime safety and sustainability\n- Ocean-themed visual design\n- Simple, intuitive interface for use at sea\n- Prototype with mock data for demonstration\n\n## Development Commands\n```bash\nnpm start -- --web --port 5000   # Start web development server\nnpm run android                   # Run on Android\nnpm run ios                       # Run on iOS\n```\n\n## Design System\n- **Primary Color:** Navy Blue (#082837)\n- **Accent Color:** Teal (#0F9AA7)\n- **Warning/Promo:** Coral/Orange (#FF8C42)\n- **Danger/Alert:** Coral Red (#FF6B61)\n- **Design Tokens:** All defined in `constants/Theme.ts`\n- **Component Library:** `components/ui/redesign/` with 11 reusable components\n- **No hard-coded colors:** All components use Theme tokens exclusively\n\n## Notes\n- This is a functional prototype with mock data - backend integration required for production\n- All API integrations are placeholder UI flows\n- Map component uses WazeVesselMap (ready for enhanced MapView integration)\n- Complete design system with Theme tokens ensures consistent styling\n- Reusable component library enables rapid UI development\n","size_bytes":9190},"utils/auth.ts":{"content":"\nimport AsyncStorage from '@react-native-async-storage/async-storage';\n\nexport interface User {\n  id: string;\n  email: string | null;\n  name: string;\n  photoUrl?: string;\n  isGuest: boolean;\n  vesselInfo?: {\n    vesselName: string;\n    vesselId: string;\n    vesselType: string;\n  };\n  createdAt: string;\n}\n\ninterface StoredCredentials {\n  email: string;\n  password: string;\n  userId: string;\n}\n\nconst STORAGE_KEY = '@marinetrack_user';\nconst GUEST_USER_KEY = '@marinetrack_guest_id';\nconst CREDENTIALS_KEY = '@marinetrack_credentials';\n\n// Store user credentials\nexport const storeCredentials = async (email: string, password: string, userId: string): Promise<void> => {\n  try {\n    const credentials: StoredCredentials = { email, password, userId };\n    await AsyncStorage.setItem(CREDENTIALS_KEY, JSON.stringify(credentials));\n  } catch (error) {\n    console.error('Error storing credentials:', error);\n  }\n};\n\n// Get stored credentials\nexport const getStoredCredentials = async (): Promise<StoredCredentials[]> => {\n  try {\n    const stored = await AsyncStorage.getItem(CREDENTIALS_KEY);\n    return stored ? [JSON.parse(stored)] : [];\n  } catch (error) {\n    console.error('Error getting credentials:', error);\n    return [];\n  }\n};\n\n// Login with email and password\nexport const loginWithEmailPassword = async (email: string, password: string): Promise<boolean> => {\n  try {\n    const credentials = await getStoredCredentials();\n    const match = credentials.find(c => c.email === email && c.password === password);\n    \n    if (match) {\n      const user: User = {\n        id: match.userId,\n        email,\n        name: email.split('@')[0],\n        isGuest: false,\n        createdAt: new Date().toISOString()\n      };\n      await storeUser(user);\n      return true;\n    }\n    return false;\n  } catch (error) {\n    console.error('Error logging in:', error);\n    return false;\n  }\n};\n\n// Register new user\nexport const registerUser = async (email: string, password: string, name: string): Promise<boolean> => {\n  try {\n    const userId = `user_${Date.now()}`;\n    await storeCredentials(email, password, userId);\n    \n    const user: User = {\n      id: userId,\n      email,\n      name,\n      isGuest: false,\n      createdAt: new Date().toISOString()\n    };\n    await storeUser(user);\n    return true;\n  } catch (error) {\n    console.error('Error registering user:', error);\n    return false;\n  }\n};\n\n// Store user data\nexport const storeUser = async (user: User): Promise<void> => {\n  try {\n    await AsyncStorage.setItem(STORAGE_KEY, JSON.stringify(user));\n  } catch (error) {\n    console.error('Error storing user:', error);\n  }\n};\n\n// Get current user\nexport const getCurrentUser = async (): Promise<User | null> => {\n  try {\n    const userData = await AsyncStorage.getItem(STORAGE_KEY);\n    return userData ? JSON.parse(userData) : null;\n  } catch (error) {\n    console.error('Error getting user:', error);\n    return null;\n  }\n};\n\n// Create guest user\nexport const createGuestUser = async (): Promise<User> => {\n  let guestId = await AsyncStorage.getItem(GUEST_USER_KEY);\n  \n  if (!guestId) {\n    guestId = `guest_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\n    await AsyncStorage.setItem(GUEST_USER_KEY, guestId);\n  }\n\n  const guestUser: User = {\n    id: guestId,\n    email: null,\n    name: 'Guest User',\n    isGuest: true,\n    createdAt: new Date().toISOString()\n  };\n\n  await storeUser(guestUser);\n  return guestUser;\n};\n\n// Sign out\nexport const signOut = async (): Promise<void> => {\n  try {\n    await AsyncStorage.removeItem(STORAGE_KEY);\n  } catch (error) {\n    console.error('Error signing out:', error);\n  }\n};\n\n// Check if user is authenticated\nexport const isAuthenticated = async (): Promise<boolean> => {\n  const user = await getCurrentUser();\n  return user !== null;\n};\n\n// Update vessel info\nexport const updateVesselInfo = async (vesselInfo: User['vesselInfo']): Promise<void> => {\n  try {\n    const user = await getCurrentUser();\n    if (user) {\n      user.vesselInfo = vesselInfo;\n      await storeUser(user);\n    }\n  } catch (error) {\n    console.error('Error updating vessel info:', error);\n  }\n};\n","size_bytes":4140},"app/(tabs)/weather.tsx":{"content":"\nimport React, { useState, useEffect } from 'react';\nimport { View, Text, StyleSheet, ScrollView, RefreshControl, TouchableOpacity, Image } from 'react-native';\nimport { useColorScheme } from '@/hooks/useColorScheme';\nimport { Colors } from '@/constants/Colors';\nimport { Theme } from '@/constants/Theme';\nimport { IconSymbol } from '@/components/ui/IconSymbol';\nimport * as Location from 'expo-location';\nimport { fetchWeatherAPIData, getMockWeatherData } from '@/utils/weatherApi';\n\nexport default function WeatherScreen() {\n  const colorScheme = useColorScheme();\n  const isDark = colorScheme === 'dark';\n  const colors = Colors[isDark ? 'dark' : 'light'];\n\n  const [weatherData, setWeatherData] = useState(getMockWeatherData());\n  const [locationName, setLocationName] = useState('Loading...');\n  const [refreshing, setRefreshing] = useState(false);\n\n  useEffect(() => {\n    loadWeather();\n  }, []);\n\n  const loadWeather = async () => {\n    try {\n      const { status } = await Location.requestForegroundPermissionsAsync();\n      if (status !== 'granted') return;\n\n      const location = await Location.getCurrentPositionAsync({\n        accuracy: Location.Accuracy.High,\n      });\n\n      const lat = location.coords.latitude;\n      const lng = location.coords.longitude;\n\n      try {\n        const geocode = await Location.reverseGeocodeAsync({ latitude: lat, longitude: lng });\n        if (geocode && geocode.length > 0) {\n          const place = geocode[0];\n          setLocationName(place.city || place.region || place.country || 'Current Location');\n        }\n      } catch (geoError) {\n        setLocationName('Current Location');\n      }\n\n      const data = await fetchWeatherAPIData(lat, lng);\n      if (data && data.current) {\n        setWeatherData({\n          temperature: Math.round(data.current.temp_c),\n          windSpeed: Math.round(data.current.wind_kph),\n          waveHeight: 1.2,\n          visibility: Math.round(data.current.vis_km),\n          condition: data.current.condition.text,\n          icon: '‚õÖ'\n        });\n      }\n    } catch (error) {\n      console.error('Error loading weather:', error);\n    }\n  };\n\n  const onRefresh = async () => {\n    setRefreshing(true);\n    await loadWeather();\n    setRefreshing(false);\n  };\n\n  return (\n    <View style={[styles.container, { backgroundColor: colors.background }]}>\n      <ScrollView\n        refreshControl={\n          <RefreshControl refreshing={refreshing} onRefresh={onRefresh} tintColor={colors.primary} />\n        }\n        showsVerticalScrollIndicator={false}\n      >\n        {/* Header */}\n        <View style={[styles.header, { backgroundColor: isDark ? colors.card : '#FFFFFF' }]}>\n          <View style={styles.headerContent}>\n            <View>\n              <Text style={[styles.headerTitle, { color: colors.text }]}>Weather</Text>\n              <View style={styles.locationRow}>\n                <IconSymbol name=\"location.fill\" size={14} color={colors.primary} />\n                <Text style={[styles.locationText, { color: colors.secondaryText }]}>{locationName}</Text>\n              </View>\n            </View>\n            <TouchableOpacity style={styles.settingsButton}>\n              <IconSymbol name=\"ellipsis.circle\" size={24} color={colors.text} />\n            </TouchableOpacity>\n          </View>\n        </View>\n\n        {/* Hero Weather Card */}\n        <View style={[styles.heroCard, { backgroundColor: isDark ? colors.card : '#FFFFFF' }]}>\n          <View style={styles.heroContent}>\n            <Text style={styles.weatherIcon}>{weatherData.icon}</Text>\n            <Text style={[styles.temperature, { color: colors.text }]}>{weatherData.temperature}¬∞</Text>\n            <Text style={[styles.condition, { color: colors.secondaryText }]}>{weatherData.condition}</Text>\n            \n            <View style={styles.statsRow}>\n              <View style={styles.statItem}>\n                <IconSymbol name=\"wind\" size={20} color={colors.primary} />\n                <Text style={[styles.statValue, { color: colors.text }]}>{weatherData.windSpeed}</Text>\n                <Text style={[styles.statLabel, { color: colors.secondaryText }]}>kts</Text>\n              </View>\n              <View style={styles.statDivider} />\n              <View style={styles.statItem}>\n                <IconSymbol name=\"eye\" size={20} color={colors.primary} />\n                <Text style={[styles.statValue, { color: colors.text }]}>{weatherData.visibility}</Text>\n                <Text style={[styles.statLabel, { color: colors.secondaryText }]}>km</Text>\n              </View>\n              <View style={styles.statDivider} />\n              <View style={styles.statItem}>\n                <Text style={styles.waveIcon}>üåä</Text>\n                <Text style={[styles.statValue, { color: colors.text }]}>{weatherData.waveHeight}</Text>\n                <Text style={[styles.statLabel, { color: colors.secondaryText }]}>m</Text>\n              </View>\n            </View>\n          </View>\n        </View>\n\n        {/* Featured Port */}\n        <View style={styles.section}>\n          <Text style={[styles.sectionTitle, { color: colors.text }]}>Featured Port</Text>\n          \n          <TouchableOpacity style={[styles.portCard, { backgroundColor: isDark ? colors.card : '#FFFFFF' }]}>\n            <View style={styles.portHeader}>\n              <View style={styles.portIcon}>\n                <Text style={styles.portIconText}>‚öì</Text>\n              </View>\n              <View style={styles.portInfo}>\n                <Text style={[styles.portName, { color: colors.text }]}>Charleston Port</Text>\n                <Text style={[styles.portLocation, { color: colors.secondaryText }]}>Norfolk Terminal</Text>\n                <Text style={[styles.portETA, { color: colors.primary }]}>ETA: 2/17 4:00pm</Text>\n              </View>\n              <TouchableOpacity style={[styles.addButton, { backgroundColor: colors.primary }]}>\n                <IconSymbol name=\"plus\" size={20} color=\"#FFFFFF\" />\n              </TouchableOpacity>\n            </View>\n          </TouchableOpacity>\n        </View>\n\n        {/* Marine Conditions */}\n        <View style={styles.section}>\n          <Text style={[styles.sectionTitle, { color: colors.text }]}>Marine Conditions</Text>\n          \n          <View style={styles.conditionsGrid}>\n            <View style={[styles.conditionCard, { backgroundColor: isDark ? colors.card : '#FFFFFF' }]}>\n              <View style={[styles.conditionIcon, { backgroundColor: '#34C75920' }]}>\n                <Text style={styles.conditionEmoji}>üåä</Text>\n              </View>\n              <Text style={[styles.conditionValue, { color: colors.text }]}>{weatherData.waveHeight}m</Text>\n              <Text style={[styles.conditionLabel, { color: colors.secondaryText }]}>Wave Height</Text>\n            </View>\n\n            <View style={[styles.conditionCard, { backgroundColor: isDark ? colors.card : '#FFFFFF' }]}>\n              <View style={[styles.conditionIcon, { backgroundColor: '#007AFF20' }]}>\n                <Text style={styles.conditionEmoji}>üëÅÔ∏è</Text>\n              </View>\n              <Text style={[styles.conditionValue, { color: colors.text }]}>{weatherData.visibility}km</Text>\n              <Text style={[styles.conditionLabel, { color: colors.secondaryText }]}>Visibility</Text>\n            </View>\n\n            <View style={[styles.conditionCard, { backgroundColor: isDark ? colors.card : '#FFFFFF' }]}>\n              <View style={[styles.conditionIcon, { backgroundColor: '#FF950020' }]}>\n                <Text style={styles.conditionEmoji}>üí®</Text>\n              </View>\n              <Text style={[styles.conditionValue, { color: colors.text }]}>{weatherData.windSpeed}kts</Text>\n              <Text style={[styles.conditionLabel, { color: colors.secondaryText }]}>Wind Speed</Text>\n            </View>\n          </View>\n        </View>\n\n        <View style={{ height: 100 }} />\n      </ScrollView>\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n  },\n  header: {\n    paddingTop: 60,\n    paddingBottom: 16,\n    borderBottomWidth: 1,\n    borderBottomColor: 'rgba(0,0,0,0.05)',\n  },\n  headerContent: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    paddingHorizontal: 16,\n  },\n  headerTitle: {\n    fontSize: 28,\n    fontWeight: '700',\n    marginBottom: 4,\n  },\n  locationRow: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: 4,\n  },\n  locationText: {\n    fontSize: 14,\n  },\n  settingsButton: {\n    width: 40,\n    height: 40,\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  heroCard: {\n    margin: 16,\n    borderRadius: 20,\n    padding: 32,\n    alignItems: 'center',\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.1,\n    shadowRadius: 8,\n    elevation: 3,\n  },\n  heroContent: {\n    alignItems: 'center',\n  },\n  weatherIcon: {\n    fontSize: 80,\n    marginBottom: 16,\n  },\n  temperature: {\n    fontSize: 64,\n    fontWeight: '200',\n    marginBottom: 8,\n  },\n  condition: {\n    fontSize: 18,\n    marginBottom: 32,\n  },\n  statsRow: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: 24,\n  },\n  statItem: {\n    alignItems: 'center',\n    gap: 4,\n  },\n  statDivider: {\n    width: 1,\n    height: 40,\n    backgroundColor: 'rgba(0,0,0,0.1)',\n  },\n  statValue: {\n    fontSize: 20,\n    fontWeight: '600',\n  },\n  statLabel: {\n    fontSize: 12,\n  },\n  waveIcon: {\n    fontSize: 20,\n  },\n  section: {\n    paddingHorizontal: 16,\n    marginBottom: 24,\n  },\n  sectionTitle: {\n    fontSize: 20,\n    fontWeight: '700',\n    marginBottom: 12,\n  },\n  portCard: {\n    borderRadius: 16,\n    padding: 16,\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.1,\n    shadowRadius: 8,\n    elevation: 3,\n  },\n  portHeader: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: 12,\n  },\n  portIcon: {\n    width: 56,\n    height: 56,\n    borderRadius: 28,\n    backgroundColor: '#007AFF20',\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  portIconText: {\n    fontSize: 28,\n  },\n  portInfo: {\n    flex: 1,\n  },\n  portName: {\n    fontSize: 16,\n    fontWeight: '600',\n    marginBottom: 4,\n  },\n  portLocation: {\n    fontSize: 14,\n    marginBottom: 4,\n  },\n  portETA: {\n    fontSize: 13,\n    fontWeight: '500',\n  },\n  addButton: {\n    width: 36,\n    height: 36,\n    borderRadius: 18,\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  conditionsGrid: {\n    flexDirection: 'row',\n    gap: 12,\n  },\n  conditionCard: {\n    flex: 1,\n    borderRadius: 16,\n    padding: 16,\n    alignItems: 'center',\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.1,\n    shadowRadius: 8,\n    elevation: 3,\n  },\n  conditionIcon: {\n    width: 48,\n    height: 48,\n    borderRadius: 24,\n    justifyContent: 'center',\n    alignItems: 'center',\n    marginBottom: 12,\n  },\n  conditionEmoji: {\n    fontSize: 24,\n  },\n  conditionValue: {\n    fontSize: 18,\n    fontWeight: '700',\n    marginBottom: 4,\n  },\n  conditionLabel: {\n    fontSize: 12,\n    textAlign: 'center',\n  },\n});\n","size_bytes":11111},"app/(tabs)/map.tsx":{"content":"import { Redirect } from 'expo-router';\n\nexport default function MapRedirect() {\n  return <Redirect href=\"/(tabs)\" />;\n}\n","size_bytes":121},"utils/marineData.ts":{"content":"\nexport interface Port {\n  id: string;\n  name: string;\n  country: string;\n  lat: number;\n  lng: number;\n  vessels: number;\n  type: string;\n}\n\nexport interface Vessel {\n  id: string;\n  name: string;\n  type: string;\n  distance: string;\n  status: 'Active' | 'Idle' | 'Anchored';\n  speed: string;\n  heading: string;\n  lastUpdate: string;\n}\n\n// Major Malaysian Ports\nexport const MAJOR_PORTS: Port[] = [\n  { id: 'MYPKG', name: 'Port Klang', country: 'Malaysia', lat: 3.0000, lng: 101.3833, vessels: 156, type: 'Commercial' },\n  { id: 'MYTPP', name: 'Tanjung Pelepas', country: 'Malaysia', lat: 1.3667, lng: 103.5500, vessels: 142, type: 'Commercial' },\n  { id: 'MYPEN', name: 'Penang Port', country: 'Malaysia', lat: 5.4164, lng: 100.3327, vessels: 98, type: 'Commercial' },\n  { id: 'MYPGU', name: 'Johor Port', country: 'Malaysia', lat: 1.4655, lng: 103.7578, vessels: 87, type: 'Commercial' },\n  { id: 'MYBTU', name: 'Bintulu Port', country: 'Malaysia', lat: 3.2167, lng: 113.0667, vessels: 74, type: 'Commercial/LNG' },\n  { id: 'MYKUA', name: 'Kuantan Port', country: 'Malaysia', lat: 3.9667, lng: 103.4333, vessels: 63, type: 'Commercial' },\n  { id: 'MYLMU', name: 'Lumut Port', country: 'Malaysia', lat: 4.2333, lng: 100.6167, vessels: 45, type: 'Naval/Commercial' },\n  { id: 'MYKEM', name: 'Kemaman Port', country: 'Malaysia', lat: 4.2333, lng: 103.4167, vessels: 52, type: 'Commercial' },\n];\n\nexport const NEARBY_VESSELS: Vessel[] = [\n  { id: 'V001', name: 'Nelayan Jaya', type: 'Fishing Vessel', distance: '1.8 km', status: 'Active', speed: '7.2 kn', heading: '045¬∞', lastUpdate: '2 min ago' },\n  { id: 'V002', name: 'Putra Laut', type: 'Fishing Vessel', distance: '3.5 km', status: 'Active', speed: '6.8 kn', heading: '180¬∞', lastUpdate: '5 min ago' },\n  { id: 'V003', name: 'Maersk Essex', type: 'Cargo Ship', distance: '12.3 km', status: 'Active', speed: '14.5 kn', heading: '270¬∞', lastUpdate: '3 min ago' },\n  { id: 'V004', name: 'Ikan Bilis 5', type: 'Fishing Vessel', distance: '4.7 km', status: 'Idle', speed: '0 kn', heading: 'N/A', lastUpdate: '15 min ago' },\n  { id: 'V005', name: 'MSC Mediterranean', type: 'Container Ship', distance: '18.9 km', status: 'Active', speed: '16.3 kn', heading: '090¬∞', lastUpdate: '4 min ago' },\n  { id: 'V006', name: 'Nelayan Bahagia', type: 'Fishing Vessel', distance: '5.2 km', status: 'Active', speed: '5.5 kn', heading: '315¬∞', lastUpdate: '7 min ago' },\n  { id: 'V007', name: 'Selat Express', type: 'Passenger Ferry', distance: '8.1 km', status: 'Active', speed: '18.2 kn', heading: '225¬∞', lastUpdate: '2 min ago' },\n  { id: 'V008', name: 'Petronas Marine 3', type: 'Tanker', distance: '14.5 km', status: 'Anchored', speed: '0 kn', heading: 'N/A', lastUpdate: '20 min ago' },\n];\n\nexport const FISHING_ZONES = [\n  { id: 'FZ001', name: 'Straits of Malacca - North', lat: 5.5, lng: 100.2, quality: 'Excellent', fish: ['Selar', 'Kembung', 'Cencaru'] },\n  { id: 'FZ002', name: 'South China Sea - East Coast', lat: 4.8, lng: 103.5, quality: 'Good', fish: ['Tenggiri', 'Jenahak', 'Bawal'] },\n  { id: 'FZ003', name: 'Terengganu Waters', lat: 5.3, lng: 103.1, quality: 'Excellent', fish: ['Ikan Merah', 'Kerapu', 'Pari'] },\n];\n\nexport const getVesselIcon = (type: string): string => {\n  switch (type.toLowerCase()) {\n    case 'fishing vessel': return 'üé£';\n    case 'cargo ship': return 'üö¢';\n    case 'container ship': return 'üö¢';\n    case 'passenger ferry': return '‚õ¥Ô∏è';\n    case 'yacht': return '‚õµ';\n    case 'tanker': return 'üõ¢Ô∏è';\n    default: return 'üö¢';\n  }\n};\n","size_bytes":3537},"app/(tabs)/sos.tsx":{"content":"\nimport React, { useState, useEffect } from 'react';\nimport { View, Text, StyleSheet, TouchableOpacity, ScrollView, Alert, Linking } from 'react-native';\nimport { useColorScheme } from '@/hooks/useColorScheme';\nimport { Colors } from '@/constants/Colors';\nimport { Theme } from '@/constants/Theme';\nimport * as Location from 'expo-location';\nimport { getCurrentUser } from '@/utils/auth';\n\nexport default function SOSScreen() {\n  const colorScheme = useColorScheme();\n  const colors = Colors[colorScheme ?? 'light'];\n  const [sosActive, setSosActive] = useState(false);\n  const [userLocation, setUserLocation] = useState<{ latitude: number; longitude: number } | null>(null);\n  const [currentUser, setCurrentUser] = useState<any>(null);\n\n  useEffect(() => {\n    loadUserData();\n    getCurrentLocation();\n  }, []);\n\n  const loadUserData = async () => {\n    const user = await getCurrentUser();\n    setCurrentUser(user);\n  };\n\n  const getCurrentLocation = async () => {\n    const { status } = await Location.requestForegroundPermissionsAsync();\n    if (status === 'granted') {\n      const location = await Location.getCurrentPositionAsync({});\n      setUserLocation({\n        latitude: location.coords.latitude,\n        longitude: location.coords.longitude,\n      });\n    }\n  };\n\n  const emergencyContacts = [\n    { \n      id: 1, \n      name: 'Malaysian Maritime Enforcement Agency (MMEA)', \n      phone: '+60380008000', \n      type: 'Authority',\n      description: '24/7 Maritime Emergency Hotline'\n    },\n    { \n      id: 2, \n      name: 'MMEA Emergency Hotline', \n      phone: '999', \n      type: 'Authority',\n      description: 'Emergency Services Malaysia'\n    },\n    { \n      id: 3, \n      name: 'Marine Police', \n      phone: '+60322662222', \n      type: 'Authority',\n      description: 'Royal Malaysian Marine Police'\n    },\n    { \n      id: 4, \n      name: 'MERS 999', \n      phone: '999', \n      type: 'Authority',\n      description: 'Malaysia Emergency Response Services'\n    },\n  ];\n\n  const makeEmergencyCall = (phone: string, name: string) => {\n    Alert.alert(\n      `Call ${name}?`,\n      `This will dial ${phone} for emergency assistance.`,\n      [\n        { text: 'Cancel', style: 'cancel' },\n        {\n          text: 'Call Now',\n          style: 'destructive',\n          onPress: () => {\n            Linking.openURL(`tel:${phone}`);\n          },\n        },\n      ]\n    );\n  };\n\n  const handleSOS = async () => {\n    if (!userLocation) {\n      Alert.alert('Location Required', 'Please enable location services to send SOS.');\n      return;\n    }\n\n    Alert.alert(\n      'Send SOS Alert?',\n      'This will:\\n‚Ä¢ Send your location to emergency services\\n‚Ä¢ Alert nearby vessels\\n‚Ä¢ Notify registered contacts\\n‚Ä¢ Activate emergency beacon',\n      [\n        { text: 'Cancel', style: 'cancel' },\n        {\n          text: 'Send SOS',\n          style: 'destructive',\n          onPress: async () => {\n            setSosActive(true);\n            \n            // In production, send to backend API:\n            // await fetch('https://your-backend/api/sos', {\n            //   method: 'POST',\n            //   body: JSON.stringify({\n            //     userId: currentUser?.id,\n            //     location: userLocation,\n            //     timestamp: new Date().toISOString(),\n            //     vesselInfo: currentUser?.vesselInfo\n            //   })\n            // });\n\n            // Simulate SMS to emergency services\n            const message = `MARITIME EMERGENCY: ${currentUser?.vesselInfo?.vesselName || 'Unknown Vessel'} at ${userLocation.latitude.toFixed(6)}¬∞N, ${userLocation.longitude.toFixed(6)}¬∞E. Immediate assistance required.`;\n            \n            // Auto-dial MMEA\n            setTimeout(() => {\n              Alert.alert(\n                'SOS Activated!',\n                'Emergency services have been notified.\\n\\nDo you want to call MMEA now?',\n                [\n                  { text: 'No', style: 'cancel' },\n                  { \n                    text: 'Call MMEA',\n                    onPress: () => Linking.openURL('tel:999')\n                  },\n                ]\n              );\n            }, 1000);\n          },\n        },\n      ]\n    );\n  };\n\n  const cancelSOS = () => {\n    Alert.alert(\n      'Cancel SOS?',\n      'Are you sure you want to cancel the emergency alert?',\n      [\n        { text: 'No', style: 'cancel' },\n        {\n          text: 'Yes, Cancel',\n          onPress: () => {\n            setSosActive(false);\n            Alert.alert('SOS Cancelled', 'Emergency alert has been deactivated.');\n          },\n        },\n      ]\n    );\n  };\n\n  return (\n    <ScrollView style={[styles.container, { backgroundColor: colors.background }]}>\n      <View style={[styles.header, { backgroundColor: colors.danger }]}>\n        <Text style={styles.headerTitle}>Emergency SOS</Text>\n        <Text style={styles.headerSubtitle}>Quick Emergency Response</Text>\n      </View>\n\n      <View style={styles.sosSection}>\n        {sosActive && (\n          <View style={[styles.activeAlert, { backgroundColor: colors.danger }]}>\n            <Text style={styles.activeAlertText}>üö® SOS ACTIVE</Text>\n            <Text style={styles.activeAlertSubtext}>\n              Emergency services notified ‚Ä¢ Help is on the way\n            </Text>\n            <TouchableOpacity\n              style={styles.cancelButton}\n              onPress={cancelSOS}\n            >\n              <Text style={styles.cancelButtonText}>Cancel SOS</Text>\n            </TouchableOpacity>\n          </View>\n        )}\n\n        <TouchableOpacity\n          style={[\n            styles.sosButton, \n            { backgroundColor: sosActive ? '#FF3B30' : colors.danger }\n          ]}\n          onPress={sosActive ? cancelSOS : handleSOS}\n          activeOpacity={0.8}\n        >\n          <Text style={styles.sosIcon}>üö®</Text>\n          <Text style={styles.sosText}>{sosActive ? 'SOS ACTIVE' : 'SEND SOS'}</Text>\n          <Text style={styles.sosSubtext}>\n            {sosActive ? 'Tap to cancel' : 'Press and hold for emergency'}\n          </Text>\n        </TouchableOpacity>\n\n        <View style={[styles.infoCard, { backgroundColor: colors.card, borderColor: colors.border }]}>\n          <Text style={[styles.infoTitle, { color: colors.text }]}>üìç Current Location</Text>\n          {userLocation ? (\n            <>\n              <Text style={[styles.infoText, { color: colors.icon }]}>\n                {userLocation.latitude.toFixed(6)}¬∞N, {userLocation.longitude.toFixed(6)}¬∞E\n              </Text>\n              {currentUser?.vesselInfo && (\n                <Text style={[styles.infoSubtext, { color: colors.icon }]}>\n                  Vessel: {currentUser.vesselInfo.vesselName}\n                </Text>\n              )}\n            </>\n          ) : (\n            <Text style={[styles.infoText, { color: colors.icon }]}>\n              Fetching location...\n            </Text>\n          )}\n        </View>\n      </View>\n\n      <View style={styles.contactsSection}>\n        <Text style={[styles.sectionTitle, { color: colors.text }]}>Emergency Contacts</Text>\n        {emergencyContacts.map((contact) => (\n          <View\n            key={contact.id}\n            style={[styles.contactCard, { backgroundColor: colors.card, borderColor: colors.border }]}\n          >\n            <View style={styles.contactInfo}>\n              <Text style={[styles.contactName, { color: colors.text }]}>\n                {contact.type === 'Authority' ? 'üöì' : 'üë§'} {contact.name}\n              </Text>\n              <Text style={[styles.contactType, { color: colors.icon }]}>\n                {contact.description}\n              </Text>\n              <Text style={[styles.contactPhone, { color: colors.primary }]}>\n                {contact.phone}\n              </Text>\n            </View>\n            <TouchableOpacity\n              style={[styles.callButton, { backgroundColor: colors.primary }]}\n              onPress={() => makeEmergencyCall(contact.phone, contact.name)}\n            >\n              <Text style={styles.callText}>üìû Call</Text>\n            </TouchableOpacity>\n          </View>\n        ))}\n      </View>\n\n      <View style={[styles.instructionsCard, { backgroundColor: colors.card, borderColor: colors.border }]}>\n        <Text style={[styles.instructionsTitle, { color: colors.danger }]}>\n          ‚ö†Ô∏è Emergency Instructions\n        </Text>\n        <Text style={[styles.instructionsText, { color: colors.text }]}>\n          1. Press the SOS button to send your location to emergency services{'\\n'}\n          2. Your GPS coordinates will be broadcast to MMEA and nearby vessels{'\\n'}\n          3. Stay calm and secure your vessel{'\\n'}\n          4. Monitor VHF Channel 16 for rescue coordination{'\\n'}\n          5. Keep your phone charged and accessible{'\\n'}\n          6. Prepare life jackets and emergency equipment{'\\n'}\n          7. Wait for confirmation from rescue services\n        </Text>\n      </View>\n    </ScrollView>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n  },\n  header: {\n    paddingTop: 60,\n    paddingBottom: 24,\n    paddingHorizontal: Theme.spacing.lg,\n  },\n  headerTitle: {\n    fontSize: Theme.fonts.sizes.xxxl,\n    fontWeight: Theme.fonts.weights.bold,\n    color: '#fff',\n    letterSpacing: -0.5,\n  },\n  headerSubtitle: {\n    fontSize: Theme.fonts.sizes.base,\n    color: '#fff',\n    opacity: 0.95,\n    marginTop: Theme.spacing.xs,\n    fontWeight: Theme.fonts.weights.medium,\n  },\n  sosSection: {\n    padding: Theme.spacing.xl,\n    alignItems: 'center',\n  },\n  activeAlert: {\n    width: '100%',\n    padding: Theme.spacing.xl,\n    borderRadius: Theme.radius.lg,\n    alignItems: 'center',\n    marginBottom: Theme.spacing.lg,\n    ...Theme.shadows.lg,\n  },\n  activeAlertText: {\n    color: '#fff',\n    fontSize: Theme.fonts.sizes.xxl,\n    fontWeight: Theme.fonts.weights.heavy,\n    letterSpacing: 1,\n  },\n  activeAlertSubtext: {\n    color: '#fff',\n    fontSize: Theme.fonts.sizes.base,\n    marginTop: Theme.spacing.sm,\n    textAlign: 'center',\n    fontWeight: Theme.fonts.weights.medium,\n  },\n  cancelButton: {\n    marginTop: Theme.spacing.base,\n    paddingVertical: Theme.spacing.md,\n    paddingHorizontal: Theme.spacing.xl,\n    backgroundColor: 'rgba(255,255,255,0.25)',\n    borderRadius: Theme.radius.full,\n  },\n  cancelButtonText: {\n    color: '#fff',\n    fontWeight: Theme.fonts.weights.bold,\n    fontSize: Theme.fonts.sizes.base,\n  },\n  sosButton: {\n    width: 220,\n    height: 220,\n    borderRadius: 110,\n    justifyContent: 'center',\n    alignItems: 'center',\n    marginVertical: Theme.spacing.xxxl,\n    ...Theme.shadows.xl,\n  },\n  sosIcon: {\n    fontSize: 60,\n    marginBottom: 8,\n  },\n  sosText: {\n    color: '#fff',\n    fontSize: 24,\n    fontWeight: 'bold',\n  },\n  sosSubtext: {\n    color: '#fff',\n    fontSize: 12,\n    marginTop: 8,\n    opacity: 0.9,\n  },\n  infoCard: {\n    width: '100%',\n    padding: Theme.spacing.xl,\n    borderRadius: Theme.radius.lg,\n    borderWidth: 0,\n    alignItems: 'center',\n    ...Theme.shadows.sm,\n  },\n  infoTitle: {\n    fontSize: Theme.fonts.sizes.lg,\n    fontWeight: Theme.fonts.weights.semibold,\n    marginBottom: Theme.spacing.md,\n  },\n  infoText: {\n    fontSize: Theme.fonts.sizes.xl,\n    fontWeight: Theme.fonts.weights.semibold,\n  },\n  infoSubtext: {\n    fontSize: Theme.fonts.sizes.base,\n    marginTop: Theme.spacing.sm,\n  },\n  contactsSection: {\n    padding: Theme.spacing.lg,\n  },\n  sectionTitle: {\n    fontSize: Theme.fonts.sizes.xxl,\n    fontWeight: Theme.fonts.weights.bold,\n    marginBottom: Theme.spacing.base,\n    letterSpacing: -0.5,\n  },\n  contactCard: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    padding: Theme.spacing.lg,\n    borderRadius: Theme.radius.md,\n    borderWidth: 0,\n    marginBottom: Theme.spacing.md,\n    ...Theme.shadows.sm,\n  },\n  contactInfo: {\n    flex: 1,\n  },\n  contactName: {\n    fontSize: 16,\n    fontWeight: '600',\n    marginBottom: 4,\n  },\n  contactType: {\n    fontSize: 12,\n    marginBottom: 4,\n  },\n  contactPhone: {\n    fontSize: 13,\n    fontWeight: '600',\n  },\n  callButton: {\n    paddingVertical: 10,\n    paddingHorizontal: 20,\n    borderRadius: 8,\n  },\n  callText: {\n    color: '#fff',\n    fontSize: 14,\n    fontWeight: 'bold',\n  },\n  instructionsCard: {\n    margin: 16,\n    padding: 20,\n    borderRadius: 12,\n    borderWidth: 1,\n  },\n  instructionsTitle: {\n    fontSize: 18,\n    fontWeight: 'bold',\n    marginBottom: 12,\n  },\n  instructionsText: {\n    fontSize: 14,\n    lineHeight: 24,\n  },\n});\n","size_bytes":12510},"app/(tabs)/chat.tsx":{"content":"\nimport React, { useState, useEffect, useRef } from 'react';\nimport {\n  View,\n  Text,\n  StyleSheet,\n  ScrollView,\n  TouchableOpacity,\n  TextInput,\n  KeyboardAvoidingView,\n  Platform,\n} from 'react-native';\nimport { useColorScheme } from '@/hooks/useColorScheme';\nimport { Colors } from '@/constants/Colors';\nimport { IconSymbol } from '@/components/ui/IconSymbol';\nimport { getNearbyTrackedVessels } from '@/utils/trackingService';\nimport { getCurrentUser } from '@/utils/auth';\nimport { sendMessage, getChatMessages, getChatRoom, subscribeToMessages } from '@/utils/realtimeChat';\nimport * as Location from 'expo-location';\n\ninterface Contact {\n  id: string;\n  name: string;\n  vessel: string;\n  distance: number;\n  lastMessage?: string;\n  unread?: number;\n}\n\nexport default function ChatScreen() {\n  const colorScheme = useColorScheme();\n  const isDark = colorScheme === 'dark';\n  const colors = Colors[isDark ? 'dark' : 'light'];\n  const [selectedContact, setSelectedContact] = useState<Contact | null>(null);\n  const [message, setMessage] = useState('');\n  const [contacts, setContacts] = useState<Contact[]>([]);\n  const [messages, setMessages] = useState<any[]>([]);\n  const [currentUser, setCurrentUser] = useState<any>(null);\n  const [chatId, setChatId] = useState<string>('');\n\n  const chatUnsubscribeRef = useRef<(() => void) | null>(null);\n  const isMountedRef = useRef<boolean>(true);\n\n  useEffect(() => {\n    isMountedRef.current = true;\n    loadCurrentUser();\n    loadNearbyContacts();\n\n    const interval = setInterval(loadNearbyContacts, 10000);\n    return () => {\n      isMountedRef.current = false;\n      clearInterval(interval);\n    };\n  }, []);\n\n  useEffect(() => {\n    let isActive = true;\n\n    const setupChatAsync = async () => {\n      if (!selectedContact || !currentUser) return;\n\n      const roomId = await getChatRoom(currentUser.id, selectedContact.id);\n      if (!isActive) return;\n\n      setChatId(roomId);\n\n      const chatMessages = await getChatMessages(roomId);\n      if (!isActive) return;\n\n      setMessages(chatMessages);\n\n      const subscription = subscribeToMessages(roomId, (newMessage) => {\n        if (isActive && newMessage.senderId !== currentUser.id) {\n          setMessages(prev => [...prev, newMessage]);\n        }\n      });\n\n      const unsubscribe = () => subscription?.unsubscribe();\n\n      if (isActive) {\n        chatUnsubscribeRef.current = unsubscribe;\n      } else {\n        unsubscribe();\n      }\n    };\n\n    setupChatAsync();\n\n    return () => {\n      isActive = false;\n      if (chatUnsubscribeRef.current) {\n        chatUnsubscribeRef.current();\n        chatUnsubscribeRef.current = null;\n      }\n    };\n  }, [selectedContact, currentUser]);\n\n  const loadCurrentUser = async () => {\n    const user = await getCurrentUser();\n    if (isMountedRef.current) {\n      setCurrentUser(user);\n    }\n  };\n\n  const loadNearbyContacts = async () => {\n    const { status } = await Location.requestForegroundPermissionsAsync();\n    if (status !== 'granted') return;\n\n    const location = await Location.getCurrentPositionAsync({});\n\n    if (!isMountedRef.current) return;\n\n    try {\n      const vessels = await getNearbyTrackedVessels(location.coords.latitude, location.coords.longitude, 100);\n\n      if (!isMountedRef.current) return;\n\n      const contactList: Contact[] = vessels.map(v => ({\n        id: v.userId,\n        name: v.vesselInfo.vesselName,\n        vessel: v.vesselInfo.vesselType,\n        distance: calculateDistance(\n          location.coords.latitude,\n          location.coords.longitude,\n          v.location.latitude,\n          v.location.longitude\n        ),\n      }));\n\n      setContacts(contactList);\n    } catch (error) {\n      setContacts([]);\n    }\n  };\n\n  const calculateDistance = (lat1: number, lon1: number, lat2: number, lon2: number): number => {\n    const R = 6371;\n    const dLat = (lat2 - lat1) * Math.PI / 180;\n    const dLon = (lon2 - lon1) * Math.PI / 180;\n    const a = \n      Math.sin(dLat/2) * Math.sin(dLat/2) +\n      Math.cos(lat1 * Math.PI / 180) * Math.cos(lat2 * Math.PI / 180) *\n      Math.sin(dLon/2) * Math.sin(dLon/2);\n    const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));\n    return R * c;\n  };\n\n  const handleSendMessage = async () => {\n    if (!message.trim() || !currentUser || !chatId) return;\n\n    const newMessage = await sendMessage(\n      chatId,\n      currentUser.id,\n      currentUser.name,\n      message.trim()\n    );\n\n    if (!isMountedRef.current) return;\n\n    setMessages(prev => [...prev, newMessage]);\n    setMessage('');\n  };\n\n  return (\n    <KeyboardAvoidingView \n      style={[styles.container, { backgroundColor: colors.background }]}\n      behavior={Platform.OS === 'ios' ? 'padding' : 'height'}\n    >\n      {selectedContact ? (\n        <View style={styles.chatView}>\n          <View style={[styles.chatHeader, { backgroundColor: isDark ? colors.card : '#FFFFFF', borderBottomColor: isDark ? colors.border : 'rgba(0,0,0,0.05)' }]}>\n            <TouchableOpacity onPress={() => setSelectedContact(null)} style={styles.backButton}>\n              <IconSymbol name=\"chevron.left\" size={24} color={colors.primary} />\n            </TouchableOpacity>\n            <View style={styles.chatHeaderInfo}>\n              <View style={styles.contactAvatar}>\n                <Text style={styles.avatarText}>üö¢</Text>\n              </View>\n              <View style={styles.headerTextContainer}>\n                <Text style={[styles.chatHeaderName, { color: colors.text }]}>\n                  {selectedContact.name}\n                </Text>\n                <Text style={[styles.chatHeaderStatus, { color: colors.secondaryText }]}>\n                  {selectedContact.distance.toFixed(1)} km away\n                </Text>\n              </View>\n            </View>\n            <TouchableOpacity style={styles.moreButton}>\n              <IconSymbol name=\"ellipsis.circle\" size={24} color={colors.text} />\n            </TouchableOpacity>\n          </View>\n\n          <ScrollView style={styles.messagesContainer} contentContainerStyle={styles.messagesContent}>\n            {messages.length === 0 ? (\n              <View style={styles.emptyState}>\n                <Text style={styles.emptyIcon}>üí¨</Text>\n                <Text style={[styles.emptyText, { color: colors.secondaryText }]}>\n                  No messages yet\n                </Text>\n                <Text style={[styles.emptySubtext, { color: colors.tertiaryText }]}>\n                  Start a conversation!\n                </Text>\n              </View>\n            ) : (\n              messages.map((msg) => (\n                <View\n                  key={msg.id}\n                  style={[\n                    styles.messageBubble,\n                    msg.senderId === currentUser?.id ? styles.myMessage : styles.theirMessage,\n                  ]}\n                >\n                  <View style={[\n                    styles.bubbleContainer,\n                    {\n                      backgroundColor: msg.senderId === currentUser?.id \n                        ? colors.primary \n                        : (isDark ? colors.card : '#F0F0F0'),\n                    },\n                  ]}>\n                    <Text\n                      style={[\n                        styles.messageText,\n                        { color: msg.senderId === currentUser?.id ? '#FFFFFF' : colors.text },\n                      ]}\n                    >\n                      {msg.text}\n                    </Text>\n                    <Text\n                      style={[\n                        styles.messageTime,\n                        { color: msg.senderId === currentUser?.id ? '#FFFFFF' : colors.secondaryText },\n                      ]}\n                    >\n                      {new Date(msg.timestamp).toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}\n                    </Text>\n                  </View>\n                </View>\n              ))\n            )}\n          </ScrollView>\n\n          <View style={[styles.inputContainer, { backgroundColor: isDark ? colors.card : '#FFFFFF', borderTopColor: isDark ? colors.border : 'rgba(0,0,0,0.05)' }]}>\n            <TextInput\n              style={[styles.input, { backgroundColor: isDark ? colors.background : '#F0F0F0', color: colors.text }]}\n              placeholder=\"Message...\"\n              placeholderTextColor={colors.secondaryText}\n              value={message}\n              onChangeText={setMessage}\n              multiline\n            />\n            <TouchableOpacity\n              style={[styles.sendButton, { opacity: message.trim() ? 1 : 0.4 }]}\n              onPress={handleSendMessage}\n              disabled={!message.trim()}\n            >\n              <IconSymbol name=\"paperplane.fill\" size={20} color={colors.primary} />\n            </TouchableOpacity>\n          </View>\n        </View>\n      ) : (\n        <View style={styles.contactsView}>\n          <View style={[styles.header, { backgroundColor: isDark ? colors.card : '#FFFFFF', borderBottomColor: isDark ? colors.border : 'rgba(0,0,0,0.05)' }]}>\n            <Text style={[styles.headerTitle, { color: colors.text }]}>Messages</Text>\n            <TouchableOpacity style={styles.composeButton}>\n              <IconSymbol name=\"square.and.pencil\" size={24} color={colors.text} />\n            </TouchableOpacity>\n          </View>\n\n          <ScrollView style={styles.contactsList}>\n            {contacts.length === 0 ? (\n              <View style={styles.emptyState}>\n                <Text style={styles.emptyIcon}>üåä</Text>\n                <Text style={[styles.emptyText, { color: colors.secondaryText }]}>\n                  No vessels nearby\n                </Text>\n                <Text style={[styles.emptySubtext, { color: colors.tertiaryText }]}>\n                  Enable tracking to connect with others\n                </Text>\n              </View>\n            ) : (\n              contacts.map((contact) => (\n                <TouchableOpacity\n                  key={contact.id}\n                  style={[styles.contactItem, { borderBottomColor: isDark ? colors.border : 'rgba(0,0,0,0.05)' }]}\n                  onPress={() => setSelectedContact(contact)}\n                >\n                  <View style={styles.contactAvatar}>\n                    <Text style={styles.avatarText}>üö¢</Text>\n                  </View>\n                  <View style={styles.contactInfo}>\n                    <Text style={[styles.contactName, { color: colors.text }]}>\n                      {contact.name}\n                    </Text>\n                    <Text style={[styles.contactMessage, { color: colors.secondaryText }]}>\n                      {contact.vessel} ‚Ä¢ {contact.distance.toFixed(1)} km away\n                    </Text>\n                  </View>\n                  <IconSymbol name=\"chevron.right\" size={20} color={colors.tertiaryText} />\n                </TouchableOpacity>\n              ))\n            )}\n          </ScrollView>\n        </View>\n      )}\n    </KeyboardAvoidingView>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n  },\n  contactsView: {\n    flex: 1,\n  },\n  header: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    paddingTop: 60,\n    paddingBottom: 16,\n    paddingHorizontal: 16,\n    borderBottomWidth: 1,\n  },\n  headerTitle: {\n    fontSize: 28,\n    fontWeight: '700',\n  },\n  composeButton: {\n    width: 40,\n    height: 40,\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  contactsList: {\n    flex: 1,\n  },\n  contactItem: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    padding: 16,\n    borderBottomWidth: 1,\n  },\n  contactAvatar: {\n    width: 56,\n    height: 56,\n    borderRadius: 28,\n    backgroundColor: '#007AFF20',\n    justifyContent: 'center',\n    alignItems: 'center',\n    marginRight: 12,\n  },\n  avatarText: {\n    fontSize: 28,\n  },\n  contactInfo: {\n    flex: 1,\n  },\n  contactName: {\n    fontSize: 16,\n    fontWeight: '600',\n    marginBottom: 4,\n  },\n  contactMessage: {\n    fontSize: 14,\n  },\n  chatView: {\n    flex: 1,\n  },\n  chatHeader: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    paddingTop: 60,\n    paddingBottom: 12,\n    paddingHorizontal: 8,\n    borderBottomWidth: 1,\n  },\n  backButton: {\n    width: 40,\n    height: 40,\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  chatHeaderInfo: {\n    flex: 1,\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: 12,\n  },\n  headerTextContainer: {\n    flex: 1,\n  },\n  chatHeaderName: {\n    fontSize: 16,\n    fontWeight: '600',\n    marginBottom: 2,\n  },\n  chatHeaderStatus: {\n    fontSize: 13,\n  },\n  moreButton: {\n    width: 40,\n    height: 40,\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  messagesContainer: {\n    flex: 1,\n  },\n  messagesContent: {\n    padding: 16,\n  },\n  messageBubble: {\n    marginBottom: 12,\n  },\n  myMessage: {\n    alignItems: 'flex-end',\n  },\n  theirMessage: {\n    alignItems: 'flex-start',\n  },\n  bubbleContainer: {\n    maxWidth: '75%',\n    borderRadius: 18,\n    padding: 12,\n  },\n  messageText: {\n    fontSize: 15,\n    lineHeight: 20,\n  },\n  messageTime: {\n    fontSize: 11,\n    marginTop: 4,\n    opacity: 0.7,\n  },\n  inputContainer: {\n    flexDirection: 'row',\n    alignItems: 'flex-end',\n    padding: 8,\n    borderTopWidth: 1,\n    gap: 8,\n  },\n  input: {\n    flex: 1,\n    borderRadius: 20,\n    paddingHorizontal: 16,\n    paddingVertical: 10,\n    fontSize: 15,\n    maxHeight: 100,\n  },\n  sendButton: {\n    width: 36,\n    height: 36,\n    borderRadius: 18,\n    justifyContent: 'center',\n    alignItems: 'center',\n    marginBottom: 4,\n  },\n  emptyState: {\n    alignItems: 'center',\n    justifyContent: 'center',\n    paddingVertical: 60,\n  },\n  emptyIcon: {\n    fontSize: 64,\n    marginBottom: 16,\n  },\n  emptyText: {\n    fontSize: 18,\n    fontWeight: '600',\n    marginBottom: 8,\n  },\n  emptySubtext: {\n    fontSize: 14,\n  },\n});\n","size_bytes":13864},"app/auth/register.tsx":{"content":"import React, { useState } from 'react';\nimport {\n  View,\n  Text,\n  TextInput,\n  TouchableOpacity,\n  StyleSheet,\n  ScrollView,\n  KeyboardAvoidingView,\n  Platform,\n} from 'react-native';\nimport { useRouter } from 'expo-router';\nimport { useColorScheme } from '@/hooks/useColorScheme';\nimport { Colors } from '@/constants/Colors';\n\nexport default function RegisterScreen() {\n  const [name, setName] = useState('');\n  const [email, setEmail] = useState('');\n  const [phone, setPhone] = useState('');\n  const [vesselName, setVesselName] = useState('');\n  const [vesselId, setVesselId] = useState('');\n  const [role, setRole] = useState('Fisherman');\n  const [password, setPassword] = useState('');\n  \n  const colorScheme = useColorScheme();\n  const colors = Colors[colorScheme ?? 'light'];\n  const router = useRouter();\n\n  const roles = ['Fisherman', 'Vessel Operator', 'Authority Contact'];\n\n  const handleRegister = () => {\n    router.replace('/(tabs)');\n  };\n\n  return (\n    <KeyboardAvoidingView\n      behavior={Platform.OS === 'ios' ? 'padding' : 'height'}\n      style={[styles.container, { backgroundColor: colors.background }]}\n    >\n      <ScrollView style={styles.scrollView} contentContainerStyle={styles.content}>\n        <Text style={[styles.title, { color: colors.primary }]}>Create Account</Text>\n        <Text style={[styles.subtitle, { color: colors.text }]}>\n          Join MarineTrack community\n        </Text>\n\n        <View style={styles.form}>\n          <TextInput\n            style={[styles.input, { backgroundColor: colors.card, color: colors.text, borderColor: colors.border }]}\n            placeholder=\"Full Name\"\n            placeholderTextColor={colors.icon}\n            value={name}\n            onChangeText={setName}\n          />\n\n          <TextInput\n            style={[styles.input, { backgroundColor: colors.card, color: colors.text, borderColor: colors.border }]}\n            placeholder=\"Email\"\n            placeholderTextColor={colors.icon}\n            value={email}\n            onChangeText={setEmail}\n            keyboardType=\"email-address\"\n            autoCapitalize=\"none\"\n          />\n\n          <TextInput\n            style={[styles.input, { backgroundColor: colors.card, color: colors.text, borderColor: colors.border }]}\n            placeholder=\"Phone Number\"\n            placeholderTextColor={colors.icon}\n            value={phone}\n            onChangeText={setPhone}\n            keyboardType=\"phone-pad\"\n          />\n\n          <TextInput\n            style={[styles.input, { backgroundColor: colors.card, color: colors.text, borderColor: colors.border }]}\n            placeholder=\"Vessel Name\"\n            placeholderTextColor={colors.icon}\n            value={vesselName}\n            onChangeText={setVesselName}\n          />\n\n          <TextInput\n            style={[styles.input, { backgroundColor: colors.card, color: colors.text, borderColor: colors.border }]}\n            placeholder=\"Vessel ID\"\n            placeholderTextColor={colors.icon}\n            value={vesselId}\n            onChangeText={setVesselId}\n          />\n\n          <Text style={[styles.label, { color: colors.text }]}>Select Role:</Text>\n          <View style={styles.roleContainer}>\n            {roles.map((r) => (\n              <TouchableOpacity\n                key={r}\n                style={[\n                  styles.roleButton,\n                  {\n                    backgroundColor: role === r ? colors.primary : colors.card,\n                    borderColor: colors.border,\n                  },\n                ]}\n                onPress={() => setRole(r)}\n              >\n                <Text style={[styles.roleText, { color: role === r ? '#fff' : colors.text }]}>\n                  {r}\n                </Text>\n              </TouchableOpacity>\n            ))}\n          </View>\n\n          <TextInput\n            style={[styles.input, { backgroundColor: colors.card, color: colors.text, borderColor: colors.border }]}\n            placeholder=\"Password\"\n            placeholderTextColor={colors.icon}\n            value={password}\n            onChangeText={setPassword}\n            secureTextEntry\n          />\n\n          <TouchableOpacity\n            style={[styles.registerButton, { backgroundColor: colors.primary }]}\n            onPress={handleRegister}\n          >\n            <Text style={styles.registerButtonText}>Create Account</Text>\n          </TouchableOpacity>\n\n          <TouchableOpacity onPress={() => router.back()}>\n            <Text style={[styles.loginText, { color: colors.icon }]}>\n              Already have an account? <Text style={{ color: colors.primary }}>Login</Text>\n            </Text>\n          </TouchableOpacity>\n        </View>\n      </ScrollView>\n    </KeyboardAvoidingView>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n  },\n  scrollView: {\n    flex: 1,\n  },\n  content: {\n    padding: 20,\n    paddingTop: 60,\n  },\n  title: {\n    fontSize: 32,\n    fontWeight: 'bold',\n    textAlign: 'center',\n    marginBottom: 8,\n  },\n  subtitle: {\n    fontSize: 16,\n    textAlign: 'center',\n    marginBottom: 30,\n  },\n  form: {\n    gap: 16,\n  },\n  input: {\n    height: 56,\n    borderWidth: 1,\n    borderRadius: 12,\n    paddingHorizontal: 16,\n    fontSize: 16,\n  },\n  label: {\n    fontSize: 16,\n    fontWeight: '600',\n    marginTop: 8,\n  },\n  roleContainer: {\n    flexDirection: 'row',\n    gap: 8,\n    flexWrap: 'wrap',\n  },\n  roleButton: {\n    paddingVertical: 12,\n    paddingHorizontal: 16,\n    borderRadius: 8,\n    borderWidth: 1,\n  },\n  roleText: {\n    fontSize: 14,\n    fontWeight: '600',\n  },\n  registerButton: {\n    height: 56,\n    borderRadius: 12,\n    justifyContent: 'center',\n    alignItems: 'center',\n    marginTop: 8,\n  },\n  registerButtonText: {\n    color: '#fff',\n    fontSize: 18,\n    fontWeight: 'bold',\n  },\n  loginText: {\n    textAlign: 'center',\n    marginTop: 16,\n    fontSize: 14,\n  },\n});\n","size_bytes":5883},"app/auth/_layout.tsx":{"content":"import { Stack } from 'expo-router';\n\nexport default function AuthLayout() {\n  return (\n    <Stack screenOptions={{ headerShown: false }}>\n      <Stack.Screen name=\"login\" />\n      <Stack.Screen name=\"register\" />\n    </Stack>\n  );\n}\n","size_bytes":234},"app/auth/email-login.tsx":{"content":"\nimport React, { useState } from 'react';\nimport {\n  View,\n  Text,\n  TextInput,\n  TouchableOpacity,\n  StyleSheet,\n  KeyboardAvoidingView,\n  Platform,\n  Alert,\n} from 'react-native';\nimport { useRouter } from 'expo-router';\nimport { useColorScheme } from '@/hooks/useColorScheme';\nimport { Colors } from '@/constants/Colors';\nimport { loginWithEmailPassword } from '@/utils/auth';\n\nexport default function EmailLoginScreen() {\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [loading, setLoading] = useState(false);\n  const colorScheme = useColorScheme();\n  const colors = Colors[colorScheme ?? 'light'];\n  const router = useRouter();\n\n  const handleLogin = async () => {\n    if (!email || !password) {\n      Alert.alert('Error', 'Please enter email and password');\n      return;\n    }\n\n    setLoading(true);\n    const success = await loginWithEmailPassword(email, password);\n    setLoading(false);\n\n    if (success) {\n      router.replace('/(tabs)');\n    } else {\n      Alert.alert('Error', 'Invalid email or password');\n    }\n  };\n\n  return (\n    <KeyboardAvoidingView\n      behavior={Platform.OS === 'ios' ? 'padding' : 'height'}\n      style={[styles.container, { backgroundColor: colors.background }]}\n    >\n      <View style={styles.content}>\n        <TouchableOpacity onPress={() => router.back()} style={styles.backButton}>\n          <Text style={[styles.backText, { color: colors.primary }]}>‚Üê Back</Text>\n        </TouchableOpacity>\n\n        <Text style={styles.logo}>üåä</Text>\n        <Text style={[styles.title, { color: colors.primary }]}>Email Sign In</Text>\n\n        <View style={styles.form}>\n          <TextInput\n            style={[styles.input, { backgroundColor: colors.card, color: colors.text, borderColor: colors.border }]}\n            placeholder=\"Email\"\n            placeholderTextColor={colors.icon}\n            value={email}\n            onChangeText={setEmail}\n            keyboardType=\"email-address\"\n            autoCapitalize=\"none\"\n            editable={!loading}\n          />\n\n          <TextInput\n            style={[styles.input, { backgroundColor: colors.card, color: colors.text, borderColor: colors.border }]}\n            placeholder=\"Password\"\n            placeholderTextColor={colors.icon}\n            value={password}\n            onChangeText={setPassword}\n            secureTextEntry\n            editable={!loading}\n          />\n\n          <TouchableOpacity\n            style={[styles.loginButton, { backgroundColor: colors.primary }]}\n            onPress={handleLogin}\n            disabled={loading}\n          >\n            <Text style={styles.loginButtonText}>\n              {loading ? 'Signing in...' : 'Sign In'}\n            </Text>\n          </TouchableOpacity>\n        </View>\n      </View>\n    </KeyboardAvoidingView>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n  },\n  content: {\n    flex: 1,\n    justifyContent: 'center',\n    padding: 20,\n  },\n  backButton: {\n    position: 'absolute',\n    top: 50,\n    left: 20,\n  },\n  backText: {\n    fontSize: 16,\n    fontWeight: '600',\n  },\n  logo: {\n    fontSize: 80,\n    textAlign: 'center',\n    marginBottom: 20,\n  },\n  title: {\n    fontSize: 36,\n    fontWeight: 'bold',\n    textAlign: 'center',\n    marginBottom: 40,\n  },\n  form: {\n    gap: 16,\n  },\n  input: {\n    height: 56,\n    borderWidth: 1,\n    borderRadius: 12,\n    paddingHorizontal: 16,\n    fontSize: 16,\n  },\n  loginButton: {\n    height: 56,\n    borderRadius: 12,\n    justifyContent: 'center',\n    alignItems: 'center',\n    marginTop: 8,\n  },\n  loginButtonText: {\n    color: '#fff',\n    fontSize: 18,\n    fontWeight: 'bold',\n  },\n});\n","size_bytes":3663},"components/LiveMap.tsx":{"content":"import React, { useState, useEffect } from 'react';\nimport { View, Text, StyleSheet, ScrollView } from 'react-native';\nimport { useColorScheme } from '@/hooks/useColorScheme';\nimport { Colors } from '@/constants/Colors';\nimport * as Location from 'expo-location';\n\ninterface LiveMapProps {\n  userLocation?: { lat: number; lng: number } | null;\n}\n\nexport default function LiveMap({ userLocation: propLocation }: LiveMapProps) {\n  const colorScheme = useColorScheme();\n  const colors = Colors[colorScheme ?? 'light'];\n  const [location, setLocation] = useState<{ lat: number; lng: number } | null>(propLocation || null);\n\n  useEffect(() => {\n    if (propLocation) {\n      setLocation(propLocation);\n    } else {\n      getCurrentLocation();\n    }\n  }, [propLocation]);\n\n  const getCurrentLocation = async () => {\n    try {\n      const { status } = await Location.requestForegroundPermissionsAsync();\n      if (status === 'granted') {\n        const loc = await Location.getCurrentPositionAsync({});\n        setLocation({\n          lat: loc.coords.latitude,\n          lng: loc.coords.longitude,\n        });\n      }\n    } catch (error) {\n      console.error('Error getting location:', error);\n    }\n  };\n\n  return (\n    <View style={styles.container}>\n      <View style={[styles.mapView, { backgroundColor: colors.background }]}>\n        <View style={styles.header}>\n          <Text style={[styles.title, { color: colors.text }]}>üìç Your Location</Text>\n        </View>\n\n        {location ? (\n          <View style={styles.locationContainer}>\n            <View style={[styles.marker, { backgroundColor: colors.primary }]}>\n              <Text style={styles.markerIcon}>üìç</Text>\n            </View>\n\n            <View style={styles.coordsContainer}>\n              <Text style={[styles.coordsLabel, { color: colors.icon }]}>Latitude</Text>\n              <Text style={[styles.coordsValue, { color: colors.text }]}>\n                {location.lat.toFixed(6)}¬∞N\n              </Text>\n            </View>\n\n            <View style={styles.coordsContainer}>\n              <Text style={[styles.coordsLabel, { color: colors.icon }]}>Longitude</Text>\n              <Text style={[styles.coordsValue, { color: colors.text }]}>\n                {location.lng.toFixed(6)}¬∞E\n              </Text>\n            </View>\n\n            <View style={[styles.infoBox, { backgroundColor: colors.card }]}>\n              <Text style={[styles.infoText, { color: colors.icon }]}>\n                ‚ÑπÔ∏è Full interactive map available on mobile app\n              </Text>\n            </View>\n          </View>\n        ) : (\n          <View style={styles.loadingContainer}>\n            <Text style={[styles.loadingText, { color: colors.icon }]}>\n              Getting your location...\n            </Text>\n          </View>\n        )}\n      </View>\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    width: '100%',\n    height: 300,\n  },\n  mapView: {\n    flex: 1,\n    borderRadius: 12,\n    padding: 20,\n    alignItems: 'center',\n  },\n  header: {\n    marginBottom: 20,\n  },\n  title: {\n    fontSize: 20,\n    fontWeight: 'bold',\n    textAlign: 'center',\n  },\n  locationContainer: {\n    width: '100%',\n    alignItems: 'center',\n    gap: 16,\n  },\n  marker: {\n    width: 60,\n    height: 60,\n    borderRadius: 30,\n    justifyContent: 'center',\n    alignItems: 'center',\n    marginBottom: 10,\n  },\n  markerIcon: {\n    fontSize: 30,\n  },\n  coordsContainer: {\n    width: '100%',\n    alignItems: 'center',\n  },\n  coordsLabel: {\n    fontSize: 12,\n    fontWeight: '600',\n    marginBottom: 4,\n  },\n  coordsValue: {\n    fontSize: 18,\n    fontWeight: 'bold',\n  },\n  infoBox: {\n    marginTop: 20,\n    padding: 12,\n    borderRadius: 8,\n    width: '100%',\n  },\n  infoText: {\n    fontSize: 12,\n    textAlign: 'center',\n  },\n  loadingContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  loadingText: {\n    fontSize: 14,\n  },\n});","size_bytes":3931},"utils/trackingService.ts":{"content":"interface VesselTrackingData {\n  userId: string;\n  vesselInfo: {\n    vesselName: string;\n    vesselId: string;\n    vesselType: string;\n    mmsi?: string;\n    imo?: string;\n  };\n  location: {\n    latitude: number;\n    longitude: number;\n    heading?: number;\n    speed?: number;\n    timestamp: string;\n  };\n  status: 'Active' | 'Idle' | 'Anchored';\n}\n\ninterface TrackedVessel extends VesselTrackingData {\n  id: string;\n  lastUpdate: string;\n}\n\n// Store tracking data locally (in production, replace with actual backend API)\nconst TRACKING_STORAGE_KEY = '@marinetrack_vessel_tracking';\nconst TRACKED_VESSELS_KEY = '@marinetrack_tracked_vessels';\n\n// Send tracking data to backend\nexport const sendTrackingData = async (data: VesselTrackingData): Promise<boolean> => {\n  try {\n    // Store locally in AsyncStorage as backup\n    const AsyncStorage = (await import('@react-native-async-storage/async-storage')).default;\n    await AsyncStorage.setItem(TRACKING_STORAGE_KEY, JSON.stringify(data));\n\n    // Also store in local database for offline support\n    const { saveTrackingData } = await import('./database');\n    await saveTrackingData({\n      userId: data.userId,\n      vesselName: data.vesselInfo.vesselName,\n      location: {\n        latitude: data.location.latitude,\n        longitude: data.location.longitude,\n        speed: data.location.speed || 0,\n        heading: data.location.heading || 0,\n        timestamp: data.location.timestamp,\n      },\n      status: data.status,\n    });\n\n    // Send to backend server\n    const { getBackendUrl } = await import('../config');\n    const backendUrl = getBackendUrl();\n    \n    const response = await fetch(`${backendUrl}/api/tracking`, {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify(data)\n    });\n    \n    if (!response.ok) {\n      throw new Error(`Backend responded with status: ${response.status}`);\n    }\n\n    console.log('AIS Broadcasting:', data.vesselInfo.vesselName, 'at', data.location.latitude.toFixed(4), data.location.longitude.toFixed(4));\n    return true;\n  } catch (error) {\n    console.error('Error sending tracking data:', error);\n    // Return true anyway since we stored locally\n    return true;\n  }\n};\n\n// Get current tracking data\nexport const getTrackingData = async (): Promise<VesselTrackingData | null> => {\n  try {\n    const AsyncStorage = (await import('@react-native-async-storage/async-storage')).default;\n    const data = await AsyncStorage.getItem(TRACKING_STORAGE_KEY);\n    return data ? JSON.parse(data) : null;\n  } catch (error) {\n    console.error('Error getting tracking data:', error);\n    return null;\n  }\n};\n\n// Get nearby tracked vessels from backend server\nexport const getNearbyTrackedVessels = async (\n  userLat: number,\n  userLng: number,\n  radiusKm: number = 100 // Increased default radius to 100km for better detection\n): Promise<TrackedVessel[]> => {\n  try {\n    // Try to fetch from backend server first\n    const { getBackendUrl } = await import('../config');\n    const backendUrl = getBackendUrl();\n    \n    const response = await fetch(\n      `${backendUrl}/api/vessels/nearby?lat=${userLat}&lng=${userLng}&radius=${radiusKm}`,\n      {\n        method: 'GET',\n        headers: { 'Content-Type': 'application/json' },\n      }\n    );\n    \n    if (!response.ok) {\n      throw new Error(`Backend responded with status: ${response.status}`);\n    }\n    \n    const vessels = await response.json();\n    return vessels;\n  } catch (error) {\n    console.error('Error fetching nearby vessels from backend:', error);\n    \n    // Fallback to local database if backend is unavailable\n    try {\n      const { getAllTrackingData } = await import('./database');\n      const allVessels = await getAllTrackingData();\n\n      const nearby = allVessels.filter(vessel => {\n        const distance = calculateDistance(\n          userLat,\n          userLng,\n          vessel.location.latitude,\n          vessel.location.longitude\n        );\n        return distance <= radiusKm;\n      });\n\n      // Convert TrackingData to TrackedVessel format\n      return nearby.map(vessel => ({\n        id: vessel.userId,\n        userId: vessel.userId,\n        vesselInfo: {\n          vesselName: vessel.vesselName,\n          vesselId: vessel.userId,\n          vesselType: 'Vessel',\n        },\n        location: vessel.location,\n        status: vessel.status,\n        lastUpdate: vessel.location.timestamp,\n      }));\n    } catch (fallbackError) {\n      console.error('Error fetching from local database:', fallbackError);\n      return [];\n    }\n  }\n};\n\n// Calculate distance between two coordinates (Haversine formula)\nconst calculateDistance = (lat1: number, lon1: number, lat2: number, lon2: number): number => {\n  const R = 6371; // Earth's radius in km\n  const dLat = (lat2 - lat1) * Math.PI / 180;\n  const dLon = (lon2 - lon1) * Math.PI / 180;\n  const a = \n    Math.sin(dLat/2) * Math.sin(dLat/2) +\n    Math.cos(lat1 * Math.PI / 180) * Math.cos(lat2 * Math.PI / 180) *\n    Math.sin(dLon/2) * Math.sin(dLon/2);\n  const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));\n  return R * c;\n};\n\n// Start continuous tracking\nexport const startTracking = (\n  onLocationUpdate: (location: { latitude: number; longitude: number }) => void\n) => {\n  const Location = require('expo-location');\n\n  return Location.watchPositionAsync(\n    {\n      accuracy: Location.Accuracy.High,\n      timeInterval: 5000, // Update every 5 seconds\n      distanceInterval: 10, // Or when moved 10 meters\n    },\n    (location: any) => {\n      onLocationUpdate({\n        latitude: location.coords.latitude,\n        longitude: location.coords.longitude,\n      });\n    }\n  );\n};","size_bytes":5664},"app/auth/login.tsx":{"content":"import React, { useState } from 'react';\nimport {\n  View,\n  Text,\n  TouchableOpacity,\n  StyleSheet,\n  KeyboardAvoidingView,\n  Platform,\n  Alert,\n} from 'react-native';\nimport { useRouter } from 'expo-router';\nimport { useColorScheme } from '@/hooks/useColorScheme';\nimport { Colors } from '@/constants/Colors';\nimport { createGuestUser, storeUser, User } from '@/utils/auth';\nimport * as WebBrowser from 'expo-web-browser';\nimport * as Google from 'expo-auth-session/providers/google';\n\n// Import database service\nimport { saveUserToDatabase } from '@/utils/database';\n\nWebBrowser.maybeCompleteAuthSession();\n\nexport default function LoginScreen() {\n  const [loading, setLoading] = useState(false);\n  const colorScheme = useColorScheme();\n  const colors = Colors[colorScheme ?? 'light'];\n  const router = useRouter();\n\n  // Google Sign-In configuration with actual credentials\n  const GOOGLE_WEB_CLIENT_ID = '960630751878-tpdhcrjg031td64gt1r0ae59ht856en9.apps.googleusercontent.com';\n  const GOOGLE_ANDROID_CLIENT_ID = '960630751878-rmkfkc6pfjutt2qo9n5rguqjc96mncsk.apps.googleusercontent.com';\n\n  const [request, response, promptAsync] = Google.useAuthRequest({\n    webClientId: GOOGLE_WEB_CLIENT_ID,\n    androidClientId: GOOGLE_ANDROID_CLIENT_ID,\n  });\n\n  React.useEffect(() => {\n    if (response?.type === 'success') {\n      const { authentication } = response;\n      handleGoogleSignInSuccess(authentication);\n    }\n  }, [response]);\n\n  const handleGoogleSignInSuccess = async (authentication: any) => {\n    setLoading(true);\n    try {\n      // Fetch user info from Google\n      const userInfoResponse = await fetch(\n        'https://www.googleapis.com/userinfo/v2/me',\n        {\n          headers: { Authorization: `Bearer ${authentication.accessToken}` },\n        }\n      );\n      const userInfo = await userInfoResponse.json();\n\n      const user: User = {\n        id: `google_${userInfo.id}`,\n        email: userInfo.email,\n        name: userInfo.name,\n        photoUrl: userInfo.picture,\n        isGuest: false,\n        createdAt: new Date().toISOString()\n      };\n\n      // Store user in AsyncStorage and database\n      await storeUser(user);\n\n      await saveUserToDatabase({\n        id: user.id,\n        email: user.email,\n        name: user.name,\n        photoUrl: user.photoUrl,\n        isGuest: false,\n        createdAt: user.createdAt,\n        lastLogin: new Date().toISOString(),\n      });\n\n      setLoading(false);\n      router.replace('/(tabs)');\n    } catch (error) {\n      setLoading(false);\n      Alert.alert('Error', 'Failed to sign in with Google. Please try another method.');\n    }\n  };\n\n  const handleGoogleSignIn = async () => {\n    try {\n      setLoading(true);\n      await promptAsync();\n    } catch (error) {\n      setLoading(false);\n      Alert.alert('Error', 'Failed to initiate Google sign-in. Please try another method.');\n    }\n  };\n\n  const handleEmailPasswordSignIn = () => {\n    router.push('/auth/email-login');\n  };\n\n  const handleGuestMode = () => {\n    router.push('/auth/vessel-registration');\n  };\n\n  const handleRegister = () => {\n    router.push('/auth/register');\n  };\n\n  return (\n    <KeyboardAvoidingView\n      behavior={Platform.OS === 'ios' ? 'padding' : 'height'}\n      style={[styles.container, { backgroundColor: colors.background }]}\n    >\n      <View style={styles.content}>\n        <Text style={styles.logo}>üåä</Text>\n        <Text style={[styles.title, { color: colors.primary }]}>MarineTrack</Text>\n        <Text style={[styles.subtitle, { color: colors.text }]}>\n          Your Safety Companion at Sea - Malaysia\n        </Text>\n\n        <View style={styles.form}>\n          <TouchableOpacity\n            style={[styles.googleButton, { backgroundColor: '#fff', borderColor: colors.border }]}\n            onPress={handleGoogleSignIn}\n            disabled={loading || !request}\n          >\n            <Text style={styles.googleIcon}>G</Text>\n            <Text style={[styles.googleButtonText, { color: '#000' }]}>\n              Continue with Google\n            </Text>\n          </TouchableOpacity>\n\n          <View style={styles.divider}>\n            <View style={[styles.dividerLine, { backgroundColor: colors.border }]} />\n            <Text style={[styles.dividerText, { color: colors.icon }]}>OR</Text>\n            <View style={[styles.dividerLine, { backgroundColor: colors.border }]} />\n          </View>\n\n          <TouchableOpacity\n            style={[styles.emailButton, { backgroundColor: colors.primary }]}\n            onPress={handleEmailPasswordSignIn}\n            disabled={loading}\n          >\n            <Text style={styles.emailButtonText}>Sign in with Email</Text>\n          </TouchableOpacity>\n\n          <TouchableOpacity\n            style={[styles.guestButton, { borderColor: colors.border }]}\n            onPress={handleGuestMode}\n            disabled={loading}\n          >\n            <Text style={[styles.guestButtonText, { color: colors.primary }]}>\n              Continue as Guest\n            </Text>\n          </TouchableOpacity>\n\n          <TouchableOpacity onPress={handleRegister} disabled={loading}>\n            <Text style={[styles.registerText, { color: colors.icon }]}>\n              Don't have an account? <Text style={{ color: colors.primary }}>Register</Text>\n            </Text>\n          </TouchableOpacity>\n        </View>\n      </View>\n    </KeyboardAvoidingView>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n  },\n  content: {\n    flex: 1,\n    justifyContent: 'center',\n    padding: 20,\n  },\n  logo: {\n    fontSize: 80,\n    textAlign: 'center',\n    marginBottom: 20,\n  },\n  title: {\n    fontSize: 36,\n    fontWeight: 'bold',\n    textAlign: 'center',\n    marginBottom: 8,\n  },\n  subtitle: {\n    fontSize: 16,\n    textAlign: 'center',\n    marginBottom: 40,\n  },\n  form: {\n    gap: 16,\n  },\n  googleButton: {\n    height: 56,\n    borderRadius: 12,\n    borderWidth: 1,\n    flexDirection: 'row',\n    justifyContent: 'center',\n    alignItems: 'center',\n    gap: 12,\n  },\n  googleIcon: {\n    fontSize: 24,\n    fontWeight: 'bold',\n  },\n  googleButtonText: {\n    fontSize: 16,\n    fontWeight: '600',\n  },\n  divider: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: 12,\n    marginVertical: 8,\n  },\n  dividerLine: {\n    flex: 1,\n    height: 1,\n  },\n  dividerText: {\n    fontSize: 14,\n    fontWeight: '600',\n  },\n  emailButton: {\n    height: 56,\n    borderRadius: 12,\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  emailButtonText: {\n    color: '#fff',\n    fontSize: 18,\n    fontWeight: 'bold',\n  },\n  guestButton: {\n    height: 56,\n    borderRadius: 12,\n    borderWidth: 2,\n    justifyContent: 'center',\n    alignItems: 'center',\n    backgroundColor: 'transparent',\n  },\n  guestButtonText: {\n    fontSize: 16,\n    fontWeight: '600',\n  },\n  registerText: {\n    textAlign: 'center',\n    marginTop: 16,\n    fontSize: 14,\n  },\n});","size_bytes":6873},"app/index.tsx":{"content":"import { Redirect } from 'expo-router';\n\nexport default function Index() {\n  return <Redirect href=\"/(tabs)/map\" />;\n}\n","size_bytes":119},"backend/server.js":{"content":"const express = require('express');\nconst cors = require('cors');\nconst http = require('http');\nconst { Server } = require('socket.io');\nconst fs = require('fs').promises;\nconst path = require('path');\nconst maritimeRoutes = require('./maritime-routes');\n\nconst app = express();\nconst server = http.createServer(app);\nconst io = new Server(server, {\n  cors: {\n    origin: '*',\n    methods: ['GET', 'POST']\n  }\n});\n\nconst PORT = process.env.PORT || 3000;\nconst DATA_DIR = path.join(__dirname, 'data');\nconst VESSELS_FILE = path.join(DATA_DIR, 'vessels.json');\nconst USERS_FILE = path.join(DATA_DIR, 'users.json');\nconst MESSAGES_FILE = path.join(DATA_DIR, 'messages.json');\nconst NOTIFICATIONS_FILE = path.join(DATA_DIR, 'notifications.json');\nconst BOAT_LIKES_FILE = path.join(DATA_DIR, 'boat_likes.json');\nconst BOAT_COMMENTS_FILE = path.join(DATA_DIR, 'boat_comments.json');\nconst PORTS_FILE = path.join(DATA_DIR, 'ports.json');\n\napp.use(cors());\napp.use(express.json());\n\n// Ensure data directory and files exist\nasync function ensureDataFiles() {\n  try {\n    await fs.mkdir(DATA_DIR, { recursive: true });\n    \n    // Initialize vessels file if it doesn't exist\n    try {\n      await fs.access(VESSELS_FILE);\n    } catch {\n      await fs.writeFile(VESSELS_FILE, JSON.stringify([], null, 2));\n    }\n    \n    // Initialize users file if it doesn't exist\n    try {\n      await fs.access(USERS_FILE);\n    } catch {\n      await fs.writeFile(USERS_FILE, JSON.stringify([], null, 2));\n    }\n    \n    // Initialize messages file if it doesn't exist\n    try {\n      await fs.access(MESSAGES_FILE);\n    } catch {\n      await fs.writeFile(MESSAGES_FILE, JSON.stringify([], null, 2));\n    }\n    \n    // Initialize notifications file if it doesn't exist\n    try {\n      await fs.access(NOTIFICATIONS_FILE);\n    } catch {\n      await fs.writeFile(NOTIFICATIONS_FILE, JSON.stringify([], null, 2));\n    }\n    \n    // Initialize boat likes file if it doesn't exist\n    try {\n      await fs.access(BOAT_LIKES_FILE);\n    } catch {\n      await fs.writeFile(BOAT_LIKES_FILE, JSON.stringify([], null, 2));\n    }\n    \n    // Initialize boat comments file if it doesn't exist\n    try {\n      await fs.access(BOAT_COMMENTS_FILE);\n    } catch {\n      await fs.writeFile(BOAT_COMMENTS_FILE, JSON.stringify([], null, 2));\n    }\n    \n    console.log('Data files initialized');\n  } catch (error) {\n    console.error('Error ensuring data files:', error);\n  }\n}\n\n// Read JSON file helper\nasync function readJsonFile(filePath) {\n  try {\n    const data = await fs.readFile(filePath, 'utf8');\n    return JSON.parse(data);\n  } catch (error) {\n    console.error(`Error reading ${filePath}:`, error);\n    return [];\n  }\n}\n\n// Write JSON file helper\nasync function writeJsonFile(filePath, data) {\n  try {\n    await fs.writeFile(filePath, JSON.stringify(data, null, 2));\n    return true;\n  } catch (error) {\n    console.error(`Error writing ${filePath}:`, error);\n    return false;\n  }\n}\n\n// API Routes\n\n// Health check\napp.get('/api/health', (req, res) => {\n  res.json({ status: 'ok', message: 'MarineTrack backend server running' });\n});\n\n// Get all vessels\napp.get('/api/vessels', async (req, res) => {\n  try {\n    const vessels = await readJsonFile(VESSELS_FILE);\n    res.json(vessels);\n  } catch (error) {\n    res.status(500).json({ error: 'Failed to fetch vessels' });\n  }\n});\n\n// Get nearby vessels\napp.get('/api/vessels/nearby', async (req, res) => {\n  try {\n    const { lat, lng, radius = 100 } = req.query;\n    \n    if (!lat || !lng) {\n      return res.status(400).json({ error: 'Latitude and longitude required' });\n    }\n    \n    const vessels = await readJsonFile(VESSELS_FILE);\n    const userLat = parseFloat(lat);\n    const userLng = parseFloat(lng);\n    const radiusKm = parseFloat(radius);\n    \n    const nearbyVessels = vessels.filter(vessel => {\n      const distance = calculateDistance(\n        userLat,\n        userLng,\n        vessel.location.latitude,\n        vessel.location.longitude\n      );\n      return distance <= radiusKm;\n    });\n    \n    res.json(nearbyVessels);\n  } catch (error) {\n    res.status(500).json({ error: 'Failed to fetch nearby vessels' });\n  }\n});\n\n// Save vessel tracking data\napp.post('/api/tracking', async (req, res) => {\n  try {\n    const trackingData = req.body;\n    \n    if (!trackingData.userId || !trackingData.vesselInfo || !trackingData.location) {\n      return res.status(400).json({ error: 'Invalid tracking data' });\n    }\n    \n    const vessels = await readJsonFile(VESSELS_FILE);\n    const existingIndex = vessels.findIndex(v => v.userId === trackingData.userId);\n    \n    const vesselData = {\n      id: trackingData.userId, // Add id field for frontend compatibility\n      ...trackingData,\n      lastUpdate: new Date().toISOString()\n    };\n    \n    if (existingIndex >= 0) {\n      vessels[existingIndex] = vesselData;\n    } else {\n      vessels.push(vesselData);\n    }\n    \n    await writeJsonFile(VESSELS_FILE, vessels);\n    \n    // Broadcast to all connected clients\n    io.emit('vessel_update', vesselData);\n    \n    res.json({ success: true, message: 'Tracking data saved' });\n  } catch (error) {\n    console.error('Error saving tracking data:', error);\n    res.status(500).json({ error: 'Failed to save tracking data' });\n  }\n});\n\n// Save user data\napp.post('/api/users', async (req, res) => {\n  try {\n    const userData = req.body;\n    \n    if (!userData.id) {\n      return res.status(400).json({ error: 'User ID required' });\n    }\n    \n    const users = await readJsonFile(USERS_FILE);\n    const existingIndex = users.findIndex(u => u.id === userData.id);\n    \n    if (existingIndex >= 0) {\n      users[existingIndex] = { ...userData, lastLogin: new Date().toISOString() };\n    } else {\n      users.push({ ...userData, createdAt: new Date().toISOString() });\n    }\n    \n    await writeJsonFile(USERS_FILE, users);\n    \n    res.json({ success: true, message: 'User data saved' });\n  } catch (error) {\n    res.status(500).json({ error: 'Failed to save user data' });\n  }\n});\n\n// Get messages\napp.get('/api/messages', async (req, res) => {\n  try {\n    const messages = await readJsonFile(MESSAGES_FILE);\n    res.json(messages);\n  } catch (error) {\n    res.status(500).json({ error: 'Failed to fetch messages' });\n  }\n});\n\n// Save message\napp.post('/api/messages', async (req, res) => {\n  try {\n    const message = req.body;\n    const messages = await readJsonFile(MESSAGES_FILE);\n    \n    const newMessage = {\n      ...message,\n      id: Date.now().toString(),\n      timestamp: new Date().toISOString()\n    };\n    \n    messages.push(newMessage);\n    await writeJsonFile(MESSAGES_FILE, messages);\n    \n    // Broadcast to all connected clients\n    io.emit('new_message', newMessage);\n    \n    // Send notification to recipient\n    io.emit('notification', {\n      type: 'chat_message',\n      title: 'New Message',\n      message: `${message.senderName} sent you a message`,\n      recipientId: message.recipientId,\n      data: newMessage\n    });\n    \n    res.json({ success: true, message: newMessage });\n  } catch (error) {\n    res.status(500).json({ error: 'Failed to save message' });\n  }\n});\n\n// Like a boat\napp.post('/api/boats/like', async (req, res) => {\n  try {\n    const { userId, boatId, userName } = req.body;\n    const likes = await readJsonFile(BOAT_LIKES_FILE);\n    \n    const existingLike = likes.find(l => l.userId === userId && l.boatId === boatId);\n    \n    if (!existingLike) {\n      const newLike = {\n        id: Date.now().toString(),\n        userId,\n        boatId,\n        userName,\n        timestamp: new Date().toISOString()\n      };\n      \n      likes.push(newLike);\n      await writeJsonFile(BOAT_LIKES_FILE, likes);\n      \n      // Send notification\n      io.emit('notification', {\n        type: 'boat_liked',\n        title: 'Boat Liked',\n        message: `${userName} liked your boat!`,\n        recipientId: boatId,\n        data: newLike\n      });\n      \n      res.json({ success: true, like: newLike });\n    } else {\n      res.json({ success: true, message: 'Already liked' });\n    }\n  } catch (error) {\n    res.status(500).json({ error: 'Failed to like boat' });\n  }\n});\n\n// Comment on a boat\napp.post('/api/boats/comment', async (req, res) => {\n  try {\n    const { userId, boatId, userName, comment } = req.body;\n    const comments = await readJsonFile(BOAT_COMMENTS_FILE);\n    \n    const newComment = {\n      id: Date.now().toString(),\n      userId,\n      boatId,\n      userName,\n      comment,\n      timestamp: new Date().toISOString()\n    };\n    \n    comments.push(newComment);\n    await writeJsonFile(BOAT_COMMENTS_FILE, comments);\n    \n    // Send notification\n    io.emit('notification', {\n      type: 'boat_commented',\n      title: 'New Comment',\n      message: `${userName} commented on your boat: \"${comment}\"`,\n      recipientId: boatId,\n      data: newComment\n    });\n    \n    res.json({ success: true, comment: newComment });\n  } catch (error) {\n    res.status(500).json({ error: 'Failed to comment on boat' });\n  }\n});\n\n// Get boat likes\napp.get('/api/boats/:boatId/likes', async (req, res) => {\n  try {\n    const { boatId } = req.params;\n    const likes = await readJsonFile(BOAT_LIKES_FILE);\n    const boatLikes = likes.filter(l => l.boatId === boatId);\n    res.json(boatLikes);\n  } catch (error) {\n    res.status(500).json({ error: 'Failed to fetch boat likes' });\n  }\n});\n\n// Get boat comments\napp.get('/api/boats/:boatId/comments', async (req, res) => {\n  try {\n    const { boatId } = req.params;\n    const comments = await readJsonFile(BOAT_COMMENTS_FILE);\n    const boatComments = comments.filter(c => c.boatId === boatId);\n    res.json(boatComments);\n  } catch (error) {\n    res.status(500).json({ error: 'Failed to fetch boat comments' });\n  }\n});\n\n// Search ports by name\napp.get('/api/ports/search', async (req, res) => {\n  try {\n    const { query } = req.query;\n    \n    if (!query || query.length < 2) {\n      return res.json([]);\n    }\n    \n    const ports = await readJsonFile(PORTS_FILE);\n    const searchTerm = query.toLowerCase();\n    \n    const results = ports.filter(port => {\n      return (\n        port.name.toLowerCase().includes(searchTerm) ||\n        port.city.toLowerCase().includes(searchTerm) ||\n        port.country.toLowerCase().includes(searchTerm) ||\n        port.id.toLowerCase().includes(searchTerm) ||\n        port.aliases.some(alias => alias.toLowerCase().includes(searchTerm))\n      );\n    }).slice(0, 10);\n    \n    res.json(results);\n  } catch (error) {\n    console.error('Port search error:', error);\n    res.status(500).json({ error: 'Failed to search ports' });\n  }\n});\n\n// Get port by ID\napp.get('/api/ports/:portId', async (req, res) => {\n  try {\n    const { portId } = req.params;\n    const ports = await readJsonFile(PORTS_FILE);\n    const port = ports.find(p => p.id === portId);\n    \n    if (!port) {\n      return res.status(404).json({ error: 'Port not found' });\n    }\n    \n    res.json(port);\n  } catch (error) {\n    res.status(500).json({ error: 'Failed to fetch port' });\n  }\n});\n\n// Maritime Routing Endpoints (using searoute-ts)\n\n// Calculate maritime route\napp.post('/api/route/calculate', async (req, res) => {\n  try {\n    const { origin, destination, preferences } = req.body;\n    \n    if (!origin || !destination) {\n      return res.status(400).json({ error: 'Origin and destination are required' });\n    }\n    \n    const result = await maritimeRoutes.calculateRoute(origin, destination, preferences);\n    \n    if (result.success) {\n      res.json(result.route);\n    } else {\n      res.status(500).json({ error: result.error });\n    }\n  } catch (error) {\n    console.error('Route calculation error:', error);\n    res.status(500).json({ error: 'Failed to calculate route' });\n  }\n});\n\n// Report a hazard\napp.post('/api/hazards/report', async (req, res) => {\n  try {\n    const result = await maritimeRoutes.reportHazard(req.body);\n    \n    if (result.success) {\n      // Broadcast hazard to all connected clients\n      io.emit('hazard_reported', result.hazard);\n      res.json(result.hazard);\n    } else {\n      res.status(500).json({ error: result.error });\n    }\n  } catch (error) {\n    console.error('Hazard report error:', error);\n    res.status(500).json({ error: 'Failed to report hazard' });\n  }\n});\n\n// Get nearby hazards\napp.get('/api/hazards/nearby', async (req, res) => {\n  try {\n    const { lat, lng, radius } = req.query;\n    \n    if (!lat || !lng) {\n      return res.status(400).json({ error: 'Latitude and longitude are required' });\n    }\n    \n    const result = await maritimeRoutes.getNearbyHazards(\n      parseFloat(lat),\n      parseFloat(lng),\n      radius ? parseFloat(radius) : 50\n    );\n    \n    if (result.success) {\n      res.json(result.hazards);\n    } else {\n      res.status(500).json({ error: result.error });\n    }\n  } catch (error) {\n    console.error('Nearby hazards error:', error);\n    res.status(500).json({ error: 'Failed to get nearby hazards' });\n  }\n});\n\n// Report traffic\napp.post('/api/traffic/report', async (req, res) => {\n  try {\n    const result = await maritimeRoutes.reportTraffic(req.body);\n    \n    if (result.success) {\n      // Broadcast traffic report to all connected clients\n      io.emit('traffic_reported', result.report);\n      res.json(result.report);\n    } else {\n      res.status(500).json({ error: result.error });\n    }\n  } catch (error) {\n    console.error('Traffic report error:', error);\n    res.status(500).json({ error: 'Failed to report traffic' });\n  }\n});\n\n// Calculate distance helper (Haversine formula)\nfunction calculateDistance(lat1, lon1, lat2, lon2) {\n  const R = 6371; // Earth's radius in km\n  const dLat = (lat2 - lat1) * Math.PI / 180;\n  const dLon = (lon2 - lon1) * Math.PI / 180;\n  const a = \n    Math.sin(dLat/2) * Math.sin(dLat/2) +\n    Math.cos(lat1 * Math.PI / 180) * Math.cos(lat2 * Math.PI / 180) *\n    Math.sin(dLon/2) * Math.sin(dLon/2);\n  const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));\n  return R * c;\n}\n\n// Socket.IO connection handling\nio.on('connection', (socket) => {\n  console.log('Client connected:', socket.id);\n  \n  socket.on('vessel_location', async (data) => {\n    try {\n      // Save vessel location\n      const vessels = await readJsonFile(VESSELS_FILE);\n      const existingIndex = vessels.findIndex(v => v.userId === data.userId);\n      \n      const vesselData = {\n        id: data.userId, // Add id field for frontend compatibility\n        ...data,\n        lastUpdate: new Date().toISOString()\n      };\n      \n      if (existingIndex >= 0) {\n        vessels[existingIndex] = vesselData;\n      } else {\n        vessels.push(vesselData);\n      }\n      \n      await writeJsonFile(VESSELS_FILE, vessels);\n      \n      // Check for nearby vessels and send notifications\n      const nearbyVessels = vessels.filter(v => {\n        if (v.userId === data.userId) return false;\n        const distance = calculateDistance(\n          data.location.latitude,\n          data.location.longitude,\n          v.location.latitude,\n          v.location.longitude\n        );\n        return distance <= 2; // Within 2km\n      });\n      \n      if (nearbyVessels.length > 0) {\n        socket.emit('notification', {\n          type: 'vessel_nearby',\n          title: 'Vessel Nearby',\n          message: `${nearbyVessels[0].vesselInfo.vesselName} is within 2km of your location`,\n          data: nearbyVessels[0]\n        });\n      }\n      \n      // Broadcast to all other clients\n      socket.broadcast.emit('vessel_update', vesselData);\n    } catch (error) {\n      console.error('Error handling vessel location:', error);\n    }\n  });\n  \n  socket.on('chat_message', async (data) => {\n    try {\n      const messages = await readJsonFile(MESSAGES_FILE);\n      const newMessage = {\n        ...data,\n        id: Date.now().toString(),\n        timestamp: new Date().toISOString()\n      };\n      \n      messages.push(newMessage);\n      await writeJsonFile(MESSAGES_FILE, messages);\n      \n      // Broadcast to all clients\n      io.emit('new_message', newMessage);\n    } catch (error) {\n      console.error('Error handling chat message:', error);\n    }\n  });\n  \n  socket.on('disconnect', () => {\n    console.log('Client disconnected:', socket.id);\n  });\n});\n\n// Start server\nasync function startServer() {\n  await ensureDataFiles();\n  \n  server.listen(PORT, '0.0.0.0', () => {\n    console.log(`MarineTrack backend server running on port ${PORT}`);\n    console.log(`Health check: http://localhost:${PORT}/api/health`);\n    console.log(`Data directory: ${DATA_DIR}`);\n  });\n}\n\nstartServer();\n","size_bytes":16501},".local/state/replit/agent/progress_tracker.md":{"content":"[x] 1. Install the required packages - Completed: Installed all npm dependencies successfully\n[x] 2. Restart the workflow to see if the project is working - Completed: Workflow is running successfully on port 5000\n[x] 3. Verify the project is working using the screenshot tool - Completed: App loads correctly showing \"Track Your Vessel\" onboarding screen\n[x] 4. Inform user the import is completed and they can start building, mark the import as completed using the complete_project_import tool - Completed\n[x] 5. Create backend server with JSON storage for vessel tracking - Completed: Backend running on port 3000\n[x] 6. Fix vessel data storage issue and enable multi-device tracking - Completed: Vessels now share data through backend server\n[x] 7. Add comprehensive notification system - Completed: Notifications for chat, likes, comments, nearby vessels, restricted zones\n[x] 8. Add safe zones, restricted zones, and maritime borders to map - Completed: Enhanced map with zone overlays and legend\n[x] 9. Add Waze-like navigation features - Completed: Route planning with zone detection and hazard warnings\n[x] 10. Update backend for notifications - Completed: Backend supports likes, comments, and notification broadcasting\n[x] 11. Fix notification spam and route detection issues - Completed: Added throttling and improved route sampling\n[x] 12. Enhanced map with port name search - Completed: Added port database with 30+ major ports, search autocomplete, and toggle between port name/coordinates input\n[x] 13. Upgraded Node.js to v22 - Completed: Fixed dependency issues by upgrading from Node.js 20.19.3 to 22.17.0\n[x] 14. Migration to Replit environment - Completed: Fixed all network connectivity issues\n    - Installed missing backend dependencies (Express, CORS, http-proxy-middleware, searoute)\n    - Fixed hardcoded API URLs in config.ts and maritimeIntelligence.ts to dynamically detect Replit environment\n    - Added reverse proxy middleware in backend server to route maritime routing API requests to port 3001\n    - Created .env.local file with proper Replit environment variables\n    - Updated config.ts to check both process.env (server-side) and window.location (client-side) for proper URL detection\n    - Successfully configured and started all 3 workflows:\n      * Frontend (Expo web) - Port 5000 ‚úÖ (with environment variables loaded)\n      * Backend server - Port 3000 with proxy middleware ‚úÖ\n      * Maritime routing service - Port 3001 ‚úÖ\n    - All services can now communicate properly in Replit cloud environment\n[x] 15. Final migration setup - Completed: All dependencies installed and services running\n    - Installed Node.js dependencies: express, cors, http-proxy-middleware, socket.io\n    - Installed Python dependencies: searoute\n    - Created PostgreSQL database for maritime routing service\n    - All 3 workflows running successfully:\n      * Frontend (Expo web) - Port 5000 ‚úÖ (showing onboarding screen)\n      * Backend server - Port 3000 ‚úÖ (running with socket.io)\n      * Maritime routing service - Port 3001 ‚úÖ (Flask server with database)\n    - Verified app loads correctly with screenshot\n    - Project is fully migrated and ready for development\n[x] 16. Complete Replit Environment Migration - Completed: Successfully migrated project to Replit environment\n    - Upgraded Node.js from v20.19.3 to v22.17.0 to meet package requirements\n    - Installed all npm dependencies in root and backend directories\n    - Configured and started 2 active workflows:\n      * Frontend (Expo web) - Port 5000 ‚úÖ (webview, showing \"Track Your Vessel\" onboarding screen)\n      * Backend (Node.js Express server) - Port 3000 ‚úÖ (console, with socket.io support)\n    - Maritime routing handled by backend/maritime-routes.js (using searoute-js library)\n    - All services running successfully with proper environment configuration\n    - App verified working with screenshot showing vessel tracking interface\n    - Migration complete and ready for development\n[x] 17. Fixed map loading error on mobile - Completed: Fixed missing getRoutingUrl function\n    - Added missing getRoutingUrl() export to config.ts\n    - Function now correctly points to backend URL for maritime routing API\n    - Fixed TypeError: \"getRoutingUrl is not a function\" error that prevented map from loading\n    - Both frontend and backend workflows restarted successfully\n    - App can now load map and fetch hazards without crashing\n[x] 18. Fixed API response handling - Completed: Fixed \"Cannot read property 'map' of undefined\" error\n    - Fixed getNearbyHazards() to handle backend response correctly (returns array directly)\n    - Fixed reportHazard() to handle backend response correctly\n    - Fixed reportTraffic() to handle backend response correctly\n    - Fixed getTrafficHeatmap() to handle backend response correctly\n    - Fixed calculateIntelligentRoute() to handle backend response correctly\n    - All API calls now properly handle responses that are returned directly vs wrapped in objects\n    - Map now loads without errors and can display hazards, routes, and traffic data\n    - Frontend workflow restarted successfully\n[x] 19. Fixed route calculation with searoute-js - Completed: Fixed maritime routing errors\n    - Updated backend maritime-routes.js to return 'coordinates' array (frontend expects this field)\n    - Added proper validation for coordinates before calling searoute\n    - Added comprehensive error handling for searoute-js library failures\n    - Added detailed logging for debugging route calculation issues\n    - Added checks for invalid searoute results (null/undefined responses)\n    - Tested route calculation successfully: Singapore to Hong Kong route works correctly\n    - Backend now returns complete route object with: coordinates, waypoints, distance, duration, directions, origin, destination, safetyScore, trafficDensity, hazards, prediction, recommendations, alternativeRoutes\n    - Both frontend and backend workflows restarted successfully\n    - Route calculation API fully functional with JavaScript-only implementation\n[x] 20. Final Replit Environment Migration - Completed: All systems operational\n    - Upgraded Node.js from v20.19.3 to v22.17.0 to meet React Native package requirements\n    - Installed all npm dependencies in root directory\n    - Installed all backend dependencies in backend directory\n    - Fixed frontend workflow configuration to auto-accept expo package installation\n    - Both workflows running successfully:\n      * Frontend (Expo web) - Port 5000 ‚úÖ (webview, showing \"Track Your Vessel\" onboarding screen)\n      * Backend (Node.js Express server) - Port 3000 ‚úÖ (console, with socket.io support)\n    - App verified working with screenshot - onboarding screen loads correctly\n    - All migrations complete - project fully operational in Replit environment\n    - Ready for development and deployment\n[x] 21. Complete Import Migration to Replit - Completed: November 10, 2025\n    - Installed all root directory dependencies (1340 packages including expo, react-native, socket.io)\n    - Installed all backend directory dependencies (123 packages including express, cors, socket.io)\n    - Upgraded Node.js from v20.19.3 to v22.17.0 for package compatibility\n    - Both workflows now running successfully:\n      * Frontend (Expo web) - Port 5000 ‚úÖ (serving on http://localhost:5000)\n      * Backend (Node.js Express server) - Port 3000 ‚úÖ (data files initialized)\n    - Restored original dashboard at app/(tabs)/index.tsx with real vessel tracking data\n    - Updated app/index.tsx to redirect to dashboard instead of onboarding screen\n    - Updated Theme.ts with warm Zus Coffee aesthetic (espresso, latte, crema, caramel colors)\n    - Improved border radii (12-24px) and shadows for modern clean look\n    - App verified working with screenshot - Dashboard shows real data (vessels, hazards, weather, quick actions)\n    - All dependencies resolved and services operational\n    - Project fully migrated and ready for active development\n    - Import migration marked as complete ‚úÖ\n\n[x] 22. UI Redesign to Zus Coffee Aesthetic - Completed: November 10, 2025\n    - Updated Theme.ts with warm coffee palette (espresso #4B2E1B, latte #F2E3C6, crema #E8D3B8, caramel #C05A2B, foam #F9F5EF)\n    - Replaced navy/teal colors with warm brown/caramel throughout dashboard\n    - Updated all hardcoded rgba colors to match new warm palette\n    - Increased border radii (12-24px) for modern, softer look\n    - Applied warm, soft shadows with espresso tones\n    - Dashboard now features warm espresso header gradient, cream backgrounds, and caramel accents\n    - All existing functionality preserved: vessel tracking, hazards, weather, quick actions, navigation\n    - Architect verified: design matches Zus Coffee aesthetic, no breaking changes\n    - UI redesign complete and production-ready ‚úÖ\n\n[x] 23. Final Migration Verification - Completed: November 10, 2025\n    - Upgraded Node.js from v20.19.3 to v22.17.0 (using nodejs-22 module)\n    - Installed all root directory dependencies (1340 packages)\n    - Installed all backend directory dependencies (123 packages)\n    - Both workflows verified running and operational:\n      * Frontend (Expo web) - Port 5000 ‚úÖ (webview, auto-accepts expo installation)\n      * Backend (Node.js Express server) - Port 3000 ‚úÖ (console, socket.io support)\n    - App screenshot verified: \"Track Your Vessel\" onboarding screen loads correctly\n    - All migration tasks completed successfully\n    - Project ready for active development and user can start building ‚úÖ","size_bytes":9576},"backend/README.md":{"content":"# MarineTrack Backend Server\n\nThis is the backend server for the MarineTrack application. It stores vessel tracking data in JSON files and provides real-time updates via Socket.IO.\n\n## Features\n\n- **JSON File Storage**: All data is stored in local JSON files (not in Replit database)\n- **RESTful API**: Endpoints for saving and retrieving vessel data\n- **Socket.IO**: Real-time vessel location and chat updates\n- **Cross-Device Support**: Multiple devices can connect and share vessel data\n\n## Data Storage\n\nAll data is stored in the `backend/data/` directory:\n- `vessels.json` - Vessel tracking data\n- `users.json` - User account data\n- `messages.json` - Chat messages\n\n## API Endpoints\n\n### Health Check\n```\nGET /api/health\n```\n\n### Get All Vessels\n```\nGET /api/vessels\n```\n\n### Get Nearby Vessels\n```\nGET /api/vessels/nearby?lat={latitude}&lng={longitude}&radius={radiusKm}\n```\n\n### Save Vessel Tracking Data\n```\nPOST /api/tracking\nBody: {\n  userId: string,\n  vesselInfo: { vesselName, vesselId, vesselType },\n  location: { latitude, longitude, heading, speed, timestamp },\n  status: 'Active' | 'Idle' | 'Anchored'\n}\n```\n\n### Save User Data\n```\nPOST /api/users\nBody: { id, email, name, ... }\n```\n\n### Get Messages\n```\nGET /api/messages\n```\n\n### Save Message\n```\nPOST /api/messages\nBody: { userId, userName, message, ... }\n```\n\n## Socket.IO Events\n\n### Client to Server\n- `vessel_location` - Send vessel location update\n- `chat_message` - Send chat message\n\n### Server to Client\n- `vessel_update` - Receive vessel location update\n- `new_message` - Receive new chat message\n\n## Running Locally\n\n1. **Start the backend server**:\n   ```bash\n   cd backend\n   npm start\n   ```\n   The server will run on port 3000 by default.\n\n2. **Find your local IP address**:\n   - Windows: `ipconfig`\n   - Mac/Linux: `ifconfig` or `ip addr show`\n   Look for your local IP (e.g., 192.168.1.100)\n\n3. **Update the frontend configuration**:\n   Edit `config.ts` in the root directory and set:\n   ```typescript\n   BACKEND_URL: 'http://YOUR_LOCAL_IP:3000',\n   SOCKET_URL: 'http://YOUR_LOCAL_IP:3000',\n   ```\n   For example:\n   ```typescript\n   BACKEND_URL: 'http://192.168.1.100:3000',\n   SOCKET_URL: 'http://192.168.1.100:3000',\n   ```\n\n4. **Connect your devices**:\n   - Make sure your PC and mobile devices are on the same WiFi network\n   - Start the backend server on your PC\n   - Run the Expo app on your mobile devices\n   - The devices will now share vessel data through the backend server\n\n## Environment Variables\n\nYou can configure the backend using environment variables:\n- `PORT` - Server port (default: 3000)\n- `EXPO_PUBLIC_BACKEND_URL` - Frontend backend URL\n- `EXPO_PUBLIC_SOCKET_URL` - Frontend socket URL\n\n## Testing\n\nTo test if the backend is working:\n\n1. Open your browser and go to: `http://localhost:3000/api/health`\n   You should see: `{\"status\":\"ok\",\"message\":\"MarineTrack backend server running\"}`\n\n2. Check the data files in `backend/data/` directory after using the app\n\n## Troubleshooting\n\n### \"Network request failed\" error\n- Make sure the backend server is running\n- Verify your local IP address is correct in `config.ts`\n- Ensure your firewall allows connections on port 3000\n- Check that all devices are on the same WiFi network\n\n### No vessels appearing\n- Check if vessel data is being saved in `backend/data/vessels.json`\n- Verify the backend server logs for any errors\n- Make sure location permissions are granted on mobile devices\n\n### Chat not working\n- Check `backend/data/messages.json` for saved messages\n- Verify Socket.IO connection in browser console\n- Ensure the socket URL matches your backend URL\n","size_bytes":3615},"config.ts":{"content":"// Backend API Configuration\n// Automatically detects the correct backend URL for Replit environment\nfunction getDefaultBackendUrl(): string {\n  if (typeof window !== 'undefined') {\n    const hostname = window.location.hostname;\n    if (hostname.includes('replit.dev') || hostname.includes('repl.co')) {\n      const protocol = window.location.protocol;\n      const parts = hostname.split('-');\n      if (parts.length > 0) {\n        const replitDomain = hostname;\n        return `${protocol}//${replitDomain}:3000`;\n      }\n    }\n  }\n  \n\n  return 'http://192.168.0.194:3000';\n}\n\nexport const API_CONFIG = {\n  BACKEND_URL: process.env.EXPO_PUBLIC_BACKEND_URL || getDefaultBackendUrl(),\n  SOCKET_URL: process.env.EXPO_PUBLIC_SOCKET_URL || getDefaultBackendUrl(),\n};\n\n// Helper function to get the correct backend URL\nexport function getBackendUrl(): string {\n  const url = API_CONFIG.BACKEND_URL;\n  console.log('Backend URL configured:', url);\n  return url;\n}\n\nexport function getSocketUrl(): string {\n  const url = API_CONFIG.SOCKET_URL;\n  console.log('Socket URL configured:', url);\n  return url;\n}\n\nexport function getRoutingUrl(): string {\n  // Maritime routing is handled by the backend server\n  const url = API_CONFIG.BACKEND_URL;\n  console.log('Routing URL configured:', url);\n  return url;\n}\n","size_bytes":1297},"SETUP_INSTRUCTIONS.md":{"content":"# MarineTrack Setup Instructions for Local Network\n\n## Quick Start Guide\n\nYour MarineTrack app is now configured with a backend server that stores vessel data in JSON files. Follow these steps to run the app on multiple devices connected to the same WiFi network.\n\n## Step 1: Find Your Computer's Local IP Address\n\n### On Windows:\n1. Open Command Prompt\n2. Type: `ipconfig`\n3. Look for \"IPv4 Address\" under your WiFi adapter (usually looks like `192.168.1.100`)\n\n### On Mac:\n1. Open Terminal\n2. Type: `ifconfig` or `ip addr show`\n3. Look for your local IP address (usually starts with `192.168.` or `10.0.`)\n\n### On Linux:\n1. Open Terminal\n2. Type: `hostname -I` or `ip addr show`\n3. Look for your local IP address\n\n**Example IP:** `192.168.1.100` (your actual IP will be different)\n\n## Step 2: Update the Backend Configuration\n\n1. Open the file `config.ts` in the root directory of this project\n2. Replace `localhost` with your actual local IP address:\n\n```typescript\nexport const API_CONFIG = {\n  BACKEND_URL: 'http://YOUR_LOCAL_IP:3000',  // Replace YOUR_LOCAL_IP\n  SOCKET_URL: 'http://YOUR_LOCAL_IP:3000',   // Replace YOUR_LOCAL_IP\n};\n```\n\n**Example:**\n```typescript\nexport const API_CONFIG = {\n  BACKEND_URL: 'http://192.168.1.100:3000',\n  SOCKET_URL: 'http://192.168.1.100:3000',\n};\n```\n\n## Step 3: Start the Backend Server\n\nThe backend server should already be running in Replit. If not, start it manually:\n\n```bash\ncd backend\nnpm start\n```\n\nYou should see:\n```\nMarineTrack backend server running on port 3000\n```\n\n## Step 4: Run the App on Your Devices\n\n### For Android Devices:\n1. Make sure your device is connected to the same WiFi network as your computer\n2. Open Expo Go app on your device\n3. Scan the QR code from the Expo development server\n4. The app will load and connect to the backend server\n\n### For iOS Devices:\n1. Make sure your device is connected to the same WiFi network as your computer\n2. Open the Camera app\n3. Scan the QR code from the Expo development server\n4. The app will load and connect to the backend server\n\n## Step 5: Test Vessel Tracking\n\n1. **On Device 1:**\n   - Sign in or continue as guest\n   - Complete the onboarding\n   - Enter vessel information\n   - Allow location permissions\n   - Start tracking your vessel\n\n2. **On Device 2:**\n   - Sign in or continue as guest\n   - Complete the onboarding\n   - Enter a different vessel name\n   - Allow location permissions\n   - Start tracking\n\n3. **Check if vessels appear:**\n   - Both devices should now see each other's vessels on the map\n   - The vessels should appear in the \"Nearby Vessels\" list\n   - Real-time location updates should be reflected on both devices\n\n## Data Storage Location\n\nAll vessel data is stored in JSON files at:\n```\nbackend/data/vessels.json    - Vessel tracking data\nbackend/data/users.json      - User information\nbackend/data/messages.json   - Chat messages\n```\n\nYou can view these files to see the stored data.\n\n## Troubleshooting\n\n### Issue: \"Network request failed\" error\n\n**Solutions:**\n1. ‚úÖ Verify the backend server is running (check Replit console)\n2. ‚úÖ Confirm your IP address in `config.ts` is correct\n3. ‚úÖ Make sure all devices are on the same WiFi network\n4. ‚úÖ Check your firewall allows connections on port 3000\n5. ‚úÖ Try pinging your computer from your mobile device\n\n### Issue: No vessels appearing on the map\n\n**Solutions:**\n1. ‚úÖ Check `backend/data/vessels.json` to see if data is being saved\n2. ‚úÖ Verify location permissions are granted on your device\n3. ‚úÖ Make sure you've started tracking on at least one device\n4. ‚úÖ Check the console logs for any errors\n5. ‚úÖ Ensure the backend URL in `config.ts` is correct\n\n### Issue: Devices can't connect to backend\n\n**Solutions:**\n1. ‚úÖ Make sure you're using your local IP, not `localhost`\n2. ‚úÖ Verify your WiFi network allows device-to-device communication\n3. ‚úÖ Try accessing `http://YOUR_IP:3000/api/health` from your phone's browser\n4. ‚úÖ Disable any VPN or network isolation features on your router\n\n### Issue: Chat messages not appearing\n\n**Solutions:**\n1. ‚úÖ Check `backend/data/messages.json` to see if messages are being saved\n2. ‚úÖ Verify Socket.IO is connecting properly (check console logs)\n3. ‚úÖ Ensure the socket URL in `config.ts` matches your backend URL\n\n## Testing the Backend\n\nYou can test the backend API directly:\n\n1. **Health Check** (from any browser):\n   ```\n   http://YOUR_LOCAL_IP:3000/api/health\n   ```\n   Should return: `{\"status\":\"ok\",\"message\":\"MarineTrack backend server running\"}`\n\n2. **View All Vessels**:\n   ```\n   http://YOUR_LOCAL_IP:3000/api/vessels\n   ```\n\n3. **View Nearby Vessels**:\n   ```\n   http://YOUR_LOCAL_IP:3000/api/vessels/nearby?lat=40.7128&lng=-74.0060&radius=100\n   ```\n\n## Recording Video\n\nWhen recording your demo video:\n1. Start the backend server on your PC\n2. Connect at least 2 devices to the same WiFi\n3. Show vessel tracking working between devices\n4. Demonstrate the real-time chat feature\n5. Show the vessels appearing on the map\n\n## Port Configuration\n\n- **Backend Server:** Port 3000\n- **Expo Dev Server:** Port 5000 (for web preview)\n- **Metro Bundler:** Automatically assigned\n\n## Next Steps\n\nOnce everything is working:\n1. The vessel data is automatically saved to JSON files\n2. Multiple devices can see each other's locations\n3. Chat messages are shared between all connected devices\n4. All data persists even after restarting the backend server\n\nGood luck with your video recording! üö¢\n","size_bytes":5456},"components/OpenStreetMap.tsx":{"content":"import React from 'react';\nimport { View, Text, StyleSheet, Platform } from 'react-native';\nimport { WebView } from 'react-native-webview';\nimport { useColorScheme } from '@/hooks/useColorScheme';\nimport { Colors } from '@/constants/Colors';\n\ninterface OpenStreetMapProps {\n  userLocation?: { lat: number; lng: number } | null;\n  vessels?: Array<{\n    id: string;\n    name: string;\n    latitude: number;\n    longitude: number;\n  }>;\n  height?: number;\n}\n\nexport default function OpenStreetMap({ userLocation, vessels = [], height = 400 }: OpenStreetMapProps) {\n  const colorScheme = useColorScheme();\n  const colors = Colors[colorScheme ?? 'light'];\n\n  // Default location (center of ocean)\n  const defaultLat = userLocation?.lat || 0;\n  const defaultLng = userLocation?.lng || 0;\n  const zoom = 10;\n\n  // Helper function to escape HTML and prevent script injection\n  const escapeHtml = (text: string): string => {\n    return text\n      .replace(/&/g, '&amp;')\n      .replace(/</g, '&lt;')\n      .replace(/>/g, '&gt;')\n      .replace(/\"/g, '&quot;')\n      .replace(/'/g, '&#039;');\n  };\n\n  // Generate markers HTML for vessels with proper escaping\n  const vesselsMarkersHTML = vessels.map(vessel => {\n    const escapedName = escapeHtml(vessel.name);\n    return `\n    L.marker([${vessel.latitude}, ${vessel.longitude}], {\n      icon: L.divIcon({\n        html: '<div style=\"background: #0ea5e9; color: white; padding: 4px 8px; border-radius: 4px; font-size: 12px; white-space: nowrap;\">üö¢ ${escapedName}</div>',\n        className: 'vessel-marker',\n        iconSize: [null, null]\n      })\n    }).addTo(map);\n  `}).join('\\n');\n\n  // User location marker (safe, no user input)\n  const userMarkerHTML = userLocation ? `\n    L.marker([${userLocation.lat}, ${userLocation.lng}], {\n      icon: L.divIcon({\n        html: '<div style=\"background: #ef4444; color: white; padding: 6px 10px; border-radius: 4px; font-size: 14px; font-weight: bold;\">üìç You</div>',\n        className: 'user-marker',\n        iconSize: [null, null]\n      })\n    }).addTo(map);\n  ` : '';\n\n  const htmlContent = `\n    <!DOCTYPE html>\n    <html>\n    <head>\n      <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no\" />\n      <link rel=\"stylesheet\" href=\"https://unpkg.com/leaflet@1.9.4/dist/leaflet.css\" />\n      <script src=\"https://unpkg.com/leaflet@1.9.4/dist/leaflet.js\"></script>\n      <style>\n        body {\n          margin: 0;\n          padding: 0;\n        }\n        #map {\n          width: 100%;\n          height: 100vh;\n        }\n        .vessel-marker, .user-marker {\n          border: none;\n          background: transparent;\n        }\n      </style>\n    </head>\n    <body>\n      <div id=\"map\"></div>\n      <script>\n        var map = L.map('map').setView([${defaultLat}, ${defaultLng}], ${zoom});\n        \n        // Use OpenStreetMap tiles (free and open-source)\n        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\n          attribution: '¬© OpenStreetMap contributors',\n          maxZoom: 19\n        }).addTo(map);\n\n        // Add user location marker\n        ${userMarkerHTML}\n\n        // Add vessel markers\n        ${vesselsMarkersHTML}\n\n        // Auto-fit bounds if we have vessels\n        ${vessels.length > 0 ? `\n          var bounds = L.latLngBounds([\n            ${userLocation ? `[${userLocation.lat}, ${userLocation.lng}],` : ''}\n            ${vessels.map(v => `[${v.latitude}, ${v.longitude}]`).join(',\\n')}\n          ]);\n          map.fitBounds(bounds, { padding: [50, 50] });\n        ` : ''}\n      </script>\n    </body>\n    </html>\n  `;\n\n  if (!userLocation && vessels.length === 0) {\n    return (\n      <View style={[styles.emptyContainer, { backgroundColor: colors.card, height }]}>\n        <Text style={[styles.emptyText, { color: colors.icon }]}>\n          üìç Enable location to see map\n        </Text>\n      </View>\n    );\n  }\n\n  return (\n    <View style={[styles.container, { height }]}>\n      <WebView\n        source={{ html: htmlContent }}\n        style={styles.webview}\n        javaScriptEnabled={true}\n        domStorageEnabled={true}\n        startInLoadingState={true}\n        scalesPageToFit={true}\n      />\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    width: '100%',\n    borderRadius: 12,\n    overflow: 'hidden',\n  },\n  webview: {\n    flex: 1,\n  },\n  emptyContainer: {\n    width: '100%',\n    justifyContent: 'center',\n    alignItems: 'center',\n    borderRadius: 12,\n  },\n  emptyText: {\n    fontSize: 16,\n  },\n});\n","size_bytes":4529},"config/backend.ts":{"content":"\n// üåê Backend Configuration\n// Update this with your local machine's IP address\n// Example for LAN testing: 'http://192.168.1.100:3000'\n// ‚ö†Ô∏è Make sure this IP is reachable from your mobile device if using Expo!\n\n// IMPORTANT: Replace this with your actual local IP address\n// Find it by running: ipconfig (Windows) or ifconfig (Mac/Linux)\nconst LOCAL_IP = '192.168.0.194'; // <<< CHANGE THIS TO YOUR ACTUAL IP\n\nexport const BACKEND_CONFIG = {\n  // Local machine IP\n  URL: `http://${LOCAL_IP}:3000`,\n\n  // WebSocket URL (automatically derived from the HTTP URL)\n  get WS_URL() {\n    return this.URL.replace(/^http/, \"ws\");\n  },\n};\n\n// ‚úÖ Helper: Check if backend server is reachable\nexport const checkBackendConnection = async (): Promise<boolean> => {\n  const healthUrl = `${BACKEND_CONFIG.URL}/api/health`;\n\n  try {\n    console.log(\"üîç Checking backend connectivity at:\", healthUrl);\n\n    const response = await fetch(healthUrl, {\n      method: \"GET\",\n      headers: { \"Content-Type\": \"application/json\" },\n    });\n\n    if (!response.ok) {\n      console.warn(\n        \"‚ö†Ô∏è Backend health check failed with status:\",\n        response.status,\n      );\n      return false;\n    }\n\n    const data = await response.text();\n    console.log(\"‚úÖ Backend reachable. Response:\", data || \"OK\");\n    return true;\n  } catch (error) {\n    console.error(\"üö® Backend connection failed:\", error);\n    return false;\n  }\n};\n","size_bytes":1422},"components/LeafletMap.tsx":{"content":"import React, { useEffect, useRef } from 'react';\nimport { View, StyleSheet } from 'react-native';\n\ninterface Vessel {\n  id: string;\n  name: string;\n  type: string;\n  latitude: number;\n  longitude: number;\n  speed: number;\n  heading: number;\n  distance: number;\n  status: string;\n}\n\ninterface LeafletMapProps {\n  userLocation: { latitude: number; longitude: number } | null;\n  vessels: Vessel[];\n  onVesselPress: (vessel: Vessel) => void;\n  currentUserName?: string;\n}\n\nexport default function LeafletMap({ userLocation, vessels, onVesselPress, currentUserName }: LeafletMapProps) {\n  const mapRef = useRef<any>(null);\n  const markersRef = useRef<any[]>([]);\n  const userMarkerRef = useRef<any>(null);\n\n  useEffect(() => {\n    if (typeof window === 'undefined' || !userLocation) return;\n\n    const initMap = async () => {\n      try {\n        const L = (await import('leaflet')).default;\n        await import('leaflet/dist/leaflet.css');\n\n        // Fix for default marker icons in Leaflet\n        delete (L.Icon.Default.prototype as any)._getIconUrl;\n        L.Icon.Default.mergeOptions({\n          iconRetinaUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon-2x.png',\n          iconUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png',\n          shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png',\n        });\n\n        if (!mapRef.current) {\n          const map = L.map('leaflet-map', {\n            center: [userLocation.latitude, userLocation.longitude],\n            zoom: 12,\n            zoomControl: true,\n          });\n\n          // Add OpenStreetMap tiles\n          L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\n            attribution: '&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors',\n            maxZoom: 19,\n            minZoom: 3,\n          }).addTo(map);\n\n          mapRef.current = map;\n\n          // Create custom icon for user location\n          const userIcon = L.divIcon({\n            className: 'custom-user-marker',\n            html: `<div style=\"width: 50px; height: 50px; position: relative;\">\n                    <div style=\"width: 50px; height: 50px; border-radius: 50%; background-color: #FF3B30; display: flex; align-items: center; justify-content: center; border: 4px solid white; box-shadow: 0 3px 10px rgba(0,0,0,0.4); position: relative; z-index: 1000;\">\n                      <span style=\"font-size: 24px;\">üìç</span>\n                    </div>\n                  </div>`,\n            iconSize: [50, 50],\n            iconAnchor: [25, 25],\n          });\n\n          // Add user marker\n          userMarkerRef.current = L.marker([userLocation.latitude, userLocation.longitude], { icon: userIcon })\n            .addTo(map)\n            .bindPopup(`<div style=\"text-align: center; padding: 5px;\">\n                          <strong style=\"font-size: 14px;\">My Vessel</strong><br/>\n                          <span style=\"font-size: 12px; color: #666;\">${currentUserName || 'You'}</span>\n                        </div>`);\n        }\n      } catch (error) {\n        console.error('Error initializing map:', error);\n      }\n    };\n\n    initMap();\n\n    return () => {\n      if (mapRef.current) {\n        mapRef.current.remove();\n        mapRef.current = null;\n      }\n    };\n  }, [userLocation, currentUserName]);\n\n  // Update vessel markers\n  useEffect(() => {\n    if (!mapRef.current || typeof window === 'undefined') return;\n\n    const updateMarkers = async () => {\n      try {\n        const L = (await import('leaflet')).default;\n\n        // Remove existing vessel markers\n        markersRef.current.forEach(marker => marker.remove());\n        markersRef.current = [];\n\n        // Create vessel icon\n        const vesselIcon = L.divIcon({\n          className: 'custom-vessel-marker',\n          html: `<div style=\"width: 45px; height: 45px; position: relative;\">\n                  <div style=\"width: 45px; height: 45px; border-radius: 50%; background-color: #007AFF; display: flex; align-items: center; justify-content: center; border: 3px solid white; box-shadow: 0 3px 8px rgba(0,0,0,0.3); cursor: pointer; transition: transform 0.2s;\">\n                    <span style=\"font-size: 22px;\">üö¢</span>\n                  </div>\n                </div>`,\n          iconSize: [45, 45],\n          iconAnchor: [22.5, 22.5],\n        });\n\n        // Add markers for each vessel\n        vessels.forEach((vessel) => {\n          const marker = L.marker([vessel.latitude, vessel.longitude], { icon: vesselIcon })\n            .addTo(mapRef.current)\n            .bindPopup(`<div style=\"text-align: center; padding: 8px; min-width: 150px;\">\n                          <strong style=\"font-size: 14px; color: #007AFF;\">üö¢ ${vessel.name}</strong><br/>\n                          <span style=\"font-size: 12px; color: #666;\">${vessel.type}</span><br/>\n                          <span style=\"font-size: 12px; color: #666;\">${vessel.distance.toFixed(1)} km away</span><br/>\n                          <span style=\"font-size: 11px; color: #999;\">Speed: ${vessel.speed.toFixed(1)} kn</span><br/>\n                          <button style=\"margin-top: 8px; padding: 6px 12px; background-color: #007AFF; color: white; border: none; border-radius: 4px; cursor: pointer; font-size: 12px;\">üí¨ Open Chat</button>\n                        </div>`)\n            .on('click', () => onVesselPress(vessel));\n\n          // Add hover effect\n          marker.on('mouseover', function() {\n            const element = this.getElement();\n            if (element) {\n              const div = element.querySelector('div > div');\n              if (div) {\n                (div as HTMLElement).style.transform = 'scale(1.1)';\n              }\n            }\n          });\n\n          marker.on('mouseout', function() {\n            const element = this.getElement();\n            if (element) {\n              const div = element.querySelector('div > div');\n              if (div) {\n                (div as HTMLElement).style.transform = 'scale(1)';\n              }\n            }\n          });\n\n          markersRef.current.push(marker);\n        });\n\n        // Fit bounds to show all vessels if there are any\n        if (vessels.length > 0 && userLocation) {\n          const bounds = L.latLngBounds([\n            [userLocation.latitude, userLocation.longitude],\n            ...vessels.map(v => [v.latitude, v.longitude] as [number, number])\n          ]);\n          mapRef.current.fitBounds(bounds, { padding: [50, 50], maxZoom: 13 });\n        }\n      } catch (error) {\n        console.error('Error updating markers:', error);\n      }\n    };\n\n    updateMarkers();\n  }, [vessels, onVesselPress]);\n\n  // Update user location marker\n  useEffect(() => {\n    if (!mapRef.current || !userLocation || !userMarkerRef.current) return;\n\n    const updateUserLocation = async () => {\n      try {\n        const L = (await import('leaflet')).default;\n\n        // Update user marker position\n        userMarkerRef.current.setLatLng([userLocation.latitude, userLocation.longitude]);\n\n        // Center map on user location if no vessels nearby\n        if (vessels.length === 0) {\n          mapRef.current.setView([userLocation.latitude, userLocation.longitude], mapRef.current.getZoom());\n        }\n      } catch (error) {\n        console.error('Error updating user location:', error);\n      }\n    };\n\n    updateUserLocation();\n  }, [userLocation, vessels.length]);\n\n  return (\n    <View style={styles.container}>\n      <div id=\"leaflet-map\" style={{ width: '100%', height: '100%', borderRadius: '8px' }} />\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    width: '100%',\n    height: '100%',\n    borderRadius: 8,\n    overflow: 'hidden',\n  },\n});","size_bytes":7779},"backend/maritime_routing.py":{"content":"#!/usr/bin/env python3\nfrom scgraph.geographs.marnet import marnet_geograph\nimport json\nimport sys\nfrom flask import Flask, request, jsonify\nfrom flask_cors import CORS\nimport psycopg2\nfrom psycopg2.extras import RealDictCursor\nimport os\nfrom datetime import datetime, timedelta\nimport math\n\napp = Flask(__name__)\nCORS(app)\n\n# Crowdsourced hazard data storage\nHAZARDS_FILE = 'data/maritime_hazards.json'\nTRAFFIC_FILE = 'data/vessel_traffic.json'\nPREDICTIONS_FILE = 'data/route_predictions.json'\n\n# Database connection\ndef get_db_connection():\n    return psycopg2.connect(\n        host=os.environ.get('PGHOST'),\n        database=os.environ.get('PGDATABASE'),\n        user=os.environ.get('PGUSER'),\n        password=os.environ.get('PGPASSWORD'),\n        port=os.environ.get('PGPORT')\n    )\n\n# Initialize ports table\ndef init_ports_db():\n    conn = get_db_connection()\n    cur = conn.cursor()\n    \n    # Create ports table\n    cur.execute('''\n        CREATE TABLE IF NOT EXISTS ports (\n            id SERIAL PRIMARY KEY,\n            name VARCHAR(255) NOT NULL,\n            code VARCHAR(10) UNIQUE NOT NULL,\n            country VARCHAR(100),\n            lat DECIMAL(9, 6) NOT NULL,\n            lng DECIMAL(9, 6) NOT NULL\n        )\n    ''')\n    \n    # Check if ports table is empty\n    cur.execute('SELECT COUNT(*) FROM ports')\n    count = cur.fetchone()[0]\n    \n    if count == 0:\n        # Insert port data\n        ports_data = [\n            (\"Mumbai Port\", \"INMUN\", \"India\", 18.9388, 72.8354),\n            (\"Chennai Port\", \"INMAA\", \"India\", 13.0827, 80.2707),\n            (\"Kochi Port\", \"INCOK\", \"India\", 9.9674, 76.2376),\n            (\"Visakhapatnam Port\", \"INVTZ\", \"India\", 17.6868, 83.2185),\n            (\"Colombo Port\", \"LKCMB\", \"Sri Lanka\", 6.9497, 79.8528),\n            (\"Singapore Port\", \"SGSIN\", \"Singapore\", 1.2644, 103.8270),\n            (\"Dubai Port\", \"AEDXB\", \"UAE\", 25.2697, 55.3095),\n            (\"Shanghai Port\", \"CNSHA\", \"China\", 31.2304, 121.4737),\n            (\"Hong Kong Port\", \"HKHKG\", \"Hong Kong\", 22.3193, 114.1694),\n            (\"Rotterdam Port\", \"NLRTM\", \"Netherlands\", 51.9225, 4.4792),\n            (\"Hamburg Port\", \"DEHAM\", \"Germany\", 53.5511, 9.9937),\n            (\"New York Port\", \"USNYC\", \"USA\", 40.6895, -74.0445),\n            (\"Los Angeles Port\", \"USLAX\", \"USA\", 33.7405, -118.2713),\n            (\"Tokyo Port\", \"JPTYO\", \"Japan\", 35.6286, 139.7454),\n            (\"Sydney Port\", \"AUSYD\", \"Australia\", -33.8568, 151.2153),\n            (\"Cape Town Port\", \"ZACPT\", \"South Africa\", -33.9079, 18.4231),\n            (\"Rio de Janeiro Port\", \"BRRIO\", \"Brazil\", -22.8969, -43.1732),\n            (\"London Port\", \"GBLON\", \"UK\", 51.5074, -0.1278),\n            (\"Marseille Port\", \"FRMRS\", \"France\", 43.2965, 5.3698),\n            (\"Barcelona Port\", \"ESBCN\", \"Spain\", 41.3851, 2.1734),\n            (\"Jeddah Port\", \"SAJED\", \"Saudi Arabia\", 21.5433, 39.1728),\n            (\"Karachi Port\", \"PKKHI\", \"Pakistan\", 24.8607, 67.0011),\n            (\"Bangkok Port\", \"THBKK\", \"Thailand\", 13.7563, 100.5018),\n            (\"Manila Port\", \"PHMNL\", \"Philippines\", 14.5995, 120.9842),\n            (\"Jakarta Port\", \"IDJKT\", \"Indonesia\", -6.2088, 106.8456)\n        ]\n        \n        cur.executemany(\n            'INSERT INTO ports (name, code, country, lat, lng) VALUES (%s, %s, %s, %s, %s)',\n            ports_data\n        )\n    \n    conn.commit()\n    cur.close()\n    conn.close()\n\n# Search ports endpoint\n@app.route('/api/ports/search', methods=['GET'])\ndef search_ports():\n    query = request.args.get('q', '').lower()\n    \n    if not query:\n        return jsonify({'ports': []})\n    \n    conn = get_db_connection()\n    cur = conn.cursor(cursor_factory=RealDictCursor)\n    \n    cur.execute('''\n        SELECT * FROM ports \n        WHERE LOWER(name) LIKE %s OR LOWER(code) LIKE %s OR LOWER(country) LIKE %s\n        ORDER BY name\n        LIMIT 10\n    ''', (f'%{query}%', f'%{query}%', f'%{query}%'))\n    \n    ports = cur.fetchall()\n    cur.close()\n    conn.close()\n    \n    return jsonify({'ports': ports})\n\n# Get all ports endpoint\n@app.route('/api/ports', methods=['GET'])\ndef get_all_ports():\n    conn = get_db_connection()\n    cur = conn.cursor(cursor_factory=RealDictCursor)\n    \n    cur.execute('SELECT * FROM ports ORDER BY name')\n    ports = cur.fetchall()\n    \n    cur.close()\n    conn.close()\n    \n    return jsonify({'ports': ports})\n\n# Report maritime hazard (crowdsourced)\n@app.route('/api/hazards/report', methods=['POST'])\ndef report_hazard():\n    data = request.json\n    \n    hazard = {\n        'id': f\"h_{int(datetime.now().timestamp())}\",\n        'type': data.get('type'),  # debris, shallow, weather, congestion, regulatory\n        'severity': data.get('severity', 'medium'),  # low, medium, high, critical\n        'lat': float(data.get('lat')),\n        'lng': float(data.get('lng')),\n        'description': data.get('description'),\n        'reportedBy': data.get('reportedBy', 'anonymous'),\n        'vesselId': data.get('vesselId'),\n        'timestamp': datetime.now().isoformat(),\n        'expiresAt': (datetime.now() + timedelta(hours=data.get('expiryHours', 24))).isoformat(),\n        'verified': False,\n        'upvotes': 0,\n        'downvotes': 0\n    }\n    \n    # Load existing hazards\n    hazards = load_json_file(HAZARDS_FILE, [])\n    hazards.append(hazard)\n    \n    # Remove expired hazards\n    hazards = [h for h in hazards if datetime.fromisoformat(h['expiresAt']) > datetime.now()]\n    \n    save_json_file(HAZARDS_FILE, hazards)\n    \n    return jsonify({'success': True, 'hazard': hazard})\n\n# Get active hazards in area\n@app.route('/api/hazards/nearby', methods=['GET'])\ndef get_nearby_hazards():\n    lat = float(request.args.get('lat'))\n    lng = float(request.args.get('lng'))\n    radius = float(request.args.get('radius', 50))  # km\n    \n    hazards = load_json_file(HAZARDS_FILE, [])\n    \n    # Filter expired hazards\n    active_hazards = [h for h in hazards if datetime.fromisoformat(h['expiresAt']) > datetime.now()]\n    \n    # Filter by distance\n    nearby = []\n    for hazard in active_hazards:\n        dist = calculate_distance_nm(\n            {'lat': lat, 'lng': lng},\n            {'lat': hazard['lat'], 'lng': hazard['lng']}\n        ) * 1.852  # Convert to km\n        \n        if dist <= radius:\n            hazard['distance'] = round(dist, 2)\n            nearby.append(hazard)\n    \n    # Sort by severity and distance\n    severity_order = {'critical': 0, 'high': 1, 'medium': 2, 'low': 3}\n    nearby.sort(key=lambda x: (severity_order.get(x['severity'], 4), x['distance']))\n    \n    save_json_file(HAZARDS_FILE, active_hazards)\n    \n    return jsonify({'hazards': nearby})\n\n# Vote on hazard (verify crowdsourced data)\n@app.route('/api/hazards/<hazard_id>/vote', methods=['POST'])\ndef vote_hazard(hazard_id):\n    data = request.json\n    vote = data.get('vote')  # 'up' or 'down'\n    \n    hazards = load_json_file(HAZARDS_FILE, [])\n    \n    for hazard in hazards:\n        if hazard['id'] == hazard_id:\n            if vote == 'up':\n                hazard['upvotes'] += 1\n            elif vote == 'down':\n                hazard['downvotes'] += 1\n            \n            # Auto-verify if enough upvotes\n            if hazard['upvotes'] >= 3:\n                hazard['verified'] = True\n            \n            # Remove if too many downvotes\n            if hazard['downvotes'] >= 5:\n                hazards.remove(hazard)\n                save_json_file(HAZARDS_FILE, hazards)\n                return jsonify({'success': True, 'removed': True})\n            \n            save_json_file(HAZARDS_FILE, hazards)\n            return jsonify({'success': True, 'hazard': hazard})\n    \n    return jsonify({'success': False, 'error': 'Hazard not found'}), 404\n\n# Report vessel traffic/congestion\n@app.route('/api/traffic/report', methods=['POST'])\ndef report_traffic():\n    data = request.json\n    \n    traffic_report = {\n        'id': f\"t_{int(datetime.now().timestamp())}\",\n        'lat': float(data.get('lat')),\n        'lng': float(data.get('lng')),\n        'density': data.get('density', 'medium'),  # low, medium, high, critical\n        'vesselCount': data.get('vesselCount', 0),\n        'portCode': data.get('portCode'),\n        'timestamp': datetime.now().isoformat(),\n        'reportedBy': data.get('vesselId', 'anonymous')\n    }\n    \n    traffic_data = load_json_file(TRAFFIC_FILE, [])\n    traffic_data.append(traffic_report)\n    \n    # Keep only last 1000 reports\n    traffic_data = traffic_data[-1000:]\n    \n    save_json_file(TRAFFIC_FILE, traffic_data)\n    \n    return jsonify({'success': True, 'report': traffic_report})\n\n# Get traffic heatmap data\n@app.route('/api/traffic/heatmap', methods=['GET'])\ndef get_traffic_heatmap():\n    traffic_data = load_json_file(TRAFFIC_FILE, [])\n    \n    # Filter to last 24 hours\n    cutoff = datetime.now() - timedelta(hours=24)\n    recent_traffic = [t for t in traffic_data if datetime.fromisoformat(t['timestamp']) > cutoff]\n    \n    return jsonify({'traffic': recent_traffic})\n\n# Calculate maritime route endpoint with AI optimization\n@app.route('/api/route/calculate', methods=['POST'])\ndef calculate_route():\n    data = request.json\n    \n    origin = data.get('origin')\n    destination = data.get('destination')\n    preferences = data.get('preferences', {})\n    \n    if not origin or not destination:\n        return jsonify({'error': 'Origin and destination are required'}), 400\n    \n    # Extract coordinates\n    origin_lat = float(origin['lat'])\n    origin_lng = float(origin['lng'])\n    destination_lat = float(destination['lat'])\n    destination_lng = float(destination['lng'])\n    \n    try:\n        # Calculate primary maritime route using scgraph (10x faster than searoute!)\n        route = marnet_geograph.get_shortest_path(\n            origin_node={\"latitude\": origin_lat, \"longitude\": origin_lng},\n            destination_node={\"latitude\": destination_lat, \"longitude\": destination_lng},\n            output_units='km'\n        )\n        \n        # Load hazards and traffic data for AI optimization\n        hazards = load_json_file(HAZARDS_FILE, [])\n        active_hazards = [h for h in hazards if datetime.fromisoformat(h['expiresAt']) > datetime.now()]\n        traffic_data = load_json_file(TRAFFIC_FILE, [])\n        recent_traffic = [t for t in traffic_data if \n                         datetime.fromisoformat(t['timestamp']) > datetime.now() - timedelta(hours=6)]\n        \n        # Extract waypoints from scgraph output\n        distance_km = route['length']\n        distance_nm = distance_km * 0.539957  # Convert km to nautical miles\n        \n        # Calculate duration based on speed\n        speed_knots = preferences.get('speed', 15)\n        duration_hours = distance_nm / speed_knots if speed_knots > 0 else 0\n        \n        # Convert waypoints to lat/lng format\n        formatted_waypoints = [\n            {'lat': point['latitude'], 'lng': point['longitude']} \n            for point in route['coordinate_path']\n        ]\n        \n        # AI Route Scoring: Analyze route for hazards and traffic\n        route_hazards = []\n        traffic_density = 'low'\n        safety_score = 100\n        \n        for waypoint in formatted_waypoints:\n            # Check for nearby hazards\n            for hazard in active_hazards:\n                dist = calculate_distance_nm(waypoint, {'lat': hazard['lat'], 'lng': hazard['lng']})\n                if dist < 5:  # Within 5nm\n                    route_hazards.append({\n                        'type': hazard['type'],\n                        'severity': hazard['severity'],\n                        'distance': round(dist, 2),\n                        'description': hazard['description'],\n                        'waypoint': waypoint\n                    })\n                    # Decrease safety score based on severity\n                    severity_impact = {'low': 5, 'medium': 10, 'high': 20, 'critical': 40}\n                    safety_score -= severity_impact.get(hazard['severity'], 10)\n            \n            # Check traffic density\n            nearby_traffic = [t for t in recent_traffic if \n                            calculate_distance_nm(waypoint, {'lat': t['lat'], 'lng': t['lng']}) < 10]\n            if len(nearby_traffic) > 5:\n                traffic_density = 'high'\n                safety_score -= 15\n            elif len(nearby_traffic) > 2:\n                traffic_density = 'medium'\n                safety_score -= 5\n        \n        safety_score = max(0, min(100, safety_score))\n        \n        # Create turn-by-turn directions\n        directions = []\n        for i in range(len(formatted_waypoints) - 1):\n            wp1 = formatted_waypoints[i]\n            wp2 = formatted_waypoints[i + 1]\n            \n            # Calculate bearing between waypoints\n            bearing = calculate_bearing(wp1['lat'], wp1['lng'], wp2['lat'], wp2['lng'])\n            direction = bearing_to_direction(bearing)\n            \n            if i == 0:\n                directions.append({\n                    'instruction': f'Head {direction}',\n                    'distance': '',\n                    'waypoint': wp1\n                })\n            else:\n                directions.append({\n                    'instruction': f'Continue {direction}',\n                    'distance': f'{calculate_distance_nm(formatted_waypoints[i-1], wp1):.1f} nm',\n                    'waypoint': wp1\n                })\n        \n        # Add final destination\n        directions.append({\n            'instruction': 'Arrive at destination',\n            'distance': f'{calculate_distance_nm(formatted_waypoints[-2], formatted_waypoints[-1]):.1f} nm',\n            'waypoint': formatted_waypoints[-1]\n        })\n        \n        # Generate AI predictions\n        prediction = {\n            'estimatedDelay': calculate_delay_prediction(route_hazards, traffic_density),\n            'weatherRisk': 'low',  # Can be enhanced with weather API\n            'collisionRisk': 'low' if safety_score > 70 else 'medium' if safety_score > 40 else 'high',\n            'fuelEfficiency': calculate_fuel_efficiency(distance_nm, traffic_density),\n            'recommendedSpeed': preferences.get('speed', 15) if traffic_density == 'low' else max(10, preferences.get('speed', 15) - 3)\n        }\n        \n        # AI Recommendations\n        recommendations = []\n        if safety_score < 70:\n            recommendations.append('‚ö†Ô∏è Route has multiple hazards. Consider alternative route.')\n        if traffic_density == 'high':\n            recommendations.append('üö¶ High traffic expected. Allow extra time.')\n        if len(route_hazards) > 0:\n            recommendations.append(f'üìç {len(route_hazards)} hazards detected along route. Stay alert.')\n        \n        # Generate alternative routes (simplified - offset by 0.1 degrees)\n        alternative_routes = []\n        if preferences.get('showAlternatives', True) and (safety_score < 80 or traffic_density != 'low'):\n            # Offset route slightly for alternative\n            alt_waypoints = [{'lat': w['lat'] + 0.05, 'lng': w['lng']} for w in formatted_waypoints]\n            alternative_routes.append({\n                'name': 'Scenic Route',\n                'coordinates': alt_waypoints,\n                'distance': distance_nm * 1.1,\n                'duration': duration_hours * 1.15 * 60,\n                'safetyScore': min(100, safety_score + 10),\n                'hazards': max(0, len(route_hazards) - 1)\n            })\n        \n        return jsonify({\n            'route': {\n                'coordinates': formatted_waypoints,\n                'distance': distance_nm,\n                'duration': duration_hours * 60,\n                'directions': directions,\n                'origin': origin,\n                'destination': destination,\n                'safetyScore': safety_score,\n                'trafficDensity': traffic_density,\n                'hazards': route_hazards,\n                'prediction': prediction,\n                'recommendations': recommendations,\n                'alternativeRoutes': alternative_routes\n            }\n        })\n        \n    except Exception as e:\n        return jsonify({'error': str(e)}), 500\n\ndef calculate_bearing(lat1, lng1, lat2, lng2):\n    \"\"\"Calculate bearing between two points\"\"\"\n    import math\n    \n    lat1_rad = math.radians(lat1)\n    lat2_rad = math.radians(lat2)\n    lng_diff = math.radians(lng2 - lng1)\n    \n    x = math.sin(lng_diff) * math.cos(lat2_rad)\n    y = math.cos(lat1_rad) * math.sin(lat2_rad) - math.sin(lat1_rad) * math.cos(lat2_rad) * math.cos(lng_diff)\n    \n    bearing = math.atan2(x, y)\n    bearing = math.degrees(bearing)\n    bearing = (bearing + 360) % 360\n    \n    return bearing\n\ndef bearing_to_direction(bearing):\n    \"\"\"Convert bearing to compass direction\"\"\"\n    directions = ['North', 'NE', 'East', 'SE', 'South', 'SW', 'West', 'NW']\n    index = round(bearing / 45) % 8\n    return directions[index]\n\ndef calculate_distance_nm(point1, point2):\n    \"\"\"Calculate distance in nautical miles between two points\"\"\"\n    import math\n    \n    lat1 = math.radians(point1['lat'])\n    lng1 = math.radians(point1['lng'])\n    lat2 = math.radians(point2['lat'])\n    lng2 = math.radians(point2['lng'])\n    \n    dlat = lat2 - lat1\n    dlng = lng2 - lng1\n    \n    a = math.sin(dlat/2)**2 + math.cos(lat1) * math.cos(lat2) * math.sin(dlng/2)**2\n    c = 2 * math.atan2(math.sqrt(a), math.sqrt(1-a))\n    \n    # Earth radius in nautical miles\n    R = 3440.065\n    \n    return R * c\n\ndef load_json_file(filepath, default=None):\n    \"\"\"Load JSON data from file\"\"\"\n    try:\n        if os.path.exists(filepath):\n            with open(filepath, 'r') as f:\n                return json.load(f)\n    except Exception as e:\n        print(f\"Error loading {filepath}: {e}\")\n    return default if default is not None else {}\n\ndef save_json_file(filepath, data):\n    \"\"\"Save JSON data to file\"\"\"\n    try:\n        os.makedirs(os.path.dirname(filepath), exist_ok=True)\n        with open(filepath, 'w') as f:\n            json.dump(data, f, indent=2)\n        return True\n    except Exception as e:\n        print(f\"Error saving {filepath}: {e}\")\n        return False\n\ndef calculate_delay_prediction(hazards, traffic_density):\n    \"\"\"Predict potential delays based on hazards and traffic\"\"\"\n    delay_minutes = 0\n    \n    for hazard in hazards:\n        severity_delays = {'low': 5, 'medium': 10, 'high': 20, 'critical': 45}\n        delay_minutes += severity_delays.get(hazard['severity'], 10)\n    \n    traffic_delays = {'low': 0, 'medium': 15, 'high': 30, 'critical': 60}\n    delay_minutes += traffic_delays.get(traffic_density, 0)\n    \n    return delay_minutes\n\ndef calculate_fuel_efficiency(distance_nm, traffic_density):\n    \"\"\"Calculate estimated fuel efficiency\"\"\"\n    base_consumption = distance_nm * 0.5  # liters per nm\n    \n    if traffic_density == 'high':\n        base_consumption *= 1.2  # 20% more fuel in heavy traffic\n    elif traffic_density == 'medium':\n        base_consumption *= 1.1\n    \n    return round(base_consumption, 2)\n\nif __name__ == '__main__':\n    # Initialize database\n    init_ports_db()\n    \n    # Initialize data directory\n    os.makedirs('data', exist_ok=True)\n    \n    # Start Flask server\n    port = int(os.environ.get('PORT', 3001))\n    print(f\"Maritime AI Routing Service starting on port {port}\")\n    print(\"Features: Crowdsourced hazards, Traffic intelligence, AI predictions\")\n    app.run(host='0.0.0.0', port=port, debug=True)\n","size_bytes":19375},"components/MaritimeDashboard.tsx":{"content":"\nimport React, { useState, useEffect } from 'react';\nimport { View, Text, StyleSheet, ScrollView, TouchableOpacity, RefreshControl } from 'react-native';\nimport { useColorScheme } from '@/hooks/useColorScheme';\nimport { Colors } from '@/constants/Colors';\nimport { \n  getNearbyHazards, \n  getTrafficHeatmap,\n  getHazardIcon,\n  getSeverityColor,\n  getTrafficColor,\n  type MaritimeHazard,\n  type TrafficReport\n} from '@/utils/maritimeIntelligence';\n\ninterface MaritimeDashboardProps {\n  userLocation: { lat: number; lng: number } | null;\n}\n\nexport default function MaritimeDashboard({ userLocation }: MaritimeDashboardProps) {\n  const colorScheme = useColorScheme();\n  const colors = Colors[colorScheme ?? 'light'];\n  \n  const [hazards, setHazards] = useState<MaritimeHazard[]>([]);\n  const [traffic, setTraffic] = useState<TrafficReport[]>([]);\n  const [refreshing, setRefreshing] = useState(false);\n  const [stats, setStats] = useState({\n    totalHazards: 0,\n    criticalHazards: 0,\n    avgTrafficDensity: 'low' as 'low' | 'medium' | 'high' | 'critical',\n    activeVessels: 0\n  });\n\n  useEffect(() => {\n    loadData();\n  }, [userLocation]);\n\n  const loadData = async () => {\n    if (!userLocation) return;\n    \n    const [hazardsData, trafficData] = await Promise.all([\n      getNearbyHazards(userLocation.lat, userLocation.lng, 200),\n      getTrafficHeatmap()\n    ]);\n    \n    setHazards(hazardsData);\n    setTraffic(trafficData);\n    \n    // Calculate stats\n    const criticalCount = hazardsData.filter(h => h.severity === 'critical' || h.severity === 'high').length;\n    const avgDensity = trafficData.length > 0 \n      ? trafficData.reduce((acc, t) => {\n          const val = { low: 1, medium: 2, high: 3, critical: 4 }[t.density];\n          return acc + val;\n        }, 0) / trafficData.length\n      : 1;\n    \n    const densityLabel = avgDensity <= 1.5 ? 'low' : avgDensity <= 2.5 ? 'medium' : avgDensity <= 3.5 ? 'high' : 'critical';\n    \n    setStats({\n      totalHazards: hazardsData.length,\n      criticalHazards: criticalCount,\n      avgTrafficDensity: densityLabel,\n      activeVessels: trafficData.reduce((sum, t) => sum + t.vesselCount, 0)\n    });\n  };\n\n  const onRefresh = async () => {\n    setRefreshing(true);\n    await loadData();\n    setRefreshing(false);\n  };\n\n  return (\n    <ScrollView \n      style={[styles.container, { backgroundColor: colors.background }]}\n      refreshControl={\n        <RefreshControl refreshing={refreshing} onRefresh={onRefresh} />\n      }\n    >\n      <View style={[styles.header, { backgroundColor: colors.primary }]}>\n        <Text style={styles.headerTitle}>üåä Maritime Intelligence</Text>\n        <Text style={styles.headerSubtitle}>Crowdsourced maritime safety network</Text>\n      </View>\n\n      {/* Stats Overview */}\n      <View style={styles.statsContainer}>\n        <View style={[styles.statCard, { backgroundColor: colors.card }]}>\n          <Text style={styles.statValue}>{stats.totalHazards}</Text>\n          <Text style={[styles.statLabel, { color: colors.icon }]}>Active Hazards</Text>\n        </View>\n        \n        <View style={[styles.statCard, { backgroundColor: colors.card }]}>\n          <Text style={[styles.statValue, { color: '#ef4444' }]}>{stats.criticalHazards}</Text>\n          <Text style={[styles.statLabel, { color: colors.icon }]}>Critical</Text>\n        </View>\n        \n        <View style={[styles.statCard, { backgroundColor: colors.card }]}>\n          <Text style={[styles.statValue, { color: getTrafficColor(stats.avgTrafficDensity) }]}>\n            {stats.avgTrafficDensity.toUpperCase()}\n          </Text>\n          <Text style={[styles.statLabel, { color: colors.icon }]}>Traffic</Text>\n        </View>\n        \n        <View style={[styles.statCard, { backgroundColor: colors.card }]}>\n          <Text style={styles.statValue}>{stats.activeVessels}</Text>\n          <Text style={[styles.statLabel, { color: colors.icon }]}>Vessels</Text>\n        </View>\n      </View>\n\n      {/* Active Hazards */}\n      <View style={[styles.section, { backgroundColor: colors.card }]}>\n        <Text style={[styles.sectionTitle, { color: colors.text }]}>‚ö†Ô∏è Active Hazards</Text>\n        {hazards.length === 0 ? (\n          <Text style={[styles.emptyText, { color: colors.icon }]}>\n            No hazards reported in your area\n          </Text>\n        ) : (\n          hazards.slice(0, 10).map((hazard) => (\n            <View key={hazard.id} style={[styles.hazardCard, { borderLeftColor: getSeverityColor(hazard.severity) }]}>\n              <View style={styles.hazardHeader}>\n                <Text style={styles.hazardIcon}>{getHazardIcon(hazard.type)}</Text>\n                <View style={{ flex: 1 }}>\n                  <Text style={[styles.hazardType, { color: colors.text }]}>\n                    {hazard.type.toUpperCase()}\n                  </Text>\n                  <Text style={[styles.hazardDescription, { color: colors.icon }]}>\n                    {hazard.description}\n                  </Text>\n                </View>\n                <View style={styles.hazardMeta}>\n                  <Text style={[styles.hazardDistance, { color: colors.primary }]}>\n                    {hazard.distance?.toFixed(1)} km\n                  </Text>\n                  <Text style={[styles.hazardSeverity, { color: getSeverityColor(hazard.severity) }]}>\n                    {hazard.severity}\n                  </Text>\n                </View>\n              </View>\n              <View style={styles.hazardFooter}>\n                <Text style={[styles.hazardReporter, { color: colors.icon }]}>\n                  üë§ {hazard.reportedBy} ‚Ä¢ {hazard.verified ? '‚úì Verified' : 'üïê Pending'}\n                </Text>\n                <Text style={[styles.hazardVotes, { color: colors.icon }]}>\n                  üëç {hazard.upvotes} üëé {hazard.downvotes}\n                </Text>\n              </View>\n            </View>\n          ))\n        )}\n      </View>\n\n      {/* Traffic Density */}\n      <View style={[styles.section, { backgroundColor: colors.card }]}>\n        <Text style={[styles.sectionTitle, { color: colors.text }]}>üö¶ Traffic Density (24h)</Text>\n        {traffic.length === 0 ? (\n          <Text style={[styles.emptyText, { color: colors.icon }]}>\n            No traffic data available\n          </Text>\n        ) : (\n          <View style={styles.trafficGrid}>\n            {traffic.slice(0, 6).map((report) => (\n              <View key={report.id} style={[styles.trafficCard, { backgroundColor: colors.background }]}>\n                <View style={[styles.trafficIndicator, { backgroundColor: getTrafficColor(report.density) }]} />\n                <Text style={[styles.trafficDensity, { color: colors.text }]}>\n                  {report.density.toUpperCase()}\n                </Text>\n                <Text style={[styles.trafficCount, { color: colors.icon }]}>\n                  {report.vesselCount} vessels\n                </Text>\n                {report.portCode && (\n                  <Text style={[styles.trafficPort, { color: colors.icon }]}>\n                    üìç {report.portCode}\n                  </Text>\n                )}\n              </View>\n            ))}\n          </View>\n        )}\n      </View>\n\n      {/* Info Footer */}\n      <View style={[styles.footer, { backgroundColor: colors.card }]}>\n        <Text style={[styles.footerText, { color: colors.icon }]}>\n          ü§ù Powered by crowdsourced maritime intelligence\n        </Text>\n        <Text style={[styles.footerText, { color: colors.icon }]}>\n          Data updates every 2 minutes\n        </Text>\n      </View>\n    </ScrollView>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n  },\n  header: {\n    padding: 20,\n    paddingTop: 50,\n  },\n  headerTitle: {\n    fontSize: 24,\n    fontWeight: 'bold',\n    color: '#fff',\n  },\n  headerSubtitle: {\n    fontSize: 14,\n    color: '#fff',\n    opacity: 0.9,\n    marginTop: 4,\n  },\n  statsContainer: {\n    flexDirection: 'row',\n    padding: 16,\n    gap: 12,\n  },\n  statCard: {\n    flex: 1,\n    padding: 12,\n    borderRadius: 8,\n    alignItems: 'center',\n  },\n  statValue: {\n    fontSize: 20,\n    fontWeight: 'bold',\n  },\n  statLabel: {\n    fontSize: 11,\n    marginTop: 4,\n  },\n  section: {\n    margin: 16,\n    padding: 16,\n    borderRadius: 12,\n  },\n  sectionTitle: {\n    fontSize: 16,\n    fontWeight: '600',\n    marginBottom: 12,\n  },\n  emptyText: {\n    fontSize: 14,\n    textAlign: 'center',\n    paddingVertical: 20,\n  },\n  hazardCard: {\n    padding: 12,\n    marginBottom: 12,\n    borderRadius: 8,\n    borderLeftWidth: 4,\n    backgroundColor: 'rgba(0,0,0,0.05)',\n  },\n  hazardHeader: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: 12,\n  },\n  hazardIcon: {\n    fontSize: 24,\n  },\n  hazardType: {\n    fontSize: 13,\n    fontWeight: '600',\n  },\n  hazardDescription: {\n    fontSize: 12,\n    marginTop: 2,\n  },\n  hazardMeta: {\n    alignItems: 'flex-end',\n  },\n  hazardDistance: {\n    fontSize: 13,\n    fontWeight: '600',\n  },\n  hazardSeverity: {\n    fontSize: 11,\n    marginTop: 2,\n  },\n  hazardFooter: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    marginTop: 8,\n    paddingTop: 8,\n    borderTopWidth: 1,\n    borderTopColor: 'rgba(0,0,0,0.1)',\n  },\n  hazardReporter: {\n    fontSize: 11,\n  },\n  hazardVotes: {\n    fontSize: 11,\n  },\n  trafficGrid: {\n    flexDirection: 'row',\n    flexWrap: 'wrap',\n    gap: 12,\n  },\n  trafficCard: {\n    width: '47%',\n    padding: 12,\n    borderRadius: 8,\n    alignItems: 'center',\n  },\n  trafficIndicator: {\n    width: 30,\n    height: 30,\n    borderRadius: 15,\n    marginBottom: 8,\n  },\n  trafficDensity: {\n    fontSize: 13,\n    fontWeight: '600',\n  },\n  trafficCount: {\n    fontSize: 11,\n    marginTop: 4,\n  },\n  trafficPort: {\n    fontSize: 10,\n    marginTop: 4,\n  },\n  footer: {\n    margin: 16,\n    padding: 16,\n    borderRadius: 12,\n    alignItems: 'center',\n  },\n  footerText: {\n    fontSize: 12,\n    marginVertical: 2,\n  },\n});\n","size_bytes":9929},"components/EnhancedVesselMap.tsx":{"content":"import React, { useState, useEffect } from 'react';\nimport { View, Text, StyleSheet, TouchableOpacity, ScrollView } from 'react-native';\nimport { WebView } from 'react-native-webview';\nimport { useColorScheme } from '@/hooks/useColorScheme';\nimport { Colors } from '@/constants/Colors';\nimport { maritimeZones, Zone, calculateOptimalRoute, checkZoneWarnings } from '@/utils/zoneData';\nimport { sendNotification, NotificationType } from '@/utils/notificationService';\nimport { shouldSendNotification, createNotificationKey } from '@/utils/notificationThrottle';\n\ninterface EnhancedVesselMapProps {\n  userLocation?: { lat: number; lng: number } | null;\n  vessels?: Array<{\n    id: string;\n    name: string;\n    latitude: number;\n    longitude: number;\n  }>;\n  height?: number;\n  showZones?: boolean;\n  showRoute?: boolean;\n  destination?: { lat: number; lng: number } | null;\n}\n\nexport default function EnhancedVesselMap({ \n  userLocation, \n  vessels = [], \n  height = 400,\n  showZones = true,\n  showRoute = false,\n  destination = null\n}: EnhancedVesselMapProps) {\n  const colorScheme = useColorScheme();\n  const colors = Colors[colorScheme ?? 'light'];\n  const [selectedZone, setSelectedZone] = useState<Zone | null>(null);\n\n  useEffect(() => {\n    if (userLocation) {\n      const warning = checkZoneWarnings(userLocation);\n      if (warning.warning && warning.zone?.type === 'restricted') {\n        const notificationKey = createNotificationKey('restricted_zone', { zoneId: warning.zone.id });\n        if (shouldSendNotification(notificationKey)) {\n          sendNotification(\n            NotificationType.RESTRICTED_ZONE,\n            'Restricted Zone Alert',\n            warning.message\n          );\n        }\n      }\n    }\n  }, [userLocation]);\n\n  const defaultLat = userLocation?.lat || 13.0;\n  const defaultLng = userLocation?.lng || 80.2;\n  const zoom = 10;\n\n  const escapeHtml = (text: string): string => {\n    return text\n      .replace(/&/g, '&amp;')\n      .replace(/</g, '&lt;')\n      .replace(/>/g, '&gt;')\n      .replace(/\"/g, '&quot;')\n      .replace(/'/g, '&#039;');\n  };\n\n  const vesselsMarkersHTML = vessels.map(vessel => {\n    const escapedName = escapeHtml(vessel.name);\n    return `\n    L.marker([${vessel.latitude}, ${vessel.longitude}], {\n      icon: L.divIcon({\n        html: '<div style=\"background: #0ea5e9; color: white; padding: 4px 8px; border-radius: 4px; font-size: 12px; white-space: nowrap; box-shadow: 0 2px 4px rgba(0,0,0,0.3);\">üö¢ ${escapedName}</div>',\n        className: 'vessel-marker',\n        iconSize: [null, null]\n      })\n    }).addTo(map);\n  `}).join('\\n');\n\n  const userMarkerHTML = userLocation ? `\n    L.marker([${userLocation.lat}, ${userLocation.lng}], {\n      icon: L.divIcon({\n        html: '<div style=\"background: #ef4444; color: white; padding: 8px 12px; border-radius: 50%; font-size: 18px; font-weight: bold; box-shadow: 0 3px 6px rgba(0,0,0,0.4);\">üìç</div>',\n        className: 'user-marker',\n        iconSize: [null, null]\n      })\n    }).addTo(map);\n  ` : '';\n\n  const zonesHTML = showZones ? maritimeZones.map(zone => {\n    const coords = zone.coordinates.map(c => `[${c.lat}, ${c.lng}]`).join(',');\n    const escapedName = escapeHtml(zone.name);\n    const escapedDesc = escapeHtml(zone.description);\n    \n    let icon = 'üü¢';\n    if (zone.type === 'restricted') icon = 'üî¥';\n    else if (zone.type === 'border') icon = '‚ö†Ô∏è';\n    else if (zone.type === 'fishing') icon = 'üêü';\n\n    return `\n      var zone_${zone.id} = L.polygon([${coords}], {\n        color: '${zone.color}',\n        fillColor: '${zone.color}',\n        fillOpacity: ${zone.opacity},\n        weight: 2\n      }).addTo(map);\n      \n      zone_${zone.id}.bindPopup(\\`\n        <div style=\"padding: 8px; min-width: 200px;\">\n          <h3 style=\"margin: 0 0 8px 0; font-size: 14px; font-weight: bold;\">${icon} ${escapedName}</h3>\n          <p style=\"margin: 0; font-size: 12px; color: #666;\">${escapedDesc}</p>\n        </div>\n      \\`);\n    `;\n  }).join('\\n') : '';\n\n  const routeHTML = showRoute && userLocation && destination ? (() => {\n    const route = calculateOptimalRoute(userLocation, destination, maritimeZones);\n    const routeCoords = route.coordinates.map(c => `[${c.lat}, ${c.lng}]`).join(',');\n    return `\n      L.polyline([${routeCoords}], {\n        color: '#3b82f6',\n        weight: 4,\n        opacity: 0.7,\n        dashArray: '10, 5'\n      }).addTo(map);\n      \n      L.marker([${destination.lat}, ${destination.lng}], {\n        icon: L.divIcon({\n          html: '<div style=\"background: #10b981; color: white; padding: 6px 10px; border-radius: 4px; font-size: 14px; font-weight: bold;\">üéØ Destination</div>',\n          className: 'destination-marker',\n          iconSize: [null, null]\n        })\n      }).addTo(map).bindPopup(\\`\n        <div style=\"padding: 8px;\">\n          <h3 style=\"margin: 0 0 8px 0;\">Route Info</h3>\n          <p style=\"margin: 4px 0; font-size: 12px;\">Distance: ${route.distance.toFixed(1)} km</p>\n          <p style=\"margin: 4px 0; font-size: 12px;\">Est. Time: ${route.estimatedTime.toFixed(0)} min</p>\n          ${route.hazards.length > 0 ? '<p style=\"margin: 4px 0; font-size: 12px; color: #ef4444;\">‚ö†Ô∏è ' + route.hazards.join(', ') + '</p>' : ''}\n        </div>\n      \\`);\n    `;\n  })() : '';\n\n  const htmlContent = `\n    <!DOCTYPE html>\n    <html>\n    <head>\n      <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no\" />\n      <link rel=\"stylesheet\" href=\"https://unpkg.com/leaflet@1.9.4/dist/leaflet.css\" />\n      <script src=\"https://unpkg.com/leaflet@1.9.4/dist/leaflet.js\"></script>\n      <style>\n        body {\n          margin: 0;\n          padding: 0;\n        }\n        #map {\n          width: 100%;\n          height: 100vh;\n        }\n        .vessel-marker, .user-marker, .destination-marker {\n          text-align: center;\n        }\n      </style>\n    </head>\n    <body>\n      <div id=\"map\"></div>\n      <script>\n        var map = L.map('map', {\n          center: [${defaultLat}, ${defaultLng}],\n          zoom: ${zoom},\n          zoomControl: true\n        });\n\n        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\n          attribution: '&copy; OpenStreetMap contributors',\n          maxZoom: 19,\n          minZoom: 3\n        }).addTo(map);\n\n        ${zonesHTML}\n        ${vesselsMarkersHTML}\n        ${userMarkerHTML}\n        ${routeHTML}\n      </script>\n    </body>\n    </html>\n  `;\n\n  return (\n    <View style={[styles.container, { height }]}>\n      <WebView\n        source={{ html: htmlContent }}\n        style={styles.map}\n        javaScriptEnabled={true}\n        domStorageEnabled={true}\n        scrollEnabled={false}\n      />\n      \n      {showZones && (\n        <View style={[styles.legend, { backgroundColor: colors.card }]}>\n          <Text style={[styles.legendTitle, { color: colors.text }]}>Map Legend</Text>\n          <View style={styles.legendItem}>\n            <View style={[styles.legendColor, { backgroundColor: '#22c55e' }]} />\n            <Text style={[styles.legendText, { color: colors.icon }]}>Prime Fishing</Text>\n          </View>\n          <View style={styles.legendItem}>\n            <View style={[styles.legendColor, { backgroundColor: '#84cc16' }]} />\n            <Text style={[styles.legendText, { color: colors.icon }]}>Good Fishing</Text>\n          </View>\n          <View style={styles.legendItem}>\n            <View style={[styles.legendColor, { backgroundColor: '#ef4444' }]} />\n            <Text style={[styles.legendText, { color: colors.icon }]}>Restricted</Text>\n          </View>\n          <View style={styles.legendItem}>\n            <View style={[styles.legendColor, { backgroundColor: '#facc15' }]} />\n            <Text style={[styles.legendText, { color: colors.icon }]}>Border</Text>\n          </View>\n        </View>\n      )}\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    width: '100%',\n    borderRadius: 8,\n    overflow: 'hidden',\n    position: 'relative',\n  },\n  map: {\n    flex: 1,\n  },\n  legend: {\n    position: 'absolute',\n    bottom: 16,\n    right: 16,\n    padding: 12,\n    borderRadius: 8,\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.25,\n    shadowRadius: 4,\n    elevation: 5,\n    minWidth: 140,\n  },\n  legendTitle: {\n    fontSize: 14,\n    fontWeight: '600',\n    marginBottom: 8,\n  },\n  legendItem: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    marginBottom: 4,\n  },\n  legendColor: {\n    width: 16,\n    height: 16,\n    borderRadius: 4,\n    marginRight: 8,\n  },\n  legendText: {\n    fontSize: 12,\n  },\n});\n","size_bytes":8613},"utils/notificationThrottle.ts":{"content":"const notificationCache = new Map<string, number>();\nconst THROTTLE_DURATION = 5 * 60 * 1000;\n\nexport function shouldSendNotification(key: string): boolean {\n  const now = Date.now();\n  const lastSent = notificationCache.get(key);\n  \n  if (!lastSent || now - lastSent > THROTTLE_DURATION) {\n    notificationCache.set(key, now);\n    return true;\n  }\n  \n  return false;\n}\n\nexport function clearNotificationThrottle(key?: string): void {\n  if (key) {\n    notificationCache.delete(key);\n  } else {\n    notificationCache.clear();\n  }\n}\n\nexport function createNotificationKey(type: string, data?: any): string {\n  if (data?.zoneId) {\n    return `${type}_${data.zoneId}`;\n  }\n  if (data?.vesselId) {\n    return `${type}_${data.vesselId}`;\n  }\n  return `${type}_${JSON.stringify(data || {})}`;\n}\n","size_bytes":788},"components/WazeNavigation.tsx":{"content":"import React, { useState, useEffect } from 'react';\nimport { View, Text, StyleSheet, TextInput, TouchableOpacity, ScrollView, ActivityIndicator } from 'react-native';\nimport { Ionicons } from '@expo/vector-icons';\nimport { useColorScheme } from '@/hooks/useColorScheme';\nimport { Colors } from '@/constants/Colors';\n\ninterface Port {\n  id: number;\n  name: string;\n  code: string;\n  country: string;\n  lat: number;\n  lng: number;\n}\n\ninterface Location {\n  lat: number;\n  lng: number;\n  name?: string;\n}\n\ninterface RouteData {\n  coordinates: Array<{ lat: number; lng: number }>;\n  distance: number;\n  duration: number;\n  directions: Array<{\n    instruction: string;\n    distance: string;\n    waypoint: { lat: number; lng: number };\n  }>;\n  origin: Location;\n  destination: Location;\n}\n\ninterface WazeNavigationProps {\n  userLocation?: { lat: number; lng: number } | null;\n  onRouteCalculated?: (route: RouteData) => void;\n  onClearRoute?: () => void;\n}\n\nexport default function WazeNavigation({ userLocation, onRouteCalculated, onClearRoute }: WazeNavigationProps) {\n  const colorScheme = useColorScheme();\n  const colors = Colors[colorScheme ?? 'light'];\n  \n  const [searchQuery, setSearchQuery] = useState('');\n  const [searchResults, setSearchResults] = useState<Port[]>([]);\n  const [searching, setSearching] = useState(false);\n  const [calculating, setCalculating] = useState(false);\n  \n  const [destinationType, setDestinationType] = useState<'port' | 'coords'>('port');\n  const [coordsInput, setCoordsInput] = useState({ lat: '', lng: '' });\n  \n  const [currentRoute, setCurrentRoute] = useState<RouteData | null>(null);\n  const [showDirections, setShowDirections] = useState(false);\n\n  // Search ports\n  const searchPorts = async (query: string) => {\n    if (!query || query.length < 2) {\n      setSearchResults([]);\n      return;\n    }\n    \n    setSearching(true);\n    try {\n      const response = await fetch(`http://localhost:3001/api/ports/search?q=${encodeURIComponent(query)}`);\n      const data = await response.json();\n      setSearchResults(data.ports || []);\n    } catch (error) {\n      console.error('Port search error:', error);\n      setSearchResults([]);\n    } finally {\n      setSearching(false);\n    }\n  };\n\n  // Debounce search\n  useEffect(() => {\n    const timer = setTimeout(() => {\n      if (destinationType === 'port') {\n        searchPorts(searchQuery);\n      }\n    }, 300);\n    \n    return () => clearTimeout(timer);\n  }, [searchQuery, destinationType]);\n\n  // Calculate route\n  const calculateRoute = async (destination: Location) => {\n    if (!userLocation) {\n      alert('Current location not available');\n      return;\n    }\n    \n    setCalculating(true);\n    try {\n      const response = await fetch('http://localhost:3001/api/route/calculate', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          origin: {\n            lat: userLocation.lat,\n            lng: userLocation.lng,\n            name: 'Current Location'\n          },\n          destination\n        })\n      });\n      \n      const data = await response.json();\n      \n      if (data.error) {\n        alert(`Error: ${data.error}`);\n        return;\n      }\n      \n      setCurrentRoute(data.route);\n      setShowDirections(true);\n      onRouteCalculated?.(data.route);\n    } catch (error) {\n      console.error('Route calculation error:', error);\n      alert('Failed to calculate route');\n    } finally {\n      setCalculating(false);\n    }\n  };\n\n  // Select port\n  const selectPort = (port: Port) => {\n    calculateRoute({\n      lat: port.lat,\n      lng: port.lng,\n      name: port.name\n    });\n    setSearchQuery(port.name);\n    setSearchResults([]);\n  };\n\n  // Use coordinates\n  const useCoordinates = () => {\n    const lat = parseFloat(coordsInput.lat);\n    const lng = parseFloat(coordsInput.lng);\n    \n    if (isNaN(lat) || isNaN(lng)) {\n      alert('Please enter valid coordinates');\n      return;\n    }\n    \n    if (lat < -90 || lat > 90 || lng < -180 || lng > 180) {\n      alert('Coordinates out of range');\n      return;\n    }\n    \n    calculateRoute({\n      lat,\n      lng,\n      name: `${lat.toFixed(4)}, ${lng.toFixed(4)}`\n    });\n  };\n\n  // Clear route\n  const clearRoute = () => {\n    setCurrentRoute(null);\n    setShowDirections(false);\n    setSearchQuery('');\n    setCoordsInput({ lat: '', lng: '' });\n    onClearRoute?.();\n  };\n\n  return (\n    <View style={[styles.container, { backgroundColor: colors.background }]}>\n      {/* Header */}\n      <View style={[styles.header, { backgroundColor: colors.tint, borderBottomColor: colors.tint }]}>\n        <Ionicons name=\"navigate\" size={24} color=\"#FFFFFF\" style={styles.headerIcon} />\n        <Text style={styles.headerTitle}>Maritime Navigation</Text>\n      </View>\n\n      {!currentRoute ? (\n        <View style={styles.searchContainer}>\n          {/* Destination Type Selector */}\n          <View style={styles.typeSelector}>\n            <TouchableOpacity\n              style={[\n                styles.typeButton,\n                destinationType === 'port' && { backgroundColor: colors.tint }\n              ]}\n              onPress={() => setDestinationType('port')}\n            >\n              <Text style={[\n                styles.typeButtonText,\n                destinationType === 'port' && styles.typeButtonTextActive\n              ]}>\n                Port Name\n              </Text>\n            </TouchableOpacity>\n            \n            <TouchableOpacity\n              style={[\n                styles.typeButton,\n                destinationType === 'coords' && { backgroundColor: colors.tint }\n              ]}\n              onPress={() => setDestinationType('coords')}\n            >\n              <Text style={[\n                styles.typeButtonText,\n                destinationType === 'coords' && styles.typeButtonTextActive\n              ]}>\n                Coordinates\n              </Text>\n            </TouchableOpacity>\n          </View>\n\n          {destinationType === 'port' ? (\n            <>\n              {/* Port Name Search */}\n              <View style={[styles.searchBox, { backgroundColor: colors.card, borderColor: colors.border }]}>\n                <Ionicons name=\"search\" size={20} color={colors.icon} />\n                <TextInput\n                  style={[styles.searchInput, { color: colors.text }]}\n                  placeholder=\"Search port (e.g., Mumbai, Singapore, Dubai)\"\n                  placeholderTextColor={colors.tabIconDefault}\n                  value={searchQuery}\n                  onChangeText={setSearchQuery}\n                />\n                {searching && <ActivityIndicator size=\"small\" color={colors.tint} />}\n              </View>\n\n              {/* Search Results */}\n              {searchResults.length > 0 && (\n                <ScrollView style={styles.results}>\n                  {searchResults.map((port) => (\n                    <TouchableOpacity\n                      key={port.id}\n                      style={[styles.resultItem, { backgroundColor: colors.card, borderBottomColor: colors.border }]}\n                      onPress={() => selectPort(port)}\n                    >\n                      <Ionicons name=\"location\" size={20} color={colors.tint} />\n                      <View style={styles.resultInfo}>\n                        <Text style={[styles.resultName, { color: colors.text }]}>{port.name}</Text>\n                        <Text style={[styles.resultDetails, { color: colors.tabIconDefault }]}>\n                          {port.country} ‚Ä¢ {port.code}\n                        </Text>\n                      </View>\n                    </TouchableOpacity>\n                  ))}\n                </ScrollView>\n              )}\n            </>\n          ) : (\n            <>\n              {/* Coordinates Input */}\n              <View style={styles.coordsContainer}>\n                <Text style={[styles.coordsLabel, { color: colors.text }]}>Latitude:</Text>\n                <TextInput\n                  style={[styles.coordsInput, { backgroundColor: colors.card, borderColor: colors.border, color: colors.text }]}\n                  placeholder=\"e.g., 13.0827\"\n                  placeholderTextColor={colors.tabIconDefault}\n                  value={coordsInput.lat}\n                  onChangeText={(text) => setCoordsInput({ ...coordsInput, lat: text })}\n                  keyboardType=\"numeric\"\n                />\n                \n                <Text style={[styles.coordsLabel, { color: colors.text }]}>Longitude:</Text>\n                <TextInput\n                  style={[styles.coordsInput, { backgroundColor: colors.card, borderColor: colors.border, color: colors.text }]}\n                  placeholder=\"e.g., 80.2707\"\n                  placeholderTextColor={colors.tabIconDefault}\n                  value={coordsInput.lng}\n                  onChangeText={(text) => setCoordsInput({ ...coordsInput, lng: text })}\n                  keyboardType=\"numeric\"\n                />\n                \n                <TouchableOpacity\n                  style={[styles.goButton, { backgroundColor: colors.tint }]}\n                  onPress={useCoordinates}\n                  disabled={calculating}\n                >\n                  {calculating ? (\n                    <ActivityIndicator color=\"#FFFFFF\" />\n                  ) : (\n                    <>\n                      <Ionicons name=\"navigate\" size={20} color=\"#FFFFFF\" />\n                      <Text style={styles.goButtonText}>Calculate Route</Text>\n                    </>\n                  )}\n                </TouchableOpacity>\n              </View>\n            </>\n          )}\n\n          {calculating && (\n            <View style={styles.calculatingContainer}>\n              <ActivityIndicator size=\"large\" color={colors.tint} />\n              <Text style={[styles.calculatingText, { color: colors.text }]}>\n                Calculating maritime route...\n              </Text>\n            </View>\n          )}\n        </View>\n      ) : (\n        <>\n          {/* Route Summary */}\n          <View style={[styles.routeSummary, { backgroundColor: colors.card, borderBottomColor: colors.border }]}>\n            <View style={styles.routeInfo}>\n              <Text style={[styles.routeDistance, { color: colors.tint }]}>\n                {currentRoute.distance.toFixed(1)} nm\n              </Text>\n              <Text style={[styles.routeDuration, { color: colors.text }]}>\n                {Math.floor(currentRoute.duration / 60)}h {Math.round(currentRoute.duration % 60)}m\n              </Text>\n            </View>\n            \n            <TouchableOpacity\n              style={[styles.directionsButton, { backgroundColor: colors.tint }]}\n              onPress={() => setShowDirections(!showDirections)}\n            >\n              <Ionicons name={showDirections ? \"chevron-up\" : \"list\"} size={20} color=\"#FFFFFF\" />\n              <Text style={styles.directionsButtonText}>\n                {showDirections ? 'Hide' : 'Show'} Directions\n              </Text>\n            </TouchableOpacity>\n            \n            <TouchableOpacity onPress={clearRoute}>\n              <Ionicons name=\"close-circle\" size={28} color={colors.notification} />\n            </TouchableOpacity>\n          </View>\n\n          {/* Turn-by-Turn Directions */}\n          {showDirections && (\n            <ScrollView style={styles.directionsContainer}>\n              {currentRoute.directions.map((step, index) => (\n                <View\n                  key={index}\n                  style={[styles.directionStep, { backgroundColor: colors.card, borderLeftColor: colors.tint }]}\n                >\n                  <View style={styles.stepNumber}>\n                    <Text style={[styles.stepNumberText, { color: colors.tint }]}>\n                      {index + 1}\n                    </Text>\n                  </View>\n                  <View style={styles.stepInfo}>\n                    <Text style={[styles.stepInstruction, { color: colors.text }]}>\n                      {step.instruction}\n                    </Text>\n                    {step.distance && (\n                      <Text style={[styles.stepDistance, { color: colors.tabIconDefault }]}>\n                        {step.distance}\n                      </Text>\n                    )}\n                  </View>\n                </View>\n              ))}\n            </ScrollView>\n          )}\n        </>\n      )}\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n  },\n  header: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    padding: 16,\n    borderBottomWidth: 1,\n  },\n  headerIcon: {\n    marginRight: 8,\n  },\n  headerTitle: {\n    fontSize: 18,\n    fontWeight: '700',\n    color: '#FFFFFF',\n  },\n  searchContainer: {\n    padding: 16,\n  },\n  typeSelector: {\n    flexDirection: 'row',\n    marginBottom: 16,\n    backgroundColor: '#E5E7EB',\n    borderRadius: 8,\n    padding: 4,\n  },\n  typeButton: {\n    flex: 1,\n    paddingVertical: 10,\n    alignItems: 'center',\n    borderRadius: 6,\n  },\n  typeButtonText: {\n    fontSize: 14,\n    fontWeight: '600',\n    color: '#6B7280',\n  },\n  typeButtonTextActive: {\n    color: '#FFFFFF',\n  },\n  searchBox: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    padding: 12,\n    borderRadius: 8,\n    borderWidth: 1,\n    gap: 8,\n  },\n  searchInput: {\n    flex: 1,\n    fontSize: 16,\n  },\n  results: {\n    marginTop: 8,\n    maxHeight: 300,\n  },\n  resultItem: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    padding: 12,\n    borderBottomWidth: 1,\n    gap: 12,\n  },\n  resultInfo: {\n    flex: 1,\n  },\n  resultName: {\n    fontSize: 16,\n    fontWeight: '600',\n  },\n  resultDetails: {\n    fontSize: 12,\n    marginTop: 2,\n  },\n  coordsContainer: {\n    gap: 12,\n  },\n  coordsLabel: {\n    fontSize: 14,\n    fontWeight: '600',\n    marginTop: 8,\n  },\n  coordsInput: {\n    padding: 12,\n    borderRadius: 8,\n    borderWidth: 1,\n    fontSize: 16,\n  },\n  goButton: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'center',\n    padding: 16,\n    borderRadius: 8,\n    marginTop: 16,\n    gap: 8,\n  },\n  goButtonText: {\n    color: '#FFFFFF',\n    fontSize: 16,\n    fontWeight: '700',\n  },\n  calculatingContainer: {\n    alignItems: 'center',\n    padding: 32,\n    gap: 12,\n  },\n  calculatingText: {\n    fontSize: 14,\n  },\n  routeSummary: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    padding: 16,\n    borderBottomWidth: 1,\n    gap: 12,\n  },\n  routeInfo: {\n    flex: 1,\n  },\n  routeDistance: {\n    fontSize: 24,\n    fontWeight: '700',\n  },\n  routeDuration: {\n    fontSize: 14,\n    marginTop: 4,\n  },\n  directionsButton: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    padding: 10,\n    borderRadius: 6,\n    gap: 6,\n  },\n  directionsButtonText: {\n    color: '#FFFFFF',\n    fontSize: 14,\n    fontWeight: '600',\n  },\n  directionsContainer: {\n    flex: 1,\n    padding: 16,\n  },\n  directionStep: {\n    flexDirection: 'row',\n    padding: 12,\n    marginBottom: 8,\n    borderRadius: 8,\n    borderLeftWidth: 3,\n    gap: 12,\n  },\n  stepNumber: {\n    width: 28,\n    height: 28,\n    borderRadius: 14,\n    backgroundColor: '#E0F2FE',\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n  stepNumberText: {\n    fontSize: 12,\n    fontWeight: '700',\n  },\n  stepInfo: {\n    flex: 1,\n  },\n  stepInstruction: {\n    fontSize: 15,\n    fontWeight: '600',\n  },\n  stepDistance: {\n    fontSize: 12,\n    marginTop: 4,\n  },\n});\n","size_bytes":15409},"pyproject.toml":{"content":"[project]\nname = \"repl-nix-workspace\"\nversion = \"0.1.0\"\ndescription = \"Add your description here\"\nrequires-python = \">=3.11\"\ndependencies = [\n    \"email-validator>=2.3.0\",\n    \"flask>=3.1.2\",\n    \"flask-cors>=6.0.1\",\n    \"flask-sqlalchemy>=3.1.1\",\n    \"gunicorn>=23.0.0\",\n    \"psycopg2-binary>=2.9.11\",\n    \"scgraph>=2.14.1\",\n]\n","size_bytes":328},"utils/notificationService.ts":{"content":"\nimport * as Device from 'expo-device';\nimport { Platform } from 'react-native';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\n\n// Conditional import - only load notifications when needed\nlet Notifications: any = null;\n\n// Check if notifications are available\nconst isNotificationsAvailable = () => {\n  try {\n    if (!Notifications) {\n      Notifications = require('expo-notifications');\n    }\n    return true;\n  } catch (error) {\n    console.log('Notifications not available in this environment');\n    return false;\n  }\n};\n\nexport enum NotificationType {\n  CHAT_MESSAGE = 'chat_message',\n  VESSEL_NEARBY = 'vessel_nearby',\n  BOAT_LIKED = 'boat_liked',\n  BOAT_COMMENTED = 'boat_commented',\n  SOS_ALERT = 'sos_alert',\n  RESTRICTED_ZONE = 'restricted_zone',\n  SAFE_ZONE = 'safe_zone',\n  WEATHER_WARNING = 'weather_warning',\n  LOW_FUEL = 'low_fuel',\n}\n\nexport interface NotificationData {\n  id: string;\n  type: NotificationType;\n  title: string;\n  message: string;\n  data?: any;\n  timestamp: number;\n  read: boolean;\n}\n\n// Configure notification handler only if available\nconst configureNotificationHandler = () => {\n  if (isNotificationsAvailable() && Notifications) {\n    Notifications.setNotificationHandler({\n      handleNotification: async () => ({\n        shouldShowAlert: true,\n        shouldPlaySound: true,\n        shouldSetBadge: true,\n        shouldShowBanner: true,\n        shouldShowList: true,\n      }),\n    });\n  }\n};\n\nexport async function requestNotificationPermissions(): Promise<boolean> {\n  if (!Device.isDevice) {\n    console.log('Notifications only work on physical devices');\n    return false;\n  }\n\n  if (!isNotificationsAvailable()) {\n    return false;\n  }\n\n  configureNotificationHandler();\n\n  const { status: existingStatus } = await Notifications.getPermissionsAsync();\n  let finalStatus = existingStatus;\n\n  if (existingStatus !== 'granted') {\n    const { status } = await Notifications.requestPermissionsAsync();\n    finalStatus = status;\n  }\n\n  if (finalStatus !== 'granted') {\n    console.log('Failed to get push notification permissions');\n    return false;\n  }\n\n  if (Platform.OS === 'android') {\n    await Notifications.setNotificationChannelAsync('default', {\n      name: 'default',\n      importance: Notifications.AndroidImportance.MAX,\n      vibrationPattern: [0, 250, 250, 250],\n      lightColor: '#0ea5e9',\n    });\n  }\n\n  return true;\n}\n\nexport async function getPushToken(): Promise<string | null> {\n  if (!isNotificationsAvailable()) {\n    return null;\n  }\n\n  try {\n    const token = (await Notifications.getExpoPushTokenAsync()).data;\n    console.log('Push token:', token);\n    return token;\n  } catch (error) {\n    console.error('Error getting push token:', error);\n    return null;\n  }\n}\n\nexport async function scheduleLocalNotification(\n  type: NotificationType,\n  title: string,\n  body: string,\n  data?: any\n): Promise<string> {\n  if (!isNotificationsAvailable()) {\n    const mockId = `mock-${Date.now()}`;\n    await saveNotificationToHistory({\n      id: mockId,\n      type,\n      title,\n      message: body,\n      data,\n      timestamp: Date.now(),\n      read: false,\n    });\n    return mockId;\n  }\n\n  const notificationId = await Notifications.scheduleNotificationAsync({\n    content: {\n      title,\n      body,\n      data: { type, ...data },\n      sound: true,\n    },\n    trigger: null,\n  });\n\n  await saveNotificationToHistory({\n    id: notificationId,\n    type,\n    title,\n    message: body,\n    data,\n    timestamp: Date.now(),\n    read: false,\n  });\n\n  return notificationId;\n}\n\nexport async function sendNotification(\n  type: NotificationType,\n  title: string,\n  message: string,\n  data?: any\n): Promise<void> {\n  try {\n    await scheduleLocalNotification(type, title, message, data);\n  } catch (error) {\n    console.error('Error sending notification:', error);\n  }\n}\n\nexport async function saveNotificationToHistory(notification: NotificationData): Promise<void> {\n  try {\n    const historyJson = await AsyncStorage.getItem('notification_history');\n    const history: NotificationData[] = historyJson ? JSON.parse(historyJson) : [];\n    history.unshift(notification);\n\n    const maxHistory = 100;\n    if (history.length > maxHistory) {\n      history.splice(maxHistory);\n    }\n\n    await AsyncStorage.setItem('notification_history', JSON.stringify(history));\n  } catch (error) {\n    console.error('Error saving notification to history:', error);\n  }\n}\n\nexport async function getNotificationHistory(): Promise<NotificationData[]> {\n  try {\n    const historyJson = await AsyncStorage.getItem('notification_history');\n    return historyJson ? JSON.parse(historyJson) : [];\n  } catch (error) {\n    console.error('Error getting notification history:', error);\n    return [];\n  }\n}\n\nexport async function markNotificationAsRead(notificationId: string): Promise<void> {\n  try {\n    const historyJson = await AsyncStorage.getItem('notification_history');\n    const history: NotificationData[] = historyJson ? JSON.parse(historyJson) : [];\n\n    const notification = history.find(n => n.id === notificationId);\n    if (notification) {\n      notification.read = true;\n      await AsyncStorage.setItem('notification_history', JSON.stringify(history));\n    }\n  } catch (error) {\n    console.error('Error marking notification as read:', error);\n  }\n}\n\nexport async function getUnreadNotificationCount(): Promise<number> {\n  try {\n    const history = await getNotificationHistory();\n    return history.filter(n => !n.read).length;\n  } catch (error) {\n    console.error('Error getting unread notification count:', error);\n    return 0;\n  }\n}\n\nexport async function clearAllNotifications(): Promise<void> {\n  if (isNotificationsAvailable()) {\n    await Notifications.dismissAllNotificationsAsync();\n  }\n  await AsyncStorage.removeItem('notification_history');\n}\n\nexport async function cancelNotification(notificationId: string): Promise<void> {\n  if (isNotificationsAvailable()) {\n    await Notifications.cancelScheduledNotificationAsync(notificationId);\n  }\n}\n\nexport function subscribeToNotificationReceived(\n  callback: (notification: any) => void\n): any {\n  if (!isNotificationsAvailable()) {\n    return { remove: () => {} };\n  }\n  return Notifications.addNotificationReceivedListener(callback);\n}\n\nexport function subscribeToNotificationResponse(\n  callback: (response: any) => void\n): any {\n  if (!isNotificationsAvailable()) {\n    return { remove: () => {} };\n  }\n  return Notifications.addNotificationResponseReceivedListener(callback);\n}\n","size_bytes":6505},"utils/maritimeIntelligence.ts":{"content":"\nimport { getBackendUrl, getRoutingUrl } from '../config';\n\nexport interface MaritimeHazard {\n  id: string;\n  type: 'debris' | 'shallow' | 'weather' | 'congestion' | 'regulatory' | 'other';\n  severity: 'low' | 'medium' | 'high' | 'critical';\n  lat: number;\n  lng: number;\n  description: string;\n  reportedBy: string;\n  vesselId?: string;\n  timestamp: string;\n  expiresAt: string;\n  verified: boolean;\n  upvotes: number;\n  downvotes: number;\n  distance?: number;\n}\n\nexport interface TrafficReport {\n  id: string;\n  lat: number;\n  lng: number;\n  density: 'low' | 'medium' | 'high' | 'critical';\n  vesselCount: number;\n  portCode?: string;\n  timestamp: string;\n  reportedBy: string;\n}\n\nexport interface RoutePrediction {\n  estimatedDelay: number;\n  weatherRisk: 'low' | 'medium' | 'high';\n  collisionRisk: 'low' | 'medium' | 'high';\n  fuelEfficiency: number;\n  recommendedSpeed: number;\n}\n\nexport interface EnhancedRoute {\n  coordinates: Array<{ lat: number; lng: number }>;\n  distance: number;\n  duration: number;\n  directions: Array<any>;\n  origin: any;\n  destination: any;\n  safetyScore: number;\n  trafficDensity: 'low' | 'medium' | 'high' | 'critical';\n  hazards: MaritimeHazard[];\n  prediction: RoutePrediction;\n  recommendations: string[];\n  alternativeRoutes: Array<any>;\n}\n\n// Dynamic routing API that works in both development and production\nfunction getRoutingAPI(): string {\n  return `${getRoutingUrl()}/api`;\n}\n\n// Report a maritime hazard (crowdsourced)\nexport const reportHazard = async (\n  type: MaritimeHazard['type'],\n  severity: MaritimeHazard['severity'],\n  lat: number,\n  lng: number,\n  description: string,\n  reportedBy: string,\n  vesselId?: string,\n  expiryHours: number = 24\n): Promise<MaritimeHazard | null> => {\n  try {\n    const response = await fetch(`${getRoutingAPI()}/hazards/report`, {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({\n        type,\n        severity,\n        lat,\n        lng,\n        description,\n        reportedBy,\n        vesselId,\n        expiryHours\n      })\n    });\n\n    if (!response.ok) throw new Error('Failed to report hazard');\n    \n    const data = await response.json();\n    // Backend returns the hazard directly, not wrapped in an object\n    return data.hazard || data;\n  } catch (error) {\n    console.error('Error reporting hazard:', error);\n    return null;\n  }\n};\n\n// Get nearby hazards\nexport const getNearbyHazards = async (\n  lat: number,\n  lng: number,\n  radius: number = 50\n): Promise<MaritimeHazard[]> => {\n  try {\n    const response = await fetch(\n      `${getRoutingAPI()}/hazards/nearby?lat=${lat}&lng=${lng}&radius=${radius}`\n    );\n\n    if (!response.ok) {\n      // Return empty array instead of throwing\n      return [];\n    }\n    \n    const data = await response.json();\n    // Backend returns the hazards array directly, not wrapped in an object\n    return Array.isArray(data) ? data : (data.hazards || []);\n  } catch (error) {\n    // Silently return empty array instead of logging error\n    return [];\n  }\n};\n\n// Vote on hazard credibility\nexport const voteHazard = async (\n  hazardId: string,\n  vote: 'up' | 'down'\n): Promise<boolean> => {\n  try {\n    const response = await fetch(`${getRoutingAPI()}/hazards/${hazardId}/vote`, {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({ vote })\n    });\n\n    return response.ok;\n  } catch (error) {\n    console.error('Error voting on hazard:', error);\n    return false;\n  }\n};\n\n// Report traffic/congestion\nexport const reportTraffic = async (\n  lat: number,\n  lng: number,\n  density: TrafficReport['density'],\n  vesselCount: number,\n  vesselId: string,\n  portCode?: string\n): Promise<TrafficReport | null> => {\n  try {\n    const response = await fetch(`${getRoutingAPI()}/traffic/report`, {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({\n        lat,\n        lng,\n        density,\n        vesselCount,\n        vesselId,\n        portCode\n      })\n    });\n\n    if (!response.ok) throw new Error('Failed to report traffic');\n    \n    const data = await response.json();\n    // Backend returns the report directly, not wrapped in an object\n    return data.report || data;\n  } catch (error) {\n    console.error('Error reporting traffic:', error);\n    return null;\n  }\n};\n\n// Get traffic heatmap data\nexport const getTrafficHeatmap = async (): Promise<TrafficReport[]> => {\n  try {\n    const response = await fetch(`${getRoutingAPI()}/traffic/heatmap`);\n\n    if (!response.ok) {\n      // Return empty array instead of throwing\n      return [];\n    }\n    \n    const data = await response.json();\n    // Backend returns the traffic array directly, not wrapped in an object\n    return Array.isArray(data) ? data : (data.traffic || []);\n  } catch (error) {\n    // Silently return empty array instead of logging error\n    return [];\n  }\n};\n\n// Calculate AI-optimized route\nexport const calculateIntelligentRoute = async (\n  origin: { lat: number; lng: number },\n  destination: { lat: number; lng: number },\n  preferences?: {\n    speed?: number;\n    showAlternatives?: boolean;\n  }\n): Promise<EnhancedRoute | null> => {\n  try {\n    const response = await fetch(`${getRoutingAPI()}/route/calculate`, {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({\n        origin,\n        destination,\n        preferences\n      })\n    });\n\n    if (!response.ok) throw new Error('Failed to calculate route');\n    \n    const data = await response.json();\n    // Backend returns the route directly, not wrapped in an object\n    return data.route || data;\n  } catch (error) {\n    console.error('Error calculating intelligent route:', error);\n    return null;\n  }\n};\n\n// Get hazard icon\nexport const getHazardIcon = (type: MaritimeHazard['type']): string => {\n  const icons = {\n    debris: 'ü™µ',\n    shallow: '‚öì',\n    weather: 'üåßÔ∏è',\n    congestion: 'üö¶',\n    regulatory: '‚ö†Ô∏è',\n    other: 'üìç'\n  };\n  return icons[type] || '‚ö†Ô∏è';\n};\n\n// Get severity color\nexport const getSeverityColor = (severity: MaritimeHazard['severity']): string => {\n  const colors = {\n    low: '#10b981',\n    medium: '#f59e0b',\n    high: '#ef4444',\n    critical: '#991b1b'\n  };\n  return colors[severity] || '#6b7280';\n};\n\n// Get traffic density color\nexport const getTrafficColor = (density: TrafficReport['density']): string => {\n  const colors = {\n    low: '#10b981',\n    medium: '#f59e0b',\n    high: '#ef4444',\n    critical: '#991b1b'\n  };\n  return colors[density] || '#6b7280';\n};\n","size_bytes":6597},"app/(tabs)/notifications.tsx":{"content":"\nimport React, { useState, useEffect } from 'react';\nimport { View, Text, StyleSheet, ScrollView, TouchableOpacity, RefreshControl } from 'react-native';\nimport { useColorScheme } from '@/hooks/useColorScheme';\nimport { Colors } from '@/constants/Colors';\nimport { IconSymbol } from '@/components/ui/IconSymbol';\nimport { getNotifications, markNotificationAsRead } from '@/utils/notificationService';\nimport { getCurrentUser } from '@/utils/auth';\n\ninterface Notification {\n  id: string;\n  type: string;\n  message: string;\n  timestamp: string;\n  read: boolean;\n  data?: any;\n}\n\nexport default function NotificationsScreen() {\n  const colorScheme = useColorScheme();\n  const isDark = colorScheme === 'dark';\n  const colors = Colors[isDark ? 'dark' : 'light'];\n  const [notifications, setNotifications] = useState<Notification[]>([]);\n  const [refreshing, setRefreshing] = useState(false);\n  const [filter, setFilter] = useState<'all' | 'unread'>('all');\n\n  useEffect(() => {\n    loadNotifications();\n  }, []);\n\n  const loadNotifications = async () => {\n    try {\n      const user = await getCurrentUser();\n      if (user) {\n        const notifs = await getNotifications(user.id);\n        setNotifications(notifs);\n      }\n    } catch (error) {\n      console.error('Error loading notifications:', error);\n    }\n  };\n\n  const onRefresh = async () => {\n    setRefreshing(true);\n    await loadNotifications();\n    setRefreshing(false);\n  };\n\n  const handleNotificationPress = async (notification: Notification) => {\n    if (!notification.read) {\n      await markNotificationAsRead(notification.id);\n      setNotifications(prev =>\n        prev.map(n => (n.id === notification.id ? { ...n, read: true } : n))\n      );\n    }\n  };\n\n  const getNotificationIcon = (type: string) => {\n    const icons: { [key: string]: string } = {\n      weather_alert: '‚ö†Ô∏è',\n      sos_nearby: 'üö®',\n      vessel_nearby: 'üö¢',\n      message: 'üí¨',\n      zone_warning: '‚õî',\n      safe_zone: '‚úÖ',\n      like: '‚ù§Ô∏è',\n      comment: 'üí¨',\n      mention: 'üì¢',\n    };\n    return icons[type] || 'üîî';\n  };\n\n  const getTimeAgo = (timestamp: string) => {\n    const now = new Date();\n    const notifTime = new Date(timestamp);\n    const diffMs = now.getTime() - notifTime.getTime();\n    const diffMins = Math.floor(diffMs / 60000);\n    const diffHours = Math.floor(diffMins / 60);\n    const diffDays = Math.floor(diffHours / 24);\n\n    if (diffMins < 1) return 'Just now';\n    if (diffMins < 60) return `${diffMins}m`;\n    if (diffHours < 24) return `${diffHours}h`;\n    if (diffDays < 7) return `${diffDays}d`;\n    return new Date(timestamp).toLocaleDateString();\n  };\n\n  const filteredNotifications = filter === 'all' \n    ? notifications \n    : notifications.filter(n => !n.read);\n\n  return (\n    <View style={[styles.container, { backgroundColor: colors.background }]}>\n      {/* Header */}\n      <View style={[styles.header, { backgroundColor: isDark ? colors.card : '#FFFFFF', borderBottomColor: isDark ? colors.border : 'rgba(0,0,0,0.05)' }]}>\n        <Text style={[styles.headerTitle, { color: colors.text }]}>Notifications</Text>\n        <TouchableOpacity style={styles.settingsButton}>\n          <IconSymbol name=\"ellipsis.circle\" size={24} color={colors.text} />\n        </TouchableOpacity>\n      </View>\n\n      {/* Filter Pills */}\n      <View style={styles.filterContainer}>\n        <ScrollView horizontal showsHorizontalScrollIndicator={false} contentContainerStyle={styles.filterScroll}>\n          <TouchableOpacity\n            style={[\n              styles.filterPill,\n              { backgroundColor: filter === 'all' ? colors.primary : (isDark ? colors.card : '#F0F0F0') }\n            ]}\n            onPress={() => setFilter('all')}\n          >\n            <Text style={[styles.filterText, { color: filter === 'all' ? '#FFFFFF' : colors.text }]}>\n              All\n            </Text>\n          </TouchableOpacity>\n          <TouchableOpacity\n            style={[\n              styles.filterPill,\n              { backgroundColor: filter === 'unread' ? colors.primary : (isDark ? colors.card : '#F0F0F0') }\n            ]}\n            onPress={() => setFilter('unread')}\n          >\n            <Text style={[styles.filterText, { color: filter === 'unread' ? '#FFFFFF' : colors.text }]}>\n              Unread\n            </Text>\n            {notifications.filter(n => !n.read).length > 0 && (\n              <View style={styles.badge}>\n                <Text style={styles.badgeText}>\n                  {notifications.filter(n => !n.read).length}\n                </Text>\n              </View>\n            )}\n          </TouchableOpacity>\n        </ScrollView>\n      </View>\n\n      {/* Notifications List */}\n      <ScrollView\n        style={styles.listContainer}\n        refreshControl={\n          <RefreshControl refreshing={refreshing} onRefresh={onRefresh} tintColor={colors.primary} />\n        }\n      >\n        {filteredNotifications.length === 0 ? (\n          <View style={styles.emptyState}>\n            <Text style={styles.emptyIcon}>üîî</Text>\n            <Text style={[styles.emptyText, { color: colors.secondaryText }]}>\n              {filter === 'unread' ? 'All caught up!' : 'No notifications yet'}\n            </Text>\n            <Text style={[styles.emptySubtext, { color: colors.tertiaryText }]}>\n              {filter === 'unread' ? 'You have no unread notifications' : 'Stay tuned for updates'}\n            </Text>\n          </View>\n        ) : (\n          filteredNotifications.map((notification) => (\n            <TouchableOpacity\n              key={notification.id}\n              style={[\n                styles.notificationItem,\n                {\n                  backgroundColor: !notification.read ? (isDark ? colors.card : '#F0F7FF') : 'transparent',\n                  borderBottomColor: isDark ? colors.border : 'rgba(0,0,0,0.05)',\n                }\n              ]}\n              onPress={() => handleNotificationPress(notification)}\n            >\n              <View style={[styles.iconContainer, { backgroundColor: isDark ? colors.background : '#FFFFFF' }]}>\n                <Text style={styles.notificationIcon}>{getNotificationIcon(notification.type)}</Text>\n              </View>\n              <View style={styles.notificationContent}>\n                <Text style={[styles.notificationMessage, { color: colors.text }]}>\n                  {notification.message}\n                </Text>\n                <Text style={[styles.notificationTime, { color: colors.tertiaryText }]}>\n                  {getTimeAgo(notification.timestamp)}\n                </Text>\n              </View>\n              {!notification.read && (\n                <View style={[styles.unreadDot, { backgroundColor: colors.primary }]} />\n              )}\n            </TouchableOpacity>\n          ))\n        )}\n      </ScrollView>\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n  },\n  header: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    paddingTop: 60,\n    paddingBottom: 16,\n    paddingHorizontal: 16,\n    borderBottomWidth: 1,\n  },\n  headerTitle: {\n    fontSize: 28,\n    fontWeight: '700',\n  },\n  settingsButton: {\n    width: 40,\n    height: 40,\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  filterContainer: {\n    paddingVertical: 12,\n  },\n  filterScroll: {\n    paddingHorizontal: 16,\n    gap: 8,\n  },\n  filterPill: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    paddingHorizontal: 16,\n    paddingVertical: 8,\n    borderRadius: 20,\n    gap: 6,\n  },\n  filterText: {\n    fontSize: 14,\n    fontWeight: '600',\n  },\n  badge: {\n    backgroundColor: '#FFFFFF',\n    paddingHorizontal: 6,\n    paddingVertical: 2,\n    borderRadius: 10,\n    minWidth: 20,\n    alignItems: 'center',\n  },\n  badgeText: {\n    color: '#007AFF',\n    fontSize: 11,\n    fontWeight: '700',\n  },\n  listContainer: {\n    flex: 1,\n  },\n  notificationItem: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    padding: 16,\n    borderBottomWidth: 1,\n  },\n  iconContainer: {\n    width: 44,\n    height: 44,\n    borderRadius: 22,\n    justifyContent: 'center',\n    alignItems: 'center',\n    marginRight: 12,\n  },\n  notificationIcon: {\n    fontSize: 22,\n  },\n  notificationContent: {\n    flex: 1,\n  },\n  notificationMessage: {\n    fontSize: 14,\n    lineHeight: 20,\n    marginBottom: 4,\n  },\n  notificationTime: {\n    fontSize: 12,\n  },\n  unreadDot: {\n    width: 8,\n    height: 8,\n    borderRadius: 4,\n    marginLeft: 8,\n  },\n  emptyState: {\n    alignItems: 'center',\n    justifyContent: 'center',\n    paddingVertical: 80,\n  },\n  emptyIcon: {\n    fontSize: 64,\n    marginBottom: 16,\n  },\n  emptyText: {\n    fontSize: 18,\n    fontWeight: '600',\n    marginBottom: 8,\n  },\n  emptySubtext: {\n    fontSize: 14,\n  },\n});\n","size_bytes":8786},"main.py":{"content":"def main():\n    print(\"Hello from repl-nix-workspace!\")\n\n\nif __name__ == \"__main__\":\n    main()\n","size_bytes":96},"utils/zoneData.ts":{"content":"export interface Zone {\n  id: string;\n  name: string;\n  type: 'safe' | 'restricted' | 'border' | 'fishing';\n  coordinates: Array<{ lat: number; lng: number }>;\n  description: string;\n  color: string;\n  opacity: number;\n}\n\nexport interface Route {\n  id: string;\n  name: string;\n  coordinates: Array<{ lat: number; lng: number }>;\n  distance: number;\n  estimatedTime: number;\n  hazards: string[];\n  vesselDensity: 'low' | 'medium' | 'high';\n}\n\nexport const maritimeZones: Zone[] = [\n  {\n    id: 'safe_zone_1',\n    name: 'Prime Fishing Zone - Bay Area',\n    type: 'safe',\n    coordinates: [\n      { lat: 13.0, lng: 80.2 },\n      { lat: 13.1, lng: 80.2 },\n      { lat: 13.1, lng: 80.35 },\n      { lat: 13.0, lng: 80.35 },\n    ],\n    description: 'Excellent fishing conditions, abundant fish population, calm waters',\n    color: '#22c55e',\n    opacity: 0.3,\n  },\n  {\n    id: 'safe_zone_2',\n    name: 'Good Fishing Zone - Coastal Waters',\n    type: 'fishing',\n    coordinates: [\n      { lat: 12.9, lng: 80.15 },\n      { lat: 12.95, lng: 80.15 },\n      { lat: 12.95, lng: 80.25 },\n      { lat: 12.9, lng: 80.25 },\n    ],\n    description: 'Good fish population, moderate conditions',\n    color: '#84cc16',\n    opacity: 0.25,\n  },\n  {\n    id: 'restricted_zone_1',\n    name: 'Naval Restricted Area',\n    type: 'restricted',\n    coordinates: [\n      { lat: 13.05, lng: 80.4 },\n      { lat: 13.15, lng: 80.4 },\n      { lat: 13.15, lng: 80.5 },\n      { lat: 13.05, lng: 80.5 },\n    ],\n    description: 'Military operations area - STRICTLY NO ENTRY',\n    color: '#ef4444',\n    opacity: 0.4,\n  },\n  {\n    id: 'restricted_zone_2',\n    name: 'Marine Protected Area',\n    type: 'restricted',\n    coordinates: [\n      { lat: 12.85, lng: 80.3 },\n      { lat: 12.9, lng: 80.3 },\n      { lat: 12.9, lng: 80.4 },\n      { lat: 12.85, lng: 80.4 },\n    ],\n    description: 'Protected marine ecosystem - Fishing prohibited',\n    color: '#f59e0b',\n    opacity: 0.35,\n  },\n  {\n    id: 'border_zone_1',\n    name: 'International Maritime Boundary',\n    type: 'border',\n    coordinates: [\n      { lat: 13.2, lng: 80.0 },\n      { lat: 13.2, lng: 80.6 },\n      { lat: 13.22, lng: 80.6 },\n      { lat: 13.22, lng: 80.0 },\n    ],\n    description: 'International waters boundary - Permits required beyond this line',\n    color: '#facc15',\n    opacity: 0.4,\n  },\n  {\n    id: 'safe_zone_3',\n    name: 'Offshore Fishing Zone',\n    type: 'fishing',\n    coordinates: [\n      { lat: 13.15, lng: 80.25 },\n      { lat: 13.2, lng: 80.25 },\n      { lat: 13.2, lng: 80.35 },\n      { lat: 13.15, lng: 80.35 },\n    ],\n    description: 'Deep sea fishing area, good catch potential',\n    color: '#10b981',\n    opacity: 0.25,\n  },\n];\n\nexport function calculateOptimalRoute(\n  start: { lat: number; lng: number },\n  end: { lat: number; lng: number },\n  avoidZones: Zone[] = []\n): Route {\n  const numSamples = 20;\n  const routePoints: Array<{ lat: number; lng: number }> = [];\n  \n  for (let i = 0; i <= numSamples; i++) {\n    const fraction = i / numSamples;\n    routePoints.push({\n      lat: start.lat + (end.lat - start.lat) * fraction,\n      lng: start.lng + (end.lng - start.lng) * fraction,\n    });\n  }\n\n  const directRoute: Route = {\n    id: 'route_' + Date.now(),\n    name: 'Direct Route',\n    coordinates: routePoints,\n    distance: calculateDistance(start.lat, start.lng, end.lat, end.lng),\n    estimatedTime: 0,\n    hazards: [],\n    vesselDensity: 'low',\n  };\n\n  directRoute.estimatedTime = (directRoute.distance / 15) * 60;\n\n  const hazards: string[] = [];\n  const crossedZones = new Set<string>();\n  \n  avoidZones.forEach(zone => {\n    for (const point of routePoints) {\n      if (isPointInPolygon(point, zone.coordinates)) {\n        if (!crossedZones.has(zone.id)) {\n          crossedZones.add(zone.id);\n          if (zone.type === 'restricted') {\n            hazards.push(`‚ö†Ô∏è Route crosses ${zone.name}`);\n          } else if (zone.type === 'border') {\n            hazards.push(`üöß Route crosses ${zone.name}`);\n          }\n        }\n        break;\n      }\n    }\n  });\n\n  directRoute.hazards = hazards;\n\n  return directRoute;\n}\n\nfunction isPointInPolygon(\n  point: { lat: number; lng: number },\n  polygon: Array<{ lat: number; lng: number }>\n): boolean {\n  let inside = false;\n  for (let i = 0, j = polygon.length - 1; i < polygon.length; j = i++) {\n    const xi = polygon[i].lng, yi = polygon[i].lat;\n    const xj = polygon[j].lng, yj = polygon[j].lat;\n\n    const intersect = ((yi > point.lat) !== (yj > point.lat))\n      && (point.lng < (xj - xi) * (point.lat - yi) / (yj - yi) + xi);\n    if (intersect) inside = !inside;\n  }\n  return inside;\n}\n\nexport function calculateDistance(\n  lat1: number,\n  lon1: number,\n  lat2: number,\n  lon2: number\n): number {\n  const R = 6371;\n  const dLat = (lat2 - lat1) * Math.PI / 180;\n  const dLon = (lon2 - lon1) * Math.PI / 180;\n  const a =\n    Math.sin(dLat / 2) * Math.sin(dLat / 2) +\n    Math.cos(lat1 * Math.PI / 180) *\n      Math.cos(lat2 * Math.PI / 180) *\n      Math.sin(dLon / 2) *\n      Math.sin(dLon / 2);\n  const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n  return R * c;\n}\n\nexport function isInRestrictedZone(\n  location: { lat: number; lng: number },\n  zones: Zone[] = maritimeZones\n): Zone | null {\n  for (const zone of zones) {\n    if (zone.type === 'restricted' && isPointInPolygon(location, zone.coordinates)) {\n      return zone;\n    }\n  }\n  return null;\n}\n\nexport function getNearestSafeZone(\n  location: { lat: number; lng: number },\n  zones: Zone[] = maritimeZones\n): Zone | null {\n  const safeZones = zones.filter(z => z.type === 'safe' || z.type === 'fishing');\n  \n  if (safeZones.length === 0) return null;\n\n  let nearest = safeZones[0];\n  let minDistance = Infinity;\n\n  safeZones.forEach(zone => {\n    const centerLat = zone.coordinates.reduce((sum, c) => sum + c.lat, 0) / zone.coordinates.length;\n    const centerLng = zone.coordinates.reduce((sum, c) => sum + c.lng, 0) / zone.coordinates.length;\n    const distance = calculateDistance(location.lat, location.lng, centerLat, centerLng);\n    \n    if (distance < minDistance) {\n      minDistance = distance;\n      nearest = zone;\n    }\n  });\n\n  return nearest;\n}\n\nexport function getRestrictedZones(zones: Zone[] = maritimeZones): Zone[] {\n  return zones.filter(zone => zone.type === 'restricted');\n}\n\nexport function getSafeZones(zones: Zone[] = maritimeZones): Zone[] {\n  return zones.filter(zone => zone.type === 'safe' || zone.type === 'fishing');\n}\n\nexport function getBorderZones(zones: Zone[] = maritimeZones): Zone[] {\n  return zones.filter(zone => zone.type === 'border');\n}\n\nexport function checkZoneWarnings(\n  location: { lat: number; lng: number }\n): { warning: boolean; message: string; zone?: Zone } {\n  const restrictedZone = isInRestrictedZone(location);\n  \n  if (restrictedZone) {\n    return {\n      warning: true,\n      message: `WARNING: You are in ${restrictedZone.name}! ${restrictedZone.description}`,\n      zone: restrictedZone,\n    };\n  }\n\n  const nearestSafeZone = getNearestSafeZone(location);\n  const distanceToSafe = nearestSafeZone\n    ? calculateDistance(\n        location.lat,\n        location.lng,\n        nearestSafeZone.coordinates[0].lat,\n        nearestSafeZone.coordinates[0].lng\n      )\n    : Infinity;\n\n  if (distanceToSafe > 10) {\n    return {\n      warning: true,\n      message: `You are ${distanceToSafe.toFixed(1)} km from the nearest fishing zone`,\n    };\n  }\n\n  return { warning: false, message: 'All clear' };\n}\n","size_bytes":7448},"components/WazeVesselMap.tsx":{"content":"import React, { useState, useEffect, useRef } from 'react';\nimport { View, Text, StyleSheet, TouchableOpacity, TextInput, Alert, ScrollView, Modal, Platform } from 'react-native';\nimport { WebView } from 'react-native-webview';\nimport { Theme } from '@/constants/Theme';\nimport {\n  reportHazard,\n  getNearbyHazards,\n  voteHazard,\n  reportTraffic,\n  calculateIntelligentRoute,\n  getHazardIcon,\n  getSeverityColor,\n  type MaritimeHazard\n} from '@/utils/maritimeIntelligence';\n\ninterface WazeVesselMapProps {\n  userLocation: { lat: number; lng: number } | null;\n  vessels?: Array<{\n    id: string;\n    name: string;\n    latitude: number;\n    longitude: number;\n    speed?: number;\n    heading?: number;\n  }>;\n  height?: number;\n}\n\ninterface RouteSegment {\n  lat: number;\n  lng: number;\n  instruction?: string;\n  maneuver?: string;\n  distance?: number;\n  heading?: number;\n}\n\ninterface NavigationState {\n  currentSegmentIndex: number;\n  distanceToNext: number;\n  timeToNext: number;\n  heading: number;\n  speed: number;\n}\n\nexport default function WazeVesselMap({ userLocation, vessels = [], height = 500 }: WazeVesselMapProps) {\n  const colors = Theme.colors;\n\n  const [destination, setDestination] = useState<{ lat: number; lng: number } | null>(null);\n  const [destinationInput, setDestinationInput] = useState('');\n  const [currentRoute, setCurrentRoute] = useState<RouteSegment[]>([]);\n  const [isNavigating, setIsNavigating] = useState(false);\n  const [navigationState, setNavigationState] = useState<NavigationState>({\n    currentSegmentIndex: 0,\n    distanceToNext: 0,\n    timeToNext: 0,\n    heading: 0,\n    speed: 0\n  });\n\n  const [hazards, setHazards] = useState<MaritimeHazard[]>([]);\n  const [showHazardReport, setShowHazardReport] = useState(false);\n  const [showRouteOptions, setShowRouteOptions] = useState(false);\n  const [alternativeRoutes, setAlternativeRoutes] = useState<any[]>([]);\n  const [routeMetrics, setRouteMetrics] = useState({\n    distance: 0,\n    duration: 0,\n    fuel: 0,\n    safetyScore: 100,\n    trafficDensity: 'low' as 'low' | 'medium' | 'high' | 'critical'\n  });\n\n  const [inputMode, setInputMode] = useState<'port' | 'coords'>('port');\n  const [portSearchResults, setPortSearchResults] = useState<any[]>([]);\n  const [showPortSuggestions, setShowPortSuggestions] = useState(false);\n  const [selectedPort, setSelectedPort] = useState<any>(null);\n\n  const webViewRef = useRef<WebView>(null);\n\n  // Load hazards\n  useEffect(() => {\n    const loadHazards = async () => {\n      if (!userLocation) return;\n      const nearbyHazards = await getNearbyHazards(userLocation.lat, userLocation.lng, 100);\n      setHazards(nearbyHazards);\n    };\n\n    loadHazards();\n    const interval = setInterval(loadHazards, 120000);\n    return () => clearInterval(interval);\n  }, [userLocation]);\n\n  // Search ports when user types\n  useEffect(() => {\n    const searchPorts = async () => {\n      if (inputMode !== 'port' || destinationInput.length < 2) {\n        setPortSearchResults([]);\n        setShowPortSuggestions(false);\n        return;\n      }\n\n      try {\n        const BACKEND_URL = process.env.EXPO_PUBLIC_BACKEND_URL || 'http://localhost:3000';\n        const response = await fetch(`${BACKEND_URL}/api/ports/search?query=${encodeURIComponent(destinationInput)}`);\n        const results = await response.json();\n        setPortSearchResults(results);\n        setShowPortSuggestions(results.length > 0);\n      } catch (error) {\n        console.error('Port search error:', error);\n        setPortSearchResults([]);\n      }\n    };\n\n    const debounce = setTimeout(searchPorts, 300);\n    return () => clearTimeout(debounce);\n  }, [destinationInput, inputMode]);\n\n  // Update navigation state\n  useEffect(() => {\n    if (isNavigating && userLocation && currentRoute.length > 0) {\n      updateNavigationState();\n    }\n  }, [userLocation, isNavigating, currentRoute]);\n\n  const updateNavigationState = () => {\n    if (!userLocation || currentRoute.length === 0) return;\n\n    let closestIndex = 0;\n    let minDist = Infinity;\n\n    // Find current position on route\n    for (let i = 0; i < currentRoute.length; i++) {\n      const dist = calculateDistance(\n        userLocation.lat,\n        userLocation.lng,\n        currentRoute[i].lat,\n        currentRoute[i].lng\n      );\n      if (dist < minDist) {\n        minDist = dist;\n        closestIndex = i;\n      }\n    }\n\n    // If off route by more than 200m, suggest reroute\n    if (minDist > 0.2) {\n      Alert.alert('Off Route', 'You appear to be off the planned route. Would you like to recalculate?', [\n        { text: 'Continue', style: 'cancel' },\n        { text: 'Recalculate', onPress: () => calculateRoute() }\n      ]);\n      return;\n    }\n\n    const nextIndex = Math.min(closestIndex + 1, currentRoute.length - 1);\n    const nextPoint = currentRoute[nextIndex];\n\n    const distToNext = calculateDistance(\n      userLocation.lat,\n      userLocation.lng,\n      nextPoint.lat,\n      nextPoint.lng\n    );\n\n    const heading = calculateBearing(\n      userLocation.lat,\n      userLocation.lng,\n      nextPoint.lat,\n      nextPoint.lng\n    );\n\n    const speed = 15; // knots - would come from GPS in production\n    const timeToNext = (distToNext / (speed * 1.852)) * 60; // minutes\n\n    setNavigationState({\n      currentSegmentIndex: closestIndex,\n      distanceToNext: distToNext,\n      timeToNext: timeToNext,\n      heading: heading,\n      speed: speed\n    });\n\n    // Check if arrived\n    if (destination && distToNext < 0.1 && nextIndex === currentRoute.length - 1) {\n      Alert.alert('üéØ Destination Reached!', 'You have arrived at your destination.', [\n        { text: 'OK', onPress: cancelNavigation }\n      ]);\n    }\n  };\n\n  const parseCoordinates = (input: string): { lat: number; lng: number } | null => {\n    const coords = input.split(',').map(s => parseFloat(s.trim()));\n    if (coords.length === 2 && !isNaN(coords[0]) && !isNaN(coords[1])) {\n      return { lat: coords[0], lng: coords[1] };\n    }\n    return null;\n  };\n\n  const calculateDistance = (lat1: number, lon1: number, lat2: number, lon2: number): number => {\n    const R = 6371;\n    const dLat = (lat2 - lat1) * Math.PI / 180;\n    const dLon = (lon2 - lon1) * Math.PI / 180;\n    const a =\n      Math.sin(dLat / 2) * Math.sin(dLat / 2) +\n      Math.cos(lat1 * Math.PI / 180) *\n        Math.cos(lat2 * Math.PI / 180) *\n        Math.sin(dLon / 2) *\n        Math.sin(dLon / 2);\n    const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n    return R * c;\n  };\n\n  const calculateBearing = (lat1: number, lon1: number, lat2: number, lon2: number): number => {\n    const dLon = (lon2 - lon1) * Math.PI / 180;\n    const y = Math.sin(dLon) * Math.cos(lat2 * Math.PI / 180);\n    const x = Math.cos(lat1 * Math.PI / 180) * Math.sin(lat2 * Math.PI / 180) -\n              Math.sin(lat1 * Math.PI / 180) * Math.cos(lat2 * Math.PI / 180) * Math.cos(dLon);\n    const bearing = Math.atan2(y, x) * 180 / Math.PI;\n    return (bearing + 360) % 360;\n  };\n\n  const getDirectionText = (bearing: number): string => {\n    const directions = ['N', 'NE', 'E', 'SE', 'S', 'SW', 'W', 'NW'];\n    const index = Math.round(bearing / 45) % 8;\n    return directions[index];\n  };\n\n  const selectPort = (port: any) => {\n    setSelectedPort(port);\n    setDestinationInput(port.name);\n    setShowPortSuggestions(false);\n  };\n\n  const calculateRoute = async () => {\n    if (!userLocation || !destinationInput) {\n      Alert.alert('Error', 'Please enter a destination');\n      return;\n    }\n\n    let dest: { lat: number; lng: number } | null = null;\n\n    if (inputMode === 'port') {\n      if (selectedPort) {\n        dest = { lat: selectedPort.lat, lng: selectedPort.lng };\n      } else if (portSearchResults.length > 0) {\n        dest = { lat: portSearchResults[0].lat, lng: portSearchResults[0].lng };\n        setSelectedPort(portSearchResults[0]);\n      } else {\n        Alert.alert('Error', 'Port not found. Please select a port from the suggestions or switch to coordinates mode.');\n        return;\n      }\n    } else {\n      dest = parseCoordinates(destinationInput);\n      if (!dest) {\n        Alert.alert('Error', 'Invalid coordinates format. Use: latitude, longitude');\n        return;\n      }\n    }\n\n    setDestination(dest);\n\n    try {\n      // Use the maritime routing API which uses searoute for proper sea paths\n      const intelligentRoute = await calculateIntelligentRoute(\n        { lat: userLocation.lat, lng: userLocation.lng },\n        { lat: dest.lat, lng: dest.lng },\n        { speed: 15, showAlternatives: true }\n      );\n\n      if (!intelligentRoute) {\n        throw new Error('Failed to calculate maritime route. Ensure origin and destination are accessible by sea.');\n      }\n\n      // The backend already provides properly calculated sea routes\n      // Convert to route segments with maneuver instructions\n      const segments: RouteSegment[] = intelligentRoute.coordinates.map((coord, idx, arr) => {\n        let instruction = '';\n        let maneuver = '';\n        let distance = 0;\n        let heading = 0;\n\n        if (idx === 0) {\n          instruction = 'Begin navigation';\n          maneuver = 'depart';\n        } else if (idx === arr.length - 1) {\n          instruction = 'Arrive at destination';\n          maneuver = 'arrive';\n        } else {\n          const prevCoord = arr[idx - 1];\n          const nextCoord = arr[idx + 1] || coord;\n\n          heading = calculateBearing(prevCoord.lat, prevCoord.lng, coord.lat, coord.lng);\n          const nextHeading = calculateBearing(coord.lat, coord.lng, nextCoord.lat, nextCoord.lng);\n          const turnAngle = (nextHeading - heading + 360) % 360;\n\n          distance = calculateDistance(coord.lat, coord.lng, nextCoord.lat, nextCoord.lng);\n          const distanceNm = distance * 0.539957;\n\n          if (Math.abs(turnAngle) < 15) {\n            maneuver = 'continue';\n            instruction = `Continue on course ${Math.round(heading)}¬∞ for ${distanceNm.toFixed(1)} nm`;\n          } else if (turnAngle > 15 && turnAngle < 90) {\n            maneuver = 'turn-slight-right';\n            instruction = `Bear to starboard, new course ${Math.round(nextHeading)}¬∞ for ${distanceNm.toFixed(1)} nm`;\n          } else if (turnAngle >= 90 && turnAngle < 180) {\n            maneuver = 'turn-right';\n            instruction = `Turn starboard to ${Math.round(nextHeading)}¬∞ for ${distanceNm.toFixed(1)} nm`;\n          } else if (turnAngle > 180 && turnAngle < 270) {\n            maneuver = 'turn-left';\n            instruction = `Turn port to ${Math.round(nextHeading)}¬∞ for ${distanceNm.toFixed(1)} nm`;\n          } else if (turnAngle >= 270) {\n            maneuver = 'turn-slight-left';\n            instruction = `Bear to port, new course ${Math.round(nextHeading)}¬∞ for ${distanceNm.toFixed(1)} nm`;\n          }\n        }\n\n        return {\n          lat: coord.lat,\n          lng: coord.lng,\n          instruction,\n          maneuver,\n          distance,\n          heading\n        };\n      });\n\n      setCurrentRoute(segments);\n      setRouteMetrics({\n        distance: intelligentRoute.distance,\n        duration: intelligentRoute.duration,\n        fuel: intelligentRoute.prediction.fuelEfficiency,\n        safetyScore: intelligentRoute.safetyScore,\n        trafficDensity: intelligentRoute.trafficDensity\n      });\n\n      setAlternativeRoutes(intelligentRoute.alternativeRoutes || []);\n\n      if (intelligentRoute.recommendations.length > 0) {\n        Alert.alert(\n          'üß≠ Route Calculated',\n          `Safety Score: ${intelligentRoute.safetyScore}/100\\n\\n` +\n          intelligentRoute.recommendations.slice(0, 2).join('\\n'),\n          [{ text: 'Start Navigation', onPress: () => setIsNavigating(true) }]\n        );\n      } else {\n        setIsNavigating(true);\n      }\n\n    } catch (error) {\n      console.error('Route calculation error:', error);\n      Alert.alert(\n        '‚öì Route Error',\n        'Unable to calculate maritime route. Please ensure:\\n\\n' +\n        '‚Ä¢ Origin and destination are accessible by sea\\n' +\n        '‚Ä¢ Coordinates are valid ocean/water locations\\n' +\n        '‚Ä¢ There is a navigable water path between points\\n\\n' +\n        'The system uses real maritime routing that follows waterways, not land.'\n      );\n    }\n  };\n\n  const cancelNavigation = () => {\n    setIsNavigating(false);\n    setDestination(null);\n    setCurrentRoute([]);\n    setDestinationInput('');\n    setAlternativeRoutes([]);\n  };\n\n  const reportHazardToSystem = async (\n    type: MaritimeHazard['type'],\n    severity: MaritimeHazard['severity'],\n    description: string\n  ) => {\n    if (!userLocation) return;\n\n    const hazard = await reportHazard(\n      type,\n      severity,\n      userLocation.lat,\n      userLocation.lng,\n      description,\n      'You',\n      'vessel_id'\n    );\n\n    if (hazard) {\n      setHazards(prev => [...prev, hazard]);\n      Alert.alert('‚úÖ Hazard Reported', 'Thank you! Other vessels in the area have been notified.');\n      setShowHazardReport(false);\n    }\n  };\n\n  const escapeHtml = (text: string): string => {\n    return text.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;');\n  };\n\n  const defaultLat = userLocation?.lat || 3.0;\n  const defaultLng = userLocation?.lng || 101.0;\n\n  // Generate map HTML with maritime styling\n  const vesselsMarkersHTML = vessels.map(v => {\n    const heading = v.heading || 0;\n    const speedColor = v.speed && v.speed > 10 ? Theme.colors.danger : Theme.colors.success;\n    return `\n      L.marker([${v.latitude}, ${v.longitude}], {\n        icon: L.divIcon({\n          html: '<div style=\"display: flex; flex-direction: column; align-items: center;\"><div style=\"transform: rotate(${heading}deg); font-size: 24px;\">‚õµ</div><div style=\"background: ${speedColor}; color: white; padding: 2px 6px; border-radius: 3px; font-size: 10px; margin-top: 2px;\">${v.speed?.toFixed(1) || 0} kn</div></div>',\n          className: 'vessel-marker',\n          iconSize: [40, 50],\n          iconAnchor: [20, 25]\n        })\n      }).addTo(map).bindPopup('<b>${escapeHtml(v.name)}</b><br>Speed: ${v.speed || 0} kn<br>Heading: ${heading}¬∞');\n    `;\n  }).join('\\n');\n\n  const userMarkerHTML = userLocation ? `\n    L.marker([${userLocation.lat}, ${userLocation.lng}], {\n      icon: L.divIcon({\n        html: '<div style=\"position: relative;\"><div style=\"width: 24px; height: 24px; background: #3da9fc; border: 4px solid white; border-radius: 50%; box-shadow: 0 2px 8px rgba(61, 169, 252, 0.8);\"></div><div style=\"position: absolute; top: -10px; left: -10px; width: 44px; height: 44px; border: 3px solid #3da9fc; border-radius: 50%; opacity: 0.4; animation: pulse 2s infinite;\"></div></div>',\n        className: 'user-marker',\n        iconSize: [24, 24],\n        iconAnchor: [12, 12]\n      })\n    }).addTo(map);\n  ` : '';\n\n  const hazardsHTML = hazards.map(h => {\n    const color = getSeverityColor(h.severity);\n    const icon = getHazardIcon(h.type);\n    return `\n      L.circleMarker([${h.lat}, ${h.lng}], {\n        radius: h.severity === 'critical' ? 20 : h.severity === 'high' ? 15 : 10,\n        fillColor: '${color}',\n        color: 'white',\n        weight: 2,\n        opacity: 1,\n        fillOpacity: 0.6\n      }).addTo(map).bindPopup(\\`\n        <div style=\"min-width: 150px;\">\n          <div style=\"font-size: 16px; margin-bottom: 8px;\">${icon} ${h.type.toUpperCase()}</div>\n          <div style=\"font-size: 12px; margin-bottom: 4px;\">${escapeHtml(h.description)}</div>\n          <div style=\"font-size: 11px; color: #666;\">Severity: ${h.severity}</div>\n          <div style=\"font-size: 10px; color: #999;\">Reported: ${new Date(h.timestamp).toLocaleTimeString()}</div>\n        </div>\n      \\`);\n    `;\n  }).join('\\n');\n\n  const routeHTML = currentRoute.length > 1 ? `\n    var routeCoords = [${currentRoute.map(p => `[${p.lat}, ${p.lng}]`).join(',')}];\n\n    // Outer glow for route visibility\n    var routeLine = L.polyline(routeCoords, {\n      color: '#ff3366',\n      weight: 12,\n      opacity: 0.3,\n      lineJoin: 'round',\n      lineCap: 'round',\n      smoothFactor: 1\n    }).addTo(map);\n\n    // Main route line - bright red/orange like Waze\n    L.polyline(routeCoords, {\n      color: '#ff4444',\n      weight: 7,\n      opacity: 1,\n      lineJoin: 'round',\n      lineCap: 'round',\n      smoothFactor: 1\n    }).addTo(map);\n\n    // Inner highlight\n    L.polyline(routeCoords, {\n      color: '#ff6666',\n      weight: 3,\n      opacity: 0.8,\n      lineJoin: 'round',\n      lineCap: 'round',\n      smoothFactor: 1\n    }).addTo(map);\n\n    // Waypoint markers with maneuver icons\n    ${currentRoute.slice(1, -1).map((point, idx) => {\n      let maneuverIcon = '‚óè';\n      if (point.maneuver === 'turn-right') maneuverIcon = '‚Ü±';\n      else if (point.maneuver === 'turn-left') maneuverIcon = '‚Ü∞';\n      else if (point.maneuver === 'turn-slight-right') maneuverIcon = '‚Üó';\n      else if (point.maneuver === 'turn-slight-left') maneuverIcon = '‚Üñ';\n\n      return `\n        L.marker([${point.lat}, ${point.lng}], {\n          icon: L.divIcon({\n            html: '<div style=\"background: ${Theme.colors.caramel}; color: white; width: 24px; height: 24px; border-radius: 50%; display: flex; align-items: center; justify-content: center; border: 2px solid white; font-size: 14px;\">${maneuverIcon}</div>',\n            iconSize: [24, 24],\n            iconAnchor: [12, 12]\n          })\n        }).addTo(map).bindPopup(\\`\n          <div style=\"min-width: 200px;\">\n            <div style=\"font-weight: bold; margin-bottom: 4px;\">Waypoint ${idx + 1}</div>\n            <div style=\"font-size: 12px;\">${escapeHtml(point.instruction || '')}</div>\n          </div>\n        \\`);\n      `;\n    }).join('\\n')}\n\n    // Destination marker\n    L.marker([${destination?.lat}, ${destination?.lng}], {\n      icon: L.divIcon({\n        html: '<div style=\"display: flex; flex-direction: column; align-items: center;\"><div style=\"width: 40px; height: 40px; background: ${Theme.colors.success}; border: 3px solid white; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 24px; box-shadow: 0 4px 12px rgba(0,0,0,0.3);\">üéØ</div><div style=\"background: ${Theme.colors.success}; color: white; padding: 4px 8px; border-radius: 4px; margin-top: 4px; font-size: 12px; font-weight: bold;\">Destination</div></div>',\n        iconSize: [40, 60],\n        iconAnchor: [20, 30]\n      })\n    }).addTo(map);\n\n    map.fitBounds(routeLine.getBounds(), { padding: [50, 50] });\n  ` : '';\n\n  const htmlContent = `\n    <!DOCTYPE html>\n    <html>\n    <head>\n      <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" />\n      <link rel=\"stylesheet\" href=\"https://unpkg.com/leaflet@1.9.4/dist/leaflet.css\" />\n      <script src=\"https://unpkg.com/leaflet@1.9.4/dist/leaflet.js\"></script>\n      <style>\n        body { margin: 0; padding: 0; background: ${Theme.colors.darkBackground}; }\n        #map {\n          width: 100%;\n          height: 100vh;\n          filter: invert(90%) hue-rotate(180deg) brightness(0.9) contrast(1.1);\n        }\n        .leaflet-tile-pane {\n          filter: brightness(0.6) saturate(0.5);\n        }\n        @keyframes pulse {\n          0%, 100% { transform: scale(1); opacity: 0.5; }\n          50% { transform: scale(1.3); opacity: 0.2; }\n        }\n      </style>\n    </head>\n    <body>\n      <div id=\"map\"></div>\n      <script>\n        var map = L.map('map', {\n          zoomControl: false,\n          attributionControl: false\n        }).setView([${defaultLat}, ${defaultLng}], 16);\n\n        // Dark themed map tiles with CartoDB Dark Matter for Waze-like appearance\n        L.tileLayer('https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png', {\n          attribution: '',\n          maxZoom: 20,\n          minZoom: 10\n        }).addTo(map);\n\n        ${userMarkerHTML}\n        ${vesselsMarkersHTML}\n        ${hazardsHTML}\n        ${routeHTML}\n      </script>\n    </body>\n    </html>\n  `;\n\n  const getCurrentInstruction = () => {\n    if (!currentRoute.length || navigationState.currentSegmentIndex >= currentRoute.length) {\n      return { instruction: 'Calculating route...', distance: 0, heading: 0 };\n    }\n\n    const current = currentRoute[navigationState.currentSegmentIndex];\n    return {\n      instruction: current.instruction || 'Continue on course',\n      distance: navigationState.distanceToNext,\n      heading: navigationState.heading\n    };\n  };\n\n  return (\n    <View style={[styles.container, { height }]}>\n      {!isNavigating ? (\n        <View style={[styles.searchContainer, { backgroundColor: colors.white }]}>\n          <View style={styles.searchHeader}>\n            <Text style={styles.searchIcon}>üß≠</Text>\n            <Text style={[styles.searchTitle, { color: colors.espresso }]}>Where to?</Text>\n          </View>\n\n          <View style={styles.toggleContainer}>\n            <TouchableOpacity\n              style={[styles.toggleBtn, inputMode === 'port' && styles.toggleBtnActive]}\n              onPress={() => {\n                setInputMode('port');\n                setDestinationInput('');\n                setSelectedPort(null);\n              }}\n            >\n              <Text style={[styles.toggleText, inputMode === 'port' && styles.toggleTextActive]}>\n                üèùÔ∏è Port Name\n              </Text>\n            </TouchableOpacity>\n            <TouchableOpacity\n              style={[styles.toggleBtn, inputMode === 'coords' && styles.toggleBtnActive]}\n              onPress={() => {\n                setInputMode('coords');\n                setDestinationInput('');\n                setShowPortSuggestions(false);\n              }}\n            >\n              <Text style={[styles.toggleText, inputMode === 'coords' && styles.toggleTextActive]}>\n                üìç Coordinates\n              </Text>\n            </TouchableOpacity>\n          </View>\n\n          <View style={{ position: 'relative' }}>\n            <TextInput\n              style={[styles.input, { backgroundColor: colors.foam, color: colors.espresso }]}\n              placeholder={\n                inputMode === 'port'\n                  ? \"Search for a port (e.g., Singapore, New York, Rotterdam)\"\n                  : \"Enter coordinates (lat, lng)\"\n              }\n              placeholderTextColor={colors.mutedGray}\n              value={destinationInput}\n              onChangeText={(text) => {\n                setDestinationInput(text);\n                if (inputMode === 'port' && selectedPort) {\n                  setSelectedPort(null);\n                }\n              }}\n            />\n\n            {showPortSuggestions && portSearchResults.length > 0 && (\n              <View style={[styles.suggestionsContainer, { backgroundColor: colors.white }]}>\n                <ScrollView style={styles.suggestionsList} keyboardShouldPersistTaps=\"handled\">\n                  {portSearchResults.map((port) => (\n                    <TouchableOpacity\n                      key={port.id}\n                      style={[styles.suggestionItem, { borderBottomColor: colors.crema }]}\n                      onPress={() => selectPort(port)}\n                    >\n                      <Text style={styles.suggestionIcon}>‚öì</Text>\n                      <View style={styles.suggestionInfo}>\n                        <Text style={[styles.suggestionName, { color: colors.espresso }]}>\n                          {port.name}\n                        </Text>\n                        <Text style={[styles.suggestionDetails, { color: colors.mutedGray }]}>\n                          {port.city}, {port.country}\n                        </Text>\n                      </View>\n                    </TouchableOpacity>\n                  ))}\n                </ScrollView>\n              </View>\n            )}\n          </View>\n\n          <TouchableOpacity\n            style={[styles.goButton, { backgroundColor: colors.caramel }]}\n            onPress={calculateRoute}\n          >\n            <Text style={styles.goButtonText}>üöÄ Calculate Route</Text>\n          </TouchableOpacity>\n\n          <View style={styles.quickActions}>\n            <TouchableOpacity\n              style={[styles.quickActionBtn, { backgroundColor: colors.foam }]}\n              onPress={() => setShowHazardReport(true)}\n            >\n              <Text style={styles.quickActionIcon}>‚ö†Ô∏è</Text>\n              <Text style={[styles.quickActionText, { color: colors.espresso }]}>Report</Text>\n            </TouchableOpacity>\n\n            <TouchableOpacity\n              style={[styles.quickActionBtn, { backgroundColor: colors.foam }]}\n              onPress={() => Alert.alert('Traffic', `${hazards.length} hazards in area`)}\n            >\n              <Text style={styles.quickActionIcon}>üö¶</Text>\n              <Text style={[styles.quickActionText, { color: colors.espresso }]}>Traffic</Text>\n            </TouchableOpacity>\n\n            <TouchableOpacity\n              style={[styles.quickActionBtn, { backgroundColor: colors.foam }]}\n              onPress={() => setShowRouteOptions(true)}\n            >\n              <Text style={styles.quickActionIcon}>üõ£Ô∏è</Text>\n              <Text style={[styles.quickActionText, { color: colors.espresso }]}>Routes</Text>\n            </TouchableOpacity>\n          </View>\n\n          {showHazardReport && (\n            <Modal visible={showHazardReport} animationType=\"slide\" transparent>\n              <View style={styles.modalOverlay}>\n                <View style={[styles.modalContent, { backgroundColor: colors.white }]}>\n                  <Text style={[styles.modalTitle, { color: colors.espresso }]}>Report Hazard</Text>\n                  <ScrollView style={styles.hazardOptions}>\n                    {[\n                      { type: 'debris' as const, icon: 'ü™µ', label: 'Debris' },\n                      { type: 'shallow' as const, icon: '‚öì', label: 'Shallow Water' },\n                      { type: 'weather' as const, icon: 'üåßÔ∏è', label: 'Bad Weather' },\n                      { type: 'congestion' as const, icon: 'üö¶', label: 'Heavy Traffic' }\n                    ].map(item => (\n                      <TouchableOpacity\n                        key={item.type}\n                        style={[styles.hazardOption, { backgroundColor: colors.foam }]}\n                        onPress={() => reportHazardToSystem(item.type, 'medium', `${item.label} reported`)}\n                      >\n                        <Text style={styles.hazardOptionIcon}>{item.icon}</Text>\n                        <Text style={[styles.hazardOptionText, { color: colors.espresso }]}>{item.label}</Text>\n                      </TouchableOpacity>\n                    ))}\n                  </ScrollView>\n                  <TouchableOpacity\n                    style={[styles.closeButton, { backgroundColor: colors.mutedGray }]}\n                    onPress={() => setShowHazardReport(false)}\n                  >\n                    <Text style={styles.closeButtonText}>Close</Text>\n                  </TouchableOpacity>\n                </View>\n              </View>\n            </Modal>\n          )}\n        </View>\n      ) : null}\n\n      {isNavigating ? (\n        <View style={[styles.navBar, { backgroundColor: Theme.colors.caramel }]}>\n          <View style={styles.navContent}>\n            <View style={styles.navTop}>\n              <Text style={styles.navDistance}>\n                {getCurrentInstruction().distance.toFixed(1)} km\n              </Text>\n              <Text style={styles.navEta}>\n                {Math.floor(routeMetrics.duration / 60)}h {Math.round(routeMetrics.duration % 60)}m\n              </Text>\n            </View>\n\n            <View style={styles.navInstruction}>\n              <Text style={styles.navHeading}>\n                {getDirectionText(getCurrentInstruction().heading)} {Math.round(getCurrentInstruction().heading)}¬∞\n              </Text>\n              <Text style={styles.navText} numberOfLines={2}>\n                {getCurrentInstruction().instruction}\n              </Text>\n            </View>\n\n            <View style={styles.navMetrics}>\n              <View style={styles.metric}>\n                <Text style={styles.metricLabel}>Safety</Text>\n                <Text style={styles.metricValue}>{routeMetrics.safetyScore}</Text>\n              </View>\n              <View style={styles.metric}>\n                <Text style={styles.metricLabel}>Traffic</Text>\n                <Text style={styles.metricValue}>{routeMetrics.trafficDensity.toUpperCase()}</Text>\n              </View>\n            </View>\n          </View>\n\n          <TouchableOpacity onPress={cancelNavigation} style={styles.navClose}>\n            <Text style={styles.navCloseText}>‚úï</Text>\n          </TouchableOpacity>\n        </View>\n      ) : null}\n\n      {Platform.OS === 'web' ? (\n        <View style={[styles.map, { backgroundColor: colors.foam, justifyContent: 'center', alignItems: 'center' }]}>\n          <View style={{ padding: 32, alignItems: 'center' }}>\n            <Text style={{ fontSize: 48, marginBottom: 16 }}>üó∫Ô∏è</Text>\n            <Text style={{ fontSize: 18, fontWeight: '600', color: Theme.colors.espresso, textAlign: 'center', marginBottom: 8 }}>\n              Interactive Map\n            </Text>\n            <Text style={{ fontSize: 14, color: Theme.colors.mutedGray, textAlign: 'center', maxWidth: 400 }}>\n              Use the search above to find ports and plan your maritime routes\n            </Text>\n          </View>\n        </View>\n      ) : (\n        <WebView\n          ref={webViewRef}\n          source={{ html: htmlContent }}\n          style={styles.map}\n          javaScriptEnabled={true}\n          domStorageEnabled={true}\n        />\n      )}\n\n      {isNavigating && hazards.length > 0 && (\n        <View style={[styles.alertsBanner, { backgroundColor: '#fef3c7' }]}>\n          <Text style={styles.alertsText}>‚ö†Ô∏è {hazards.length} hazards on route</Text>\n        </View>\n      )}\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    width: '100%',\n    position: 'relative',\n  },\n  searchContainer: {\n    position: 'absolute',\n    bottom: 0,\n    left: 0,\n    right: 0,\n    zIndex: 1000,\n    padding: 20,\n    paddingBottom: 40,\n    borderTopLeftRadius: 24,\n    borderTopRightRadius: 24,\n    ...Theme.shadows.md,\n    elevation: 10,\n  },\n  searchHeader: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    marginBottom: 16,\n    gap: 12,\n  },\n  searchIcon: {\n    fontSize: 32,\n  },\n  searchTitle: {\n    fontSize: 24,\n    fontWeight: 'bold',\n  },\n  input: {\n    height: 56,\n    borderRadius: 28,\n    paddingHorizontal: 24,\n    fontSize: 16,\n    marginBottom: 16,\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.1,\n    shadowRadius: 4,\n    elevation: 3,\n  },\n  toggleContainer: {\n    flexDirection: 'row',\n    gap: 8,\n    marginBottom: 16,\n  },\n  toggleBtn: {\n    flex: 1,\n    paddingVertical: 12,\n    paddingHorizontal: 16,\n    borderRadius: 10,\n    alignItems: 'center',\n    backgroundColor: '#e5e7eb',\n  },\n  toggleBtnActive: {\n    backgroundColor: '#C05A2B',\n  },\n  toggleText: {\n    fontSize: 14,\n    fontWeight: '600',\n    color: '#6b7280',\n  },\n  toggleTextActive: {\n    color: '#ffffff',\n  },\n  suggestionsContainer: {\n    position: 'absolute',\n    top: 52,\n    left: 0,\n    right: 0,\n    maxHeight: 200,\n    borderRadius: 12,\n    ...Theme.shadows.md,\n    elevation: 5,\n    zIndex: 2000,\n  },\n  suggestionsList: {\n    borderRadius: 12,\n  },\n  suggestionItem: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    padding: 12,\n    borderBottomWidth: 1,\n    gap: 12,\n  },\n  suggestionIcon: {\n    fontSize: 24,\n  },\n  suggestionInfo: {\n    flex: 1,\n  },\n  suggestionName: {\n    fontSize: 16,\n    fontWeight: '600',\n    marginBottom: 2,\n  },\n  suggestionDetails: {\n    fontSize: 12,\n  },\n  goButton: {\n    height: 50,\n    borderRadius: 12,\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  goButtonText: {\n    color: '#fff',\n    fontSize: 18,\n    fontWeight: '700',\n  },\n  quickActions: {\n    flexDirection: 'row',\n    gap: 12,\n    marginTop: 20,\n  },\n  quickActionBtn: {\n    flex: 1,\n    padding: 16,\n    borderRadius: 20,\n    alignItems: 'center',\n    gap: 8,\n    borderWidth: 1.5,\n    borderColor: '#3a3a52',\n  },\n  quickActionIcon: {\n    fontSize: 28,\n  },\n  quickActionText: {\n    fontSize: 12,\n    fontWeight: '600',\n  },\n  navBar: {\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    right: 0,\n    zIndex: 1000,\n    paddingTop: 50,\n    paddingBottom: 24,\n    paddingHorizontal: 20,\n    backgroundColor: Theme.colors.caramel,\n  },\n  navContent: {\n    gap: 12,\n  },\n  navTop: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'baseline',\n  },\n  navDistance: {\n    fontSize: 36,\n    fontWeight: 'bold',\n    color: '#fff',\n  },\n  navEta: {\n    fontSize: 18,\n    color: '#fff',\n    opacity: 0.9,\n  },\n  navInstruction: {\n    gap: 4,\n  },\n  navHeading: {\n    fontSize: 14,\n    color: '#fff',\n    opacity: 0.8,\n    fontWeight: '600',\n  },\n  navText: {\n    fontSize: 18,\n    color: '#fff',\n    fontWeight: '600',\n  },\n  navMetrics: {\n    flexDirection: 'row',\n    gap: 16,\n  },\n  metric: {\n    alignItems: 'center',\n  },\n  metricLabel: {\n    fontSize: 11,\n    color: '#fff',\n    opacity: 0.7,\n  },\n  metricValue: {\n    fontSize: 14,\n    color: '#fff',\n    fontWeight: 'bold',\n  },\n  navClose: {\n    position: 'absolute',\n    top: 50,\n    right: 16,\n    width: 36,\n    height: 36,\n    backgroundColor: 'rgba(255,255,255,0.2)',\n    borderRadius: 18,\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  navCloseText: {\n    color: '#fff',\n    fontSize: 20,\n    fontWeight: 'bold',\n  },\n  map: {\n    flex: 1,\n  },\n  alertsBanner: {\n    position: 'absolute',\n    bottom: 20,\n    left: 16,\n    right: 16,\n    padding: 12,\n    borderRadius: 8,\n    alignItems: 'center',\n  },\n  alertsText: {\n    fontSize: 14,\n    fontWeight: '600',\n    color: '#92400e',\n  },\n  modalOverlay: {\n    flex: 1,\n    backgroundColor: 'rgba(0,0,0,0.5)',\n    justifyContent: 'flex-end',\n  },\n  modalContent: {\n    borderTopLeftRadius: 20,\n    borderTopRightRadius: 20,\n    padding: 20,\n    maxHeight: '80%',\n  },\n  modalTitle: {\n    fontSize: 20,\n    fontWeight: 'bold',\n    marginBottom: 16,\n  },\n  hazardOptions: {\n    marginBottom: 16,\n  },\n  hazardOption: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    padding: 16,\n    borderRadius: 12,\n    marginBottom: 8,\n    gap: 12,\n  },\n  hazardOptionIcon: {\n    fontSize: 24,\n  },\n  hazardOptionText: {\n    fontSize: 16,\n    fontWeight: '600',\n  },\n  closeButton: {\n    padding: 16,\n    borderRadius: 12,\n    alignItems: 'center',\n  },\n  closeButtonText: {\n    color: '#fff',\n    fontSize: 16,\n    fontWeight: '600',\n  },\n});","size_bytes":34601},"constants/Theme.ts":{"content":"\n// MarineTrack Theme - Modern Social Media Design System\n// Instagram/TikTok/Waze-Inspired Elegant & Luxurious Interface\n\nexport const Theme = {\n  // Primary Colors - Social Media Inspired Vibrant Palette\n  colors: {\n    // Brand Colors - Modern & Vibrant\n    primary: '#0095F6',        // Instagram blue - primary actions\n    primaryDark: '#0074CC',    // Darker blue for pressed states\n    secondary: '#FE2C55',      // TikTok pink/red - accents\n    accent: '#00D9FF',         // Cyan accent - highlights\n    accentGreen: '#00E676',    // Success/live green\n    accentPurple: '#B75CFF',   // Premium purple\n    accentOrange: '#FF6B35',   // Warning orange\n    \n    // Navigation Colors (Waze-inspired)\n    wazeBlue: '#00AAFF',       // Primary navigation\n    wazeTurquoise: '#1CE5BA',  // Route line\n    wazeYellow: '#FFC107',     // Alerts\n    wazeOrange: '#FF9500',     // Caution\n    wazeRed: '#FF3B30',        // Danger/hazards\n    \n    // Neutral Grays - Clean & Modern\n    black: '#000000',\n    gray1: '#0A0A0A',          // Almost black\n    gray2: '#1A1A1A',          // Dark card background\n    gray3: '#262626',          // Elevated dark\n    gray4: '#3F3F3F',          // Border dark\n    gray5: '#737373',          // Mid gray\n    gray6: '#A3A3A3',          // Secondary text\n    gray7: '#D4D4D4',          // Tertiary text\n    gray8: '#E5E5E5',          // Separator\n    gray9: '#F5F5F5',          // Background light\n    gray10: '#FAFAFA',         // Card light\n    white: '#FFFFFF',\n    \n    // Light Mode - Instagram/TikTok Style\n    lightBackground: '#FFFFFF',     // Pure white like Instagram\n    lightCard: '#FFFFFF',\n    lightBorder: '#DBDBDB',         // Instagram border\n    lightText: '#262626',           // Instagram text\n    lightSecondary: '#8E8E8E',      // Secondary text\n    lightTertiary: '#C7C7C7',\n    lightHover: '#FAFAFA',          // Hover states\n    \n    // Dark Mode - TikTok/Instagram Dark Style\n    darkBackground: '#000000',      // Pure black\n    darkCard: '#121212',            // Card background\n    darkElevated: '#1A1A1A',        // Elevated cards\n    darkBorder: '#262626',          // Dark borders\n    darkText: '#FFFFFF',\n    darkSecondary: '#A8A8A8',\n    darkTertiary: '#737373',\n    \n    // Semantic Colors\n    success: '#00E676',        // Bright success green\n    warning: '#FFC107',        // Amber warning\n    danger: '#FF3B30',         // Red danger\n    info: '#00AAFF',          // Blue info\n    \n    // Status Colors\n    statusLive: '#00E676',     // Live/online - bright green\n    statusActive: '#00AAFF',   // Active - blue\n    statusDocked: '#8E8E8E',   // Inactive - gray\n    statusDelayed: '#FFC107',  // Delayed - amber\n    statusWarning: '#FF9500',  // Warning - orange\n    statusDanger: '#FF3B30',   // Danger - red\n    \n    // Overlay & Glassmorphism\n    overlay: 'rgba(0, 0, 0, 0.5)',\n    overlayLight: 'rgba(0, 0, 0, 0.3)',\n    overlayDark: 'rgba(0, 0, 0, 0.7)',\n    glass: 'rgba(255, 255, 255, 0.1)',\n    glassDark: 'rgba(0, 0, 0, 0.3)',\n    \n    // Legacy compatibility\n    espresso: '#1C1C1E',\n    teal: '#00AAFF',\n    navy: '#000000',\n    coral: '#FF3B30',\n  },\n  \n  // Typography - iOS San Francisco Pro Style\n  fonts: {\n    base: '-apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, Helvetica, Arial, sans-serif',\n    heading: '-apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, Helvetica, Arial, sans-serif',\n    sizes: {\n      xs: 10,      // Tiny labels, captions\n      sm: 12,      // Secondary text, badges, timestamps\n      md: 14,      // Body text, labels\n      base: 16,    // Primary body, inputs\n      lg: 18,      // Section titles\n      xl: 20,      // Screen headers\n      xxl: 24,     // Large titles\n      xxxl: 28,    // Hero headings\n      huge: 34,    // Large display\n    },\n    weights: {\n      regular: '400' as const,\n      medium: '500' as const,\n      semibold: '600' as const,\n      bold: '700' as const,\n      heavy: '800' as const,\n    },\n    lineHeights: {\n      tight: 1.2,     // Headings, titles\n      normal: 1.5,    // Body text, comfortable reading\n      relaxed: 1.75,  // Long-form content\n    },\n  },\n  \n  // Spacing - Social Media Tight & Clean Grid (4px base)\n  spacing: {\n    xxs: 2,      // Micro spacing\n    xs: 4,       // Extra small gaps\n    sm: 8,       // Small spacing (Instagram style)\n    md: 12,      // Medium spacing\n    base: 16,    // Base unit\n    lg: 20,      // Large spacing\n    xl: 24,      // Extra large\n    xxl: 32,     // Section spacing\n    xxxl: 48,    // Hero spacing\n    huge: 64,    // Large section spacing\n    card: 12,    // Card padding (tighter like Instagram)\n    drawer: 16,  // Drawer horizontal padding\n    screen: 16,  // Screen horizontal padding\n  },\n  \n  // Border Radius - Modern Social Media Rounded Corners\n  radius: {\n    none: 0,     // Sharp edges\n    xs: 4,       // Tiny elements\n    sm: 8,       // Small buttons, chips\n    md: 12,      // Standard cards (Instagram style)\n    lg: 16,      // Large cards\n    xl: 20,      // Hero elements\n    xxl: 24,     // Extra large cards\n    full: 9999,  // Circular/pill shape\n    pill: 9999,  // Pill shape\n    round: 9999, // Round buttons\n    search: 8,   // Search bars (Instagram uses less rounded)\n    button: 8,   // Standard button radius\n    card: 12,    // Card radius\n  },\n  \n  // Shadows - iOS-style subtle elevations\n  shadows: {\n    none: {\n      shadowColor: '#000000',\n      shadowOffset: { width: 0, height: 0 },\n      shadowOpacity: 0,\n      shadowRadius: 0,\n      elevation: 0,\n    },\n    sm: {\n      shadowColor: '#000000',\n      shadowOffset: { width: 0, height: 2 },\n      shadowOpacity: 0.05,\n      shadowRadius: 8,\n      elevation: 2,\n    },\n    md: {\n      shadowColor: '#000000',\n      shadowOffset: { width: 0, height: 4 },\n      shadowOpacity: 0.1,\n      shadowRadius: 12,\n      elevation: 4,\n    },\n    lg: {\n      shadowColor: '#000000',\n      shadowOffset: { width: 0, height: 8 },\n      shadowOpacity: 0.15,\n      shadowRadius: 16,\n      elevation: 8,\n    },\n    xl: {\n      shadowColor: '#000000',\n      shadowOffset: { width: 0, height: 12 },\n      shadowOpacity: 0.2,\n      shadowRadius: 24,\n      elevation: 12,\n    },\n  },\n  \n  // Web-compatible shadows (CSS box-shadow)\n  webShadows: {\n    none: {\n      boxShadow: 'none',\n    },\n    sm: {\n      boxShadow: '0 2px 8px rgba(0, 0, 0, 0.05)',\n    },\n    md: {\n      boxShadow: '0 4px 12px rgba(0, 0, 0, 0.1)',\n    },\n    lg: {\n      boxShadow: '0 8px 16px rgba(0, 0, 0, 0.15)',\n    },\n    xl: {\n      boxShadow: '0 12px 24px rgba(0, 0, 0, 0.2)',\n    },\n  },\n  \n  // Touch Targets (44x44 minimum for maritime use)\n  touchTarget: {\n    min: 44,\n    comfortable: 48,\n  },\n  \n  // Motion - Fast and purposeful\n  motion: {\n    duration: {\n      fast: 120,      // Quick transitions\n      base: 180,      // Standard transitions\n      slow: 220,      // Deliberate animations\n      slower: 300,    // Complex transitions\n    },\n    easing: {\n      natural: 'cubic-bezier(0.4, 0, 0.2, 1)',     // Natural motion\n      easeOut: 'cubic-bezier(0, 0, 0.2, 1)',       // Exit animations\n      easeIn: 'cubic-bezier(0.4, 0, 1, 1)',        // Enter animations\n      spring: 'cubic-bezier(0.68, -0.55, 0.265, 1.55)', // Bouncy\n    },\n  },\n  \n  // Component-specific tokens\n  cards: {\n    borderRadius: 16,\n    elevation: 4,\n  },\n  \n  chips: {\n    borderRadius: 999,  // Full pill shape\n    height: 44,\n  },\n  \n  buttons: {\n    borderRadius: 12,\n    heightSmall: 36,\n    heightMedium: 44,\n    heightLarge: 52,\n  },\n};\n\nexport type ThemeType = typeof Theme;\n","size_bytes":7540},"design-system/components.css":{"content":"/* MarineTrack Component Library Styles */\n\n.component-section {\n  background: white;\n  border-radius: var(--radius-lg);\n  padding: var(--space-8);\n  margin-bottom: var(--space-8);\n  box-shadow: var(--shadow-md);\n}\n\n.component-heading {\n  font-family: var(--font-family-heading);\n  font-size: var(--font-size-24);\n  font-weight: var(--font-weight-bold);\n  color: var(--color-navy);\n  margin-bottom: var(--space-2);\n}\n\n.component-desc {\n  font-size: var(--font-size-14);\n  color: var(--color-muted-gray);\n  margin-bottom: var(--space-6);\n  line-height: var(--line-height-relaxed);\n}\n\n.component-grid {\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));\n  gap: var(--space-4);\n  margin-bottom: var(--space-4);\n}\n\n.usage-note {\n  background: var(--color-sand);\n  border-left: 4px solid var(--color-coral);\n  padding: var(--space-4);\n  border-radius: var(--radius-sm);\n  font-size: var(--font-size-14);\n  margin-top: var(--space-6);\n  line-height: var(--line-height-relaxed);\n}\n\n/* ========== VESSEL CARDS ========== */\n\n.vessel-card {\n  background: white;\n  border-radius: var(--radius-lg);\n  overflow: hidden;\n  box-shadow: var(--shadow-md);\n  transition: all var(--duration-base) var(--easing-natural);\n  border: 2px solid transparent;\n}\n\n.vessel-card:hover {\n  transform: translateY(-4px);\n  box-shadow: var(--shadow-xl);\n  border-color: var(--color-teal);\n}\n\n.vessel-card[data-state=\"attention\"] {\n  border-color: var(--color-coral);\n}\n\n.vessel-card-media {\n  position: relative;\n  height: 160px;\n  overflow: hidden;\n}\n\n.vessel-img {\n  width: 100%;\n  height: 100%;\n  object-fit: cover;\n}\n\n.vessel-badge {\n  position: absolute;\n  top: var(--space-3);\n  left: var(--space-3);\n  padding: var(--space-1) var(--space-3);\n  border-radius: var(--radius-full);\n  font-size: var(--font-size-12);\n  font-weight: var(--font-weight-semibold);\n  text-transform: uppercase;\n  letter-spacing: 0.5px;\n}\n\n.vessel-badge.live {\n  background: var(--status-live);\n  color: white;\n}\n\n.vessel-badge.docked {\n  background: var(--status-docked);\n  color: white;\n}\n\n.vessel-badge.delayed {\n  background: var(--status-delayed);\n  color: white;\n}\n\n.vessel-badge.attention {\n  background: var(--status-attention);\n  color: white;\n}\n\n.vessel-badge.info {\n  background: var(--color-info);\n  color: white;\n}\n\n.vessel-badge.success {\n  background: var(--color-success);\n  color: white;\n}\n\n.vessel-badge.pulse {\n  animation: pulse 2s ease-in-out infinite;\n}\n\n@keyframes pulse {\n  0%, 100% { opacity: 1; }\n  50% { opacity: 0.7; }\n}\n\n.vessel-speed {\n  position: absolute;\n  top: var(--space-3);\n  right: var(--space-3);\n  background: rgba(8, 40, 55, 0.8);\n  backdrop-filter: blur(8px);\n  color: white;\n  padding: var(--space-1) var(--space-3);\n  border-radius: var(--radius-full);\n  font-size: var(--font-size-12);\n  font-weight: var(--font-weight-bold);\n}\n\n.vessel-card-content {\n  padding: var(--space-4);\n}\n\n.vessel-name {\n  font-family: var(--font-family-heading);\n  font-size: var(--font-size-20);\n  font-weight: var(--font-weight-bold);\n  color: var(--color-navy);\n  margin-bottom: var(--space-1);\n}\n\n.vessel-route {\n  font-size: var(--font-size-14);\n  color: var(--color-muted-gray);\n  margin-bottom: var(--space-3);\n}\n\n.vessel-meta {\n  display: flex;\n  gap: var(--space-4);\n  font-size: var(--font-size-12);\n  color: var(--color-muted-gray);\n}\n\n.meta-item {\n  display: flex;\n  align-items: center;\n  gap: var(--space-1);\n}\n\n.vessel-card-actions {\n  padding: var(--space-4);\n  border-top: 1px solid rgba(107, 119, 133, 0.1);\n  display: flex;\n  gap: var(--space-2);\n}\n\n/* ========== CHIPS ========== */\n\n.chip-group {\n  display: flex;\n  gap: var(--space-2);\n  flex-wrap: wrap;\n  margin-bottom: var(--space-4);\n}\n\n.chip {\n  display: flex;\n  align-items: center;\n  gap: var(--space-2);\n  padding: var(--space-2) var(--space-4);\n  min-height: var(--touch-target-min);\n  background: white;\n  border: 2px solid var(--color-muted-gray);\n  border-radius: var(--radius-full);\n  font-size: var(--font-size-14);\n  font-weight: var(--font-weight-medium);\n  color: var(--color-muted-gray);\n  cursor: pointer;\n  transition: all var(--duration-base) var(--easing-natural);\n}\n\n.chip:hover {\n  border-color: var(--color-teal);\n  color: var(--color-teal);\n  transform: translateY(-2px);\n}\n\n.chip.active {\n  background: var(--color-teal);\n  border-color: var(--color-teal);\n  color: white;\n}\n\n.chip.attention {\n  border-color: var(--color-coral);\n  color: var(--color-coral);\n}\n\n.chip.attention.active {\n  background: var(--color-coral);\n  border-color: var(--color-coral);\n  color: white;\n}\n\n/* ========== BUTTONS ========== */\n\n.button-group {\n  display: flex;\n  flex-direction: column;\n  gap: var(--space-3);\n}\n\n.group-label {\n  font-family: var(--font-family-heading);\n  font-size: var(--font-size-16);\n  font-weight: var(--font-weight-semibold);\n  color: var(--color-navy);\n  margin-bottom: var(--space-2);\n}\n\n.btn-primary {\n  min-height: var(--touch-target-min);\n  padding: var(--space-3) var(--space-6);\n  background: var(--color-teal);\n  color: white;\n  border: none;\n  border-radius: var(--radius-md);\n  font-size: var(--font-size-16);\n  font-weight: var(--font-weight-semibold);\n  cursor: pointer;\n  transition: all var(--duration-base) var(--easing-natural);\n  box-shadow: var(--shadow-sm);\n}\n\n.btn-primary:hover:not(:disabled) {\n  background: #0D8895;\n  transform: translateY(-2px);\n  box-shadow: var(--shadow-md);\n}\n\n.btn-primary:active:not(:disabled) {\n  transform: translateY(0);\n}\n\n.btn-primary.attention {\n  background: var(--color-coral);\n}\n\n.btn-primary.attention:hover:not(:disabled) {\n  background: #FF5449;\n}\n\n.btn-primary:disabled {\n  opacity: 0.5;\n  cursor: not-allowed;\n}\n\n.btn-secondary {\n  min-height: var(--touch-target-min);\n  padding: var(--space-3) var(--space-6);\n  background: transparent;\n  color: var(--color-teal);\n  border: 2px solid var(--color-teal);\n  border-radius: var(--radius-md);\n  font-size: var(--font-size-16);\n  font-weight: var(--font-weight-semibold);\n  cursor: pointer;\n  transition: all var(--duration-base) var(--easing-natural);\n}\n\n.btn-secondary:hover:not(:disabled) {\n  background: var(--color-teal);\n  color: white;\n  transform: translateY(-2px);\n  box-shadow: var(--shadow-sm);\n}\n\n.btn-secondary:disabled {\n  opacity: 0.5;\n  cursor: not-allowed;\n}\n\n.btn-icon {\n  min-width: var(--touch-target-min);\n  min-height: var(--touch-target-min);\n  padding: var(--space-3);\n  background: transparent;\n  border: 2px solid rgba(107, 119, 133, 0.2);\n  border-radius: var(--radius-md);\n  color: var(--color-muted-gray);\n  cursor: pointer;\n  transition: all var(--duration-base) var(--easing-natural);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.btn-icon:hover {\n  border-color: var(--color-teal);\n  color: var(--color-teal);\n  background: rgba(15, 154, 167, 0.05);\n}\n\n.btn-block {\n  width: 100%;\n}\n\n/* ========== BADGES ========== */\n\n.badge-group {\n  display: flex;\n  gap: var(--space-3);\n  flex-wrap: wrap;\n  margin-bottom: var(--space-4);\n}\n\n/* ========== BOTTOM SHEET ========== */\n\n.modal-demo-container {\n  position: relative;\n  min-height: 200px;\n}\n\n.bottom-sheet {\n  position: fixed;\n  inset: 0;\n  z-index: var(--z-modal);\n  display: none;\n  pointer-events: none;\n}\n\n.bottom-sheet.active {\n  display: block;\n  pointer-events: all;\n}\n\n.bottom-sheet-overlay {\n  position: absolute;\n  inset: 0;\n  background: rgba(8, 40, 55, 0.4);\n  animation: fadeIn var(--duration-base) var(--easing-ease-out);\n}\n\n@keyframes fadeIn {\n  from { opacity: 0; }\n  to { opacity: 1; }\n}\n\n.bottom-sheet-content {\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  max-height: 80vh;\n  background: white;\n  border-radius: var(--radius-xl) var(--radius-xl) 0 0;\n  box-shadow: var(--shadow-xl);\n  animation: slideUp var(--duration-slow) var(--easing-ease-out);\n  overflow: hidden;\n  display: flex;\n  flex-direction: column;\n}\n\n@keyframes slideUp {\n  from { transform: translateY(100%); }\n  to { transform: translateY(0); }\n}\n\n.bottom-sheet-handle {\n  width: 40px;\n  height: 4px;\n  background: var(--color-muted-gray);\n  border-radius: 2px;\n  margin: var(--space-3) auto;\n}\n\n.bottom-sheet-header {\n  padding: var(--space-4) var(--space-6);\n  border-bottom: 1px solid rgba(107, 119, 133, 0.1);\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n\n.bottom-sheet-header h3 {\n  font-family: var(--font-family-heading);\n  font-size: var(--font-size-24);\n  font-weight: var(--font-weight-bold);\n  color: var(--color-navy);\n}\n\n.bottom-sheet-body {\n  padding: var(--space-6);\n  overflow-y: auto;\n  flex: 1;\n}\n\n.bottom-sheet-footer {\n  padding: var(--space-6);\n  border-top: 1px solid rgba(107, 119, 133, 0.1);\n  background: var(--color-off-white);\n}\n\n.footer-summary {\n  display: flex;\n  justify-content: space-between;\n  margin-bottom: var(--space-4);\n  font-size: var(--font-size-14);\n}\n\n.summary-label {\n  color: var(--color-muted-gray);\n}\n\n.summary-value {\n  font-weight: var(--font-weight-bold);\n  color: var(--color-navy);\n}\n\n/* ========== FORMS ========== */\n\n.form-group {\n  margin-bottom: var(--space-6);\n}\n\n.form-label {\n  display: block;\n  font-size: var(--font-size-14);\n  font-weight: var(--font-weight-semibold);\n  color: var(--color-navy);\n  margin-bottom: var(--space-2);\n}\n\n.form-input, .form-textarea {\n  width: 100%;\n  padding: var(--space-3) var(--space-4);\n  border: 2px solid rgba(107, 119, 133, 0.2);\n  border-radius: var(--radius-md);\n  font-size: var(--font-size-16);\n  color: var(--color-navy);\n  transition: all var(--duration-base) var(--easing-natural);\n  font-family: var(--font-family-base);\n}\n\n.form-input:focus, .form-textarea:focus {\n  outline: none;\n  border-color: var(--color-teal);\n  box-shadow: 0 0 0 3px rgba(15, 154, 167, 0.1);\n}\n\n.form-helper {\n  display: block;\n  font-size: var(--font-size-12);\n  color: var(--color-muted-gray);\n  margin-top: var(--space-2);\n}\n\n.segmented-control {\n  display: flex;\n  background: rgba(107, 119, 133, 0.1);\n  border-radius: var(--radius-md);\n  padding: var(--space-1);\n}\n\n.segment {\n  flex: 1;\n  padding: var(--space-2) var(--space-4);\n  background: transparent;\n  border: none;\n  border-radius: var(--radius-sm);\n  font-size: var(--font-size-14);\n  font-weight: var(--font-weight-medium);\n  color: var(--color-muted-gray);\n  cursor: pointer;\n  transition: all var(--duration-base) var(--easing-natural);\n}\n\n.segment.active {\n  background: white;\n  color: var(--color-navy);\n  box-shadow: var(--shadow-sm);\n}\n\n.pill-toggle-group {\n  display: flex;\n  gap: var(--space-2);\n}\n\n.pill-toggle {\n  padding: var(--space-2) var(--space-5);\n  background: white;\n  border: 2px solid rgba(107, 119, 133, 0.2);\n  border-radius: var(--radius-full);\n  font-size: var(--font-size-14);\n  font-weight: var(--font-weight-medium);\n  color: var(--color-muted-gray);\n  cursor: pointer;\n  transition: all var(--duration-base) var(--easing-natural);\n}\n\n.pill-toggle.active {\n  background: var(--color-teal);\n  border-color: var(--color-teal);\n  color: white;\n}\n\n/* ========== TELEMETRY ========== */\n\n.telemetry-grid {\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));\n  gap: var(--space-4);\n  margin-bottom: var(--space-4);\n}\n\n.telemetry-tile {\n  background: white;\n  border: 2px solid rgba(107, 119, 133, 0.1);\n  border-radius: var(--radius-lg);\n  padding: var(--space-4);\n  display: flex;\n  gap: var(--space-3);\n  transition: all var(--duration-base) var(--easing-natural);\n}\n\n.telemetry-tile:hover {\n  border-color: var(--color-teal);\n  box-shadow: var(--shadow-sm);\n}\n\n.telemetry-icon {\n  width: 48px;\n  height: 48px;\n  background: linear-gradient(135deg, rgba(15, 154, 167, 0.1), rgba(15, 154, 167, 0.05));\n  border-radius: var(--radius-md);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color: var(--color-teal);\n  flex-shrink: 0;\n}\n\n.telemetry-info {\n  display: flex;\n  flex-direction: column;\n  gap: var(--space-1);\n}\n\n.telemetry-label {\n  font-size: var(--font-size-12);\n  color: var(--color-muted-gray);\n  text-transform: uppercase;\n  letter-spacing: 0.5px;\n}\n\n.telemetry-value {\n  font-size: var(--font-size-20);\n  font-weight: var(--font-weight-bold);\n  color: var(--color-navy);\n}\n\n.telemetry-unit {\n  font-size: var(--font-size-14);\n  font-weight: var(--font-weight-regular);\n  color: var(--color-muted-gray);\n}\n\n.telemetry-delta {\n  font-size: var(--font-size-12);\n  font-weight: var(--font-weight-semibold);\n}\n\n.telemetry-delta.positive {\n  color: var(--color-success);\n}\n\n.telemetry-delta.positive::before {\n  content: '‚Üë ';\n}\n\n.telemetry-delta.negative {\n  color: var(--color-warning);\n}\n\n.telemetry-delta.negative::before {\n  content: '‚Üì ';\n}\n\n/* ========== TOASTS ========== */\n\n#toastContainer {\n  position: fixed;\n  top: var(--space-6);\n  right: var(--space-6);\n  z-index: var(--z-toast);\n  display: flex;\n  flex-direction: column;\n  gap: var(--space-3);\n  max-width: 400px;\n}\n\n.toast {\n  padding: var(--space-4) var(--space-5);\n  border-radius: var(--radius-md);\n  box-shadow: var(--shadow-lg);\n  display: flex;\n  align-items: center;\n  gap: var(--space-3);\n  animation: toastIn var(--duration-fast) var(--easing-ease-out);\n  color: white;\n  font-size: var(--font-size-14);\n  font-weight: var(--font-weight-medium);\n}\n\n@keyframes toastIn {\n  from {\n    opacity: 0;\n    transform: translateX(100%);\n  }\n  to {\n    opacity: 1;\n    transform: translateX(0);\n  }\n}\n\n.toast.toast-out {\n  animation: toastOut var(--duration-base) var(--easing-ease-in);\n}\n\n@keyframes toastOut {\n  from {\n    opacity: 1;\n    transform: translateX(0);\n  }\n  to {\n    opacity: 0;\n    transform: translateX(100%);\n  }\n}\n\n.toast.success {\n  background: var(--color-teal);\n}\n\n.toast.warning {\n  background: var(--color-warning);\n}\n\n.toast.error {\n  background: var(--color-danger);\n}\n\n.toast.info {\n  background: var(--color-info);\n}\n\n.toast-icon {\n  width: 20px;\n  height: 20px;\n}\n","size_bytes":13844},"design-system/js/components.js":{"content":"// MarineTrack Design System - Component Interactions\n\n// Bottom Sheet\nfunction showBottomSheet() {\n  const sheet = document.getElementById('bottomSheet');\n  sheet.classList.add('active');\n  document.body.style.overflow = 'hidden';\n}\n\nfunction hideBottomSheet() {\n  const sheet = document.getElementById('bottomSheet');\n  sheet.classList.remove('active');\n  document.body.style.overflow = '';\n}\n\n// Toast Notifications\nfunction showToast(type) {\n  const messages = {\n    success: 'Vessel tracked successfully',\n    warning: 'Connection unstable - retrying...',\n    error: 'Failed to update route',\n    info: 'Task assigned to Ocean Explorer'\n  };\n  \n  const icons = {\n    success: '<svg width=\"20\" height=\"20\" viewBox=\"0 0 20 20\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\"><path d=\"M3 10l5 5L18 5\"/></svg>',\n    warning: '<svg width=\"20\" height=\"20\" viewBox=\"0 0 20 20\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\"><path d=\"M10 2l8 14H2L10 2z\"/><path d=\"M10 8v4\"/><circle cx=\"10\" cy=\"15\" r=\"0.5\"/></svg>',\n    error: '<svg width=\"20\" height=\"20\" viewBox=\"0 0 20 20\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\"><circle cx=\"10\" cy=\"10\" r=\"8\"/><path d=\"M6 6l8 8M14 6l-8 8\"/></svg>',\n    info: '<svg width=\"20\" height=\"20\" viewBox=\"0 0 20 20\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\"><circle cx=\"10\" cy=\"10\" r=\"8\"/><path d=\"M10 10v4\"/><circle cx=\"10\" cy=\"6\" r=\"0.5\"/></svg>'\n  };\n  \n  const container = document.getElementById('toastContainer');\n  const toast = document.createElement('div');\n  toast.className = `toast ${type}`;\n  toast.innerHTML = `\n    <div class=\"toast-icon\">${icons[type]}</div>\n    <div>${messages[type]}</div>\n  `;\n  \n  container.appendChild(toast);\n  \n  setTimeout(() => {\n    toast.classList.add('toast-out');\n    setTimeout(() => {\n      container.removeChild(toast);\n    }, 180);\n  }, 3000);\n}\n\n// Chip Toggle\ndocument.addEventListener('DOMContentLoaded', () => {\n  const chips = document.querySelectorAll('.chip');\n  chips.forEach(chip => {\n    chip.addEventListener('click', () => {\n      chips.forEach(c => c.classList.remove('active'));\n      chip.classList.add('active');\n    });\n  });\n  \n  const segments = document.querySelectorAll('.segment');\n  segments.forEach(segment => {\n    segment.addEventListener('click', () => {\n      segments.forEach(s => s.classList.remove('active'));\n      segment.classList.add('active');\n    });\n  });\n  \n  const pillToggles = document.querySelectorAll('.pill-toggle');\n  pillToggles.forEach(pill => {\n    pill.addEventListener('click', () => {\n      pillToggles.forEach(p => p.classList.remove('active'));\n      pill.classList.add('active');\n    });\n  });\n});\n","size_bytes":2656},"design-system/style.css":{"content":"/* MarineTrack Design System - Main Stylesheet */\n\n@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Poppins:wght@600;700&display=swap');\n\n* {\n  margin: 0;\n  padding: 0;\n  box-sizing: border-box;\n}\n\nhtml, body {\n  font-family: var(--font-family-base);\n  font-size: 16px;\n  line-height: var(--line-height-normal);\n  color: var(--color-navy);\n  background: var(--color-off-white);\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n/* ========== VIEWER LAYOUT ========== */\n\n.viewer-container {\n  max-width: 1600px;\n  margin: 0 auto;\n  padding: var(--space-6);\n}\n\n.viewer-header {\n  background: linear-gradient(135deg, var(--color-teal), var(--color-navy));\n  color: white;\n  padding: var(--space-6) var(--space-8);\n  border-radius: var(--radius-lg);\n  margin-bottom: var(--space-8);\n  box-shadow: var(--shadow-lg);\n}\n\n.viewer-title {\n  font-family: var(--font-family-heading);\n  font-size: var(--font-size-28);\n  font-weight: var(--font-weight-bold);\n  margin-bottom: var(--space-2);\n}\n\n.viewer-subtitle {\n  font-size: var(--font-size-16);\n  opacity: 0.9;\n}\n\n.viewer-nav {\n  display: flex;\n  gap: var(--space-2);\n  margin-bottom: var(--space-8);\n  flex-wrap: wrap;\n}\n\n.nav-button {\n  padding: var(--space-3) var(--space-6);\n  background: white;\n  border: 2px solid var(--color-teal);\n  border-radius: var(--radius-full);\n  color: var(--color-teal);\n  font-weight: var(--font-weight-medium);\n  font-size: var(--font-size-14);\n  cursor: pointer;\n  transition: all var(--duration-base) var(--easing-natural);\n  text-decoration: none;\n  display: inline-block;\n}\n\n.nav-button:hover {\n  background: var(--color-teal);\n  color: white;\n  transform: translateY(-2px);\n  box-shadow: var(--shadow-md);\n}\n\n.nav-button.active {\n  background: var(--color-teal);\n  color: white;\n}\n\n/* ========== MOBILE FRAME ========== */\n\n.phone-frame {\n  width: 390px;\n  height: 844px;\n  background: #1A1A1A;\n  border-radius: 40px;\n  padding: 12px;\n  box-shadow: var(--shadow-xl), 0 0 0 1px rgba(0,0,0,0.1);\n  margin: 0 auto var(--space-8);\n  position: relative;\n}\n\n.phone-notch {\n  position: absolute;\n  top: 0;\n  left: 50%;\n  transform: translateX(-50%);\n  width: 150px;\n  height: 30px;\n  background: #1A1A1A;\n  border-radius: 0 0 20px 20px;\n  z-index: var(--z-tooltip);\n}\n\n.phone-screen {\n  width: 100%;\n  height: 100%;\n  background: var(--color-off-white);\n  border-radius: 32px;\n  overflow-y: auto;\n  overflow-x: hidden;\n  position: relative;\n}\n\n.phone-screen::-webkit-scrollbar {\n  width: 4px;\n}\n\n.phone-screen::-webkit-scrollbar-track {\n  background: transparent;\n}\n\n.phone-screen::-webkit-scrollbar-thumb {\n  background: var(--color-muted-gray);\n  border-radius: 2px;\n}\n\n/* ========== SCREEN ANNOTATION ========== */\n\n.screen-annotation {\n  background: white;\n  border: 2px solid var(--color-sand);\n  border-radius: var(--radius-md);\n  padding: var(--space-4);\n  margin-bottom: var(--space-6);\n  max-width: 600px;\n}\n\n.annotation-title {\n  font-family: var(--font-family-heading);\n  font-size: var(--font-size-20);\n  font-weight: var(--font-weight-bold);\n  color: var(--color-navy);\n  margin-bottom: var(--space-2);\n}\n\n.annotation-description {\n  font-size: var(--font-size-14);\n  color: var(--color-muted-gray);\n  line-height: var(--line-height-relaxed);\n}\n\n.annotation-list {\n  list-style: none;\n  margin-top: var(--space-3);\n}\n\n.annotation-list li {\n  padding-left: var(--space-5);\n  position: relative;\n  margin-bottom: var(--space-2);\n  font-size: var(--font-size-14);\n}\n\n.annotation-list li::before {\n  content: '‚Üí';\n  position: absolute;\n  left: 0;\n  color: var(--color-coral);\n  font-weight: var(--font-weight-bold);\n}\n\n/* ========== UTILITY CLASSES ========== */\n\n.flex {\n  display: flex;\n}\n\n.flex-col {\n  flex-direction: column;\n}\n\n.items-center {\n  align-items: center;\n}\n\n.justify-between {\n  justify-content: space-between;\n}\n\n.gap-2 {\n  gap: var(--space-2);\n}\n\n.gap-4 {\n  gap: var(--space-4);\n}\n\n.mt-4 {\n  margin-top: var(--space-4);\n}\n\n.mb-4 {\n  margin-bottom: var(--space-4);\n}\n\n.p-4 {\n  padding: var(--space-4);\n}\n\n.text-center {\n  text-align: center;\n}\n\n/* ========== RESPONSIVE ========== */\n\n@media (max-width: 768px) {\n  .viewer-container {\n    padding: var(--space-4);\n  }\n  \n  .phone-frame {\n    transform: scale(0.85);\n    transform-origin: top center;\n  }\n}\n\n@media (max-width: 480px) {\n  .phone-frame {\n    transform: scale(0.7);\n  }\n}\n","size_bytes":4408},"design-system/css/screens.css":{"content":"/* MarineTrack Mobile Screens Styles */\n\n.screen {\n  background: var(--color-off-white);\n  min-height: 100%;\n  padding-bottom: 80px;\n}\n\n/* Status Bar */\n.status-bar {\n  height: 44px;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 0 var(--space-4);\n  font-size: var(--font-size-12);\n  font-weight: var(--font-weight-semibold);\n}\n\n/* Hero Banner */\n.hero-banner {\n  position: relative;\n  height: 200px;\n  background: linear-gradient(135deg, var(--color-teal), var(--color-navy));\n  overflow: hidden;\n  margin-bottom: var(--space-4);\n}\n\n.hero-image {\n  position: absolute;\n  inset: 0;\n  width: 100%;\n  height: 100%;\n  object-fit: cover;\n  opacity: 0.4;\n  mix-blend-mode: overlay;\n}\n\n.hero-content {\n  position: relative;\n  z-index: 1;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-end;\n  padding: var(--space-6);\n  color: white;\n}\n\n.hero-tag {\n  display: inline-flex;\n  align-items: center;\n  gap: var(--space-2);\n  padding: var(--space-1) var(--space-3);\n  background: var(--color-coral);\n  border-radius: var(--radius-full);\n  font-size: var(--font-size-12);\n  font-weight: var(--font-weight-semibold);\n  text-transform: uppercase;\n  letter-spacing: 0.5px;\n  align-self: flex-start;\n  margin-bottom: var(--space-3);\n}\n\n.hero-title {\n  font-family: var(--font-family-heading);\n  font-size: var(--font-size-24);\n  font-weight: var(--font-weight-bold);\n  margin-bottom: var(--space-2);\n}\n\n.hero-subtitle {\n  font-size: var(--font-size-14);\n  opacity: 0.9;\n  margin-bottom: var(--space-4);\n}\n\n.hero-cta {\n  align-self: flex-start;\n}\n\n/* Quick Stats */\n.quick-stats {\n  display: flex;\n  gap: var(--space-4);\n  padding: 0 var(--space-4);\n  margin-bottom: var(--space-6);\n}\n\n.stat-card {\n  flex: 1;\n  background: white;\n  border-radius: var(--radius-lg);\n  padding: var(--space-4);\n  box-shadow: var(--shadow-sm);\n}\n\n.stat-value {\n  font-family: var(--font-family-heading);\n  font-size: var(--font-size-24);\n  font-weight: var(--font-weight-bold);\n  color: var(--color-teal);\n  display: block;\n}\n\n.stat-label {\n  font-size: var(--font-size-12);\n  color: var(--color-muted-gray);\n  text-transform: uppercase;\n  letter-spacing: 0.5px;\n  margin-top: var(--space-1);\n}\n\n/* Section Header */\n.section-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 0 var(--space-4);\n  margin-bottom: var(--space-4);\n}\n\n.section-title {\n  font-family: var(--font-family-heading);\n  font-size: var(--font-size-20);\n  font-weight: var(--font-weight-bold);\n  color: var(--color-navy);\n}\n\n.section-action {\n  font-size: var(--font-size-14);\n  color: var(--color-teal);\n  font-weight: var(--font-weight-semibold);\n  text-decoration: none;\n}\n\n/* Horizontal Scroll */\n.horizontal-scroll {\n  display: flex;\n  gap: var(--space-2);\n  padding: 0 var(--space-4);\n  overflow-x: auto;\n  -webkit-overflow-scrolling: touch;\n  scrollbar-width: none;\n  margin-bottom: var(--space-6);\n}\n\n.horizontal-scroll::-webkit-scrollbar {\n  display: none;\n}\n\n/* Vessel Feed */\n.vessel-feed {\n  display: flex;\n  flex-direction: column;\n  gap: var(--space-4);\n  padding: 0 var(--space-4);\n}\n\n/* Screen Header */\n.screen-header {\n  background: white;\n  padding: var(--space-4);\n  border-bottom: 1px solid rgba(107, 119, 133, 0.1);\n  display: flex;\n  align-items: center;\n  gap: var(--space-4);\n}\n\n.back-button {\n  min-width: var(--touch-target-min);\n  min-height: var(--touch-target-min);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background: transparent;\n  border: none;\n  color: var(--color-navy);\n  cursor: pointer;\n}\n\n.screen-header-title {\n  flex: 1;\n  font-family: var(--font-family-heading);\n  font-size: var(--font-size-20);\n  font-weight: var(--font-weight-bold);\n  color: var(--color-navy);\n}\n\n/* Vessel Detail Header */\n.detail-hero {\n  position: relative;\n  height: 240px;\n  background: var(--color-navy);\n  overflow: hidden;\n}\n\n.detail-hero-image {\n  width: 100%;\n  height: 100%;\n  object-fit: cover;\n  opacity: 0.7;\n}\n\n.detail-hero-info {\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  padding: var(--space-6) var(--space-4);\n  background: linear-gradient(to top, rgba(8, 40, 55, 0.9), transparent);\n  color: white;\n}\n\n.detail-vessel-name {\n  font-family: var(--font-family-heading);\n  font-size: var(--font-size-28);\n  font-weight: var(--font-weight-bold);\n  margin-bottom: var(--space-1);\n}\n\n.detail-operator {\n  font-size: var(--font-size-14);\n  opacity: 0.9;\n}\n\n/* Map Preview */\n.map-preview {\n  background: #E5E5E0;\n  height: 300px;\n  position: relative;\n  margin: var(--space-4);\n  border-radius: var(--radius-lg);\n  overflow: hidden;\n  cursor: pointer;\n  transition: all var(--duration-base) var(--easing-natural);\n}\n\n.map-preview:active {\n  transform: scale(0.98);\n}\n\n.map-placeholder {\n  width: 100%;\n  height: 100%;\n  object-fit: cover;\n}\n\n.map-overlay {\n  position: absolute;\n  bottom: var(--space-4);\n  left: var(--space-4);\n  right: var(--space-4);\n  background: rgba(255, 255, 255, 0.95);\n  backdrop-filter: blur(8px);\n  border-radius: var(--radius-md);\n  padding: var(--space-3) var(--space-4);\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n\n.map-hint {\n  font-size: var(--font-size-12);\n  color: var(--color-muted-gray);\n}\n\n/* Telemetry Row */\n.telemetry-row {\n  display: grid;\n  grid-template-columns: repeat(4, 1fr);\n  gap: var(--space-2);\n  padding: 0 var(--space-4);\n  margin-bottom: var(--space-6);\n}\n\n.telemetry-compact {\n  background: white;\n  border-radius: var(--radius-md);\n  padding: var(--space-3);\n  text-align: center;\n  box-shadow: var(--shadow-sm);\n}\n\n.telemetry-compact-value {\n  font-size: var(--font-size-16);\n  font-weight: var(--font-weight-bold);\n  color: var(--color-navy);\n  display: block;\n  margin-bottom: var(--space-1);\n}\n\n.telemetry-compact-label {\n  font-size: var(--font-size-10);\n  color: var(--color-muted-gray);\n  text-transform: uppercase;\n  letter-spacing: 0.5px;\n}\n\n/* Event Log */\n.event-log {\n  padding: 0 var(--space-4);\n  margin-bottom: var(--space-6);\n}\n\n.event-item {\n  display: flex;\n  gap: var(--space-3);\n  padding: var(--space-4);\n  background: white;\n  border-radius: var(--radius-md);\n  margin-bottom: var(--space-2);\n  box-shadow: var(--shadow-sm);\n}\n\n.event-icon {\n  width: 40px;\n  height: 40px;\n  background: var(--color-sand);\n  border-radius: var(--radius-md);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color: var(--color-teal);\n  flex-shrink: 0;\n}\n\n.event-content {\n  flex: 1;\n}\n\n.event-title {\n  font-size: var(--font-size-14);\n  font-weight: var(--font-weight-semibold);\n  color: var(--color-navy);\n  margin-bottom: var(--space-1);\n}\n\n.event-time {\n  font-size: var(--font-size-12);\n  color: var(--color-muted-gray);\n}\n\n/* Sticky Action Strip */\n.sticky-actions {\n  position: fixed;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  background: white;\n  border-top: 1px solid rgba(107, 119, 133, 0.1);\n  padding: var(--space-4);\n  display: flex;\n  gap: var(--space-2);\n  box-shadow: 0 -4px 12px rgba(8, 40, 55, 0.08);\n}\n\n/* Timeline Stepper */\n.timeline {\n  padding: var(--space-6) var(--space-4);\n}\n\n.timeline-item {\n  position: relative;\n  padding-left: var(--space-12);\n  padding-bottom: var(--space-8);\n}\n\n.timeline-item:last-child {\n  padding-bottom: 0;\n}\n\n.timeline-item::before {\n  content: '';\n  position: absolute;\n  left: 16px;\n  top: 32px;\n  bottom: 0;\n  width: 2px;\n  background: var(--color-sand);\n}\n\n.timeline-item:last-child::before {\n  display: none;\n}\n\n.timeline-marker {\n  position: absolute;\n  left: 0;\n  top: 0;\n  width: 32px;\n  height: 32px;\n  background: white;\n  border: 3px solid var(--color-teal);\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: var(--font-size-12);\n  font-weight: var(--font-weight-bold);\n  color: var(--color-teal);\n}\n\n.timeline-marker.completed {\n  background: var(--color-teal);\n  color: white;\n}\n\n.timeline-content {\n  background: white;\n  border-radius: var(--radius-lg);\n  padding: var(--space-4);\n  box-shadow: var(--shadow-md);\n}\n\n.timeline-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: flex-start;\n  margin-bottom: var(--space-3);\n}\n\n.timeline-step-title {\n  font-family: var(--font-family-heading);\n  font-size: var(--font-size-16);\n  font-weight: var(--font-weight-bold);\n  color: var(--color-navy);\n  margin-bottom: var(--space-1);\n}\n\n.timeline-timestamp {\n  font-size: var(--font-size-12);\n  color: var(--color-muted-gray);\n}\n\n.timeline-map-thumb {\n  width: 100%;\n  height: 100px;\n  background: #E5E5E0;\n  border-radius: var(--radius-md);\n  margin-bottom: var(--space-3);\n  overflow: hidden;\n}\n\n.timeline-map-thumb img {\n  width: 100%;\n  height: 100%;\n  object-fit: cover;\n}\n\n.timeline-actions {\n  display: flex;\n  gap: var(--space-2);\n  margin-top: var(--space-3);\n}\n\n/* Dispatch Queue */\n.dispatch-queue {\n  padding: var(--space-4);\n}\n\n.queue-summary {\n  background: white;\n  border-radius: var(--radius-lg);\n  padding: var(--space-6);\n  margin-bottom: var(--space-6);\n  box-shadow: var(--shadow-md);\n}\n\n.queue-stat {\n  display: flex;\n  justify-content: space-between;\n  padding: var(--space-3) 0;\n  border-bottom: 1px solid rgba(107, 119, 133, 0.1);\n}\n\n.queue-stat:last-child {\n  border-bottom: none;\n}\n\n.queue-stat-label {\n  font-size: var(--font-size-14);\n  color: var(--color-muted-gray);\n}\n\n.queue-stat-value {\n  font-size: var(--font-size-16);\n  font-weight: var(--font-weight-bold);\n  color: var(--color-navy);\n}\n\n.queue-card {\n  background: white;\n  border-radius: var(--radius-lg);\n  padding: var(--space-4);\n  margin-bottom: var(--space-3);\n  box-shadow: var(--shadow-sm);\n  border-left: 4px solid var(--color-teal);\n  cursor: grab;\n}\n\n.queue-card:active {\n  cursor: grabbing;\n  opacity: 0.7;\n}\n\n.queue-card-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: flex-start;\n  margin-bottom: var(--space-3);\n}\n\n.queue-card-title {\n  font-size: var(--font-size-16);\n  font-weight: var(--font-weight-bold);\n  color: var(--color-navy);\n  margin-bottom: var(--space-1);\n}\n\n.queue-card-vessel {\n  font-size: var(--font-size-14);\n  color: var(--color-muted-gray);\n}\n\n.drag-handle {\n  width: 24px;\n  height: 24px;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  gap: 3px;\n  cursor: grab;\n}\n\n.drag-handle span {\n  width: 100%;\n  height: 2px;\n  background: var(--color-muted-gray);\n  border-radius: 1px;\n}\n\n.queue-card-meta {\n  display: flex;\n  gap: var(--space-4);\n  font-size: var(--font-size-12);\n  color: var(--color-muted-gray);\n}\n\n/* Empty State */\n.empty-state {\n  text-align: center;\n  padding: var(--space-12) var(--space-6);\n}\n\n.empty-icon {\n  width: 80px;\n  height: 80px;\n  margin: 0 auto var(--space-4);\n  background: var(--color-sand);\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color: var(--color-teal);\n}\n\n.empty-title {\n  font-family: var(--font-family-heading);\n  font-size: var(--font-size-20);\n  font-weight: var(--font-weight-bold);\n  color: var(--color-navy);\n  margin-bottom: var(--space-2);\n}\n\n.empty-desc {\n  font-size: var(--font-size-14);\n  color: var(--color-muted-gray);\n  line-height: var(--line-height-relaxed);\n  margin-bottom: var(--space-6);\n}\n\n/* Bottom Navigation */\n.bottom-nav {\n  position: fixed;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  background: white;\n  border-top: 1px solid rgba(107, 119, 133, 0.1);\n  display: flex;\n  justify-content: space-around;\n  padding: var(--space-2) 0;\n  box-shadow: 0 -2px 8px rgba(8, 40, 55, 0.05);\n}\n\n.nav-item {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: var(--space-1);\n  padding: var(--space-2);\n  color: var(--color-muted-gray);\n  text-decoration: none;\n  transition: color var(--duration-base) var(--easing-natural);\n  min-height: var(--touch-target-min);\n}\n\n.nav-item.active {\n  color: var(--color-teal);\n}\n\n.nav-icon {\n  width: 24px;\n  height: 24px;\n}\n\n.nav-label {\n  font-size: var(--font-size-10);\n  font-weight: var(--font-weight-semibold);\n}\n","size_bytes":12030},"backend/maritime-routes.js":{"content":"const seaRoute = require('searoute-js');\nconst fs = require('fs').promises;\nconst path = require('path');\n\nconst DATA_DIR = path.join(__dirname, 'data');\nconst HAZARDS_FILE = path.join(DATA_DIR, 'maritime_hazards.json');\nconst TRAFFIC_FILE = path.join(DATA_DIR, 'vessel_traffic.json');\n\n// Helper: Read JSON file\nasync function readJsonFile(filePath, defaultValue = []) {\n  try {\n    const data = await fs.readFile(filePath, 'utf8');\n    return JSON.parse(data);\n  } catch (error) {\n    return defaultValue;\n  }\n}\n\n// Helper: Write JSON file\nasync function writeJsonFile(filePath, data) {\n  try {\n    await fs.writeFile(filePath, JSON.stringify(data, null, 2));\n    return true;\n  } catch (error) {\n    console.error(`Error writing ${filePath}:`, error);\n    return false;\n  }\n}\n\n// Calculate distance between two points in nautical miles\nfunction calculateDistanceNM(point1, point2) {\n  const R = 3440.065; // Earth radius in nautical miles\n  const lat1 = point1.lat * Math.PI / 180;\n  const lat2 = point2.lat * Math.PI / 180;\n  const deltaLat = (point2.lat - point1.lat) * Math.PI / 180;\n  const deltaLng = (point2.lng - point1.lng) * Math.PI / 180;\n\n  const a = Math.sin(deltaLat/2) * Math.sin(deltaLat/2) +\n           Math.cos(lat1) * Math.cos(lat2) *\n           Math.sin(deltaLng/2) * Math.sin(deltaLng/2);\n  const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));\n\n  return R * c;\n}\n\n// Calculate bearing between two points\nfunction calculateBearing(lat1, lng1, lat2, lng2) {\n  const dLon = (lng2 - lng1) * Math.PI / 180;\n  const lat1Rad = lat1 * Math.PI / 180;\n  const lat2Rad = lat2 * Math.PI / 180;\n\n  const y = Math.sin(dLon) * Math.cos(lat2Rad);\n  const x = Math.cos(lat1Rad) * Math.sin(lat2Rad) -\n           Math.sin(lat1Rad) * Math.cos(lat2Rad) * Math.cos(dLon);\n  const bearing = Math.atan2(y, x) * 180 / Math.PI;\n\n  return (bearing + 360) % 360;\n}\n\n// Get cardinal direction from bearing\nfunction getCardinalDirection(bearing) {\n  const directions = ['N', 'NE', 'E', 'SE', 'S', 'SW', 'W', 'NW'];\n  const index = Math.round(bearing / 45) % 8;\n  return directions[index];\n}\n\n// Calculate maritime route\nasync function calculateRoute(origin, destination, preferences = {}) {\n  try {\n    // Validate coordinates\n    const originLat = parseFloat(origin.lat);\n    const originLng = parseFloat(origin.lng);\n    const destLat = parseFloat(destination.lat);\n    const destLng = parseFloat(destination.lng);\n\n    if (isNaN(originLat) || isNaN(originLng) || isNaN(destLat) || isNaN(destLng)) {\n      throw new Error('Invalid coordinates provided');\n    }\n\n    // Create GeoJSON Point features for searoute-js\n    const originPoint = {\n      type: 'Feature',\n      properties: {},\n      geometry: {\n        type: 'Point',\n        coordinates: [originLng, originLat]\n      }\n    };\n\n    const destinationPoint = {\n      type: 'Feature',\n      properties: {},\n      geometry: {\n        type: 'Point',\n        coordinates: [destLng, destLat]\n      }\n    };\n\n    console.log('Calculating route from:', originPoint.geometry.coordinates, 'to:', destinationPoint.geometry.coordinates);\n\n    // Calculate route using searoute-js (returns GeoJSON LineString)\n    let routeResult;\n    try {\n      routeResult = seaRoute(originPoint, destinationPoint, 'nm');\n      console.log('Searoute result:', routeResult ? 'success' : 'null/undefined');\n    } catch (searouteError) {\n      console.error('Searoute library error:', searouteError);\n      throw new Error('Unable to find a valid sea route between these coordinates. Ensure both points are accessible by water.');\n    }\n\n    if (!routeResult || !routeResult.geometry || !routeResult.geometry.coordinates) {\n      throw new Error('Searoute returned invalid result. Coordinates may not be accessible by sea.');\n    }\n\n    // Extract waypoints from GeoJSON\n    const waypoints = routeResult.geometry.coordinates;\n    const distanceNM = routeResult.properties.length || 0;\n    \n    // Calculate duration based on speed\n    const speedKnots = preferences.speed || 15;\n    const durationHours = distanceNM / speedKnots;\n\n    // Convert waypoints to lat/lng format\n    const formattedWaypoints = waypoints.map(coord => ({\n      lat: coord[1],\n      lng: coord[0]\n    }));\n\n    // Load hazards and traffic data\n    const hazards = await readJsonFile(HAZARDS_FILE, []);\n    const now = new Date();\n    const activeHazards = hazards.filter(h => new Date(h.expiresAt) > now);\n    \n    const trafficData = await readJsonFile(TRAFFIC_FILE, []);\n    const sixHoursAgo = new Date(now.getTime() - 6 * 60 * 60 * 1000);\n    const recentTraffic = trafficData.filter(t => new Date(t.timestamp) > sixHoursAgo);\n\n    // Analyze route for hazards and traffic\n    const routeHazards = [];\n    let trafficDensity = 'low';\n    let safetyScore = 100;\n\n    for (const waypoint of formattedWaypoints) {\n      // Check for nearby hazards\n      for (const hazard of activeHazards) {\n        const dist = calculateDistanceNM(waypoint, { lat: hazard.lat, lng: hazard.lng });\n        if (dist < 5) { // Within 5nm\n          routeHazards.push({\n            type: hazard.type,\n            severity: hazard.severity,\n            distance: Math.round(dist * 100) / 100,\n            description: hazard.description,\n            waypoint\n          });\n\n          // Decrease safety score based on severity\n          const severityImpact = { low: 5, medium: 10, high: 20, critical: 40 };\n          safetyScore -= severityImpact[hazard.severity] || 10;\n        }\n      }\n\n      // Check traffic density\n      const nearbyTraffic = recentTraffic.filter(t => \n        calculateDistanceNM(waypoint, { lat: t.lat, lng: t.lng }) < 10\n      );\n      \n      if (nearbyTraffic.length > 5) {\n        trafficDensity = 'high';\n        safetyScore -= 15;\n      } else if (nearbyTraffic.length > 2 && trafficDensity !== 'high') {\n        trafficDensity = 'medium';\n        safetyScore -= 5;\n      }\n    }\n\n    safetyScore = Math.max(0, Math.min(100, safetyScore));\n\n    // Create turn-by-turn directions\n    const directions = [];\n    for (let i = 0; i < formattedWaypoints.length - 1; i++) {\n      const wp1 = formattedWaypoints[i];\n      const wp2 = formattedWaypoints[i + 1];\n\n      const bearing = calculateBearing(wp1.lat, wp1.lng, wp2.lat, wp2.lng);\n      const distance = calculateDistanceNM(wp1, wp2);\n      const direction = getCardinalDirection(bearing);\n\n      directions.push({\n        step: i + 1,\n        instruction: `Proceed ${direction} for ${Math.round(distance * 10) / 10} NM`,\n        bearing: Math.round(bearing),\n        distance: Math.round(distance * 10) / 10,\n        waypoint: wp2\n      });\n    }\n\n    // Generate AI prediction\n    const prediction = {\n      estimatedDelay: Math.round(routeHazards.length * 0.5), // 0.5 hours per hazard\n      weatherRisk: routeHazards.some(h => h.type === 'weather') ? 'high' : 'low',\n      collisionRisk: trafficDensity === 'high' ? 'high' : trafficDensity === 'medium' ? 'medium' : 'low',\n      fuelEfficiency: 85 - (trafficDensity === 'high' ? 15 : trafficDensity === 'medium' ? 8 : 0),\n      recommendedSpeed: speedKnots\n    };\n\n    // Generate recommendations\n    const recommendations = [];\n    if (routeHazards.length > 0) {\n      recommendations.push(`Warning: ${routeHazards.length} hazard(s) detected along route`);\n    }\n    if (trafficDensity === 'high') {\n      recommendations.push('High traffic density - reduce speed and maintain vigilance');\n    }\n    if (safetyScore < 70) {\n      recommendations.push('Route safety score below optimal - consider alternative route');\n    }\n\n    return {\n      success: true,\n      route: {\n        coordinates: formattedWaypoints, // Frontend expects 'coordinates', not 'waypoints'\n        waypoints: formattedWaypoints,   // Keep for backward compatibility\n        distance: Math.round(distanceNM * 10) / 10,\n        duration: Math.round(durationHours * 10) / 10,\n        directions,\n        origin,\n        destination,\n        safetyScore,\n        trafficDensity,\n        hazards: routeHazards,\n        prediction,\n        recommendations,\n        alternativeRoutes: [] // Add empty array for alternatives\n      }\n    };\n  } catch (error) {\n    console.error('Error calculating route:', error);\n    console.error('Error details:', {\n      origin,\n      destination,\n      errorMessage: error.message,\n      errorStack: error.stack\n    });\n    return {\n      success: false,\n      error: 'Failed to calculate route. Please ensure coordinates are in ocean/water and accessible by sea.'\n    };\n  }\n}\n\n// Report a hazard\nasync function reportHazard(hazardData) {\n  try {\n    const hazards = await readJsonFile(HAZARDS_FILE, []);\n    \n    const newHazard = {\n      id: `hazard_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`,\n      type: hazardData.type,\n      severity: hazardData.severity,\n      lat: parseFloat(hazardData.lat),\n      lng: parseFloat(hazardData.lng),\n      description: hazardData.description,\n      reportedBy: hazardData.reportedBy,\n      vesselId: hazardData.vesselId,\n      timestamp: new Date().toISOString(),\n      expiresAt: new Date(Date.now() + (hazardData.expiryHours || 24) * 60 * 60 * 1000).toISOString(),\n      verified: false,\n      upvotes: 0,\n      downvotes: 0\n    };\n\n    hazards.push(newHazard);\n    await writeJsonFile(HAZARDS_FILE, hazards);\n\n    return { success: true, hazard: newHazard };\n  } catch (error) {\n    console.error('Error reporting hazard:', error);\n    return { success: false, error: error.message };\n  }\n}\n\n// Get nearby hazards\nasync function getNearbyHazards(lat, lng, radius = 50) {\n  try {\n    const hazards = await readJsonFile(HAZARDS_FILE, []);\n    const now = new Date();\n    const activeHazards = hazards.filter(h => new Date(h.expiresAt) > now);\n\n    const nearbyHazards = activeHazards\n      .map(hazard => ({\n        ...hazard,\n        distance: calculateDistanceNM({ lat, lng }, { lat: hazard.lat, lng: hazard.lng })\n      }))\n      .filter(hazard => hazard.distance <= radius)\n      .sort((a, b) => a.distance - b.distance);\n\n    return { success: true, hazards: nearbyHazards };\n  } catch (error) {\n    console.error('Error getting nearby hazards:', error);\n    return { success: false, error: error.message };\n  }\n}\n\n// Report traffic\nasync function reportTraffic(trafficData) {\n  try {\n    const traffic = await readJsonFile(TRAFFIC_FILE, []);\n    \n    const newTraffic = {\n      id: `traffic_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`,\n      lat: parseFloat(trafficData.lat),\n      lng: parseFloat(trafficData.lng),\n      density: trafficData.density,\n      vesselCount: trafficData.vesselCount || 1,\n      timestamp: new Date().toISOString(),\n      reportedBy: trafficData.reportedBy\n    };\n\n    traffic.push(newTraffic);\n    await writeJsonFile(TRAFFIC_FILE, traffic);\n\n    return { success: true, report: newTraffic };\n  } catch (error) {\n    console.error('Error reporting traffic:', error);\n    return { success: false, error: error.message };\n  }\n}\n\nmodule.exports = {\n  calculateRoute,\n  reportHazard,\n  getNearbyHazards,\n  reportTraffic\n};\n","size_bytes":11048},"design-system/tokens.css":{"content":"/* MarineTrack Design System - Design Tokens */\n/* Version 1.0 - ZUS Coffee-Inspired Maritime Aesthetic */\n\n:root {\n  /* ========== PRIMARY COLORS ========== */\n  --color-teal: #0F9AA7;\n  --color-navy: #082837;\n  \n  /* ========== ACCENT COLORS ========== */\n  --color-coral: #FF6B61;\n  --color-sand: #F6EBD9;\n  \n  /* ========== NEUTRALS ========== */\n  --color-off-white: #FBFAF8;\n  --color-muted-gray: #6B7785;\n  --color-white: #FFFFFF;\n  --color-black: #0A0E12;\n  \n  /* ========== SEMANTIC COLORS ========== */\n  --color-success: #00C896;\n  --color-warning: #FFA726;\n  --color-danger: #FF5252;\n  --color-info: var(--color-teal);\n  \n  /* ========== STATUS COLORS ========== */\n  --status-live: #00E676;\n  --status-docked: var(--color-muted-gray);\n  --status-delayed: var(--color-warning);\n  --status-attention: var(--color-coral);\n  \n  /* ========== TYPOGRAPHY ========== */\n  --font-family-base: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Helvetica Neue', Arial, sans-serif;\n  --font-family-heading: 'Poppins', var(--font-family-base);\n  \n  /* Font Sizes */\n  --font-size-28: 28px;\n  --font-size-24: 24px;\n  --font-size-20: 20px;\n  --font-size-16: 16px;\n  --font-size-14: 14px;\n  --font-size-12: 12px;\n  --font-size-10: 10px;\n  \n  /* Line Heights */\n  --line-height-tight: 1.2;\n  --line-height-normal: 1.5;\n  --line-height-relaxed: 1.75;\n  \n  /* Font Weights */\n  --font-weight-regular: 400;\n  --font-weight-medium: 500;\n  --font-weight-semibold: 600;\n  --font-weight-bold: 700;\n  \n  /* ========== SPACING (4px baseline) ========== */\n  --space-1: 4px;\n  --space-2: 8px;\n  --space-3: 12px;\n  --space-4: 16px;\n  --space-5: 20px;\n  --space-6: 24px;\n  --space-8: 32px;\n  --space-10: 40px;\n  --space-12: 48px;\n  --space-16: 64px;\n  --space-20: 80px;\n  \n  /* ========== BORDER RADIUS ========== */\n  --radius-sm: 8px;\n  --radius-md: 12px;\n  --radius-lg: 16px;\n  --radius-xl: 20px;\n  --radius-full: 9999px;\n  \n  /* ========== ELEVATION / SHADOWS ========== */\n  --shadow-sm: 0 1px 3px rgba(8, 40, 55, 0.08), 0 1px 2px rgba(8, 40, 55, 0.06);\n  --shadow-md: 0 4px 6px rgba(8, 40, 55, 0.1), 0 2px 4px rgba(8, 40, 55, 0.06);\n  --shadow-lg: 0 10px 15px rgba(8, 40, 55, 0.15), 0 4px 6px rgba(8, 40, 55, 0.1);\n  --shadow-xl: 0 20px 25px rgba(8, 40, 55, 0.2), 0 8px 10px rgba(8, 40, 55, 0.12);\n  \n  /* ========== MOTION / ANIMATION ========== */\n  --duration-fast: 120ms;\n  --duration-base: 180ms;\n  --duration-slow: 220ms;\n  --duration-slower: 300ms;\n  \n  --easing-natural: cubic-bezier(0.4, 0, 0.2, 1);\n  --easing-ease-out: cubic-bezier(0, 0, 0.2, 1);\n  --easing-ease-in: cubic-bezier(0.4, 0, 1, 1);\n  \n  /* ========== TOUCH TARGETS ========== */\n  --touch-target-min: 44px;\n  \n  /* ========== BREAKPOINTS (for reference) ========== */\n  --screen-mobile: 375px;\n  --screen-iphone13: 390px;\n  --screen-tablet: 768px;\n  \n  /* ========== Z-INDEX SCALE ========== */\n  --z-base: 0;\n  --z-dropdown: 100;\n  --z-sticky: 200;\n  --z-modal: 300;\n  --z-toast: 400;\n  --z-tooltip: 500;\n}\n\n/* Dark mode support (future enhancement) */\n@media (prefers-color-scheme: dark) {\n  :root {\n    --color-off-white: #1A2332;\n    --color-white: #0F1720;\n    --color-black: #FBFAF8;\n  }\n}\n","size_bytes":3178},"components/ui/redesign/ForecastCard.tsx":{"content":"import React from 'react';\nimport { View, Text, StyleSheet, Image, ImageSourcePropType, TouchableOpacity } from 'react-native';\nimport { Theme } from '@/constants/Theme';\n\ninterface ForecastCardProps {\n  vesselName: string;\n  imageSource?: ImageSourcePropType;\n  temperature: number;\n  windSpeed: number;\n  waveHeight: number;\n  period?: string;\n}\n\nexport function ForecastCard({\n  vesselName,\n  imageSource,\n  temperature,\n  windSpeed,\n  waveHeight,\n  period = 'Today',\n}: ForecastCardProps) {\n  return (\n    <View style={styles.card}>\n      <Text style={styles.period}>{period}</Text>\n      \n      {imageSource && (\n        <Image source={imageSource} style={styles.image} resizeMode=\"cover\" />\n      )}\n      \n      <View style={styles.content}>\n        <Text style={styles.vesselName}>{vesselName}</Text>\n        \n        <View style={styles.forecast}>\n          <View style={styles.forecastItem}>\n            <Text style={styles.forecastIcon}>üå°Ô∏è</Text>\n            <Text style={styles.forecastValue}>{temperature}¬∞C</Text>\n            <Text style={styles.forecastLabel}>AK</Text>\n          </View>\n          <View style={styles.forecastItem}>\n            <Text style={styles.forecastIcon}>üí®</Text>\n            <Text style={styles.forecastValue}>{windSpeed}G</Text>\n          </View>\n          <View style={styles.forecastItem}>\n            <Text style={styles.forecastIcon}>üåä</Text>\n            <Text style={styles.forecastValue}>{waveHeight}m</Text>\n          </View>\n        </View>\n        \n        <TouchableOpacity style={styles.button}>\n          <Text style={styles.buttonText}>See forecast</Text>\n        </TouchableOpacity>\n      </View>\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  card: {\n    backgroundColor: Theme.colors.white,\n    borderRadius: Theme.radius.lg,\n    overflow: 'hidden',\n    ...Theme.shadows.md,\n  },\n  period: {\n    position: 'absolute',\n    top: Theme.spacing.md,\n    left: Theme.spacing.md,\n    fontSize: Theme.fonts.sizes.sm,\n    fontWeight: Theme.fonts.weights.semibold,\n    color: Theme.colors.white,\n    backgroundColor: Theme.colors.navy,\n    paddingHorizontal: Theme.spacing.md,\n    paddingVertical: Theme.spacing.xs,\n    borderRadius: Theme.radius.full,\n    zIndex: 1,\n    opacity: 0.7,\n  },\n  image: {\n    width: '100%',\n    height: 140,\n  },\n  content: {\n    padding: Theme.spacing.base,\n  },\n  vesselName: {\n    fontSize: Theme.fonts.sizes.base,\n    fontWeight: Theme.fonts.weights.bold,\n    color: Theme.colors.navy,\n    marginBottom: Theme.spacing.md,\n  },\n  forecast: {\n    flexDirection: 'row',\n    gap: Theme.spacing.base,\n    marginBottom: Theme.spacing.md,\n  },\n  forecastItem: {\n    alignItems: 'center',\n  },\n  forecastIcon: {\n    fontSize: Theme.fonts.sizes.lg,\n    marginBottom: Theme.spacing.xs,\n  },\n  forecastValue: {\n    fontSize: Theme.fonts.sizes.base,\n    fontWeight: Theme.fonts.weights.bold,\n    color: Theme.colors.navy,\n  },\n  forecastLabel: {\n    fontSize: Theme.fonts.sizes.xs,\n    color: Theme.colors.mutedGray,\n  },\n  button: {\n    backgroundColor: Theme.colors.navy,\n    paddingVertical: Theme.spacing.md,\n    borderRadius: Theme.radius.md,\n    alignItems: 'center',\n  },\n  buttonText: {\n    color: Theme.colors.white,\n    fontSize: Theme.fonts.sizes.md,\n    fontWeight: Theme.fonts.weights.semibold,\n  },\n});\n","size_bytes":3308},"components/ui/redesign/WeatherWidget.tsx":{"content":"\nimport React from 'react';\nimport { View, Text, StyleSheet } from 'react-native';\nimport { LinearGradient } from 'expo-linear-gradient';\nimport { Theme } from '@/constants/Theme';\n\ninterface WeatherWidgetProps {\n  temperature: number;\n  condition: string;\n  windSpeed?: number;\n  windDirection?: string;\n  humidity?: number;\n  location?: string;\n}\n\nexport function WeatherWidget({\n  temperature,\n  condition,\n  windSpeed,\n  windDirection,\n  humidity,\n  location,\n}: WeatherWidgetProps) {\n  const getWeatherIcon = (condition: string) => {\n    const lowerCondition = condition.toLowerCase();\n    if (lowerCondition.includes('clear') || lowerCondition.includes('sunny')) return '‚òÄÔ∏è';\n    if (lowerCondition.includes('cloud')) return '‚òÅÔ∏è';\n    if (lowerCondition.includes('rain')) return 'üåßÔ∏è';\n    if (lowerCondition.includes('storm')) return '‚õàÔ∏è';\n    return 'üå§Ô∏è';\n  };\n\n  return (\n    <LinearGradient\n      colors={[Theme.colors.burntOrange, '#E89A6F']}\n      start={{ x: 0, y: 0 }}\n      end={{ x: 1, y: 1 }}\n      style={styles.container}\n    >\n      {/* Glassmorphism overlay */}\n      <View style={styles.glassOverlay} />\n      \n      <View style={styles.content}>\n        {/* Header */}\n        <View style={styles.header}>\n          {location && <Text style={styles.location}>{location}</Text>}\n          <Text style={styles.condition}>{condition}</Text>\n        </View>\n        \n        {/* Temperature display */}\n        <View style={styles.tempContainer}>\n          <Text style={styles.temperature}>{temperature}¬∞</Text>\n          <Text style={styles.tempIcon}>{getWeatherIcon(condition)}</Text>\n        </View>\n        \n        {/* Details */}\n        {(windSpeed !== undefined || humidity !== undefined) && (\n          <View style={styles.details}>\n            {windSpeed !== undefined && (\n              <View style={styles.detailItem}>\n                <View style={styles.detailIconContainer}>\n                  <Text style={styles.detailIcon}>üí®</Text>\n                </View>\n                <View>\n                  <Text style={styles.detailValue}>{windSpeed} kn</Text>\n                  {windDirection && <Text style={styles.detailLabel}>{windDirection}</Text>}\n                </View>\n              </View>\n            )}\n            {humidity !== undefined && (\n              <View style={styles.detailItem}>\n                <View style={styles.detailIconContainer}>\n                  <Text style={styles.detailIcon}>üíß</Text>\n                </View>\n                <View>\n                  <Text style={styles.detailValue}>{humidity}%</Text>\n                  <Text style={styles.detailLabel}>Humidity</Text>\n                </View>\n              </View>\n            )}\n          </View>\n        )}\n      </View>\n    </LinearGradient>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    borderRadius: 16,\n    padding: Theme.spacing.xl,\n    marginHorizontal: Theme.spacing.base,\n    marginVertical: Theme.spacing.md,\n    overflow: 'hidden',\n    ...Theme.shadows.md,\n  },\n  glassOverlay: {\n    ...StyleSheet.absoluteFillObject,\n    backgroundColor: 'rgba(255, 255, 255, 0.15)',\n    backdropFilter: 'blur(10px)',\n  },\n  content: {\n    position: 'relative',\n    zIndex: 1,\n  },\n  header: {\n    marginBottom: Theme.spacing.md,\n  },\n  location: {\n    fontSize: Theme.fonts.sizes.md,\n    color: Theme.colors.white,\n    opacity: 0.95,\n    marginBottom: Theme.spacing.xs,\n    fontWeight: Theme.fonts.weights.medium,\n  },\n  condition: {\n    fontSize: Theme.fonts.sizes.base,\n    fontWeight: Theme.fonts.weights.semibold,\n    color: Theme.colors.white,\n  },\n  tempContainer: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'space-between',\n    marginBottom: Theme.spacing.lg,\n  },\n  temperature: {\n    fontSize: 64,\n    fontWeight: Theme.fonts.weights.bold,\n    color: Theme.colors.white,\n    fontFamily: Theme.fonts.heading,\n    lineHeight: 64,\n  },\n  tempIcon: {\n    fontSize: 72,\n  },\n  details: {\n    flexDirection: 'row',\n    gap: Theme.spacing.lg,\n  },\n  detailItem: {\n    flex: 1,\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: Theme.spacing.md,\n    backgroundColor: 'rgba(255, 255, 255, 0.25)',\n    paddingHorizontal: Theme.spacing.md,\n    paddingVertical: Theme.spacing.md,\n    borderRadius: 12,\n    backdropFilter: 'blur(10px)',\n  },\n  detailIconContainer: {\n    width: 36,\n    height: 36,\n    borderRadius: 18,\n    backgroundColor: 'rgba(255, 255, 255, 0.3)',\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n  detailIcon: {\n    fontSize: 18,\n  },\n  detailValue: {\n    fontSize: Theme.fonts.sizes.base,\n    fontWeight: Theme.fonts.weights.bold,\n    color: Theme.colors.white,\n  },\n  detailLabel: {\n    fontSize: Theme.fonts.sizes.xs,\n    color: 'rgba(255, 255, 255, 0.9)',\n    marginTop: 2,\n  },\n});\n","size_bytes":4811},"components/ui/redesign/LivePropertyChip.tsx":{"content":"import React from 'react';\nimport { View, Text, StyleSheet } from 'react-native';\nimport { Theme } from '@/constants/Theme';\n\ninterface LivePropertyChipProps {\n  icon: string;\n  value: string;\n  label: string;\n}\n\nexport function LivePropertyChip({ icon, value, label }: LivePropertyChipProps) {\n  return (\n    <View style={styles.container}>\n      <Text style={styles.icon}>{icon}</Text>\n      <View style={styles.textContainer}>\n        <Text style={styles.value}>{value}</Text>\n        <Text style={styles.label}>{label}</Text>\n      </View>\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: Theme.spacing.sm,\n    backgroundColor: Theme.colors.white,\n    paddingHorizontal: Theme.spacing.md,\n    paddingVertical: Theme.spacing.sm,\n    borderRadius: Theme.radius.md,\n    ...Theme.shadows.sm,\n  },\n  icon: {\n    fontSize: Theme.fonts.sizes.lg,\n  },\n  textContainer: {\n    gap: 2,\n  },\n  value: {\n    fontSize: Theme.fonts.sizes.base,\n    fontWeight: Theme.fonts.weights.bold,\n    color: Theme.colors.navy,\n  },\n  label: {\n    fontSize: Theme.fonts.sizes.xs,\n    color: Theme.colors.mutedGray,\n  },\n});\n","size_bytes":1183},"components/ui/redesign/index.ts":{"content":"export { HeroBanner } from './HeroBanner';\nexport { ShortcutGrid } from './ShortcutGrid';\nexport { VesselCard } from './VesselCard';\nexport { WeatherWidget } from './WeatherWidget';\nexport { ActionButton } from './ActionButton';\nexport { SectionHeader } from './SectionHeader';\nexport { AlertBanner } from './AlertBanner';\nexport { TabBar } from './TabBar';\nexport { ForecastCard } from './ForecastCard';\nexport { LivePropertyChip } from './LivePropertyChip';\nexport { VesselDetailHeader } from './VesselDetailHeader';\nexport { CustomTabBar } from './CustomTabBar';\n","size_bytes":566},"components/ui/redesign/SectionHeader.tsx":{"content":"import React from 'react';\nimport { View, Text, StyleSheet, TouchableOpacity } from 'react-native';\nimport { Theme } from '@/constants/Theme';\n\ninterface SectionHeaderProps {\n  title: string;\n  actionLabel?: string;\n  onActionPress?: () => void;\n  subtitle?: string;\n}\n\nexport function SectionHeader({ title, actionLabel, onActionPress, subtitle }: SectionHeaderProps) {\n  return (\n    <View style={styles.container}>\n      <View style={styles.textContainer}>\n        <Text style={styles.title}>{title}</Text>\n        {subtitle && <Text style={styles.subtitle}>{subtitle}</Text>}\n      </View>\n      {actionLabel && onActionPress && (\n        <TouchableOpacity onPress={onActionPress}>\n          <Text style={styles.action}>{actionLabel}</Text>\n        </TouchableOpacity>\n      )}\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    marginHorizontal: Theme.spacing.base,\n    marginTop: Theme.spacing.xl,\n    marginBottom: Theme.spacing.md,\n  },\n  textContainer: {\n    flex: 1,\n  },\n  title: {\n    fontSize: Theme.fonts.sizes.lg,\n    fontWeight: Theme.fonts.weights.bold,\n    color: Theme.colors.navy,\n  },\n  subtitle: {\n    fontSize: Theme.fonts.sizes.sm,\n    color: Theme.colors.mutedGray,\n    marginTop: Theme.spacing.xs,\n  },\n  action: {\n    fontSize: Theme.fonts.sizes.md,\n    fontWeight: Theme.fonts.weights.semibold,\n    color: Theme.colors.teal,\n  },\n});\n","size_bytes":1474},"components/ui/redesign/AlertBanner.tsx":{"content":"import React from 'react';\nimport { View, Text, StyleSheet, TouchableOpacity } from 'react-native';\nimport { Theme } from '@/constants/Theme';\n\ninterface AlertBannerProps {\n  title: string;\n  message: string;\n  onPress?: () => void;\n  variant?: 'warning' | 'danger' | 'info';\n}\n\nexport function AlertBanner({ title, message, onPress, variant = 'warning' }: AlertBannerProps) {\n  const backgroundColor = variant === 'danger' ? Theme.colors.coral : variant === 'info' ? Theme.colors.teal : Theme.colors.warning;\n  \n  return (\n    <TouchableOpacity \n      style={[styles.container, { backgroundColor }]} \n      onPress={onPress}\n      activeOpacity={onPress ? 0.8 : 1}\n      disabled={!onPress}\n    >\n      <View style={styles.content}>\n        <Text style={styles.title}>{title}</Text>\n        <Text style={styles.message}>{message}</Text>\n      </View>\n      {onPress && (\n        <View style={styles.iconContainer}>\n          <Text style={styles.icon}>‚Ä∫</Text>\n        </View>\n      )}\n    </TouchableOpacity>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'space-between',\n    borderRadius: Theme.radius.lg,\n    padding: Theme.spacing.base,\n    marginHorizontal: Theme.spacing.base,\n    marginVertical: Theme.spacing.md,\n    ...Theme.shadows.sm,\n  },\n  content: {\n    flex: 1,\n  },\n  title: {\n    fontSize: Theme.fonts.sizes.base,\n    fontWeight: Theme.fonts.weights.bold,\n    color: Theme.colors.white,\n    marginBottom: Theme.spacing.xs,\n    textTransform: 'uppercase',\n    letterSpacing: 0.5,\n  },\n  message: {\n    fontSize: Theme.fonts.sizes.sm,\n    color: Theme.colors.white,\n    opacity: 0.9,\n  },\n  iconContainer: {\n    width: 24,\n    height: 24,\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  icon: {\n    fontSize: Theme.fonts.sizes.xl,\n    color: Theme.colors.white,\n    fontWeight: Theme.fonts.weights.bold,\n  },\n});\n","size_bytes":1929},"components/ui/redesign/VesselCard.tsx":{"content":"\nimport React from 'react';\nimport { View, Text, StyleSheet, TouchableOpacity, Image, ImageSourcePropType } from 'react-native';\nimport { LinearGradient } from 'expo-linear-gradient';\nimport { Theme } from '@/constants/Theme';\n\ninterface VesselCardProps {\n  vesselName: string;\n  vesselType?: string;\n  route?: string;\n  imageSource?: ImageSourcePropType;\n  status?: 'live' | 'docked' | 'delayed' | 'attention';\n  speed?: number;\n  eta?: string;\n  distance?: number;\n  lastUpdate?: string;\n  onPress?: () => void;\n  onActionPress?: () => void;\n  actionLabel?: string;\n  showDetails?: boolean;\n}\n\nexport function VesselCard({\n  vesselName,\n  vesselType,\n  route,\n  imageSource,\n  status = 'live',\n  speed,\n  eta,\n  distance,\n  lastUpdate,\n  onPress,\n  onActionPress,\n  actionLabel = 'Track Now',\n  showDetails = true,\n}: VesselCardProps) {\n  const statusConfig = {\n    live: {\n      color: Theme.colors.statusLive,\n      label: 'LIVE',\n      pulse: true,\n    },\n    docked: {\n      color: Theme.colors.statusDocked,\n      label: 'DOCKED',\n      pulse: false,\n    },\n    delayed: {\n      color: Theme.colors.statusDelayed,\n      label: 'DELAYED',\n      pulse: false,\n    },\n    attention: {\n      color: Theme.colors.statusAttention,\n      label: 'ATTENTION',\n      pulse: true,\n    },\n  };\n\n  const config = statusConfig[status];\n\n  return (\n    <TouchableOpacity \n      style={styles.card} \n      onPress={onPress} \n      activeOpacity={0.96}\n    >\n      {/* Image with gradient overlay */}\n      {imageSource && (\n        <View style={styles.imageContainer}>\n          <Image source={imageSource} style={styles.image} />\n          <LinearGradient\n            colors={['transparent', 'rgba(44, 24, 16, 0.4)']}\n            style={styles.imageGradient}\n          />\n          \n          {/* Status badge */}\n          <View style={[styles.statusBadge, { backgroundColor: config.color }]}>\n            {config.pulse && <View style={styles.pulseDot} />}\n            <Text style={styles.statusText}>{config.label}</Text>\n          </View>\n        </View>\n      )}\n      \n      <View style={styles.cardContent}>\n        {/* Header */}\n        <View style={styles.header}>\n          <View style={styles.headerLeft}>\n            <Text style={styles.vesselName} numberOfLines={1}>{vesselName}</Text>\n            {vesselType && (\n              <Text style={styles.vesselType}>{vesselType}</Text>\n            )}\n          </View>\n          \n          {eta && (\n            <View style={styles.etaContainer}>\n              <Text style={styles.etaLabel}>ETA</Text>\n              <Text style={styles.etaValue}>{eta}</Text>\n            </View>\n          )}\n        </View>\n\n        {/* Route */}\n        {route && (\n          <View style={styles.routeContainer}>\n            <Text style={styles.routeIcon}>üìç</Text>\n            <Text style={styles.route} numberOfLines={1}>{route}</Text>\n          </View>\n        )}\n\n        {/* Telemetry chips */}\n        {showDetails && (speed !== undefined || distance !== undefined) && (\n          <View style={styles.telemetryRow}>\n            {speed !== undefined && (\n              <View style={styles.telemetryChip}>\n                <Text style={styles.telemetryIcon}>üí®</Text>\n                <Text style={styles.telemetryValue}>{speed.toFixed(1)}</Text>\n                <Text style={styles.telemetryUnit}>kn</Text>\n              </View>\n            )}\n            {distance !== undefined && (\n              <View style={styles.telemetryChip}>\n                <Text style={styles.telemetryIcon}>üìè</Text>\n                <Text style={styles.telemetryValue}>{distance.toFixed(1)}</Text>\n                <Text style={styles.telemetryUnit}>km</Text>\n              </View>\n            )}\n          </View>\n        )}\n\n        {/* Action button */}\n        <TouchableOpacity \n          style={styles.actionButton}\n          onPress={onActionPress}\n          activeOpacity={0.8}\n        >\n          <Text style={styles.actionButtonText}>{actionLabel}</Text>\n        </TouchableOpacity>\n      </View>\n    </TouchableOpacity>\n  );\n}\n\nconst styles = StyleSheet.create({\n  card: {\n    backgroundColor: Theme.colors.white,\n    borderRadius: 16,\n    overflow: 'hidden',\n    marginBottom: Theme.spacing.base,\n    ...Theme.shadows.md,\n  },\n  imageContainer: {\n    position: 'relative',\n    height: 160,\n    backgroundColor: Theme.colors.cream,\n  },\n  image: {\n    width: '100%',\n    height: '100%',\n    resizeMode: 'cover',\n  },\n  imageGradient: {\n    position: 'absolute',\n    bottom: 0,\n    left: 0,\n    right: 0,\n    height: 80,\n  },\n  statusBadge: {\n    position: 'absolute',\n    top: Theme.spacing.md,\n    right: Theme.spacing.md,\n    flexDirection: 'row',\n    alignItems: 'center',\n    paddingHorizontal: Theme.spacing.md,\n    paddingVertical: 6,\n    borderRadius: Theme.radius.full,\n    gap: 6,\n  },\n  pulseDot: {\n    width: 6,\n    height: 6,\n    borderRadius: 3,\n    backgroundColor: Theme.colors.white,\n  },\n  statusText: {\n    color: Theme.colors.white,\n    fontSize: Theme.fonts.sizes.xs,\n    fontWeight: Theme.fonts.weights.bold,\n    letterSpacing: 0.5,\n  },\n  cardContent: {\n    padding: Theme.spacing.lg,\n  },\n  header: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'flex-start',\n    marginBottom: Theme.spacing.sm,\n  },\n  headerLeft: {\n    flex: 1,\n    marginRight: Theme.spacing.md,\n  },\n  vesselName: {\n    fontSize: Theme.fonts.sizes.lg,\n    fontWeight: Theme.fonts.weights.bold,\n    color: Theme.colors.espresso,\n    fontFamily: Theme.fonts.heading,\n    marginBottom: 4,\n  },\n  vesselType: {\n    fontSize: Theme.fonts.sizes.sm,\n    color: Theme.colors.mutedGray,\n  },\n  etaContainer: {\n    alignItems: 'flex-end',\n  },\n  etaLabel: {\n    fontSize: Theme.fonts.sizes.xs,\n    color: Theme.colors.mutedGray,\n    marginBottom: 2,\n  },\n  etaValue: {\n    fontSize: Theme.fonts.sizes.base,\n    fontWeight: Theme.fonts.weights.bold,\n    color: Theme.colors.burntOrange,\n  },\n  routeContainer: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    marginBottom: Theme.spacing.md,\n    gap: Theme.spacing.xs,\n  },\n  routeIcon: {\n    fontSize: 14,\n  },\n  route: {\n    flex: 1,\n    fontSize: Theme.fonts.sizes.md,\n    color: Theme.colors.mutedGray,\n  },\n  telemetryRow: {\n    flexDirection: 'row',\n    gap: Theme.spacing.sm,\n    marginBottom: Theme.spacing.base,\n  },\n  telemetryChip: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    backgroundColor: Theme.colors.latte,\n    paddingHorizontal: Theme.spacing.md,\n    paddingVertical: 8,\n    borderRadius: 12,\n    gap: 6,\n  },\n  telemetryIcon: {\n    fontSize: 14,\n  },\n  telemetryValue: {\n    fontSize: Theme.fonts.sizes.md,\n    fontWeight: Theme.fonts.weights.bold,\n    color: Theme.colors.coffeeBrown,\n  },\n  telemetryUnit: {\n    fontSize: Theme.fonts.sizes.xs,\n    color: Theme.colors.mutedGray,\n  },\n  actionButton: {\n    backgroundColor: Theme.colors.burntOrange,\n    paddingVertical: Theme.spacing.md,\n    borderRadius: 12,\n    alignItems: 'center',\n    minHeight: 44,\n    justifyContent: 'center',\n  },\n  actionButtonText: {\n    color: Theme.colors.white,\n    fontSize: Theme.fonts.sizes.base,\n    fontWeight: Theme.fonts.weights.bold,\n    letterSpacing: 0.5,\n  },\n});\n","size_bytes":7198},"components/ui/redesign/VesselDetailHeader.tsx":{"content":"import React from 'react';\nimport { View, Text, StyleSheet, TouchableOpacity } from 'react-native';\nimport { Theme } from '@/constants/Theme';\n\ninterface VesselDetailHeaderProps {\n  vesselName: string;\n  vesselType?: string;\n  status?: string;\n  timestamp?: string;\n  onClose?: () => void;\n}\n\nexport function VesselDetailHeader({\n  vesselName,\n  vesselType,\n  status,\n  timestamp,\n  onClose,\n}: VesselDetailHeaderProps) {\n  return (\n    <View style={styles.container}>\n      <View style={styles.topRow}>\n        <Text style={styles.vesselName}>{vesselName}</Text>\n        {onClose && (\n          <TouchableOpacity onPress={onClose} style={styles.closeButton}>\n            <Text style={styles.closeIcon}>√ó</Text>\n          </TouchableOpacity>\n        )}\n      </View>\n      \n      {vesselType && <Text style={styles.vesselType}>{vesselType}</Text>}\n      \n      {(status || timestamp) && (\n        <View style={styles.metadata}>\n          {status && (\n            <View style={styles.statusBadge}>\n              <Text style={styles.statusDot}>‚óè</Text>\n              <Text style={styles.statusText}>{status}</Text>\n            </View>\n          )}\n          {timestamp && (\n            <View style={styles.timestamp}>\n              <Text style={styles.timestampIcon}>‚è±Ô∏è</Text>\n              <Text style={styles.timestampText}>{timestamp}</Text>\n            </View>\n          )}\n        </View>\n      )}\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    padding: Theme.spacing.base,\n    backgroundColor: Theme.colors.white,\n  },\n  topRow: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'flex-start',\n    marginBottom: Theme.spacing.xs,\n  },\n  vesselName: {\n    fontSize: Theme.fonts.sizes.xl,\n    fontWeight: Theme.fonts.weights.bold,\n    color: Theme.colors.navy,\n    flex: 1,\n  },\n  closeButton: {\n    width: 32,\n    height: 32,\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  closeIcon: {\n    fontSize: 32,\n    color: Theme.colors.mutedGray,\n    lineHeight: 32,\n  },\n  vesselType: {\n    fontSize: Theme.fonts.sizes.md,\n    color: Theme.colors.mutedGray,\n    marginBottom: Theme.spacing.sm,\n  },\n  metadata: {\n    flexDirection: 'row',\n    gap: Theme.spacing.base,\n    marginTop: Theme.spacing.sm,\n  },\n  statusBadge: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: Theme.spacing.xs,\n  },\n  statusDot: {\n    color: Theme.colors.statusLive,\n    fontSize: Theme.fonts.sizes.sm,\n  },\n  statusText: {\n    fontSize: Theme.fonts.sizes.sm,\n    color: Theme.colors.navy,\n    textTransform: 'uppercase',\n    fontWeight: Theme.fonts.weights.semibold,\n  },\n  timestamp: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: Theme.spacing.xs,\n  },\n  timestampIcon: {\n    fontSize: Theme.fonts.sizes.sm,\n  },\n  timestampText: {\n    fontSize: Theme.fonts.sizes.sm,\n    color: Theme.colors.mutedGray,\n  },\n});\n","size_bytes":2898},"components/ui/redesign/ShortcutGrid.tsx":{"content":"import React from 'react';\nimport { View, Text, StyleSheet, TouchableOpacity } from 'react-native';\nimport { Theme } from '@/constants/Theme';\n\ninterface Shortcut {\n  id: string;\n  label: string;\n  icon?: React.ReactNode;\n  onPress: () => void;\n}\n\ninterface ShortcutGridProps {\n  shortcuts: Shortcut[];\n}\n\nexport function ShortcutGrid({ shortcuts }: ShortcutGridProps) {\n  return (\n    <View style={styles.container}>\n      <Text style={styles.title}>Shortcuts</Text>\n      <View style={styles.grid}>\n        {shortcuts.map((shortcut) => (\n          <TouchableOpacity\n            key={shortcut.id}\n            style={styles.shortcut}\n            onPress={shortcut.onPress}\n          >\n            {shortcut.icon && <View style={styles.iconContainer}>{shortcut.icon}</View>}\n            <Text style={styles.label}>{shortcut.label}</Text>\n            <Text style={styles.arrow}>‚Ä∫</Text>\n          </TouchableOpacity>\n        ))}\n      </View>\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    marginHorizontal: Theme.spacing.base,\n    marginVertical: Theme.spacing.md,\n  },\n  title: {\n    fontSize: Theme.fonts.sizes.lg,\n    fontWeight: Theme.fonts.weights.bold,\n    color: Theme.colors.navy,\n    marginBottom: Theme.spacing.md,\n  },\n  grid: {\n    flexDirection: 'row',\n    flexWrap: 'wrap',\n    gap: Theme.spacing.md,\n  },\n  shortcut: {\n    flex: 1,\n    minWidth: '45%',\n    backgroundColor: Theme.colors.warning,\n    paddingVertical: Theme.spacing.base,\n    paddingHorizontal: Theme.spacing.md,\n    borderRadius: Theme.radius.md,\n    flexDirection: 'row',\n    alignItems: 'center',\n    ...Theme.shadows.sm,\n  },\n  iconContainer: {\n    marginRight: Theme.spacing.sm,\n  },\n  label: {\n    flex: 1,\n    fontSize: Theme.fonts.sizes.md,\n    fontWeight: Theme.fonts.weights.semibold,\n    color: Theme.colors.navy,\n  },\n  arrow: {\n    fontSize: Theme.fonts.sizes.xl,\n    color: Theme.colors.navy,\n    fontWeight: Theme.fonts.weights.bold,\n  },\n});\n","size_bytes":1966},"components/ui/redesign/ActionButton.tsx":{"content":"import React from 'react';\nimport { TouchableOpacity, Text, StyleSheet, ActivityIndicator, View } from 'react-native';\nimport { Theme } from '@/constants/Theme';\n\ninterface ActionButtonProps {\n  label: string;\n  onPress: () => void;\n  variant?: 'primary' | 'secondary' | 'ghost' | 'danger';\n  size?: 'small' | 'medium' | 'large';\n  disabled?: boolean;\n  loading?: boolean;\n  icon?: React.ReactNode;\n  fullWidth?: boolean;\n}\n\nexport function ActionButton({\n  label,\n  onPress,\n  variant = 'primary',\n  size = 'medium',\n  disabled = false,\n  loading = false,\n  icon,\n  fullWidth = false,\n}: ActionButtonProps) {\n  const buttonStyles = [\n    styles.button,\n    styles[variant],\n    styles[size],\n    fullWidth && styles.fullWidth,\n    disabled && styles.disabled,\n  ];\n\n  const textStyles = [\n    styles.text,\n    styles[`${variant}Text`],\n    styles[`${size}Text`],\n  ];\n\n  return (\n    <TouchableOpacity\n      style={buttonStyles}\n      onPress={onPress}\n      disabled={disabled || loading}\n      activeOpacity={0.8}\n    >\n      {loading ? (\n        <ActivityIndicator color={variant === 'primary' ? Theme.colors.white : Theme.colors.teal} />\n      ) : (\n        <View style={styles.content}>\n          {icon && <View style={styles.icon}>{icon}</View>}\n          <Text style={textStyles}>{label}</Text>\n        </View>\n      )}\n    </TouchableOpacity>\n  );\n}\n\nconst styles = StyleSheet.create({\n  button: {\n    borderRadius: Theme.radius.md,\n    alignItems: 'center',\n    justifyContent: 'center',\n    flexDirection: 'row',\n    ...Theme.shadows.sm,\n  },\n  content: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: Theme.spacing.sm,\n  },\n  icon: {\n    marginRight: Theme.spacing.xs,\n  },\n  primary: {\n    backgroundColor: Theme.colors.teal,\n  },\n  secondary: {\n    backgroundColor: 'transparent',\n    borderWidth: 2,\n    borderColor: Theme.colors.teal,\n  },\n  ghost: {\n    backgroundColor: 'transparent',\n  },\n  danger: {\n    backgroundColor: Theme.colors.coral,\n  },\n  small: {\n    paddingVertical: Theme.spacing.sm,\n    paddingHorizontal: Theme.spacing.base,\n  },\n  medium: {\n    paddingVertical: Theme.spacing.md,\n    paddingHorizontal: Theme.spacing.xl,\n  },\n  large: {\n    paddingVertical: Theme.spacing.base,\n    paddingHorizontal: Theme.spacing.xxl,\n  },\n  fullWidth: {\n    width: '100%',\n  },\n  disabled: {\n    opacity: 0.5,\n  },\n  text: {\n    fontWeight: Theme.fonts.weights.semibold,\n  },\n  primaryText: {\n    color: Theme.colors.white,\n  },\n  secondaryText: {\n    color: Theme.colors.teal,\n  },\n  ghostText: {\n    color: Theme.colors.navy,\n  },\n  dangerText: {\n    color: Theme.colors.white,\n  },\n  smallText: {\n    fontSize: Theme.fonts.sizes.sm,\n  },\n  mediumText: {\n    fontSize: Theme.fonts.sizes.base,\n  },\n  largeText: {\n    fontSize: Theme.fonts.sizes.lg,\n  },\n});\n","size_bytes":2796},"components/ui/redesign/TabBar.tsx":{"content":"import React, { useState } from 'react';\nimport { View, Text, StyleSheet, TouchableOpacity, ScrollView } from 'react-native';\nimport { Theme } from '@/constants/Theme';\n\ninterface Tab {\n  id: string;\n  label: string;\n}\n\ninterface TabBarProps {\n  tabs: Tab[];\n  onTabChange?: (tabId: string) => void;\n  initialTab?: string;\n}\n\nexport function TabBar({ tabs, onTabChange, initialTab }: TabBarProps) {\n  const [activeTab, setActiveTab] = useState(initialTab || tabs[0]?.id);\n\n  const handleTabPress = (tabId: string) => {\n    setActiveTab(tabId);\n    onTabChange?.(tabId);\n  };\n\n  return (\n    <ScrollView\n      horizontal\n      showsHorizontalScrollIndicator={false}\n      style={styles.container}\n      contentContainerStyle={styles.contentContainer}\n    >\n      {tabs.map((tab) => (\n        <TouchableOpacity\n          key={tab.id}\n          style={[styles.tab, activeTab === tab.id && styles.tabActive]}\n          onPress={() => handleTabPress(tab.id)}\n        >\n          <Text style={[styles.tabText, activeTab === tab.id && styles.tabTextActive]}>\n            {tab.label}\n          </Text>\n        </TouchableOpacity>\n      ))}\n    </ScrollView>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    marginHorizontal: Theme.spacing.base,\n    marginVertical: Theme.spacing.md,\n  },\n  contentContainer: {\n    gap: Theme.spacing.md,\n  },\n  tab: {\n    paddingVertical: Theme.spacing.sm,\n    paddingHorizontal: Theme.spacing.base,\n    borderRadius: Theme.radius.full,\n    backgroundColor: 'transparent',\n    borderWidth: 2,\n    borderColor: Theme.colors.navy,\n  },\n  tabActive: {\n    backgroundColor: Theme.colors.navy,\n  },\n  tabText: {\n    fontSize: Theme.fonts.sizes.md,\n    fontWeight: Theme.fonts.weights.semibold,\n    color: Theme.colors.navy,\n  },\n  tabTextActive: {\n    color: Theme.colors.white,\n  },\n});\n","size_bytes":1821},"components/ui/redesign/HeroBanner.tsx":{"content":"\nimport React from 'react';\nimport { View, Text, StyleSheet, TouchableOpacity, ImageBackground, ImageSourcePropType } from 'react-native';\nimport { LinearGradient } from 'expo-linear-gradient';\nimport { Theme } from '@/constants/Theme';\n\ninterface HeroBannerProps {\n  title: string;\n  subtitle?: string;\n  badge?: string;\n  buttonText?: string;\n  onPress?: () => void;\n  variant?: 'promo' | 'alert' | 'weather' | 'info';\n  imageSource?: ImageSourcePropType;\n  icon?: React.ReactNode;\n}\n\nexport function HeroBanner({ \n  title, \n  subtitle, \n  badge,\n  buttonText, \n  onPress, \n  variant = 'promo',\n  imageSource,\n  icon \n}: HeroBannerProps) {\n  const gradientColors = {\n    promo: [Theme.colors.teal, Theme.colors.navy],\n    alert: [Theme.colors.coral, '#D94A3D'],\n    weather: [Theme.colors.navy, '#0A1929'],\n    info: [Theme.colors.teal, '#0D8895'],\n  };\n\n  return (\n    <View style={styles.container}>\n      {imageSource ? (\n        <ImageBackground \n          source={imageSource} \n          style={styles.imageBackground}\n          imageStyle={styles.image}\n        >\n          <LinearGradient\n            colors={['rgba(8, 40, 55, 0.7)', 'rgba(8, 40, 55, 0.9)']}\n            style={styles.overlay}\n          >\n            {renderContent()}\n          </LinearGradient>\n        </ImageBackground>\n      ) : (\n        <LinearGradient\n          colors={gradientColors[variant]}\n          start={{ x: 0, y: 0 }}\n          end={{ x: 1, y: 1 }}\n          style={styles.gradient}\n        >\n          {renderContent()}\n        </LinearGradient>\n      )}\n    </View>\n  );\n\n  function renderContent() {\n    return (\n      <View style={styles.content}>\n        {badge && (\n          <View style={styles.badge}>\n            <Text style={styles.badgeText}>{badge.toUpperCase()}</Text>\n          </View>\n        )}\n        {icon && <View style={styles.iconContainer}>{icon}</View>}\n        <Text style={styles.title}>{title}</Text>\n        {subtitle && <Text style={styles.subtitle}>{subtitle}</Text>}\n        {buttonText && onPress && (\n          <TouchableOpacity \n            style={styles.button} \n            onPress={onPress}\n            activeOpacity={0.8}\n          >\n            <Text style={styles.buttonText}>{buttonText}</Text>\n          </TouchableOpacity>\n        )}\n      </View>\n    );\n  }\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    marginHorizontal: Theme.spacing.base,\n    marginVertical: Theme.spacing.md,\n    borderRadius: Theme.cards.borderRadius,\n    overflow: 'hidden',\n    ...Theme.shadows.lg,\n  },\n  imageBackground: {\n    width: '100%',\n    minHeight: 200,\n  },\n  image: {\n    borderRadius: Theme.cards.borderRadius,\n  },\n  overlay: {\n    width: '100%',\n    minHeight: 200,\n    padding: Theme.spacing.xl,\n  },\n  gradient: {\n    padding: Theme.spacing.xl,\n    minHeight: 200,\n  },\n  content: {\n    flex: 1,\n    justifyContent: 'center',\n  },\n  badge: {\n    alignSelf: 'flex-start',\n    backgroundColor: 'rgba(255, 255, 255, 0.2)',\n    paddingHorizontal: Theme.spacing.md,\n    paddingVertical: Theme.spacing.xs,\n    borderRadius: Theme.chips.borderRadius,\n    marginBottom: Theme.spacing.sm,\n    borderWidth: 1,\n    borderColor: 'rgba(255, 255, 255, 0.3)',\n  },\n  badgeText: {\n    color: Theme.colors.white,\n    fontSize: Theme.fonts.sizes.xs,\n    fontWeight: Theme.fonts.weights.bold,\n    letterSpacing: 1,\n  },\n  iconContainer: {\n    marginBottom: Theme.spacing.md,\n  },\n  title: {\n    fontSize: Theme.fonts.sizes.xxl,\n    fontWeight: Theme.fonts.weights.bold,\n    color: Theme.colors.white,\n    fontFamily: Theme.fonts.heading,\n    marginBottom: Theme.spacing.xs,\n    lineHeight: Theme.fonts.lineHeights.tight * Theme.fonts.sizes.xxl,\n  },\n  subtitle: {\n    fontSize: Theme.fonts.sizes.base,\n    color: Theme.colors.white,\n    opacity: 0.95,\n    marginBottom: Theme.spacing.lg,\n    lineHeight: Theme.fonts.lineHeights.normal * Theme.fonts.sizes.base,\n  },\n  button: {\n    backgroundColor: Theme.colors.white,\n    paddingVertical: Theme.spacing.md,\n    paddingHorizontal: Theme.spacing.xl,\n    borderRadius: Theme.buttons.borderRadius,\n    alignSelf: 'flex-start',\n    marginTop: Theme.spacing.sm,\n    minHeight: Theme.touchTarget.min,\n    justifyContent: 'center',\n    ...Theme.shadows.sm,\n  },\n  buttonText: {\n    color: Theme.colors.navy,\n    fontSize: Theme.fonts.sizes.base,\n    fontWeight: Theme.fonts.weights.bold,\n    letterSpacing: 0.5,\n  },\n});\n","size_bytes":4385},"attached_assets/expo_ui_reference/Expo1234/components/ExternalLink.tsx":{"content":"import { Href, Link } from 'expo-router';\nimport { openBrowserAsync } from 'expo-web-browser';\nimport { type ComponentProps } from 'react';\nimport { Platform } from 'react-native';\n\ntype Props = Omit<ComponentProps<typeof Link>, 'href'> & { href: Href & string };\n\nexport function ExternalLink({ href, ...rest }: Props) {\n  return (\n    <Link\n      target=\"_blank\"\n      {...rest}\n      href={href}\n      onPress={async (event) => {\n        if (Platform.OS !== 'web') {\n          // Prevent the default behavior of linking to the default browser on native.\n          event.preventDefault();\n          // Open the link in an in-app browser.\n          await openBrowserAsync(href);\n        }\n      }}\n    />\n  );\n}\n","size_bytes":713},"attached_assets/expo_ui_reference/Expo1234/config/api.ts":{"content":"\n// Backend API Configuration\nconst BACKEND_URL = process.env.EXPO_PUBLIC_BACKEND_URL || 'http://192.168.0.194:3000';\nconst SOCKET_URL = process.env.EXPO_PUBLIC_SOCKET_URL || 'http://192.168.0.194:3000';\n\nexport const API_CONFIG = {\n  BACKEND_URL,\n  SOCKET_URL,\n};\n\nexport function getBackendUrl(): string {\n  console.log('Backend URL configured:', API_CONFIG.BACKEND_URL);\n  return API_CONFIG.BACKEND_URL;\n}\n\nexport function getSocketUrl(): string {\n  console.log('Socket URL configured:', API_CONFIG.SOCKET_URL);\n  return API_CONFIG.SOCKET_URL;\n}\n","size_bytes":549},"components/redesign/Badge.tsx":{"content":"import React from 'react';\nimport { View, Text, StyleSheet } from 'react-native';\nimport { Theme } from '@/constants/Theme';\n\ninterface BadgeProps {\n  count: number | string;\n  color?: string;\n}\n\nexport function Badge({ count, color = '#007AFF' }: BadgeProps) {\n  return (\n    <View style={[styles.badge, { backgroundColor: color }]}>\n      <Text style={styles.text}>{count}</Text>\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  badge: {\n    position: 'absolute',\n    top: -4,\n    right: -4,\n    borderRadius: Theme.radius.full,\n    minWidth: 20,\n    height: 20,\n    justifyContent: 'center',\n    alignItems: 'center',\n    paddingHorizontal: Theme.spacing.xs,\n  },\n  text: {\n    color: '#FFFFFF',\n    fontSize: Theme.fonts.sizes.sm,\n    fontWeight: Theme.fonts.weights.semibold,\n  },\n});\n","size_bytes":798},"app/(tabs)/profile.tsx":{"content":"import React, { useState, useEffect } from 'react';\nimport { View, Text, StyleSheet, ScrollView, TouchableOpacity, Switch, Alert } from 'react-native';\nimport { useColorScheme } from '@/hooks/useColorScheme';\nimport { Colors } from '@/constants/Colors';\nimport { Theme } from '@/constants/Theme';\nimport { useRouter } from 'expo-router';\nimport { getCurrentUser, signOut } from '@/utils/auth';\nimport { getUserFromDatabase } from '@/utils/database';\nimport { IconSymbol } from '@/components/ui/IconSymbol';\nimport { ProfileAvatar } from '@/components/redesign/ProfileAvatar';\nimport { StatChip } from '@/components/redesign/StatChip';\n\nexport default function ProfileScreen() {\n  const router = useRouter();\n  const colorScheme = useColorScheme();\n  const isDark = colorScheme === 'dark';\n  const colors = Colors[isDark ? 'dark' : 'light'];\n\n  const [userData, setUserData] = useState<any>(null);\n  const [loading, setLoading] = useState(true);\n  const [notificationsEnabled, setNotificationsEnabled] = useState(true);\n  const [locationEnabled, setLocationEnabled] = useState(true);\n\n  useEffect(() => {\n    loadUserData();\n  }, []);\n\n  const loadUserData = async () => {\n    try {\n      const currentUser = await getCurrentUser();\n      if (currentUser) {\n        const dbUser = await getUserFromDatabase(currentUser.id);\n        setUserData(dbUser);\n      }\n      setLoading(false);\n    } catch (error) {\n      console.error('Error loading user data:', error);\n      setLoading(false);\n    }\n  };\n\n  const handleLogout = async () => {\n    Alert.alert(\n      'Logout',\n      'Are you sure you want to logout?',\n      [\n        { text: 'Cancel', style: 'cancel' },\n        {\n          text: 'Logout',\n          style: 'destructive',\n          onPress: async () => {\n            await signOut();\n            router.replace('/auth/login');\n          },\n        },\n      ]\n    );\n  };\n\n  if (loading) {\n    return (\n      <View style={[styles.container, { backgroundColor: colors.background }]}>\n        <View style={styles.loadingContainer}>\n          <Text style={[styles.loadingText, { color: colors.text }]}>Loading...</Text>\n        </View>\n      </View>\n    );\n  }\n\n  const vesselInfo = userData?.vesselInfo;\n  const contactInfo = userData?.contactInfo;\n\n  const stats = [\n    { label: 'Vessels\\nTracked', value: '156', color: '#34C759' },\n    { label: 'Nautical\\nMiles', value: '12.5k', color: '#007AFF' },\n    { label: 'Voyages', value: '5 yrs', color: '#FF9500' },\n  ];\n\n  const categories = [\n    { id: 1, label: 'Navigation', active: true },\n    { id: 2, label: 'Safety', active: false },\n    { id: 3, label: 'Weather', active: false },\n  ];\n\n\n  return (\n    <ScrollView style={[styles.container, { backgroundColor: colors.background }]}>\n      {/* Elegant Header */}\n      <View style={[styles.header, { backgroundColor: Theme.colors.iosBlue }]}>\n        <View style={styles.headerContent}>\n          <Text style={styles.headerTitle}>Profile & Settings</Text>\n          <Text style={styles.headerSubtitle}>Manage your maritime account</Text>\n        </View>\n      </View>\n\n      {/* Profile Card */}\n      <View style={[styles.profileSection, { backgroundColor: isDark ? '#1C1C1E' : '#FFFFFF' }]}>\n        <View style={styles.profileAvatar}>\n          <Text style={styles.avatarIcon}>‚öì</Text>\n        </View>\n        <Text style={[styles.profileName, { color: colors.text }]}>\n          {userData?.name || 'Captain'}\n        </Text>\n        <Text style={[styles.profileEmail, { color: colors.secondaryText }]}>\n          {userData?.email || 'No email provided'}\n        </Text>\n        {vesselInfo && (\n          <View style={[styles.vesselBadge, { backgroundColor: isDark ? '#2C2C2E' : '#F2F2F7' }]}>\n            <Text style={[styles.vesselBadgeText, { color: colors.text }]}>\n              üö¢ {vesselInfo.vesselName}\n            </Text>\n          </View>\n        )}\n      </View>\n\n      {/* Vessel Information Section */}\n      {vesselInfo && (\n        <View style={styles.section}>\n          <Text style={[styles.sectionTitle, { color: colors.text }]}>Vessel Information</Text>\n\n          <View style={[styles.infoCard, { backgroundColor: isDark ? '#1C1C1E' : '#FFFFFF' }]}>\n            <View style={styles.infoRow}>\n              <IconSymbol name=\"location.fill\" size={20} color={Theme.colors.iosBlue} />\n              <View style={styles.infoContent}>\n                <Text style={[styles.infoLabel, { color: colors.secondaryText }]}>Home Port</Text>\n                <Text style={[styles.infoValue, { color: colors.text }]}>{vesselInfo.homePort}</Text>\n              </View>\n            </View>\n\n            <View style={styles.infoDivider} />\n\n            <View style={styles.infoRow}>\n              <IconSymbol name=\"ruler.fill\" size={20} color={Theme.colors.iosBlue} />\n              <View style={styles.infoContent}>\n                <Text style={[styles.infoLabel, { color: colors.secondaryText }]}>Dimensions</Text>\n                <Text style={[styles.infoValue, { color: colors.text }]}>\n                  {vesselInfo.vesselLength}m √ó {vesselInfo.vesselBeam}m\n                </Text>\n              </View>\n            </View>\n\n            <View style={styles.infoDivider} />\n\n            <View style={styles.infoRow}>\n              <IconSymbol name=\"number.circle.fill\" size={20} color={Theme.colors.iosBlue} />\n              <View style={styles.infoContent}>\n                <Text style={[styles.infoLabel, { color: colors.secondaryText }]}>Registration</Text>\n                <Text style={[styles.infoValue, { color: colors.text }]}>\n                  {vesselInfo.registrationNumber || 'N/A'}\n                </Text>\n              </View>\n            </View>\n          </View>\n        </View>\n      )}\n\n      {/* Preferences Section */}\n      <View style={styles.section}>\n        <Text style={[styles.sectionTitle, { color: colors.text }]}>Preferences</Text>\n\n        <View style={[styles.infoCard, { backgroundColor: isDark ? '#1C1C1E' : '#FFFFFF' }]}>\n          <View style={styles.settingRow}>\n            <View style={styles.settingLeft}>\n              <IconSymbol name=\"bell.fill\" size={20} color={Theme.colors.iosBlue} />\n              <Text style={[styles.settingLabel, { color: colors.text }]}>Notifications</Text>\n            </View>\n            <Switch\n              value={notificationsEnabled}\n              onValueChange={setNotificationsEnabled}\n              trackColor={{ false: '#E5E5EA', true: Theme.colors.iosBlue }}\n            />\n          </View>\n\n          <View style={styles.infoDivider} />\n\n          <View style={styles.settingRow}>\n            <View style={styles.settingLeft}>\n              <IconSymbol name=\"location.fill\" size={20} color={Theme.colors.iosBlue} />\n              <Text style={[styles.settingLabel, { color: colors.text }]}>Location Services</Text>\n            </View>\n            <Switch\n              value={locationEnabled}\n              onValueChange={setLocationEnabled}\n              trackColor={{ false: '#E5E5EA', true: Theme.colors.iosBlue }}\n            />\n          </View>\n        </View>\n      </View>\n\n      {/* Sustainability Tips */}\n      <View style={styles.section}>\n        <Text style={[styles.sectionTitle, { color: colors.text }]}>Sustainable Fishing</Text>\n\n        <View style={[styles.tipsCard, { backgroundColor: Theme.colors.iosTeal + '20' }]}>\n          <Text style={[styles.tipsTitle, { color: Theme.colors.iosTeal }]}>\n            üåä Protect Our Oceans\n          </Text>\n          <Text style={[styles.tipsText, { color: colors.text }]}>\n            ‚Ä¢ Respect minimum size limits{'\\n'}\n            ‚Ä¢ Avoid breeding seasons{'\\n'}\n            ‚Ä¢ Use eco-friendly gear{'\\n'}\n            ‚Ä¢ Report illegal fishing{'\\n'}\n            ‚Ä¢ Reduce plastic waste\n          </Text>\n        </View>\n      </View>\n\n      {/* Actions */}\n      <View style={styles.section}>\n        <TouchableOpacity\n          style={[styles.actionButton, { backgroundColor: isDark ? '#1C1C1E' : '#FFFFFF' }]}\n          onPress={() => Alert.alert('Help', 'Contact support: support@marinetrack.com')}\n        >\n          <IconSymbol name=\"questionmark.circle.fill\" size={24} color={Theme.colors.iosBlue} />\n          <Text style={[styles.actionText, { color: colors.text }]}>Help & Support</Text>\n          <IconSymbol name=\"chevron.right\" size={20} color={colors.secondaryText} />\n        </TouchableOpacity>\n\n        <TouchableOpacity\n          style={[styles.actionButton, { backgroundColor: isDark ? '#1C1C1E' : '#FFFFFF' }]}\n          onPress={() => Alert.alert('About', 'MarineTrack v1.0 ‚Ä¢ Built for fishermen')}\n        >\n          <IconSymbol name=\"info.circle.fill\" size={24} color={Theme.colors.iosBlue} />\n          <Text style={[styles.actionText, { color: colors.text }]}>About MarineTrack</Text>\n          <IconSymbol name=\"chevron.right\" size={20} color={colors.secondaryText} />\n        </TouchableOpacity>\n\n        <TouchableOpacity\n          style={[styles.logoutButton, { backgroundColor: Theme.colors.iosRed }]}\n          onPress={handleLogout}\n        >\n          <IconSymbol name=\"arrow.right.square.fill\" size={24} color=\"#FFFFFF\" />\n          <Text style={styles.logoutText}>Logout</Text>\n        </TouchableOpacity>\n      </View>\n\n      <View style={styles.bottomSpacing} />\n    </ScrollView>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n  },\n  loadingContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  loadingText: {\n    fontSize: 18,\n  },\n  header: {\n    paddingTop: 60,\n    paddingBottom: 24,\n    paddingHorizontal: 24,\n  },\n  headerContent: {\n    gap: 4,\n  },\n  headerTitle: {\n    fontSize: 32,\n    fontWeight: Theme.fonts.weights.bold,\n    color: '#FFFFFF',\n    letterSpacing: -0.5,\n  },\n  headerSubtitle: {\n    fontSize: 16,\n    color: 'rgba(255,255,255,0.9)',\n    fontWeight: Theme.fonts.weights.medium,\n  },\n  profileSection: {\n    marginHorizontal: 20,\n    marginTop: -40,\n    marginBottom: 24,\n    padding: 32,\n    borderRadius: 20,\n    alignItems: 'center',\n    ...Theme.shadows.xl,\n  },\n  profileAvatar: {\n    width: 100,\n    height: 100,\n    borderRadius: 50,\n    backgroundColor: Theme.colors.iosBlue,\n    justifyContent: 'center',\n    alignItems: 'center',\n    marginBottom: 16,\n    ...Theme.shadows.md,\n  },\n  avatarIcon: {\n    fontSize: 48,\n  },\n  profileName: {\n    fontSize: 24,\n    fontWeight: Theme.fonts.weights.bold,\n    marginBottom: 4,\n  },\n  profileEmail: {\n    fontSize: 16,\n    marginBottom: 12,\n  },\n  vesselBadge: {\n    paddingHorizontal: 16,\n    paddingVertical: 8,\n    borderRadius: 20,\n    marginTop: 8,\n  },\n  vesselBadgeText: {\n    fontSize: 14,\n    fontWeight: Theme.fonts.weights.semibold,\n  },\n  section: {\n    paddingHorizontal: 20,\n    marginBottom: 24,\n  },\n  sectionTitle: {\n    fontSize: 20,\n    fontWeight: Theme.fonts.weights.bold,\n    marginBottom: 12,\n  },\n  infoCard: {\n    borderRadius: 16,\n    padding: 20,\n    ...Theme.shadows.md,\n  },\n  infoRow: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: 16,\n  },\n  infoContent: {\n    flex: 1,\n  },\n  infoLabel: {\n    fontSize: 14,\n    marginBottom: 4,\n  },\n  infoValue: {\n    fontSize: 16,\n    fontWeight: Theme.fonts.weights.semibold,\n  },\n  infoDivider: {\n    height: 1,\n    backgroundColor: 'rgba(0,0,0,0.1)',\n    marginVertical: 16,\n  },\n  settingRow: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n  },\n  settingLeft: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: 16,\n  },\n  settingLabel: {\n    fontSize: 16,\n    fontWeight: Theme.fonts.weights.medium,\n  },\n  tipsCard: {\n    padding: 20,\n    borderRadius: 16,\n    ...Theme.shadows.sm,\n  },\n  tipsTitle: {\n    fontSize: 18,\n    fontWeight: Theme.fonts.weights.bold,\n    marginBottom: 12,\n  },\n  tipsText: {\n    fontSize: 15,\n    lineHeight: 24,\n  },\n  actionButton: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    padding: 16,\n    borderRadius: 16,\n    marginBottom: 12,\n    ...Theme.shadows.sm,\n    gap: 16,\n  },\n  actionText: {\n    flex: 1,\n    fontSize: 16,\n    fontWeight: Theme.fonts.weights.semibold,\n  },\n  logoutButton: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'center',\n    padding: 16,\n    borderRadius: 16,\n    marginTop: 12,\n    gap: 12,\n    ...Theme.shadows.md,\n  },\n  logoutText: {\n    color: '#FFFFFF',\n    fontSize: 18,\n    fontWeight: Theme.fonts.weights.bold,\n  },\n  bottomSpacing: {\n    height: 40,\n  },\n});","size_bytes":12464},"attached_assets/expo_ui_reference/Expo1234/README.md":{"content":"# Welcome to your Expo app üëã\n\nThis is an [Expo](https://expo.dev) project created with [`create-expo-app`](https://www.npmjs.com/package/create-expo-app).\n\n## Get started\n\n1. Install dependencies\n\n   ```bash\n   npm install\n   ```\n\n2. Start the app\n\n   ```bash\n   npx expo start\n   ```\n\nIn the output, you'll find options to open the app in a\n\n- [development build](https://docs.expo.dev/develop/development-builds/introduction/)\n- [Android emulator](https://docs.expo.dev/workflow/android-studio-emulator/)\n- [iOS simulator](https://docs.expo.dev/workflow/ios-simulator/)\n- [Expo Go](https://expo.dev/go), a limited sandbox for trying out app development with Expo\n\nYou can start developing by editing the files inside the **app** directory. This project uses [file-based routing](https://docs.expo.dev/router/introduction).\n\n## Get a fresh project\n\nWhen you're ready, run:\n\n```bash\nnpm run reset-project\n```\n\nThis command will move the starter code to the **app-example** directory and create a blank **app** directory where you can start developing.\n\n## Learn more\n\nTo learn more about developing your project with Expo, look at the following resources:\n\n- [Expo documentation](https://docs.expo.dev/): Learn fundamentals, or go into advanced topics with our [guides](https://docs.expo.dev/guides).\n- [Learn Expo tutorial](https://docs.expo.dev/tutorial/introduction/): Follow a step-by-step tutorial where you'll create a project that runs on Android, iOS, and the web.\n\n## Join the community\n\nJoin our community of developers creating universal apps.\n\n- [Expo on GitHub](https://github.com/expo/expo): View our open source platform and contribute.\n- [Discord community](https://chat.expo.dev): Chat with Expo users and ask questions.\n","size_bytes":1741},"components/ui/redesign/CustomTabBar.tsx":{"content":"\nimport React from 'react';\nimport { View, Text, TouchableOpacity, StyleSheet } from 'react-native';\nimport { Theme } from '@/constants/Theme';\n\ninterface TabBarProps {\n  state: any;\n  descriptors: any;\n  navigation: any;\n}\n\nexport function CustomTabBar({ state, descriptors, navigation }: TabBarProps) {\n  return (\n    <View style={styles.tabBar}>\n      <View style={styles.separator} />\n      <View style={styles.tabContainer}>\n        {state.routes.map((route: any, index: number) => {\n          const { options } = descriptors[route.key];\n          const label = options.tabBarLabel ?? options.title ?? route.name;\n          const icon = options.tabBarIcon;\n\n          const isFocused = state.index === index;\n\n          const onPress = () => {\n            const event = navigation.emit({\n              type: 'tabPress',\n              target: route.key,\n              canPreventDefault: true,\n            });\n\n            if (!isFocused && !event.defaultPrevented) {\n              navigation.navigate(route.name);\n            }\n          };\n\n          return (\n            <TouchableOpacity\n              key={route.key}\n              accessibilityRole=\"button\"\n              accessibilityState={isFocused ? { selected: true } : {}}\n              accessibilityLabel={options.tabBarAccessibilityLabel}\n              testID={options.tabBarTestID}\n              onPress={onPress}\n              style={styles.tab}\n              activeOpacity={0.7}\n            >\n              <View style={[styles.iconContainer, isFocused && styles.iconContainerActive]}>\n                {icon && icon({ \n                  focused: isFocused, \n                  color: isFocused ? Theme.colors.burntOrange : Theme.colors.mutedGray,\n                  size: 24 \n                })}\n              </View>\n              <Text style={[styles.label, isFocused && styles.labelActive]}>\n                {label}\n              </Text>\n            </TouchableOpacity>\n          );\n        })}\n      </View>\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  tabBar: {\n    backgroundColor: Theme.colors.white,\n    paddingBottom: 20,\n    paddingTop: 8,\n    ...Theme.shadows.lg,\n  },\n  separator: {\n    height: 1,\n    backgroundColor: Theme.colors.cream,\n  },\n  tabContainer: {\n    flexDirection: 'row',\n    paddingHorizontal: 8,\n  },\n  tab: {\n    flex: 1,\n    alignItems: 'center',\n    paddingVertical: 8,\n    gap: 4,\n  },\n  iconContainer: {\n    width: 32,\n    height: 32,\n    borderRadius: 16,\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n  iconContainerActive: {\n    backgroundColor: Theme.colors.latte,\n  },\n  label: {\n    fontSize: Theme.fonts.sizes.xs,\n    color: Theme.colors.mutedGray,\n    fontWeight: Theme.fonts.weights.medium,\n  },\n  labelActive: {\n    color: Theme.colors.burntOrange,\n    fontWeight: Theme.fonts.weights.bold,\n  },\n});\n","size_bytes":2839},"attached_assets/expo_ui_reference/Expo1234/app/(tabs)/tasks/index.tsx":{"content":"import React, { useState } from 'react';\nimport { View, Text, ScrollView, TouchableOpacity, StyleSheet } from 'react-native';\nimport { router } from 'expo-router';\nimport { useColorScheme } from '@/hooks/useColorScheme';\n\nexport default function TasksScreen() {\n  const colorScheme = useColorScheme();\n  const isDark = colorScheme === 'dark';\n  const [activeFilter, setActiveFilter] = useState('All');\n\n  const filters = ['All', 'Open', 'Progress', 'Done'];\n\n  const tasks = [\n    {\n      id: 1,\n      title: 'Hull Inspection',\n      boat: 'Ocean Blunt',\n      status: 'Progress',\n      dueDate: 'Posted 2h ago',\n      priority: 'High',\n    },\n    {\n      id: 2,\n      title: 'Hull Inspection',\n      boat: 'Google Blunt',\n      status: 'Progress',\n      dueDate: 'Posted 2h ago',\n      priority: 'Medium',\n    },\n    {\n      id: 3,\n      title: 'Hull Inspection',\n      boat: 'Ocean Blunt',\n      status: 'Open',\n      dueDate: 'Posted 2h ago',\n      priority: 'Low',\n    },\n    {\n      id: 4,\n      title: 'Hull Inspection',\n      boat: 'Google Blunt',\n      status: 'Done',\n      dueDate: 'Posted 2h ago',\n      priority: 'High',\n    },\n  ];\n\n  const filteredTasks = activeFilter === 'All' \n    ? tasks \n    : tasks.filter(task => task.status === activeFilter);\n\n  const getStatusColor = (status: string) => {\n    switch(status) {\n      case 'Progress': return '#FF9500';\n      case 'Open': return '#FF3B30';\n      case 'Done': return '#34C759';\n      default: return '#999';\n    }\n  };\n\n  return (\n    <View style={[styles.container, { backgroundColor: isDark ? '#000' : '#F2F2F7' }]}>\n      <View style={[styles.header, { backgroundColor: isDark ? '#1C1C1E' : '#FFF' }]}>\n        <Text style={[styles.headerTitle, { color: isDark ? '#FFF' : '#000' }]}>\n          Boat Helpers\n        </Text>\n        <View style={styles.filterContainer}>\n          {filters.map((filter) => (\n            <TouchableOpacity\n              key={filter}\n              onPress={() => setActiveFilter(filter)}\n              style={[\n                styles.filterButton,\n                activeFilter === filter && styles.filterButtonActive,\n                { backgroundColor: activeFilter === filter ? '#007AFF' : (isDark ? '#2C2C2E' : '#E5E5EA') }\n              ]}\n            >\n              <Text style={[\n                styles.filterText,\n                { color: activeFilter === filter ? '#FFF' : (isDark ? '#FFF' : '#000') }\n              ]}>\n                {filter}\n              </Text>\n            </TouchableOpacity>\n          ))}\n        </View>\n      </View>\n\n      <ScrollView style={styles.scrollView}>\n        {filteredTasks.map((task) => (\n          <TouchableOpacity \n            key={task.id} \n            style={[styles.taskCard, { backgroundColor: isDark ? '#1C1C1E' : '#FFF' }]}\n            onPress={() => router.push(`/(tabs)/tasks/${task.id}`)}\n          >\n            <View style={styles.taskHeader}>\n              <Text style={[styles.taskTitle, { color: isDark ? '#FFF' : '#000' }]}>\n                {task.title}\n              </Text>\n              <View style={[styles.statusBadge, { backgroundColor: getStatusColor(task.status) + '20' }]}>\n                <Text style={[styles.statusText, { color: getStatusColor(task.status) }]}>\n                  {task.status}\n                </Text>\n              </View>\n            </View>\n            <View style={styles.taskDetails}>\n              <View style={styles.taskRow}>\n                <Text style={[styles.taskLabel, { color: isDark ? '#8E8E93' : '#6C6C70' }]}>\n                  Boat:\n                </Text>\n                <Text style={[styles.taskValue, { color: isDark ? '#FFF' : '#000' }]}>\n                  {task.boat}\n                </Text>\n              </View>\n              <View style={styles.taskRow}>\n                <Text style={[styles.taskLabel, { color: isDark ? '#8E8E93' : '#6C6C70' }]}>\n                  Inspector:\n                </Text>\n                <Text style={[styles.taskValue, { color: isDark ? '#FFF' : '#000' }]}>\n                  {task.dueDate}\n                </Text>\n              </View>\n            </View>\n          </TouchableOpacity>\n        ))}\n      </ScrollView>\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n  },\n  header: {\n    paddingTop: 60,\n    paddingHorizontal: 20,\n    paddingBottom: 20,\n    borderBottomWidth: 1,\n    borderBottomColor: '#E5E5EA',\n  },\n  headerTitle: {\n    fontSize: 34,\n    fontWeight: 'bold',\n    marginBottom: 16,\n  },\n  filterContainer: {\n    flexDirection: 'row',\n    gap: 8,\n  },\n  filterButton: {\n    paddingHorizontal: 16,\n    paddingVertical: 8,\n    borderRadius: 16,\n  },\n  filterButtonActive: {\n    backgroundColor: '#007AFF',\n  },\n  filterText: {\n    fontSize: 14,\n    fontWeight: '600',\n  },\n  scrollView: {\n    flex: 1,\n    padding: 16,\n  },\n  taskCard: {\n    borderRadius: 12,\n    padding: 16,\n    marginBottom: 12,\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 1 },\n    shadowOpacity: 0.1,\n    shadowRadius: 2,\n    elevation: 2,\n  },\n  taskHeader: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    marginBottom: 12,\n  },\n  taskTitle: {\n    fontSize: 18,\n    fontWeight: '600',\n    flex: 1,\n  },\n  statusBadge: {\n    paddingHorizontal: 12,\n    paddingVertical: 4,\n    borderRadius: 12,\n  },\n  statusText: {\n    fontSize: 12,\n    fontWeight: '600',\n  },\n  taskDetails: {\n    gap: 8,\n  },\n  taskRow: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: 8,\n  },\n  taskLabel: {\n    fontSize: 14,\n    width: 80,\n  },\n  taskValue: {\n    fontSize: 14,\n    fontWeight: '500',\n    flex: 1,\n  },\n});\n","size_bytes":5648},"attached_assets/expo_ui_reference/Expo1234/app/(tabs)/add.tsx":{"content":"import React from 'react';\nimport { View, Text, StyleSheet, TouchableOpacity, ScrollView, Alert } from 'react-native';\nimport { useColorScheme } from '@/hooks/useColorScheme';\nimport { IconSymbol } from '@/components/ui/IconSymbol';\nimport { router } from 'expo-router';\n\nexport default function AddScreen() {\n  const colorScheme = useColorScheme();\n  const isDark = colorScheme === 'dark';\n\n  const options = [\n    {\n      id: 1,\n      title: 'Add Boat',\n      description: 'Register a new boat to your collection',\n      icon: 'sailboat.fill',\n      color: '#007AFF',\n      action: () => Alert.alert('Add Boat', 'Boat registration form would open here'),\n    },\n    {\n      id: 2,\n      title: 'Post Task',\n      description: 'Create a new maintenance task',\n      icon: 'doc.text.fill',\n      color: '#34C759',\n      action: () => Alert.alert('Post Task', 'Task creation form would open here'),\n    },\n    {\n      id: 3,\n      title: 'Schedule Service',\n      description: 'Book a professional service',\n      icon: 'calendar',\n      color: '#FF9500',\n      action: () => Alert.alert('Schedule Service', 'Service booking form would open here'),\n    },\n  ];\n\n  return (\n    <View style={[styles.container, { backgroundColor: isDark ? '#000' : '#F2F2F7' }]}>\n      <View style={[styles.header, { backgroundColor: isDark ? '#1C1C1E' : '#FFF' }]}>\n        <Text style={[styles.headerTitle, { color: isDark ? '#FFF' : '#000' }]}>\n          Quick Actions\n        </Text>\n        <Text style={[styles.headerSubtitle, { color: isDark ? '#8E8E93' : '#6C6C70' }]}>\n          What would you like to do?\n        </Text>\n      </View>\n\n      <ScrollView style={styles.scrollView}>\n        {options.map((option) => (\n          <TouchableOpacity\n            key={option.id}\n            style={[styles.optionCard, { backgroundColor: isDark ? '#1C1C1E' : '#FFF' }]}\n            onPress={option.action}\n          >\n            <View style={[styles.iconContainer, { backgroundColor: option.color + '20' }]}>\n              <IconSymbol name={option.icon as any} size={32} color={option.color} />\n            </View>\n            <View style={styles.optionContent}>\n              <Text style={[styles.optionTitle, { color: isDark ? '#FFF' : '#000' }]}>\n                {option.title}\n              </Text>\n              <Text style={[styles.optionDescription, { color: isDark ? '#8E8E93' : '#6C6C70' }]}>\n                {option.description}\n              </Text>\n            </View>\n            <IconSymbol name=\"chevron.right\" size={20} color={isDark ? '#8E8E93' : '#C7C7CC'} />\n          </TouchableOpacity>\n        ))}\n      </ScrollView>\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n  },\n  header: {\n    paddingTop: 60,\n    paddingHorizontal: 20,\n    paddingBottom: 20,\n    borderBottomWidth: 1,\n    borderBottomColor: '#E5E5EA',\n  },\n  headerTitle: {\n    fontSize: 34,\n    fontWeight: 'bold',\n    marginBottom: 4,\n  },\n  headerSubtitle: {\n    fontSize: 16,\n  },\n  scrollView: {\n    flex: 1,\n    padding: 16,\n  },\n  optionCard: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    padding: 16,\n    borderRadius: 12,\n    marginBottom: 12,\n    elevation: 2,\n  },\n  iconContainer: {\n    width: 56,\n    height: 56,\n    borderRadius: 28,\n    justifyContent: 'center',\n    alignItems: 'center',\n    marginRight: 16,\n  },\n  optionContent: {\n    flex: 1,\n  },\n  optionTitle: {\n    fontSize: 18,\n    fontWeight: '600',\n    marginBottom: 4,\n  },\n  optionDescription: {\n    fontSize: 14,\n  },\n});\n","size_bytes":3514},"attached_assets/expo_ui_reference/Expo1234/attached_assets/README_1762898628947.md":{"content":"# MarineTrack Backend Server\n\nThis is the backend server for the MarineTrack application. It stores vessel tracking data in JSON files and provides real-time updates via Socket.IO.\n\n## Features\n\n- **JSON File Storage**: All data is stored in local JSON files (not in Replit database)\n- **RESTful API**: Endpoints for saving and retrieving vessel data\n- **Socket.IO**: Real-time vessel location and chat updates\n- **Cross-Device Support**: Multiple devices can connect and share vessel data\n\n## Data Storage\n\nAll data is stored in the `backend/data/` directory:\n- `vessels.json` - Vessel tracking data\n- `users.json` - User account data\n- `messages.json` - Chat messages\n\n## API Endpoints\n\n### Health Check\n```\nGET /api/health\n```\n\n### Get All Vessels\n```\nGET /api/vessels\n```\n\n### Get Nearby Vessels\n```\nGET /api/vessels/nearby?lat={latitude}&lng={longitude}&radius={radiusKm}\n```\n\n### Save Vessel Tracking Data\n```\nPOST /api/tracking\nBody: {\n  userId: string,\n  vesselInfo: { vesselName, vesselId, vesselType },\n  location: { latitude, longitude, heading, speed, timestamp },\n  status: 'Active' | 'Idle' | 'Anchored'\n}\n```\n\n### Save User Data\n```\nPOST /api/users\nBody: { id, email, name, ... }\n```\n\n### Get Messages\n```\nGET /api/messages\n```\n\n### Save Message\n```\nPOST /api/messages\nBody: { userId, userName, message, ... }\n```\n\n## Socket.IO Events\n\n### Client to Server\n- `vessel_location` - Send vessel location update\n- `chat_message` - Send chat message\n\n### Server to Client\n- `vessel_update` - Receive vessel location update\n- `new_message` - Receive new chat message\n\n## Running Locally\n\n1. **Start the backend server**:\n   ```bash\n   cd backend\n   npm start\n   ```\n   The server will run on port 3000 by default.\n\n2. **Find your local IP address**:\n   - Windows: `ipconfig`\n   - Mac/Linux: `ifconfig` or `ip addr show`\n   Look for your local IP (e.g., 192.168.1.100)\n\n3. **Update the frontend configuration**:\n   Edit `config.ts` in the root directory and set:\n   ```typescript\n   BACKEND_URL: 'http://YOUR_LOCAL_IP:3000',\n   SOCKET_URL: 'http://YOUR_LOCAL_IP:3000',\n   ```\n   For example:\n   ```typescript\n   BACKEND_URL: 'http://192.168.1.100:3000',\n   SOCKET_URL: 'http://192.168.1.100:3000',\n   ```\n\n4. **Connect your devices**:\n   - Make sure your PC and mobile devices are on the same WiFi network\n   - Start the backend server on your PC\n   - Run the Expo app on your mobile devices\n   - The devices will now share vessel data through the backend server\n\n## Environment Variables\n\nYou can configure the backend using environment variables:\n- `PORT` - Server port (default: 3000)\n- `EXPO_PUBLIC_BACKEND_URL` - Frontend backend URL\n- `EXPO_PUBLIC_SOCKET_URL` - Frontend socket URL\n\n## Testing\n\nTo test if the backend is working:\n\n1. Open your browser and go to: `http://localhost:3000/api/health`\n   You should see: `{\"status\":\"ok\",\"message\":\"MarineTrack backend server running\"}`\n\n2. Check the data files in `backend/data/` directory after using the app\n\n## Troubleshooting\n\n### \"Network request failed\" error\n- Make sure the backend server is running\n- Verify your local IP address is correct in `config.ts`\n- Ensure your firewall allows connections on port 3000\n- Check that all devices are on the same WiFi network\n\n### No vessels appearing\n- Check if vessel data is being saved in `backend/data/vessels.json`\n- Verify the backend server logs for any errors\n- Make sure location permissions are granted on mobile devices\n\n### Chat not working\n- Check `backend/data/messages.json` for saved messages\n- Verify Socket.IO connection in browser console\n- Ensure the socket URL matches your backend URL\n","size_bytes":3615},"attached_assets/expo_ui_reference/Expo1234/components/ThemedText.tsx":{"content":"import { StyleSheet, Text, type TextProps } from 'react-native';\n\nimport { useThemeColor } from '@/hooks/useThemeColor';\n\nexport type ThemedTextProps = TextProps & {\n  lightColor?: string;\n  darkColor?: string;\n  type?: 'default' | 'title' | 'defaultSemiBold' | 'subtitle' | 'link';\n};\n\nexport function ThemedText({\n  style,\n  lightColor,\n  darkColor,\n  type = 'default',\n  ...rest\n}: ThemedTextProps) {\n  const color = useThemeColor({ light: lightColor, dark: darkColor }, 'text');\n\n  return (\n    <Text\n      style={[\n        { color },\n        type === 'default' ? styles.default : undefined,\n        type === 'title' ? styles.title : undefined,\n        type === 'defaultSemiBold' ? styles.defaultSemiBold : undefined,\n        type === 'subtitle' ? styles.subtitle : undefined,\n        type === 'link' ? styles.link : undefined,\n        style,\n      ]}\n      {...rest}\n    />\n  );\n}\n\nconst styles = StyleSheet.create({\n  default: {\n    fontSize: 16,\n    lineHeight: 24,\n  },\n  defaultSemiBold: {\n    fontSize: 16,\n    lineHeight: 24,\n    fontWeight: '600',\n  },\n  title: {\n    fontSize: 32,\n    fontWeight: 'bold',\n    lineHeight: 32,\n  },\n  subtitle: {\n    fontSize: 20,\n    fontWeight: 'bold',\n  },\n  link: {\n    lineHeight: 30,\n    fontSize: 16,\n    color: '#0a7ea4',\n  },\n});\n","size_bytes":1283},"attached_assets/expo_ui_reference/Expo1234/services/navigationService.ts":{"content":"\nimport { Route, Hazard } from '@/types/maritime';\n\nclass NavigationService {\n  async calculateRoute(\n    startLat: number,\n    startLon: number,\n    endLat: number,\n    endLon: number,\n    avoidHazards: boolean = true\n  ): Promise<Route[]> {\n    // In production, use searoute algorithm\n    // For now, return simulated routes\n    \n    const mainRoute: Route = {\n      id: '1',\n      waypoints: [\n        { latitude: startLat, longitude: startLon },\n        { latitude: endLat, longitude: endLon }\n      ],\n      distance: this.calculateDistance(startLat, startLon, endLat, endLon),\n      estimatedTime: 0,\n      safetyScore: 85,\n      hazards: []\n    };\n\n    mainRoute.estimatedTime = (mainRoute.distance / 20) * 3600; // Assuming 20 knots\n\n    return [mainRoute];\n  }\n\n  getNavigationInstruction(\n    currentHeading: number,\n    targetHeading: number\n  ): string {\n    const diff = (targetHeading - currentHeading + 360) % 360;\n    \n    if (diff < 10 || diff > 350) {\n      return 'Continue straight ahead';\n    } else if (diff > 0 && diff < 180) {\n      return diff < 45 ? 'Turn slightly to starboard' : 'Turn to starboard';\n    } else {\n      return diff > 315 ? 'Turn slightly to port' : 'Turn to port';\n    }\n  }\n\n  private calculateDistance(lat1: number, lon1: number, lat2: number, lon2: number): number {\n    const R = 6371;\n    const dLat = this.toRad(lat2 - lat1);\n    const dLon = this.toRad(lon2 - lon1);\n    \n    const a = Math.sin(dLat / 2) * Math.sin(dLat / 2) +\n              Math.cos(this.toRad(lat1)) * Math.cos(this.toRad(lat2)) *\n              Math.sin(dLon / 2) * Math.sin(dLon / 2);\n    \n    const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n    return R * c;\n  }\n\n  private toRad(degrees: number): number {\n    return degrees * (Math.PI / 180);\n  }\n\n  calculateSafetyScore(route: Route, hazards: Hazard[]): number {\n    let score = 100;\n    \n    hazards.forEach(hazard => {\n      const severity = hazard.severity === 'critical' ? 30 : \n                      hazard.severity === 'high' ? 20 :\n                      hazard.severity === 'medium' ? 10 : 5;\n      score -= severity;\n    });\n    \n    return Math.max(0, score);\n  }\n}\n\nexport default new NavigationService();\n","size_bytes":2202},"attached_assets/expo_ui_reference/Expo1234/app/(tabs)/chat.tsx":{"content":"\nimport React, { useState } from 'react';\nimport { View, Text, ScrollView, TouchableOpacity, StyleSheet, Image, TextInput } from 'react-native';\nimport { useColorScheme } from '@/hooks/useColorScheme';\nimport { IconSymbol } from '@/components/ui/IconSymbol';\nimport { router } from 'expo-router';\n\ninterface Message {\n  id: string;\n  name: string;\n  message: string;\n  time: string;\n  unread?: boolean;\n}\n\nexport default function ChatScreen() {\n  const colorScheme = useColorScheme();\n  const isDark = colorScheme === 'dark';\n\n  const messages: Message[] = [\n    { id: '1', name: 'Sarah Thomas', message: \"Hello! I've arrived the location. I'd start the engine...\", time: '10:24 PM', unread: true },\n    { id: '2', name: 'Sarah Thomas', message: 'Great! Please let me know if you have any...', time: '10:24 PM' },\n    { id: '3', name: 'Simone Adani', message: 'I appreciate it.', time: '10:24 PM' },\n    { id: '4', name: 'Michael Thompson', message: 'See you later!', time: '10:24 PM' },\n  ];\n\n  return (\n    <View style={[styles.container, { backgroundColor: isDark ? '#000' : '#F2F2F7' }]}>\n      <View style={[styles.header, { backgroundColor: isDark ? '#000' : '#F2F2F7' }]}>\n        <TouchableOpacity onPress={() => router.back()}>\n          <IconSymbol name=\"chevron.left.forwardslash.chevron.right\" size={24} color={isDark ? '#FFF' : '#000'} />\n        </TouchableOpacity>\n        <Text style={[styles.headerTitle, { color: isDark ? '#FFF' : '#000' }]}>Messages</Text>\n        <View style={{ width: 24 }} />\n      </View>\n\n      <ScrollView style={styles.content} showsVerticalScrollIndicator={false}>\n        {messages.map((msg) => (\n          <TouchableOpacity \n            key={msg.id}\n            style={[styles.messageCard, { backgroundColor: isDark ? '#1C1C1E' : '#FFF' }]}\n          >\n            <Image \n              source={require('@/assets/images/partial-react-logo.png')}\n              style={styles.avatar}\n            />\n            <View style={styles.messageContent}>\n              <View style={styles.messageHeader}>\n                <Text style={[styles.messageName, { color: isDark ? '#FFF' : '#000' }]}>{msg.name}</Text>\n                <Text style={[styles.messageTime, { color: isDark ? '#8E8E93' : '#6C6C70' }]}>{msg.time}</Text>\n              </View>\n              <Text \n                style={[styles.messageText, { color: isDark ? '#8E8E93' : '#6C6C70' }]}\n                numberOfLines={1}\n              >\n                {msg.message}\n              </Text>\n            </View>\n            {msg.unread && <View style={styles.unreadBadge} />}\n          </TouchableOpacity>\n        ))}\n      </ScrollView>\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n  },\n  header: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    paddingHorizontal: 20,\n    paddingTop: 60,\n    paddingBottom: 16,\n  },\n  headerTitle: {\n    fontSize: 20,\n    fontWeight: '600',\n  },\n  content: {\n    flex: 1,\n    paddingHorizontal: 20,\n  },\n  messageCard: {\n    flexDirection: 'row',\n    padding: 16,\n    borderRadius: 12,\n    marginBottom: 12,\n    alignItems: 'center',\n  },\n  avatar: {\n    width: 50,\n    height: 50,\n    borderRadius: 25,\n    marginRight: 12,\n  },\n  messageContent: {\n    flex: 1,\n  },\n  messageHeader: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    marginBottom: 4,\n  },\n  messageName: {\n    fontSize: 16,\n    fontWeight: '600',\n  },\n  messageTime: {\n    fontSize: 12,\n  },\n  messageText: {\n    fontSize: 14,\n  },\n  unreadBadge: {\n    width: 8,\n    height: 8,\n    borderRadius: 4,\n    backgroundColor: '#007AFF',\n  },\n});\n","size_bytes":3647},"components/redesign/Card.tsx":{"content":"import React from 'react';\nimport { View, StyleSheet, ViewStyle } from 'react-native';\nimport { useColorScheme } from '@/hooks/useColorScheme';\nimport { Colors } from '@/constants/Colors';\nimport { Theme } from '@/constants/Theme';\n\ninterface CardProps {\n  children: React.ReactNode;\n  style?: ViewStyle;\n  variant?: 'primary' | 'secondary';\n  elevation?: 'none' | 'sm' | 'md' | 'lg';\n}\n\nexport function Card({ children, style, variant = 'primary', elevation = 'sm' }: CardProps) {\n  const colorScheme = useColorScheme();\n  const isDark = colorScheme === 'dark';\n  const colors = Colors[isDark ? 'dark' : 'light'];\n\n  const backgroundColor = variant === 'primary' ? colors.card : colors.cardSecondary;\n  const shadow = Theme.shadows[elevation];\n\n  return (\n    <View\n      style={[\n        styles.card,\n        { backgroundColor },\n        shadow,\n        style,\n      ]}\n    >\n      {children}\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  card: {\n    borderRadius: Theme.radius.md,\n    padding: Theme.spacing.base,\n  },\n});\n","size_bytes":1037},"attached_assets/expo_ui_reference/Expo1234/eslint.config.js":{"content":"// https://docs.expo.dev/guides/using-eslint/\nconst { defineConfig } = require('eslint/config');\nconst expoConfig = require('eslint-config-expo/flat');\n\nmodule.exports = defineConfig([\n  expoConfig,\n  {\n    ignores: ['dist/*'],\n  },\n]);\n","size_bytes":237},"attached_assets/expo_ui_reference/Expo1234/app/_layout.tsx":{"content":"import { DarkTheme, DefaultTheme, ThemeProvider } from '@react-navigation/native';\nimport { useFonts } from 'expo-font';\nimport { Stack } from 'expo-router';\nimport { StatusBar } from 'expo-status-bar';\nimport 'react-native-reanimated';\n\nimport { useColorScheme } from '@/hooks/useColorScheme';\n\nexport default function RootLayout() {\n  const colorScheme = useColorScheme();\n  const [loaded] = useFonts({\n    SpaceMono: require('../assets/fonts/SpaceMono-Regular.ttf'),\n  });\n\n  if (!loaded) {\n    // Async font loading only occurs in development.\n    return null;\n  }\n\n  return (\n    <ThemeProvider value={colorScheme === 'dark' ? DarkTheme : DefaultTheme}>\n      <Stack>\n        <Stack.Screen name=\"(tabs)\" options={{ headerShown: false }} />\n        <Stack.Screen name=\"+not-found\" />\n      </Stack>\n      <StatusBar style=\"auto\" />\n    </ThemeProvider>\n  );\n}\n","size_bytes":864},"attached_assets/expo_ui_reference/Expo1234/hooks/useColorScheme.ts":{"content":"export { useColorScheme } from 'react-native';\n","size_bytes":47},"attached_assets/expo_ui_reference/Expo1234/app/(tabs)/tasks/[id].tsx":{"content":"import React from 'react';\nimport { View, Text, ScrollView, StyleSheet, Image, TouchableOpacity } from 'react-native';\nimport { useLocalSearchParams, router } from 'expo-router';\nimport { useColorScheme } from '@/hooks/useColorScheme';\nimport { IconSymbol } from '@/components/ui/IconSymbol';\n\nexport default function TaskDetailScreen() {\n  const { id } = useLocalSearchParams();\n  const colorScheme = useColorScheme();\n  const isDark = colorScheme === 'dark';\n\n  const task = {\n    id: id,\n    title: 'Hull Inspection',\n    boat: 'Ocean Blunt',\n    status: 'Progress',\n    category: 'Maintenance',\n    description: 'Need to inspect the hull for any damage or wear. This is a routine inspection that should be done every 6 months to ensure the boat is in good condition.',\n    dueDate: 'June 25, 2024',\n    images: [\n      'https://images.unsplash.com/photo-1567899378494-47b22a2ae96a?w=800&h=600&fit=crop',\n    ],\n    offers: [\n      { id: 1, name: 'Michael Thompson', amount: '$500', rating: 4.8 },\n      { id: 2, name: 'Sarah Johnson', amount: '$450', rating: 4.9 },\n    ],\n  };\n\n  return (\n    <ScrollView style={[styles.container, { backgroundColor: isDark ? '#000' : '#F2F2F7' }]}>\n      <View style={[styles.header, { backgroundColor: isDark ? '#1C1C1E' : '#FFF' }]}>\n        <Text style={[styles.title, { color: isDark ? '#FFF' : '#000' }]}>\n          {task.title}\n        </Text>\n        <View style={[styles.statusBadge, { backgroundColor: '#FF9500' + '20' }]}>\n          <Text style={[styles.statusText, { color: '#FF9500' }]}>\n            {task.status}\n          </Text>\n        </View>\n      </View>\n\n      <View style={styles.section}>\n        <Text style={[styles.sectionTitle, { color: isDark ? '#8E8E93' : '#6C6C70' }]}>\n          BOAT\n        </Text>\n        <View style={[styles.card, { backgroundColor: isDark ? '#1C1C1E' : '#FFF' }]}>\n          <Image \n            source={{ uri: task.images[0] }} \n            style={styles.boatImage}\n          />\n          <Text style={[styles.boatName, { color: isDark ? '#FFF' : '#000' }]}>\n            {task.boat}\n          </Text>\n        </View>\n      </View>\n\n      <View style={styles.section}>\n        <Text style={[styles.sectionTitle, { color: isDark ? '#8E8E93' : '#6C6C70' }]}>\n          DESCRIPTION\n        </Text>\n        <View style={[styles.card, { backgroundColor: isDark ? '#1C1C1E' : '#FFF' }]}>\n          <Text style={[styles.description, { color: isDark ? '#FFF' : '#000' }]}>\n            {task.description}\n          </Text>\n        </View>\n      </View>\n\n      <View style={styles.section}>\n        <Text style={[styles.sectionTitle, { color: isDark ? '#8E8E93' : '#6C6C70' }]}>\n          CATEGORY\n        </Text>\n        <View style={[styles.card, { backgroundColor: isDark ? '#1C1C1E' : '#FFF' }]}>\n          <View style={styles.categoryRow}>\n            <IconSymbol name=\"tag.fill\" size={20} color=\"#007AFF\" />\n            <Text style={[styles.categoryText, { color: isDark ? '#FFF' : '#000' }]}>\n              {task.category}\n            </Text>\n          </View>\n        </View>\n      </View>\n\n      <View style={styles.section}>\n        <Text style={[styles.sectionTitle, { color: isDark ? '#8E8E93' : '#6C6C70' }]}>\n          DUE DATE\n        </Text>\n        <View style={[styles.card, { backgroundColor: isDark ? '#1C1C1E' : '#FFF' }]}>\n          <View style={styles.categoryRow}>\n            <IconSymbol name=\"calendar\" size={20} color=\"#007AFF\" />\n            <Text style={[styles.categoryText, { color: isDark ? '#FFF' : '#000' }]}>\n              {task.dueDate}\n            </Text>\n          </View>\n        </View>\n      </View>\n\n      <View style={styles.section}>\n        <Text style={[styles.sectionTitle, { color: isDark ? '#8E8E93' : '#6C6C70' }]}>\n          OFFERS ({task.offers.length})\n        </Text>\n        {task.offers.map((offer) => (\n          <View key={offer.id} style={[styles.offerCard, { backgroundColor: isDark ? '#1C1C1E' : '#FFF' }]}>\n            <View style={styles.offerHeader}>\n              <View style={styles.offerAvatar}>\n                <IconSymbol name=\"person.fill\" size={24} color=\"#007AFF\" />\n              </View>\n              <View style={styles.offerInfo}>\n                <Text style={[styles.offerName, { color: isDark ? '#FFF' : '#000' }]}>\n                  {offer.name}\n                </Text>\n                <View style={styles.ratingRow}>\n                  <IconSymbol name=\"star.fill\" size={14} color=\"#FF9500\" />\n                  <Text style={[styles.rating, { color: isDark ? '#8E8E93' : '#6C6C70' }]}>\n                    {offer.rating}\n                  </Text>\n                </View>\n              </View>\n              <Text style={[styles.offerAmount, { color: '#34C759' }]}>\n                {offer.amount}\n              </Text>\n            </View>\n          </View>\n        ))}\n      </View>\n    </ScrollView>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n  },\n  header: {\n    padding: 20,\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n  },\n  title: {\n    fontSize: 24,\n    fontWeight: 'bold',\n    flex: 1,\n  },\n  statusBadge: {\n    paddingHorizontal: 12,\n    paddingVertical: 6,\n    borderRadius: 12,\n  },\n  statusText: {\n    fontSize: 12,\n    fontWeight: '600',\n  },\n  section: {\n    padding: 16,\n    paddingTop: 8,\n  },\n  sectionTitle: {\n    fontSize: 12,\n    fontWeight: '600',\n    marginBottom: 8,\n    letterSpacing: 0.5,\n  },\n  card: {\n    borderRadius: 12,\n    padding: 16,\n    marginBottom: 8,\n    elevation: 2,\n  },\n  boatImage: {\n    width: '100%',\n    height: 200,\n    borderRadius: 8,\n    marginBottom: 12,\n  },\n  boatName: {\n    fontSize: 18,\n    fontWeight: '600',\n  },\n  description: {\n    fontSize: 16,\n    lineHeight: 24,\n  },\n  categoryRow: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: 12,\n  },\n  categoryText: {\n    fontSize: 16,\n    fontWeight: '500',\n  },\n  offerCard: {\n    borderRadius: 12,\n    padding: 16,\n    marginBottom: 8,\n    elevation: 2,\n  },\n  offerHeader: {\n    flexDirection: 'row',\n    alignItems: 'center',\n  },\n  offerAvatar: {\n    width: 48,\n    height: 48,\n    borderRadius: 24,\n    backgroundColor: '#007AFF' + '20',\n    justifyContent: 'center',\n    alignItems: 'center',\n    marginRight: 12,\n  },\n  offerInfo: {\n    flex: 1,\n  },\n  offerName: {\n    fontSize: 16,\n    fontWeight: '600',\n    marginBottom: 4,\n  },\n  ratingRow: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: 4,\n  },\n  rating: {\n    fontSize: 14,\n  },\n  offerAmount: {\n    fontSize: 20,\n    fontWeight: 'bold',\n  },\n});\n","size_bytes":6577},"attached_assets/expo_ui_reference/Expo1234/app/(tabs)/navigation.tsx":{"content":"\nimport React, { useState, useEffect } from 'react';\nimport { View, Text, StyleSheet, TouchableOpacity, ScrollView, Alert } from 'react-native';\nimport { useColorScheme } from '@/hooks/useColorScheme';\nimport { IconSymbol } from '@/components/ui/IconSymbol';\nimport aisService from '@/services/aisService';\nimport navigationService from '@/services/navigationService';\nimport weatherService from '@/services/weatherService';\nimport hazardService from '@/services/hazardService';\nimport sosService from '@/services/sosService';\nimport { Vessel, WeatherData, Hazard, Route } from '@/types/maritime';\n\nexport default function NavigationScreen() {\n  const colorScheme = useColorScheme();\n  const isDark = colorScheme === 'dark';\n  \n  const [currentVessel, setCurrentVessel] = useState<Vessel>({\n    id: '1',\n    name: 'Sea Breeze',\n    mmsi: '533000001',\n    type: 'Yacht',\n    latitude: 5.4164,\n    longitude: 100.3327,\n    speed: 12.5,\n    heading: 45,\n    lastUpdate: Date.now()\n  });\n  \n  const [nearbyVessels, setNearbyVessels] = useState<Vessel[]>([]);\n  const [weather, setWeather] = useState<WeatherData | null>(null);\n  const [hazards, setHazards] = useState<Hazard[]>([]);\n\n  useEffect(() => {\n    aisService.startTracking(currentVessel);\n    const unsubscribeVessels = aisService.subscribe(setNearbyVessels);\n    const unsubscribeHazards = hazardService.subscribe(setHazards);\n    fetchWeather();\n    \n    return () => {\n      aisService.stopTracking();\n      unsubscribeVessels();\n      unsubscribeHazards();\n    };\n  }, []);\n\n  const fetchWeather = async () => {\n    const weatherData = await weatherService.getCurrentWeather(\n      currentVessel.latitude,\n      currentVessel.longitude\n    );\n    setWeather(weatherData);\n  };\n\n  const handleSOS = () => {\n    Alert.alert(\n      'Emergency SOS',\n      'Send emergency alert to coast guard and nearby vessels?',\n      [\n        { text: 'Cancel', style: 'cancel' },\n        {\n          text: 'Send SOS',\n          style: 'destructive',\n          onPress: async () => {\n            const success = await sosService.sendSOS(\n              currentVessel.id,\n              currentVessel.name,\n              currentVessel.latitude,\n              currentVessel.longitude\n            );\n            if (success) {\n              Alert.alert('SOS Sent', 'Emergency services have been notified');\n            }\n          }\n        }\n      ]\n    );\n  };\n\n  return (\n    <View style={[styles.container, { backgroundColor: isDark ? '#000' : '#F2F2F7' }]}>\n      {/* Header */}\n      <View style={[styles.header, { backgroundColor: isDark ? '#000' : '#F2F2F7' }]}>\n        <View style={styles.headerIcons}>\n          <TouchableOpacity style={styles.iconButton}>\n            <IconSymbol name=\"chevron.left.forwardslash.chevron.right\" size={24} color={isDark ? '#FFF' : '#000'} />\n          </TouchableOpacity>\n        </View>\n        <View style={styles.headerIcons}>\n          <TouchableOpacity style={styles.iconButton}>\n            <IconSymbol name=\"paperplane.fill\" size={22} color={isDark ? '#007AFF' : '#007AFF'} />\n          </TouchableOpacity>\n          <TouchableOpacity style={[styles.sosButton]} onPress={handleSOS}>\n            <Text style={styles.sosText}>SOS</Text>\n          </TouchableOpacity>\n        </View>\n      </View>\n\n      <ScrollView style={styles.content} showsVerticalScrollIndicator={false}>\n        {/* Greeting */}\n        <Text style={[styles.greeting, { color: isDark ? '#FFF' : '#000' }]}>\n          Navigate Safely\n        </Text>\n        <Text style={[styles.date, { color: isDark ? '#8E8E93' : '#6C6C70' }]}>\n          {new Date().toLocaleDateString('en-US', { weekday: 'long', month: 'long', day: 'numeric', year: 'numeric' })}\n        </Text>\n\n        {/* Weather Card */}\n        {weather && (\n          <View style={[styles.weatherCard, { backgroundColor: isDark ? '#1C1C1E' : '#E3F2FD' }]}>\n            <View style={styles.weatherContent}>\n              <View>\n                <Text style={[styles.weatherLabel, { color: isDark ? '#8E8E93' : '#6C6C70' }]}>\n                  Today's Weather\n                </Text>\n                <Text style={[styles.weatherMain, { color: isDark ? '#FFF' : '#000' }]}>\n                  {weather.seaState}, {weather.temperature}¬∞C\n                </Text>\n                <Text style={[styles.weatherSub, { color: isDark ? '#8E8E93' : '#6C6C70' }]}>\n                  Perfect for Sailing!\n                </Text>\n              </View>\n              <Text style={styles.weatherIcon}>‚òÄÔ∏è</Text>\n            </View>\n          </View>\n        )}\n\n        {/* Quick Actions */}\n        <View style={styles.quickActions}>\n          <TouchableOpacity \n            style={[styles.actionCard, styles.actionCardPrimary]}\n            onPress={() => Alert.alert('Navigation', 'Route planning')}\n          >\n            <IconSymbol name=\"map.fill\" size={32} color=\"#FFF\" />\n            <Text style={styles.actionCardText}>Plan Route</Text>\n          </TouchableOpacity>\n          \n          <TouchableOpacity \n            style={[styles.actionCard, styles.actionCardSecondary]}\n            onPress={() => Alert.alert('Hazard', 'Report hazard')}\n          >\n            <IconSymbol name=\"paperplane.fill\" size={32} color=\"#007AFF\" />\n            <Text style={styles.actionCardTextAlt}>Report</Text>\n          </TouchableOpacity>\n        </View>\n\n        {/* Info Cards */}\n        <View style={styles.infoSection}>\n          <View style={styles.sectionHeader}>\n            <Text style={[styles.sectionTitle, { color: isDark ? '#FFF' : '#000' }]}>\n              Active Status\n            </Text>\n            <TouchableOpacity>\n              <Text style={styles.viewAll}>View All</Text>\n            </TouchableOpacity>\n          </View>\n\n          {/* Vessels Card */}\n          <TouchableOpacity style={[styles.infoCard, { backgroundColor: isDark ? '#1C1C1E' : '#FFF' }]}>\n            <View style={styles.infoCardHeader}>\n              <View style={[styles.badge, { backgroundColor: '#E3F2FD' }]}>\n                <Text style={styles.badgeNumber}>{nearbyVessels.length}</Text>\n              </View>\n              <View style={styles.infoCardContent}>\n                <Text style={[styles.infoCardLabel, { color: isDark ? '#8E8E93' : '#6C6C70' }]}>\n                  Nearby Vessels\n                </Text>\n                <Text style={[styles.infoCardValue, { color: isDark ? '#FFF' : '#000' }]}>\n                  {nearbyVessels.length} vessel{nearbyVessels.length !== 1 ? 's' : ''} detected\n                </Text>\n              </View>\n            </View>\n          </TouchableOpacity>\n\n          {/* Position Card */}\n          <TouchableOpacity style={[styles.infoCard, { backgroundColor: isDark ? '#1C1C1E' : '#FFF' }]}>\n            <View style={styles.infoCardHeader}>\n              <View style={[styles.iconContainer, { backgroundColor: '#FFF3E0' }]}>\n                <IconSymbol name=\"house.fill\" size={20} color=\"#FF9500\" />\n              </View>\n              <View style={styles.infoCardContent}>\n                <Text style={[styles.infoCardLabel, { color: isDark ? '#8E8E93' : '#6C6C70' }]}>\n                  Current Position\n                </Text>\n                <Text style={[styles.infoCardValue, { color: isDark ? '#FFF' : '#000' }]}>\n                  {currentVessel.latitude.toFixed(4)}¬∞N, {currentVessel.longitude.toFixed(4)}¬∞E\n                </Text>\n              </View>\n            </View>\n          </TouchableOpacity>\n\n          {/* Speed Card */}\n          <TouchableOpacity style={[styles.infoCard, { backgroundColor: isDark ? '#1C1C1E' : '#FFF' }]}>\n            <View style={styles.infoCardHeader}>\n              <View style={[styles.iconContainer, { backgroundColor: '#E8F5E9' }]}>\n                <IconSymbol name=\"chevron.right\" size={20} color=\"#34C759\" />\n              </View>\n              <View style={styles.infoCardContent}>\n                <Text style={[styles.infoCardLabel, { color: isDark ? '#8E8E93' : '#6C6C70' }]}>\n                  Speed & Heading\n                </Text>\n                <Text style={[styles.infoCardValue, { color: isDark ? '#FFF' : '#000' }]}>\n                  {currentVessel.speed} kts ‚Ä¢ {currentVessel.heading}¬∞\n                </Text>\n              </View>\n            </View>\n          </TouchableOpacity>\n\n          {/* Hazards */}\n          {hazards.length > 0 && (\n            <TouchableOpacity style={[styles.infoCard, { backgroundColor: isDark ? '#1C1C1E' : '#FFF' }]}>\n              <View style={styles.infoCardHeader}>\n                <View style={[styles.iconContainer, { backgroundColor: '#FFEBEE' }]}>\n                  <IconSymbol name=\"paperplane.fill\" size={20} color=\"#FF3B30\" />\n                </View>\n                <View style={styles.infoCardContent}>\n                  <Text style={[styles.infoCardLabel, { color: isDark ? '#8E8E93' : '#6C6C70' }]}>\n                    Hazard Warnings\n                  </Text>\n                  <Text style={[styles.infoCardValue, { color: isDark ? '#FFF' : '#000' }]}>\n                    {hazards.length} warning{hazards.length !== 1 ? 's' : ''} detected\n                  </Text>\n                </View>\n              </View>\n            </TouchableOpacity>\n          )}\n        </View>\n      </ScrollView>\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: { flex: 1 },\n  header: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    paddingTop: 50,\n    paddingHorizontal: 20,\n    paddingBottom: 10,\n  },\n  headerIcons: { flexDirection: 'row', gap: 12, alignItems: 'center' },\n  iconButton: { width: 40, height: 40, justifyContent: 'center', alignItems: 'center' },\n  sosButton: {\n    backgroundColor: '#FF3B30',\n    paddingHorizontal: 16,\n    paddingVertical: 8,\n    borderRadius: 20,\n  },\n  sosText: { color: '#FFF', fontSize: 14, fontWeight: '700' },\n  content: { flex: 1, paddingHorizontal: 20 },\n  greeting: { fontSize: 32, fontWeight: '700', marginTop: 10 },\n  date: { fontSize: 16, marginTop: 4, marginBottom: 20 },\n  weatherCard: {\n    borderRadius: 20,\n    padding: 20,\n    marginBottom: 20,\n  },\n  weatherContent: { flexDirection: 'row', justifyContent: 'space-between', alignItems: 'center' },\n  weatherLabel: { fontSize: 14, marginBottom: 4 },\n  weatherMain: { fontSize: 24, fontWeight: '700', marginBottom: 4 },\n  weatherSub: { fontSize: 14 },\n  weatherIcon: { fontSize: 48 },\n  quickActions: { flexDirection: 'row', gap: 12, marginBottom: 24 },\n  actionCard: {\n    flex: 1,\n    padding: 20,\n    borderRadius: 16,\n    alignItems: 'center',\n    justifyContent: 'center',\n    gap: 8,\n    minHeight: 100,\n  },\n  actionCardPrimary: { backgroundColor: '#007AFF' },\n  actionCardSecondary: { backgroundColor: '#FFF', borderWidth: 2, borderColor: '#007AFF' },\n  actionCardText: { color: '#FFF', fontSize: 16, fontWeight: '600' },\n  actionCardTextAlt: { color: '#007AFF', fontSize: 16, fontWeight: '600' },\n  infoSection: { marginBottom: 30 },\n  sectionHeader: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    marginBottom: 16,\n  },\n  sectionTitle: { fontSize: 20, fontWeight: '700' },\n  viewAll: { color: '#007AFF', fontSize: 14, fontWeight: '600' },\n  infoCard: {\n    borderRadius: 16,\n    padding: 16,\n    marginBottom: 12,\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 1 },\n    shadowOpacity: 0.05,\n    shadowRadius: 4,\n    elevation: 2,\n  },\n  infoCardHeader: { flexDirection: 'row', alignItems: 'center', gap: 12 },\n  badge: {\n    width: 48,\n    height: 48,\n    borderRadius: 24,\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  badgeNumber: { fontSize: 20, fontWeight: '700', color: '#007AFF' },\n  iconContainer: {\n    width: 48,\n    height: 48,\n    borderRadius: 24,\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  infoCardContent: { flex: 1 },\n  infoCardLabel: { fontSize: 13, marginBottom: 2 },\n  infoCardValue: { fontSize: 15, fontWeight: '600' },\n});\n","size_bytes":11963},"attached_assets/expo_ui_reference/Expo1234/components/ui/TabBarBackground.ios.tsx":{"content":"import { useBottomTabBarHeight } from '@react-navigation/bottom-tabs';\nimport { BlurView } from 'expo-blur';\nimport { StyleSheet } from 'react-native';\n\nexport default function BlurTabBarBackground() {\n  return (\n    <BlurView\n      // System chrome material automatically adapts to the system's theme\n      // and matches the native tab bar appearance on iOS.\n      tint=\"systemChromeMaterial\"\n      intensity={100}\n      style={StyleSheet.absoluteFill}\n    />\n  );\n}\n\nexport function useBottomTabOverflow() {\n  return useBottomTabBarHeight();\n}\n","size_bytes":547},"attached_assets/expo_ui_reference/Expo1234/components/ParallaxScrollView.tsx":{"content":"import type { PropsWithChildren, ReactElement } from 'react';\nimport { StyleSheet } from 'react-native';\nimport Animated, {\n  interpolate,\n  useAnimatedRef,\n  useAnimatedStyle,\n  useScrollViewOffset,\n} from 'react-native-reanimated';\n\nimport { ThemedView } from '@/components/ThemedView';\nimport { useBottomTabOverflow } from '@/components/ui/TabBarBackground';\nimport { useColorScheme } from '@/hooks/useColorScheme';\n\nconst HEADER_HEIGHT = 250;\n\ntype Props = PropsWithChildren<{\n  headerImage: ReactElement;\n  headerBackgroundColor: { dark: string; light: string };\n}>;\n\nexport default function ParallaxScrollView({\n  children,\n  headerImage,\n  headerBackgroundColor,\n}: Props) {\n  const colorScheme = useColorScheme() ?? 'light';\n  const scrollRef = useAnimatedRef<Animated.ScrollView>();\n  const scrollOffset = useScrollViewOffset(scrollRef);\n  const bottom = useBottomTabOverflow();\n  const headerAnimatedStyle = useAnimatedStyle(() => {\n    return {\n      transform: [\n        {\n          translateY: interpolate(\n            scrollOffset.value,\n            [-HEADER_HEIGHT, 0, HEADER_HEIGHT],\n            [-HEADER_HEIGHT / 2, 0, HEADER_HEIGHT * 0.75]\n          ),\n        },\n        {\n          scale: interpolate(scrollOffset.value, [-HEADER_HEIGHT, 0, HEADER_HEIGHT], [2, 1, 1]),\n        },\n      ],\n    };\n  });\n\n  return (\n    <ThemedView style={styles.container}>\n      <Animated.ScrollView\n        ref={scrollRef}\n        scrollEventThrottle={16}\n        scrollIndicatorInsets={{ bottom }}\n        contentContainerStyle={{ paddingBottom: bottom }}>\n        <Animated.View\n          style={[\n            styles.header,\n            { backgroundColor: headerBackgroundColor[colorScheme] },\n            headerAnimatedStyle,\n          ]}>\n          {headerImage}\n        </Animated.View>\n        <ThemedView style={styles.content}>{children}</ThemedView>\n      </Animated.ScrollView>\n    </ThemedView>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n  },\n  header: {\n    height: HEADER_HEIGHT,\n    overflow: 'hidden',\n  },\n  content: {\n    flex: 1,\n    padding: 32,\n    gap: 16,\n    overflow: 'hidden',\n  },\n});\n","size_bytes":2143},"attached_assets/expo_ui_reference/Expo1234/app/(tabs)/index.tsx":{"content":"\nimport React, { useState } from 'react';\nimport { StyleSheet, ScrollView, View, Text, TouchableOpacity, Image } from 'react-native';\nimport { useColorScheme } from '@/hooks/useColorScheme';\nimport { IconSymbol } from '@/components/ui/IconSymbol';\nimport { router } from 'expo-router';\n\nexport default function HomeScreen() {\n  const colorScheme = useColorScheme();\n  const isDark = colorScheme === 'dark';\n\n  const quickActions = [\n    { id: '1', icon: 'map.fill', label: 'Navigation', color: '#007AFF', route: '/navigation' },\n    { id: '2', icon: 'sailboat.fill', label: 'My Boats', color: '#34C759', route: '/boats' },\n    { id: '3', icon: 'cloud.sun.fill', label: 'Weather', color: '#FF9500', route: null },\n    { id: '4', icon: 'exclamationmark.triangle.fill', label: 'Hazards', color: '#FF3B30', route: null },\n  ];\n\n  const weatherImages = [\n    require('@/assets/images/partial-react-logo.png'),\n    require('@/assets/images/partial-react-logo.png'),\n    require('@/assets/images/partial-react-logo.png'),\n  ];\n\n  return (\n    <View style={[styles.container, { backgroundColor: isDark ? '#000' : '#F2F2F7' }]}>\n      {/* Header */}\n      <View style={[styles.header, { backgroundColor: isDark ? '#000' : '#F2F2F7' }]}>\n        <Text style={styles.appName}>Boat Helper</Text>\n        <View style={styles.headerIcons}>\n          <TouchableOpacity style={styles.headerIcon}>\n            <IconSymbol name=\"bell.fill\" size={24} color={isDark ? '#FFF' : '#000'} />\n            <View style={styles.badge}>\n              <Text style={styles.badgeText}>12</Text>\n            </View>\n          </TouchableOpacity>\n          <TouchableOpacity style={styles.headerIcon} onPress={() => router.push('/chat')}>\n            <IconSymbol name=\"message.fill\" size={24} color={isDark ? '#FFF' : '#000'} />\n          </TouchableOpacity>\n          <TouchableOpacity style={styles.profileButton} onPress={() => router.push('/profile')}>\n            <IconSymbol name=\"person.fill\" size={20} color=\"#FFF\" />\n          </TouchableOpacity>\n        </View>\n      </View>\n\n      <ScrollView style={styles.scrollView} showsVerticalScrollIndicator={false}>\n        {/* Welcome Section */}\n        <View style={styles.welcomeSection}>\n          <Text style={[styles.welcomeTitle, { color: isDark ? '#FFF' : '#000' }]}>\n            Welcome back, Andrison\n          </Text>\n          <Text style={[styles.welcomeDate, { color: isDark ? '#8E8E93' : '#6C6C70' }]}>\n            {new Date().toLocaleDateString('en-US', { weekday: 'long', month: 'long', day: 'numeric', year: 'numeric' })}\n          </Text>\n        </View>\n\n        {/* Image Carousel */}\n        <ScrollView \n          horizontal \n          showsHorizontalScrollIndicator={false}\n          style={styles.carouselContainer}\n        >\n          {weatherImages.map((img, index) => (\n            <View key={index} style={styles.carouselCard}>\n              <Image source={img} style={styles.carouselImage} />\n            </View>\n          ))}\n        </ScrollView>\n\n        {/* Weather Card */}\n        <View style={[styles.weatherCard, { backgroundColor: isDark ? '#1C1C1E' : '#E8F4FF' }]}>\n          <View>\n            <Text style={[styles.weatherLabel, { color: isDark ? '#8E8E93' : '#6C6C70' }]}>\n              Today's Weather\n            </Text>\n            <Text style={[styles.weatherValue, { color: isDark ? '#FFF' : '#000' }]}>\n              Sunny, 44¬∞F\n            </Text>\n            <Text style={[styles.weatherSubtext, { color: isDark ? '#8E8E93' : '#6C6C70' }]}>\n              Perfect for Boating !\n            </Text>\n          </View>\n          <Text style={styles.weatherIcon}>‚òÄÔ∏è</Text>\n        </View>\n\n        {/* Quick Actions */}\n        <Text style={[styles.sectionTitle, { color: isDark ? '#8E8E93' : '#6C6C70' }]}>\n          What would you like to do today ?\n        </Text>\n        <View style={styles.quickActionsGrid}>\n          {quickActions.map((action) => (\n            <TouchableOpacity \n              key={action.id}\n              style={[styles.quickActionCard, { backgroundColor: isDark ? '#1C1C1E' : '#FFF' }]}\n              onPress={() => action.route && router.push(action.route)}\n            >\n              <View style={[styles.quickActionIcon, { backgroundColor: `${action.color}20` }]}>\n                <IconSymbol name={action.icon} size={28} color={action.color} />\n              </View>\n              <Text style={[styles.quickActionLabel, { color: isDark ? '#FFF' : '#000' }]}>\n                {action.label}\n              </Text>\n            </TouchableOpacity>\n          ))}\n        </View>\n\n        {/* Active Tasks Preview */}\n        <View style={styles.tasksPreview}>\n          <View style={styles.tasksHeader}>\n            <Text style={[styles.sectionTitle, { color: isDark ? '#FFF' : '#000', marginBottom: 0 }]}>\n              Active Tasks\n            </Text>\n            <TouchableOpacity>\n              <Text style={styles.viewAllText}>View All</Text>\n            </TouchableOpacity>\n          </View>\n          \n          <View style={[styles.tasksSummaryCard, { backgroundColor: isDark ? '#1C1C1E' : '#FFF' }]}>\n            <View style={styles.tasksCountBadge}>\n              <Text style={styles.tasksCountText}>3</Text>\n            </View>\n            <View style={styles.tasksSummaryContent}>\n              <Text style={[styles.tasksSummaryLabel, { color: isDark ? '#8E8E93' : '#6C6C70' }]}>\n                You have tasks waiting for service\n              </Text>\n              <Text style={[styles.tasksSummaryValue, { color: isDark ? '#FFF' : '#000' }]}>\n                3 Tasks in progress\n              </Text>\n            </View>\n          </View>\n\n          <View style={[styles.taskPreviewCard, { backgroundColor: isDark ? '#1C1C1E' : '#FFF' }]}>\n            <View style={styles.taskPreviewHeader}>\n              <Text style={[styles.taskPreviewTitle, { color: isDark ? '#FFF' : '#000' }]}>\n                Engine Maintenance\n              </Text>\n              <View style={styles.pendingBadge}>\n                <Text style={styles.pendingBadgeText}>Pending</Text>\n              </View>\n            </View>\n          </View>\n        </View>\n      </ScrollView>\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n  },\n  header: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    paddingHorizontal: 20,\n    paddingTop: 60,\n    paddingBottom: 16,\n  },\n  appName: {\n    fontSize: 24,\n    fontFamily: 'serif',\n    fontStyle: 'italic',\n    fontWeight: '400',\n  },\n  headerIcons: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: 16,\n  },\n  headerIcon: {\n    position: 'relative',\n  },\n  badge: {\n    position: 'absolute',\n    top: -4,\n    right: -4,\n    backgroundColor: '#007AFF',\n    borderRadius: 10,\n    minWidth: 20,\n    height: 20,\n    justifyContent: 'center',\n    alignItems: 'center',\n    paddingHorizontal: 4,\n  },\n  badgeText: {\n    color: '#FFF',\n    fontSize: 12,\n    fontWeight: '600',\n  },\n  profileButton: {\n    width: 32,\n    height: 32,\n    borderRadius: 16,\n    backgroundColor: '#007AFF',\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  scrollView: {\n    flex: 1,\n  },\n  welcomeSection: {\n    paddingHorizontal: 20,\n    marginBottom: 20,\n  },\n  welcomeTitle: {\n    fontSize: 28,\n    fontWeight: 'bold',\n    marginBottom: 4,\n  },\n  welcomeDate: {\n    fontSize: 16,\n  },\n  carouselContainer: {\n    paddingLeft: 20,\n    marginBottom: 20,\n  },\n  carouselCard: {\n    width: 120,\n    height: 100,\n    borderRadius: 16,\n    marginRight: 12,\n    overflow: 'hidden',\n    backgroundColor: '#E8F4FF',\n  },\n  carouselImage: {\n    width: '100%',\n    height: '100%',\n    resizeMode: 'cover',\n  },\n  weatherCard: {\n    marginHorizontal: 20,\n    padding: 20,\n    borderRadius: 16,\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    marginBottom: 24,\n  },\n  weatherLabel: {\n    fontSize: 14,\n    marginBottom: 4,\n  },\n  weatherValue: {\n    fontSize: 24,\n    fontWeight: 'bold',\n    marginBottom: 4,\n  },\n  weatherSubtext: {\n    fontSize: 14,\n  },\n  weatherIcon: {\n    fontSize: 48,\n  },\n  sectionTitle: {\n    fontSize: 18,\n    paddingHorizontal: 20,\n    marginBottom: 16,\n  },\n  quickActionsGrid: {\n    flexDirection: 'row',\n    flexWrap: 'wrap',\n    paddingHorizontal: 20,\n    gap: 12,\n    marginBottom: 32,\n  },\n  quickActionCard: {\n    width: '48%',\n    padding: 20,\n    borderRadius: 16,\n    alignItems: 'center',\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.05,\n    shadowRadius: 8,\n    elevation: 2,\n  },\n  quickActionIcon: {\n    width: 64,\n    height: 64,\n    borderRadius: 32,\n    justifyContent: 'center',\n    alignItems: 'center',\n    marginBottom: 12,\n  },\n  quickActionLabel: {\n    fontSize: 16,\n    fontWeight: '600',\n  },\n  tasksPreview: {\n    paddingHorizontal: 20,\n    marginBottom: 40,\n  },\n  tasksHeader: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    marginBottom: 16,\n  },\n  viewAllText: {\n    color: '#007AFF',\n    fontSize: 16,\n    fontWeight: '600',\n  },\n  tasksSummaryCard: {\n    flexDirection: 'row',\n    padding: 16,\n    borderRadius: 16,\n    marginBottom: 12,\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.05,\n    shadowRadius: 8,\n    elevation: 2,\n  },\n  tasksCountBadge: {\n    width: 48,\n    height: 48,\n    borderRadius: 24,\n    backgroundColor: '#E8F4FF',\n    justifyContent: 'center',\n    alignItems: 'center',\n    marginRight: 16,\n  },\n  tasksCountText: {\n    fontSize: 24,\n    fontWeight: 'bold',\n    color: '#007AFF',\n  },\n  tasksSummaryContent: {\n    flex: 1,\n    justifyContent: 'center',\n  },\n  tasksSummaryLabel: {\n    fontSize: 14,\n    marginBottom: 4,\n  },\n  tasksSummaryValue: {\n    fontSize: 16,\n    fontWeight: '600',\n  },\n  taskPreviewCard: {\n    padding: 16,\n    borderRadius: 16,\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.05,\n    shadowRadius: 8,\n    elevation: 2,\n  },\n  taskPreviewHeader: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n  },\n  taskPreviewTitle: {\n    fontSize: 16,\n    fontWeight: '600',\n  },\n  pendingBadge: {\n    backgroundColor: '#FFF3E0',\n    paddingHorizontal: 12,\n    paddingVertical: 4,\n    borderRadius: 12,\n  },\n  pendingBadgeText: {\n    color: '#FF9500',\n    fontSize: 12,\n    fontWeight: '600',\n  },\n});\n","size_bytes":10456},"attached_assets/expo_ui_reference/Expo1234/services/chatService.ts":{"content":"\nimport { io, Socket } from 'socket.io-client';\nimport { ChatMessage } from '@/types/maritime';\nimport { getSocketUrl } from '@/config/api';\n\nclass ChatService {\n  private socket: Socket | null = null;\n  private listeners: Set<(message: ChatMessage) => void> = new Set();\n\n  connect(vesselId: string, vesselName: string) {\n    const socketUrl = getSocketUrl();\n    console.log('Connecting to chat server:', socketUrl);\n    \n    this.socket = io(socketUrl, {\n      query: { vesselId, vesselName },\n      transports: ['websocket', 'polling']\n    });\n\n    this.socket.on('new_message', (message: ChatMessage) => {\n      this.listeners.forEach(listener => listener(message));\n    });\n\n    this.socket.on('connect', () => {\n      console.log('Chat connected to backend');\n    });\n\n    this.socket.on('connect_error', (error) => {\n      console.error('Chat connection error:', error);\n    });\n  }\n\n  disconnect() {\n    if (this.socket) {\n      this.socket.disconnect();\n      this.socket = null;\n    }\n  }\n\n  sendMessage(message: string, location: { latitude: number; longitude: number }) {\n    if (this.socket) {\n      this.socket.emit('send_message', {\n        message,\n        location,\n        timestamp: Date.now()\n      });\n    }\n  }\n\n  subscribe(listener: (message: ChatMessage) => void) {\n    this.listeners.add(listener);\n    return () => this.listeners.delete(listener);\n  }\n\n  getNearbyVessels(radiusKm: number = 50) {\n    if (this.socket) {\n      this.socket.emit('get_nearby_vessels', { radiusKm });\n    }\n  }\n}\n\nexport default new ChatService();\n","size_bytes":1554},"attached_assets/expo_ui_reference/Expo1234/attached_assets/config_1762898633037.ts":{"content":"// Backend API Configuration\n// Automatically detects the correct backend URL for Replit environment\nfunction getDefaultBackendUrl(): string {\n  if (typeof window !== 'undefined') {\n    const hostname = window.location.hostname;\n    if (hostname.includes('replit.dev') || hostname.includes('repl.co')) {\n      const protocol = window.location.protocol;\n      const parts = hostname.split('-');\n      if (parts.length > 0) {\n        const replitDomain = hostname;\n        return `${protocol}//${replitDomain}:3000`;\n      }\n    }\n  }\n  \n\n  return 'http://192.168.0.194:3000';\n}\n\nexport const API_CONFIG = {\n  BACKEND_URL: process.env.EXPO_PUBLIC_BACKEND_URL || getDefaultBackendUrl(),\n  SOCKET_URL: process.env.EXPO_PUBLIC_SOCKET_URL || getDefaultBackendUrl(),\n};\n\n// Helper function to get the correct backend URL\nexport function getBackendUrl(): string {\n  const url = API_CONFIG.BACKEND_URL;\n  console.log('Backend URL configured:', url);\n  return url;\n}\n\nexport function getSocketUrl(): string {\n  const url = API_CONFIG.SOCKET_URL;\n  console.log('Socket URL configured:', url);\n  return url;\n}\n\nexport function getRoutingUrl(): string {\n  // Maritime routing is handled by the backend server\n  const url = API_CONFIG.BACKEND_URL;\n  console.log('Routing URL configured:', url);\n  return url;\n}\n","size_bytes":1297},"components/redesign/ModalSheet.tsx":{"content":"import React from 'react';\nimport { View, Modal, StyleSheet, TouchableOpacity, Text, ScrollView } from 'react-native';\nimport { useColorScheme } from '@/hooks/useColorScheme';\nimport { Colors } from '@/constants/Colors';\nimport { Theme } from '@/constants/Theme';\nimport { IconSymbol } from '@/components/ui/IconSymbol';\n\ninterface ModalSheetProps {\n  visible: boolean;\n  onClose: () => void;\n  title: string;\n  children: React.ReactNode;\n  height?: number;\n}\n\nexport function ModalSheet({ visible, onClose, title, children, height }: ModalSheetProps) {\n  const colorScheme = useColorScheme();\n  const isDark = colorScheme === 'dark';\n  const colors = Colors[isDark ? 'dark' : 'light'];\n\n  return (\n    <Modal visible={visible} animationType=\"slide\" transparent>\n      <View style={styles.overlay}>\n        <View\n          style={[\n            styles.content,\n            { backgroundColor: colors.card },\n            height ? { height } : { minHeight: '80%' },\n          ]}\n        >\n          <View style={styles.header}>\n            <TouchableOpacity onPress={onClose}>\n              <IconSymbol name=\"chevron.down\" size={24} color={colors.text} />\n            </TouchableOpacity>\n            <Text style={[styles.title, { color: colors.text }]}>{title}</Text>\n            <View style={{ width: 24 }} />\n          </View>\n          <ScrollView style={styles.scrollView} showsVerticalScrollIndicator={false}>\n            {children}\n          </ScrollView>\n        </View>\n      </View>\n    </Modal>\n  );\n}\n\nconst styles = StyleSheet.create({\n  overlay: {\n    flex: 1,\n    backgroundColor: 'rgba(0, 0, 0, 0.5)',\n    justifyContent: 'flex-end',\n  },\n  content: {\n    borderTopLeftRadius: Theme.radius.lg,\n    borderTopRightRadius: Theme.radius.lg,\n    paddingBottom: Theme.spacing.xxxl,\n  },\n  header: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    paddingHorizontal: Theme.spacing.lg,\n    paddingTop: Theme.spacing.lg,\n    paddingBottom: Theme.spacing.base,\n  },\n  title: {\n    fontSize: Theme.fonts.sizes.xl,\n    fontWeight: Theme.fonts.weights.semibold,\n  },\n  scrollView: {\n    flex: 1,\n  },\n});\n","size_bytes":2148},"components/redesign/QuickActionTile.tsx":{"content":"import React from 'react';\nimport { StyleSheet, TouchableOpacity, Text, View } from 'react-native';\nimport { IconSymbol } from '@/components/ui/IconSymbol';\nimport { Theme } from '@/constants/Theme';\n\ninterface QuickActionTileProps {\n  icon: string;\n  label: string;\n  color: string;\n  onPress: () => void;\n}\n\nexport function QuickActionTile({ icon, label, color, onPress }: QuickActionTileProps) {\n  return (\n    <TouchableOpacity\n      style={styles.tile}\n      onPress={onPress}\n      activeOpacity={0.8}\n    >\n      <View style={[styles.iconContainer, { backgroundColor: color }]}>\n        <IconSymbol name={icon as any} size={28} color=\"#FFFFFF\" />\n      </View>\n      <Text style={styles.label}>{label}</Text>\n    </TouchableOpacity>\n  );\n}\n\nconst styles = StyleSheet.create({\n  tile: {\n    width: '31%',\n    aspectRatio: 1.1,\n    borderRadius: Theme.radius.lg,\n    padding: Theme.spacing.md,\n    justifyContent: 'space-between',\n    backgroundColor: Theme.colors.white,\n    ...Theme.shadows.md,\n  },\n  iconContainer: {\n    width: 56,\n    height: 56,\n    borderRadius: 28,\n    justifyContent: 'center',\n    alignItems: 'center',\n    ...Theme.shadows.sm,\n  },\n  label: {\n    fontSize: Theme.fonts.sizes.base,\n    fontWeight: Theme.fonts.weights.semibold,\n    color: Theme.colors.gray1,\n    marginTop: Theme.spacing.sm,\n  },\n});","size_bytes":1332},"components/redesign/AddItemModal.tsx":{"content":"\nimport React, { useState } from 'react';\nimport {\n  View,\n  Text,\n  StyleSheet,\n  Modal,\n  TextInput,\n  TouchableOpacity,\n  ScrollView,\n  KeyboardAvoidingView,\n  Platform,\n} from 'react-native';\nimport { useColorScheme } from '@/hooks/useColorScheme';\nimport { Colors } from '@/constants/Colors';\nimport { IconSymbol } from '@/components/ui/IconSymbol';\n\ninterface FormField {\n  key: string;\n  label: string;\n  placeholder: string;\n  type?: 'text' | 'number' | 'picker';\n  options?: string[];\n  required?: boolean;\n}\n\ninterface AddItemModalProps {\n  visible: boolean;\n  onClose: () => void;\n  onSubmit: (data: any) => void;\n  title: string;\n  fields: FormField[];\n  submitText?: string;\n}\n\nexport function AddItemModal({\n  visible,\n  onClose,\n  onSubmit,\n  title,\n  fields,\n  submitText = 'Add',\n}: AddItemModalProps) {\n  const colorScheme = useColorScheme();\n  const isDark = colorScheme === 'dark';\n  const colors = Colors[isDark ? 'dark' : 'light'];\n  const [formData, setFormData] = useState<{ [key: string]: string }>({});\n\n  const handleSubmit = () => {\n    // Validate required fields\n    const missingFields = fields\n      .filter(f => f.required && !formData[f.key])\n      .map(f => f.label);\n\n    if (missingFields.length > 0) {\n      alert(`Please fill in: ${missingFields.join(', ')}`);\n      return;\n    }\n\n    onSubmit(formData);\n    setFormData({});\n    onClose();\n  };\n\n  const handleClose = () => {\n    setFormData({});\n    onClose();\n  };\n\n  return (\n    <Modal\n      visible={visible}\n      animationType=\"slide\"\n      transparent={true}\n      onRequestClose={handleClose}\n    >\n      <KeyboardAvoidingView\n        behavior={Platform.OS === 'ios' ? 'padding' : 'height'}\n        style={styles.modalOverlay}\n      >\n        <View style={styles.modalBackdrop}>\n          <TouchableOpacity\n            style={styles.backdropTouchable}\n            activeOpacity={1}\n            onPress={handleClose}\n          />\n          <View style={[styles.modalContainer, { backgroundColor: colors.card }]}>\n            {/* Handle Bar */}\n            <View style={styles.handleBar}>\n              <View style={[styles.handle, { backgroundColor: colors.border }]} />\n            </View>\n\n            {/* Header */}\n            <View style={styles.modalHeader}>\n              <TouchableOpacity onPress={handleClose} style={styles.closeButton}>\n                <Text style={[styles.closeText, { color: colors.text }]}>Cancel</Text>\n              </TouchableOpacity>\n              <Text style={[styles.modalTitle, { color: colors.text }]}>{title}</Text>\n              <TouchableOpacity onPress={handleSubmit} style={styles.submitButton}>\n                <Text style={[styles.submitText, { color: colors.primary }]}>{submitText}</Text>\n              </TouchableOpacity>\n            </View>\n\n            {/* Form Fields */}\n            <ScrollView style={styles.formContainer} showsVerticalScrollIndicator={false}>\n              {fields.map((field) => (\n                <View key={field.key} style={styles.fieldContainer}>\n                  <Text style={[styles.fieldLabel, { color: colors.secondaryText }]}>\n                    {field.label}\n                    {field.required && <Text style={styles.requiredStar}> *</Text>}\n                  </Text>\n                  {field.type === 'picker' ? (\n                    <ScrollView\n                      horizontal\n                      showsHorizontalScrollIndicator={false}\n                      contentContainerStyle={styles.pickerContainer}\n                    >\n                      {field.options?.map((option) => (\n                        <TouchableOpacity\n                          key={option}\n                          style={[\n                            styles.pickerOption,\n                            {\n                              backgroundColor:\n                                formData[field.key] === option\n                                  ? colors.primary\n                                  : isDark\n                                  ? colors.background\n                                  : '#F0F0F0',\n                              borderColor: colors.border,\n                            },\n                          ]}\n                          onPress={() =>\n                            setFormData({ ...formData, [field.key]: option })\n                          }\n                        >\n                          <Text\n                            style={[\n                              styles.pickerOptionText,\n                              {\n                                color:\n                                  formData[field.key] === option\n                                    ? '#FFFFFF'\n                                    : colors.text,\n                              },\n                            ]}\n                          >\n                            {option}\n                          </Text>\n                        </TouchableOpacity>\n                      ))}\n                    </ScrollView>\n                  ) : (\n                    <TextInput\n                      style={[\n                        styles.input,\n                        {\n                          backgroundColor: isDark ? colors.background : '#F0F0F0',\n                          color: colors.text,\n                          borderColor: colors.border,\n                        },\n                      ]}\n                      placeholder={field.placeholder}\n                      placeholderTextColor={colors.tertiaryText}\n                      value={formData[field.key] || ''}\n                      onChangeText={(text) =>\n                        setFormData({ ...formData, [field.key]: text })\n                      }\n                      keyboardType={field.type === 'number' ? 'numeric' : 'default'}\n                    />\n                  )}\n                </View>\n              ))}\n            </ScrollView>\n          </View>\n        </View>\n      </KeyboardAvoidingView>\n    </Modal>\n  );\n}\n\nconst styles = StyleSheet.create({\n  modalOverlay: {\n    flex: 1,\n  },\n  modalBackdrop: {\n    flex: 1,\n    backgroundColor: 'rgba(0,0,0,0.5)',\n    justifyContent: 'flex-end',\n  },\n  backdropTouchable: {\n    flex: 1,\n  },\n  modalContainer: {\n    borderTopLeftRadius: 20,\n    borderTopRightRadius: 20,\n    maxHeight: '90%',\n  },\n  handleBar: {\n    alignItems: 'center',\n    paddingVertical: 8,\n  },\n  handle: {\n    width: 40,\n    height: 4,\n    borderRadius: 2,\n  },\n  modalHeader: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    paddingHorizontal: 16,\n    paddingBottom: 16,\n    borderBottomWidth: 1,\n    borderBottomColor: 'rgba(0,0,0,0.05)',\n  },\n  closeButton: {\n    padding: 8,\n  },\n  closeText: {\n    fontSize: 16,\n  },\n  modalTitle: {\n    fontSize: 18,\n    fontWeight: '700',\n  },\n  submitButton: {\n    padding: 8,\n  },\n  submitText: {\n    fontSize: 16,\n    fontWeight: '600',\n  },\n  formContainer: {\n    padding: 16,\n  },\n  fieldContainer: {\n    marginBottom: 20,\n  },\n  fieldLabel: {\n    fontSize: 14,\n    fontWeight: '600',\n    marginBottom: 8,\n  },\n  requiredStar: {\n    color: '#FF3B30',\n  },\n  input: {\n    borderRadius: 12,\n    paddingHorizontal: 16,\n    paddingVertical: 14,\n    fontSize: 15,\n    borderWidth: 1,\n  },\n  pickerContainer: {\n    gap: 8,\n  },\n  pickerOption: {\n    paddingHorizontal: 16,\n    paddingVertical: 10,\n    borderRadius: 20,\n    borderWidth: 1,\n  },\n  pickerOptionText: {\n    fontSize: 14,\n    fontWeight: '600',\n  },\n});\n","size_bytes":7477},"attached_assets/expo_ui_reference/Expo1234/attached_assets/maritime_routing_1762898628945.py":{"content":"#!/usr/bin/env python3\nfrom scgraph.geographs.marnet import marnet_geograph\nimport json\nimport sys\nfrom flask import Flask, request, jsonify\nfrom flask_cors import CORS\nimport psycopg2\nfrom psycopg2.extras import RealDictCursor\nimport os\nfrom datetime import datetime, timedelta\nimport math\n\napp = Flask(__name__)\nCORS(app)\n\n# Crowdsourced hazard data storage\nHAZARDS_FILE = 'data/maritime_hazards.json'\nTRAFFIC_FILE = 'data/vessel_traffic.json'\nPREDICTIONS_FILE = 'data/route_predictions.json'\n\n# Database connection\ndef get_db_connection():\n    return psycopg2.connect(\n        host=os.environ.get('PGHOST'),\n        database=os.environ.get('PGDATABASE'),\n        user=os.environ.get('PGUSER'),\n        password=os.environ.get('PGPASSWORD'),\n        port=os.environ.get('PGPORT')\n    )\n\n# Initialize ports table\ndef init_ports_db():\n    conn = get_db_connection()\n    cur = conn.cursor()\n    \n    # Create ports table\n    cur.execute('''\n        CREATE TABLE IF NOT EXISTS ports (\n            id SERIAL PRIMARY KEY,\n            name VARCHAR(255) NOT NULL,\n            code VARCHAR(10) UNIQUE NOT NULL,\n            country VARCHAR(100),\n            lat DECIMAL(9, 6) NOT NULL,\n            lng DECIMAL(9, 6) NOT NULL\n        )\n    ''')\n    \n    # Check if ports table is empty\n    cur.execute('SELECT COUNT(*) FROM ports')\n    count = cur.fetchone()[0]\n    \n    if count == 0:\n        # Insert port data\n        ports_data = [\n            (\"Mumbai Port\", \"INMUN\", \"India\", 18.9388, 72.8354),\n            (\"Chennai Port\", \"INMAA\", \"India\", 13.0827, 80.2707),\n            (\"Kochi Port\", \"INCOK\", \"India\", 9.9674, 76.2376),\n            (\"Visakhapatnam Port\", \"INVTZ\", \"India\", 17.6868, 83.2185),\n            (\"Colombo Port\", \"LKCMB\", \"Sri Lanka\", 6.9497, 79.8528),\n            (\"Singapore Port\", \"SGSIN\", \"Singapore\", 1.2644, 103.8270),\n            (\"Dubai Port\", \"AEDXB\", \"UAE\", 25.2697, 55.3095),\n            (\"Shanghai Port\", \"CNSHA\", \"China\", 31.2304, 121.4737),\n            (\"Hong Kong Port\", \"HKHKG\", \"Hong Kong\", 22.3193, 114.1694),\n            (\"Rotterdam Port\", \"NLRTM\", \"Netherlands\", 51.9225, 4.4792),\n            (\"Hamburg Port\", \"DEHAM\", \"Germany\", 53.5511, 9.9937),\n            (\"New York Port\", \"USNYC\", \"USA\", 40.6895, -74.0445),\n            (\"Los Angeles Port\", \"USLAX\", \"USA\", 33.7405, -118.2713),\n            (\"Tokyo Port\", \"JPTYO\", \"Japan\", 35.6286, 139.7454),\n            (\"Sydney Port\", \"AUSYD\", \"Australia\", -33.8568, 151.2153),\n            (\"Cape Town Port\", \"ZACPT\", \"South Africa\", -33.9079, 18.4231),\n            (\"Rio de Janeiro Port\", \"BRRIO\", \"Brazil\", -22.8969, -43.1732),\n            (\"London Port\", \"GBLON\", \"UK\", 51.5074, -0.1278),\n            (\"Marseille Port\", \"FRMRS\", \"France\", 43.2965, 5.3698),\n            (\"Barcelona Port\", \"ESBCN\", \"Spain\", 41.3851, 2.1734),\n            (\"Jeddah Port\", \"SAJED\", \"Saudi Arabia\", 21.5433, 39.1728),\n            (\"Karachi Port\", \"PKKHI\", \"Pakistan\", 24.8607, 67.0011),\n            (\"Bangkok Port\", \"THBKK\", \"Thailand\", 13.7563, 100.5018),\n            (\"Manila Port\", \"PHMNL\", \"Philippines\", 14.5995, 120.9842),\n            (\"Jakarta Port\", \"IDJKT\", \"Indonesia\", -6.2088, 106.8456)\n        ]\n        \n        cur.executemany(\n            'INSERT INTO ports (name, code, country, lat, lng) VALUES (%s, %s, %s, %s, %s)',\n            ports_data\n        )\n    \n    conn.commit()\n    cur.close()\n    conn.close()\n\n# Search ports endpoint\n@app.route('/api/ports/search', methods=['GET'])\ndef search_ports():\n    query = request.args.get('q', '').lower()\n    \n    if not query:\n        return jsonify({'ports': []})\n    \n    conn = get_db_connection()\n    cur = conn.cursor(cursor_factory=RealDictCursor)\n    \n    cur.execute('''\n        SELECT * FROM ports \n        WHERE LOWER(name) LIKE %s OR LOWER(code) LIKE %s OR LOWER(country) LIKE %s\n        ORDER BY name\n        LIMIT 10\n    ''', (f'%{query}%', f'%{query}%', f'%{query}%'))\n    \n    ports = cur.fetchall()\n    cur.close()\n    conn.close()\n    \n    return jsonify({'ports': ports})\n\n# Get all ports endpoint\n@app.route('/api/ports', methods=['GET'])\ndef get_all_ports():\n    conn = get_db_connection()\n    cur = conn.cursor(cursor_factory=RealDictCursor)\n    \n    cur.execute('SELECT * FROM ports ORDER BY name')\n    ports = cur.fetchall()\n    \n    cur.close()\n    conn.close()\n    \n    return jsonify({'ports': ports})\n\n# Report maritime hazard (crowdsourced)\n@app.route('/api/hazards/report', methods=['POST'])\ndef report_hazard():\n    data = request.json\n    \n    hazard = {\n        'id': f\"h_{int(datetime.now().timestamp())}\",\n        'type': data.get('type'),  # debris, shallow, weather, congestion, regulatory\n        'severity': data.get('severity', 'medium'),  # low, medium, high, critical\n        'lat': float(data.get('lat')),\n        'lng': float(data.get('lng')),\n        'description': data.get('description'),\n        'reportedBy': data.get('reportedBy', 'anonymous'),\n        'vesselId': data.get('vesselId'),\n        'timestamp': datetime.now().isoformat(),\n        'expiresAt': (datetime.now() + timedelta(hours=data.get('expiryHours', 24))).isoformat(),\n        'verified': False,\n        'upvotes': 0,\n        'downvotes': 0\n    }\n    \n    # Load existing hazards\n    hazards = load_json_file(HAZARDS_FILE, [])\n    hazards.append(hazard)\n    \n    # Remove expired hazards\n    hazards = [h for h in hazards if datetime.fromisoformat(h['expiresAt']) > datetime.now()]\n    \n    save_json_file(HAZARDS_FILE, hazards)\n    \n    return jsonify({'success': True, 'hazard': hazard})\n\n# Get active hazards in area\n@app.route('/api/hazards/nearby', methods=['GET'])\ndef get_nearby_hazards():\n    lat = float(request.args.get('lat'))\n    lng = float(request.args.get('lng'))\n    radius = float(request.args.get('radius', 50))  # km\n    \n    hazards = load_json_file(HAZARDS_FILE, [])\n    \n    # Filter expired hazards\n    active_hazards = [h for h in hazards if datetime.fromisoformat(h['expiresAt']) > datetime.now()]\n    \n    # Filter by distance\n    nearby = []\n    for hazard in active_hazards:\n        dist = calculate_distance_nm(\n            {'lat': lat, 'lng': lng},\n            {'lat': hazard['lat'], 'lng': hazard['lng']}\n        ) * 1.852  # Convert to km\n        \n        if dist <= radius:\n            hazard['distance'] = round(dist, 2)\n            nearby.append(hazard)\n    \n    # Sort by severity and distance\n    severity_order = {'critical': 0, 'high': 1, 'medium': 2, 'low': 3}\n    nearby.sort(key=lambda x: (severity_order.get(x['severity'], 4), x['distance']))\n    \n    save_json_file(HAZARDS_FILE, active_hazards)\n    \n    return jsonify({'hazards': nearby})\n\n# Vote on hazard (verify crowdsourced data)\n@app.route('/api/hazards/<hazard_id>/vote', methods=['POST'])\ndef vote_hazard(hazard_id):\n    data = request.json\n    vote = data.get('vote')  # 'up' or 'down'\n    \n    hazards = load_json_file(HAZARDS_FILE, [])\n    \n    for hazard in hazards:\n        if hazard['id'] == hazard_id:\n            if vote == 'up':\n                hazard['upvotes'] += 1\n            elif vote == 'down':\n                hazard['downvotes'] += 1\n            \n            # Auto-verify if enough upvotes\n            if hazard['upvotes'] >= 3:\n                hazard['verified'] = True\n            \n            # Remove if too many downvotes\n            if hazard['downvotes'] >= 5:\n                hazards.remove(hazard)\n                save_json_file(HAZARDS_FILE, hazards)\n                return jsonify({'success': True, 'removed': True})\n            \n            save_json_file(HAZARDS_FILE, hazards)\n            return jsonify({'success': True, 'hazard': hazard})\n    \n    return jsonify({'success': False, 'error': 'Hazard not found'}), 404\n\n# Report vessel traffic/congestion\n@app.route('/api/traffic/report', methods=['POST'])\ndef report_traffic():\n    data = request.json\n    \n    traffic_report = {\n        'id': f\"t_{int(datetime.now().timestamp())}\",\n        'lat': float(data.get('lat')),\n        'lng': float(data.get('lng')),\n        'density': data.get('density', 'medium'),  # low, medium, high, critical\n        'vesselCount': data.get('vesselCount', 0),\n        'portCode': data.get('portCode'),\n        'timestamp': datetime.now().isoformat(),\n        'reportedBy': data.get('vesselId', 'anonymous')\n    }\n    \n    traffic_data = load_json_file(TRAFFIC_FILE, [])\n    traffic_data.append(traffic_report)\n    \n    # Keep only last 1000 reports\n    traffic_data = traffic_data[-1000:]\n    \n    save_json_file(TRAFFIC_FILE, traffic_data)\n    \n    return jsonify({'success': True, 'report': traffic_report})\n\n# Get traffic heatmap data\n@app.route('/api/traffic/heatmap', methods=['GET'])\ndef get_traffic_heatmap():\n    traffic_data = load_json_file(TRAFFIC_FILE, [])\n    \n    # Filter to last 24 hours\n    cutoff = datetime.now() - timedelta(hours=24)\n    recent_traffic = [t for t in traffic_data if datetime.fromisoformat(t['timestamp']) > cutoff]\n    \n    return jsonify({'traffic': recent_traffic})\n\n# Calculate maritime route endpoint with AI optimization\n@app.route('/api/route/calculate', methods=['POST'])\ndef calculate_route():\n    data = request.json\n    \n    origin = data.get('origin')\n    destination = data.get('destination')\n    preferences = data.get('preferences', {})\n    \n    if not origin or not destination:\n        return jsonify({'error': 'Origin and destination are required'}), 400\n    \n    # Extract coordinates\n    origin_lat = float(origin['lat'])\n    origin_lng = float(origin['lng'])\n    destination_lat = float(destination['lat'])\n    destination_lng = float(destination['lng'])\n    \n    try:\n        # Calculate primary maritime route using scgraph (10x faster than searoute!)\n        route = marnet_geograph.get_shortest_path(\n            origin_node={\"latitude\": origin_lat, \"longitude\": origin_lng},\n            destination_node={\"latitude\": destination_lat, \"longitude\": destination_lng},\n            output_units='km'\n        )\n        \n        # Load hazards and traffic data for AI optimization\n        hazards = load_json_file(HAZARDS_FILE, [])\n        active_hazards = [h for h in hazards if datetime.fromisoformat(h['expiresAt']) > datetime.now()]\n        traffic_data = load_json_file(TRAFFIC_FILE, [])\n        recent_traffic = [t for t in traffic_data if \n                         datetime.fromisoformat(t['timestamp']) > datetime.now() - timedelta(hours=6)]\n        \n        # Extract waypoints from scgraph output\n        distance_km = route['length']\n        distance_nm = distance_km * 0.539957  # Convert km to nautical miles\n        \n        # Calculate duration based on speed\n        speed_knots = preferences.get('speed', 15)\n        duration_hours = distance_nm / speed_knots if speed_knots > 0 else 0\n        \n        # Convert waypoints to lat/lng format\n        formatted_waypoints = [\n            {'lat': point['latitude'], 'lng': point['longitude']} \n            for point in route['coordinate_path']\n        ]\n        \n        # AI Route Scoring: Analyze route for hazards and traffic\n        route_hazards = []\n        traffic_density = 'low'\n        safety_score = 100\n        \n        for waypoint in formatted_waypoints:\n            # Check for nearby hazards\n            for hazard in active_hazards:\n                dist = calculate_distance_nm(waypoint, {'lat': hazard['lat'], 'lng': hazard['lng']})\n                if dist < 5:  # Within 5nm\n                    route_hazards.append({\n                        'type': hazard['type'],\n                        'severity': hazard['severity'],\n                        'distance': round(dist, 2),\n                        'description': hazard['description'],\n                        'waypoint': waypoint\n                    })\n                    # Decrease safety score based on severity\n                    severity_impact = {'low': 5, 'medium': 10, 'high': 20, 'critical': 40}\n                    safety_score -= severity_impact.get(hazard['severity'], 10)\n            \n            # Check traffic density\n            nearby_traffic = [t for t in recent_traffic if \n                            calculate_distance_nm(waypoint, {'lat': t['lat'], 'lng': t['lng']}) < 10]\n            if len(nearby_traffic) > 5:\n                traffic_density = 'high'\n                safety_score -= 15\n            elif len(nearby_traffic) > 2:\n                traffic_density = 'medium'\n                safety_score -= 5\n        \n        safety_score = max(0, min(100, safety_score))\n        \n        # Create turn-by-turn directions\n        directions = []\n        for i in range(len(formatted_waypoints) - 1):\n            wp1 = formatted_waypoints[i]\n            wp2 = formatted_waypoints[i + 1]\n            \n            # Calculate bearing between waypoints\n            bearing = calculate_bearing(wp1['lat'], wp1['lng'], wp2['lat'], wp2['lng'])\n            direction = bearing_to_direction(bearing)\n            \n            if i == 0:\n                directions.append({\n                    'instruction': f'Head {direction}',\n                    'distance': '',\n                    'waypoint': wp1\n                })\n            else:\n                directions.append({\n                    'instruction': f'Continue {direction}',\n                    'distance': f'{calculate_distance_nm(formatted_waypoints[i-1], wp1):.1f} nm',\n                    'waypoint': wp1\n                })\n        \n        # Add final destination\n        directions.append({\n            'instruction': 'Arrive at destination',\n            'distance': f'{calculate_distance_nm(formatted_waypoints[-2], formatted_waypoints[-1]):.1f} nm',\n            'waypoint': formatted_waypoints[-1]\n        })\n        \n        # Generate AI predictions\n        prediction = {\n            'estimatedDelay': calculate_delay_prediction(route_hazards, traffic_density),\n            'weatherRisk': 'low',  # Can be enhanced with weather API\n            'collisionRisk': 'low' if safety_score > 70 else 'medium' if safety_score > 40 else 'high',\n            'fuelEfficiency': calculate_fuel_efficiency(distance_nm, traffic_density),\n            'recommendedSpeed': preferences.get('speed', 15) if traffic_density == 'low' else max(10, preferences.get('speed', 15) - 3)\n        }\n        \n        # AI Recommendations\n        recommendations = []\n        if safety_score < 70:\n            recommendations.append('‚ö†Ô∏è Route has multiple hazards. Consider alternative route.')\n        if traffic_density == 'high':\n            recommendations.append('üö¶ High traffic expected. Allow extra time.')\n        if len(route_hazards) > 0:\n            recommendations.append(f'üìç {len(route_hazards)} hazards detected along route. Stay alert.')\n        \n        # Generate alternative routes (simplified - offset by 0.1 degrees)\n        alternative_routes = []\n        if preferences.get('showAlternatives', True) and (safety_score < 80 or traffic_density != 'low'):\n            # Offset route slightly for alternative\n            alt_waypoints = [{'lat': w['lat'] + 0.05, 'lng': w['lng']} for w in formatted_waypoints]\n            alternative_routes.append({\n                'name': 'Scenic Route',\n                'coordinates': alt_waypoints,\n                'distance': distance_nm * 1.1,\n                'duration': duration_hours * 1.15 * 60,\n                'safetyScore': min(100, safety_score + 10),\n                'hazards': max(0, len(route_hazards) - 1)\n            })\n        \n        return jsonify({\n            'route': {\n                'coordinates': formatted_waypoints,\n                'distance': distance_nm,\n                'duration': duration_hours * 60,\n                'directions': directions,\n                'origin': origin,\n                'destination': destination,\n                'safetyScore': safety_score,\n                'trafficDensity': traffic_density,\n                'hazards': route_hazards,\n                'prediction': prediction,\n                'recommendations': recommendations,\n                'alternativeRoutes': alternative_routes\n            }\n        })\n        \n    except Exception as e:\n        return jsonify({'error': str(e)}), 500\n\ndef calculate_bearing(lat1, lng1, lat2, lng2):\n    \"\"\"Calculate bearing between two points\"\"\"\n    import math\n    \n    lat1_rad = math.radians(lat1)\n    lat2_rad = math.radians(lat2)\n    lng_diff = math.radians(lng2 - lng1)\n    \n    x = math.sin(lng_diff) * math.cos(lat2_rad)\n    y = math.cos(lat1_rad) * math.sin(lat2_rad) - math.sin(lat1_rad) * math.cos(lat2_rad) * math.cos(lng_diff)\n    \n    bearing = math.atan2(x, y)\n    bearing = math.degrees(bearing)\n    bearing = (bearing + 360) % 360\n    \n    return bearing\n\ndef bearing_to_direction(bearing):\n    \"\"\"Convert bearing to compass direction\"\"\"\n    directions = ['North', 'NE', 'East', 'SE', 'South', 'SW', 'West', 'NW']\n    index = round(bearing / 45) % 8\n    return directions[index]\n\ndef calculate_distance_nm(point1, point2):\n    \"\"\"Calculate distance in nautical miles between two points\"\"\"\n    import math\n    \n    lat1 = math.radians(point1['lat'])\n    lng1 = math.radians(point1['lng'])\n    lat2 = math.radians(point2['lat'])\n    lng2 = math.radians(point2['lng'])\n    \n    dlat = lat2 - lat1\n    dlng = lng2 - lng1\n    \n    a = math.sin(dlat/2)**2 + math.cos(lat1) * math.cos(lat2) * math.sin(dlng/2)**2\n    c = 2 * math.atan2(math.sqrt(a), math.sqrt(1-a))\n    \n    # Earth radius in nautical miles\n    R = 3440.065\n    \n    return R * c\n\ndef load_json_file(filepath, default=None):\n    \"\"\"Load JSON data from file\"\"\"\n    try:\n        if os.path.exists(filepath):\n            with open(filepath, 'r') as f:\n                return json.load(f)\n    except Exception as e:\n        print(f\"Error loading {filepath}: {e}\")\n    return default if default is not None else {}\n\ndef save_json_file(filepath, data):\n    \"\"\"Save JSON data to file\"\"\"\n    try:\n        os.makedirs(os.path.dirname(filepath), exist_ok=True)\n        with open(filepath, 'w') as f:\n            json.dump(data, f, indent=2)\n        return True\n    except Exception as e:\n        print(f\"Error saving {filepath}: {e}\")\n        return False\n\ndef calculate_delay_prediction(hazards, traffic_density):\n    \"\"\"Predict potential delays based on hazards and traffic\"\"\"\n    delay_minutes = 0\n    \n    for hazard in hazards:\n        severity_delays = {'low': 5, 'medium': 10, 'high': 20, 'critical': 45}\n        delay_minutes += severity_delays.get(hazard['severity'], 10)\n    \n    traffic_delays = {'low': 0, 'medium': 15, 'high': 30, 'critical': 60}\n    delay_minutes += traffic_delays.get(traffic_density, 0)\n    \n    return delay_minutes\n\ndef calculate_fuel_efficiency(distance_nm, traffic_density):\n    \"\"\"Calculate estimated fuel efficiency\"\"\"\n    base_consumption = distance_nm * 0.5  # liters per nm\n    \n    if traffic_density == 'high':\n        base_consumption *= 1.2  # 20% more fuel in heavy traffic\n    elif traffic_density == 'medium':\n        base_consumption *= 1.1\n    \n    return round(base_consumption, 2)\n\nif __name__ == '__main__':\n    # Initialize database\n    init_ports_db()\n    \n    # Initialize data directory\n    os.makedirs('data', exist_ok=True)\n    \n    # Start Flask server\n    port = int(os.environ.get('PORT', 3001))\n    print(f\"Maritime AI Routing Service starting on port {port}\")\n    print(\"Features: Crowdsourced hazards, Traffic intelligence, AI predictions\")\n    app.run(host='0.0.0.0', port=port, debug=True)\n","size_bytes":19375},"attached_assets/expo_ui_reference/Expo1234/scripts/reset-project.js":{"content":"#!/usr/bin/env node\n\n/**\n * This script is used to reset the project to a blank state.\n * It deletes or moves the /app, /components, /hooks, /scripts, and /constants directories to /app-example based on user input and creates a new /app directory with an index.tsx and _layout.tsx file.\n * You can remove the `reset-project` script from package.json and safely delete this file after running it.\n */\n\nconst fs = require(\"fs\");\nconst path = require(\"path\");\nconst readline = require(\"readline\");\n\nconst root = process.cwd();\nconst oldDirs = [\"app\", \"components\", \"hooks\", \"constants\", \"scripts\"];\nconst exampleDir = \"app-example\";\nconst newAppDir = \"app\";\nconst exampleDirPath = path.join(root, exampleDir);\n\nconst indexContent = `import { Text, View } from \"react-native\";\n\nexport default function Index() {\n  return (\n    <View\n      style={{\n        flex: 1,\n        justifyContent: \"center\",\n        alignItems: \"center\",\n      }}\n    >\n      <Text>Edit app/index.tsx to edit this screen.</Text>\n    </View>\n  );\n}\n`;\n\nconst layoutContent = `import { Stack } from \"expo-router\";\n\nexport default function RootLayout() {\n  return <Stack />;\n}\n`;\n\nconst rl = readline.createInterface({\n  input: process.stdin,\n  output: process.stdout,\n});\n\nconst moveDirectories = async (userInput) => {\n  try {\n    if (userInput === \"y\") {\n      // Create the app-example directory\n      await fs.promises.mkdir(exampleDirPath, { recursive: true });\n      console.log(`üìÅ /${exampleDir} directory created.`);\n    }\n\n    // Move old directories to new app-example directory or delete them\n    for (const dir of oldDirs) {\n      const oldDirPath = path.join(root, dir);\n      if (fs.existsSync(oldDirPath)) {\n        if (userInput === \"y\") {\n          const newDirPath = path.join(root, exampleDir, dir);\n          await fs.promises.rename(oldDirPath, newDirPath);\n          console.log(`‚û°Ô∏è /${dir} moved to /${exampleDir}/${dir}.`);\n        } else {\n          await fs.promises.rm(oldDirPath, { recursive: true, force: true });\n          console.log(`‚ùå /${dir} deleted.`);\n        }\n      } else {\n        console.log(`‚û°Ô∏è /${dir} does not exist, skipping.`);\n      }\n    }\n\n    // Create new /app directory\n    const newAppDirPath = path.join(root, newAppDir);\n    await fs.promises.mkdir(newAppDirPath, { recursive: true });\n    console.log(\"\\nüìÅ New /app directory created.\");\n\n    // Create index.tsx\n    const indexPath = path.join(newAppDirPath, \"index.tsx\");\n    await fs.promises.writeFile(indexPath, indexContent);\n    console.log(\"üìÑ app/index.tsx created.\");\n\n    // Create _layout.tsx\n    const layoutPath = path.join(newAppDirPath, \"_layout.tsx\");\n    await fs.promises.writeFile(layoutPath, layoutContent);\n    console.log(\"üìÑ app/_layout.tsx created.\");\n\n    console.log(\"\\n‚úÖ Project reset complete. Next steps:\");\n    console.log(\n      `1. Run \\`npx expo start\\` to start a development server.\\n2. Edit app/index.tsx to edit the main screen.${\n        userInput === \"y\"\n          ? `\\n3. Delete the /${exampleDir} directory when you're done referencing it.`\n          : \"\"\n      }`\n    );\n  } catch (error) {\n    console.error(`‚ùå Error during script execution: ${error.message}`);\n  }\n};\n\nrl.question(\n  \"Do you want to move existing files to /app-example instead of deleting them? (Y/n): \",\n  (answer) => {\n    const userInput = answer.trim().toLowerCase() || \"y\";\n    if (userInput === \"y\" || userInput === \"n\") {\n      moveDirectories(userInput).finally(() => rl.close());\n    } else {\n      console.log(\"‚ùå Invalid input. Please enter 'Y' or 'N'.\");\n      rl.close();\n    }\n  }\n);\n","size_bytes":3608},"attached_assets/expo_ui_reference/Expo1234/components/HelloWave.tsx":{"content":"import { useEffect } from 'react';\nimport { StyleSheet } from 'react-native';\nimport Animated, {\n  useAnimatedStyle,\n  useSharedValue,\n  withRepeat,\n  withSequence,\n  withTiming,\n} from 'react-native-reanimated';\n\nimport { ThemedText } from '@/components/ThemedText';\n\nexport function HelloWave() {\n  const rotationAnimation = useSharedValue(0);\n\n  useEffect(() => {\n    rotationAnimation.value = withRepeat(\n      withSequence(withTiming(25, { duration: 150 }), withTiming(0, { duration: 150 })),\n      4 // Run the animation 4 times\n    );\n  }, [rotationAnimation]);\n\n  const animatedStyle = useAnimatedStyle(() => ({\n    transform: [{ rotate: `${rotationAnimation.value}deg` }],\n  }));\n\n  return (\n    <Animated.View style={animatedStyle}>\n      <ThemedText style={styles.text}>üëã</ThemedText>\n    </Animated.View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  text: {\n    fontSize: 28,\n    lineHeight: 32,\n    marginTop: -6,\n  },\n});\n","size_bytes":939},"attached_assets/expo_ui_reference/Expo1234/app/+not-found.tsx":{"content":"import { Link, Stack } from 'expo-router';\nimport { StyleSheet } from 'react-native';\n\nimport { ThemedText } from '@/components/ThemedText';\nimport { ThemedView } from '@/components/ThemedView';\n\nexport default function NotFoundScreen() {\n  return (\n    <>\n      <Stack.Screen options={{ title: 'Oops!' }} />\n      <ThemedView style={styles.container}>\n        <ThemedText type=\"title\">This screen does not exist.</ThemedText>\n        <Link href=\"/\" style={styles.link}>\n          <ThemedText type=\"link\">Go to home screen!</ThemedText>\n        </Link>\n      </ThemedView>\n    </>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    alignItems: 'center',\n    justifyContent: 'center',\n    padding: 20,\n  },\n  link: {\n    marginTop: 15,\n    paddingVertical: 15,\n  },\n});\n","size_bytes":793},"attached_assets/expo_ui_reference/Expo1234/services/sosService.ts":{"content":"\nimport { SOSAlert } from '@/types/maritime';\n\nclass SOSService {\n  private activeAlert: SOSAlert | null = null;\n\n  async sendSOS(\n    vesselId: string,\n    vesselName: string,\n    latitude: number,\n    longitude: number\n  ): Promise<boolean> {\n    const alert: SOSAlert = {\n      id: Date.now().toString(),\n      vesselId,\n      vesselName,\n      latitude,\n      longitude,\n      timestamp: Date.now(),\n      status: 'active'\n    };\n\n    this.activeAlert = alert;\n\n    // Send to authorities\n    await this.notifyAuthorities(alert);\n    \n    // Broadcast to nearby vessels\n    await this.broadcastToNearbyVessels(alert);\n    \n    // Trigger emergency call interface\n    this.triggerEmergencyCall();\n\n    return true;\n  }\n\n  private async notifyAuthorities(alert: SOSAlert) {\n    // In production, integrate with:\n    // - Malaysian Maritime Enforcement Agency (MMEA)\n    // - Marine Police\n    // - Coast Guard\n    \n    const authorities = [\n      { name: 'MMEA', phone: '+60-3-8888-2222' },\n      { name: 'Marine Police', phone: '+60-3-2266-2222' }\n    ];\n\n    console.log('Notifying authorities:', authorities);\n    \n    // API calls would go here\n  }\n\n  private async broadcastToNearbyVessels(alert: SOSAlert) {\n    // Broadcast via AIS and chat service\n    console.log('Broadcasting SOS to nearby vessels');\n  }\n\n  private triggerEmergencyCall() {\n    // In production, integrate with phone dialer\n    console.log('Emergency call interface triggered');\n  }\n\n  cancelSOS() {\n    if (this.activeAlert) {\n      this.activeAlert.status = 'resolved';\n      this.activeAlert = null;\n    }\n  }\n\n  getActiveAlert(): SOSAlert | null {\n    return this.activeAlert;\n  }\n}\n\nexport default new SOSService();\n","size_bytes":1700},"attached_assets/expo_ui_reference/Expo1234/services/aisService.ts":{"content":"\nimport { Vessel } from '@/types/maritime';\n\nclass AISService {\n  private vessels: Map<string, Vessel> = new Map();\n  private updateInterval: NodeJS.Timeout | null = null;\n  private listeners: Set<(vessels: Vessel[]) => void> = new Set();\n\n  startTracking(currentVessel: Vessel) {\n    // Simulate AIS tracking - in production, connect to real AIS data source\n    this.updateInterval = setInterval(() => {\n      this.updateVesselPosition(currentVessel);\n      this.broadcastPosition(currentVessel);\n      this.notifyListeners();\n    }, 5000); // Every 5 seconds\n  }\n\n  stopTracking() {\n    if (this.updateInterval) {\n      clearInterval(this.updateInterval);\n      this.updateInterval = null;\n    }\n  }\n\n  private updateVesselPosition(vessel: Vessel) {\n    // Update local vessel position\n    vessel.lastUpdate = Date.now();\n  }\n\n  private broadcastPosition(vessel: Vessel) {\n    // In production, broadcast to AIS network\n    console.log('Broadcasting position:', vessel);\n  }\n\n  getNearbyVessels(latitude: number, longitude: number, radiusKm: number = 100): Vessel[] {\n    const nearby: Vessel[] = [];\n    \n    this.vessels.forEach(vessel => {\n      const distance = this.calculateDistance(\n        latitude, longitude,\n        vessel.latitude, vessel.longitude\n      );\n      \n      if (distance <= radiusKm) {\n        nearby.push({\n          ...vessel,\n          distance\n        });\n      }\n    });\n    \n    return nearby.sort((a, b) => (a.distance || 0) - (b.distance || 0));\n  }\n\n  private calculateDistance(lat1: number, lon1: number, lat2: number, lon2: number): number {\n    const R = 6371; // Earth's radius in km\n    const dLat = this.toRad(lat2 - lat1);\n    const dLon = this.toRad(lon2 - lon1);\n    \n    const a = Math.sin(dLat / 2) * Math.sin(dLat / 2) +\n              Math.cos(this.toRad(lat1)) * Math.cos(this.toRad(lat2)) *\n              Math.sin(dLon / 2) * Math.sin(dLon / 2);\n    \n    const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n    return R * c;\n  }\n\n  private toRad(degrees: number): number {\n    return degrees * (Math.PI / 180);\n  }\n\n  addVessel(vessel: Vessel) {\n    this.vessels.set(vessel.id, vessel);\n    this.notifyListeners();\n  }\n\n  removeVessel(vesselId: string) {\n    this.vessels.delete(vesselId);\n    this.notifyListeners();\n  }\n\n  subscribe(listener: (vessels: Vessel[]) => void) {\n    this.listeners.add(listener);\n    return () => this.listeners.delete(listener);\n  }\n\n  private notifyListeners() {\n    const vesselArray = Array.from(this.vessels.values());\n    this.listeners.forEach(listener => listener(vesselArray));\n  }\n}\n\nexport default new AISService();\n","size_bytes":2613},"attached_assets/expo_ui_reference/Expo1234/services/hazardService.ts":{"content":"\nimport { Hazard } from '@/types/maritime';\n\nclass HazardService {\n  private hazards: Map<string, Hazard> = new Map();\n  private listeners: Set<(hazards: Hazard[]) => void> = new Set();\n\n  reportHazard(\n    type: Hazard['type'],\n    latitude: number,\n    longitude: number,\n    severity: Hazard['severity'],\n    description: string,\n    reportedBy: string\n  ): Hazard {\n    const hazard: Hazard = {\n      id: Date.now().toString(),\n      type,\n      latitude,\n      longitude,\n      severity,\n      description,\n      reportedBy,\n      upvotes: 0,\n      downvotes: 0,\n      timestamp: Date.now(),\n      verified: false\n    };\n\n    this.hazards.set(hazard.id, hazard);\n    this.notifyListeners();\n    \n    return hazard;\n  }\n\n  upvoteHazard(hazardId: string) {\n    const hazard = this.hazards.get(hazardId);\n    if (hazard) {\n      hazard.upvotes++;\n      if (hazard.upvotes >= 3) {\n        hazard.verified = true;\n      }\n      this.notifyListeners();\n    }\n  }\n\n  downvoteHazard(hazardId: string) {\n    const hazard = this.hazards.get(hazardId);\n    if (hazard) {\n      hazard.downvotes++;\n      if (hazard.downvotes >= 5) {\n        this.hazards.delete(hazardId);\n      }\n      this.notifyListeners();\n    }\n  }\n\n  getNearbyHazards(latitude: number, longitude: number, radiusKm: number = 50): Hazard[] {\n    const nearby: Hazard[] = [];\n    \n    this.hazards.forEach(hazard => {\n      const distance = this.calculateDistance(\n        latitude, longitude,\n        hazard.latitude, hazard.longitude\n      );\n      \n      if (distance <= radiusKm) {\n        nearby.push(hazard);\n      }\n    });\n    \n    return nearby;\n  }\n\n  private calculateDistance(lat1: number, lon1: number, lat2: number, lon2: number): number {\n    const R = 6371;\n    const dLat = this.toRad(lat2 - lat1);\n    const dLon = this.toRad(lon2 - lon1);\n    \n    const a = Math.sin(dLat / 2) * Math.sin(dLat / 2) +\n              Math.cos(this.toRad(lat1)) * Math.cos(this.toRad(lat2)) *\n              Math.sin(dLon / 2) * Math.sin(dLon / 2);\n    \n    const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n    return R * c;\n  }\n\n  private toRad(degrees: number): number {\n    return degrees * (Math.PI / 180);\n  }\n\n  subscribe(listener: (hazards: Hazard[]) => void) {\n    this.listeners.add(listener);\n    return () => this.listeners.delete(listener);\n  }\n\n  private notifyListeners() {\n    const hazardArray = Array.from(this.hazards.values());\n    this.listeners.forEach(listener => listener(hazardArray));\n  }\n}\n\nexport default new HazardService();\n","size_bytes":2521},"attached_assets/expo_ui_reference/Expo1234/services/weatherService.ts":{"content":"\nimport axios from 'axios';\nimport { WeatherData } from '@/types/maritime';\n\nclass WeatherService {\n  private apiKey: string = ''; // Add your StormGlass/WeatherAPI key\n\n  async getCurrentWeather(latitude: number, longitude: number): Promise<WeatherData | null> {\n    try {\n      // Example using StormGlass API\n      // Replace with actual API endpoint\n      const response = await axios.get(\n        `https://api.stormglass.io/v2/weather/point`,\n        {\n          params: {\n            lat: latitude,\n            lng: longitude,\n            params: 'waveHeight,windSpeed,windDirection,visibility,waterTemperature'\n          },\n          headers: {\n            'Authorization': this.apiKey\n          }\n        }\n      );\n\n      const data = response.data.hours[0];\n      \n      return {\n        temperature: data.waterTemperature?.noaa || 0,\n        windSpeed: data.windSpeed?.noaa || 0,\n        windDirection: data.windDirection?.noaa || 0,\n        waveHeight: data.waveHeight?.noaa || 0,\n        visibility: data.visibility?.noaa || 0,\n        seaState: this.getSeaState(data.waveHeight?.noaa || 0),\n        timestamp: Date.now()\n      };\n    } catch (error) {\n      console.error('Weather fetch error:', error);\n      return null;\n    }\n  }\n\n  private getSeaState(waveHeight: number): string {\n    if (waveHeight < 0.1) return 'Calm';\n    if (waveHeight < 0.5) return 'Smooth';\n    if (waveHeight < 1.25) return 'Slight';\n    if (waveHeight < 2.5) return 'Moderate';\n    if (waveHeight < 4) return 'Rough';\n    if (waveHeight < 6) return 'Very Rough';\n    if (waveHeight < 9) return 'High';\n    return 'Very High';\n  }\n\n  async getForecast(latitude: number, longitude: number, hours: number = 24): Promise<WeatherData[]> {\n    // Implement forecast logic\n    return [];\n  }\n}\n\nexport default new WeatherService();\n","size_bytes":1820},"attached_assets/expo_ui_reference/Expo1234/attached_assets/maritime-routes_1762898628945.js":{"content":"const seaRoute = require('searoute-js');\nconst fs = require('fs').promises;\nconst path = require('path');\n\nconst DATA_DIR = path.join(__dirname, 'data');\nconst HAZARDS_FILE = path.join(DATA_DIR, 'maritime_hazards.json');\nconst TRAFFIC_FILE = path.join(DATA_DIR, 'vessel_traffic.json');\n\n// Helper: Read JSON file\nasync function readJsonFile(filePath, defaultValue = []) {\n  try {\n    const data = await fs.readFile(filePath, 'utf8');\n    return JSON.parse(data);\n  } catch (error) {\n    return defaultValue;\n  }\n}\n\n// Helper: Write JSON file\nasync function writeJsonFile(filePath, data) {\n  try {\n    await fs.writeFile(filePath, JSON.stringify(data, null, 2));\n    return true;\n  } catch (error) {\n    console.error(`Error writing ${filePath}:`, error);\n    return false;\n  }\n}\n\n// Calculate distance between two points in nautical miles\nfunction calculateDistanceNM(point1, point2) {\n  const R = 3440.065; // Earth radius in nautical miles\n  const lat1 = point1.lat * Math.PI / 180;\n  const lat2 = point2.lat * Math.PI / 180;\n  const deltaLat = (point2.lat - point1.lat) * Math.PI / 180;\n  const deltaLng = (point2.lng - point1.lng) * Math.PI / 180;\n\n  const a = Math.sin(deltaLat/2) * Math.sin(deltaLat/2) +\n           Math.cos(lat1) * Math.cos(lat2) *\n           Math.sin(deltaLng/2) * Math.sin(deltaLng/2);\n  const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));\n\n  return R * c;\n}\n\n// Calculate bearing between two points\nfunction calculateBearing(lat1, lng1, lat2, lng2) {\n  const dLon = (lng2 - lng1) * Math.PI / 180;\n  const lat1Rad = lat1 * Math.PI / 180;\n  const lat2Rad = lat2 * Math.PI / 180;\n\n  const y = Math.sin(dLon) * Math.cos(lat2Rad);\n  const x = Math.cos(lat1Rad) * Math.sin(lat2Rad) -\n           Math.sin(lat1Rad) * Math.cos(lat2Rad) * Math.cos(dLon);\n  const bearing = Math.atan2(y, x) * 180 / Math.PI;\n\n  return (bearing + 360) % 360;\n}\n\n// Get cardinal direction from bearing\nfunction getCardinalDirection(bearing) {\n  const directions = ['N', 'NE', 'E', 'SE', 'S', 'SW', 'W', 'NW'];\n  const index = Math.round(bearing / 45) % 8;\n  return directions[index];\n}\n\n// Calculate maritime route\nasync function calculateRoute(origin, destination, preferences = {}) {\n  try {\n    // Validate coordinates\n    const originLat = parseFloat(origin.lat);\n    const originLng = parseFloat(origin.lng);\n    const destLat = parseFloat(destination.lat);\n    const destLng = parseFloat(destination.lng);\n\n    if (isNaN(originLat) || isNaN(originLng) || isNaN(destLat) || isNaN(destLng)) {\n      throw new Error('Invalid coordinates provided');\n    }\n\n    // Create GeoJSON Point features for searoute-js\n    const originPoint = {\n      type: 'Feature',\n      properties: {},\n      geometry: {\n        type: 'Point',\n        coordinates: [originLng, originLat]\n      }\n    };\n\n    const destinationPoint = {\n      type: 'Feature',\n      properties: {},\n      geometry: {\n        type: 'Point',\n        coordinates: [destLng, destLat]\n      }\n    };\n\n    console.log('Calculating route from:', originPoint.geometry.coordinates, 'to:', destinationPoint.geometry.coordinates);\n\n    // Calculate route using searoute-js (returns GeoJSON LineString)\n    let routeResult;\n    try {\n      routeResult = seaRoute(originPoint, destinationPoint, 'nm');\n      console.log('Searoute result:', routeResult ? 'success' : 'null/undefined');\n    } catch (searouteError) {\n      console.error('Searoute library error:', searouteError);\n      throw new Error('Unable to find a valid sea route between these coordinates. Ensure both points are accessible by water.');\n    }\n\n    if (!routeResult || !routeResult.geometry || !routeResult.geometry.coordinates) {\n      throw new Error('Searoute returned invalid result. Coordinates may not be accessible by sea.');\n    }\n\n    // Extract waypoints from GeoJSON\n    const waypoints = routeResult.geometry.coordinates;\n    const distanceNM = routeResult.properties.length || 0;\n    \n    // Calculate duration based on speed\n    const speedKnots = preferences.speed || 15;\n    const durationHours = distanceNM / speedKnots;\n\n    // Convert waypoints to lat/lng format\n    const formattedWaypoints = waypoints.map(coord => ({\n      lat: coord[1],\n      lng: coord[0]\n    }));\n\n    // Load hazards and traffic data\n    const hazards = await readJsonFile(HAZARDS_FILE, []);\n    const now = new Date();\n    const activeHazards = hazards.filter(h => new Date(h.expiresAt) > now);\n    \n    const trafficData = await readJsonFile(TRAFFIC_FILE, []);\n    const sixHoursAgo = new Date(now.getTime() - 6 * 60 * 60 * 1000);\n    const recentTraffic = trafficData.filter(t => new Date(t.timestamp) > sixHoursAgo);\n\n    // Analyze route for hazards and traffic\n    const routeHazards = [];\n    let trafficDensity = 'low';\n    let safetyScore = 100;\n\n    for (const waypoint of formattedWaypoints) {\n      // Check for nearby hazards\n      for (const hazard of activeHazards) {\n        const dist = calculateDistanceNM(waypoint, { lat: hazard.lat, lng: hazard.lng });\n        if (dist < 5) { // Within 5nm\n          routeHazards.push({\n            type: hazard.type,\n            severity: hazard.severity,\n            distance: Math.round(dist * 100) / 100,\n            description: hazard.description,\n            waypoint\n          });\n\n          // Decrease safety score based on severity\n          const severityImpact = { low: 5, medium: 10, high: 20, critical: 40 };\n          safetyScore -= severityImpact[hazard.severity] || 10;\n        }\n      }\n\n      // Check traffic density\n      const nearbyTraffic = recentTraffic.filter(t => \n        calculateDistanceNM(waypoint, { lat: t.lat, lng: t.lng }) < 10\n      );\n      \n      if (nearbyTraffic.length > 5) {\n        trafficDensity = 'high';\n        safetyScore -= 15;\n      } else if (nearbyTraffic.length > 2 && trafficDensity !== 'high') {\n        trafficDensity = 'medium';\n        safetyScore -= 5;\n      }\n    }\n\n    safetyScore = Math.max(0, Math.min(100, safetyScore));\n\n    // Create turn-by-turn directions\n    const directions = [];\n    for (let i = 0; i < formattedWaypoints.length - 1; i++) {\n      const wp1 = formattedWaypoints[i];\n      const wp2 = formattedWaypoints[i + 1];\n\n      const bearing = calculateBearing(wp1.lat, wp1.lng, wp2.lat, wp2.lng);\n      const distance = calculateDistanceNM(wp1, wp2);\n      const direction = getCardinalDirection(bearing);\n\n      directions.push({\n        step: i + 1,\n        instruction: `Proceed ${direction} for ${Math.round(distance * 10) / 10} NM`,\n        bearing: Math.round(bearing),\n        distance: Math.round(distance * 10) / 10,\n        waypoint: wp2\n      });\n    }\n\n    // Generate AI prediction\n    const prediction = {\n      estimatedDelay: Math.round(routeHazards.length * 0.5), // 0.5 hours per hazard\n      weatherRisk: routeHazards.some(h => h.type === 'weather') ? 'high' : 'low',\n      collisionRisk: trafficDensity === 'high' ? 'high' : trafficDensity === 'medium' ? 'medium' : 'low',\n      fuelEfficiency: 85 - (trafficDensity === 'high' ? 15 : trafficDensity === 'medium' ? 8 : 0),\n      recommendedSpeed: speedKnots\n    };\n\n    // Generate recommendations\n    const recommendations = [];\n    if (routeHazards.length > 0) {\n      recommendations.push(`Warning: ${routeHazards.length} hazard(s) detected along route`);\n    }\n    if (trafficDensity === 'high') {\n      recommendations.push('High traffic density - reduce speed and maintain vigilance');\n    }\n    if (safetyScore < 70) {\n      recommendations.push('Route safety score below optimal - consider alternative route');\n    }\n\n    return {\n      success: true,\n      route: {\n        coordinates: formattedWaypoints, // Frontend expects 'coordinates', not 'waypoints'\n        waypoints: formattedWaypoints,   // Keep for backward compatibility\n        distance: Math.round(distanceNM * 10) / 10,\n        duration: Math.round(durationHours * 10) / 10,\n        directions,\n        origin,\n        destination,\n        safetyScore,\n        trafficDensity,\n        hazards: routeHazards,\n        prediction,\n        recommendations,\n        alternativeRoutes: [] // Add empty array for alternatives\n      }\n    };\n  } catch (error) {\n    console.error('Error calculating route:', error);\n    console.error('Error details:', {\n      origin,\n      destination,\n      errorMessage: error.message,\n      errorStack: error.stack\n    });\n    return {\n      success: false,\n      error: 'Failed to calculate route. Please ensure coordinates are in ocean/water and accessible by sea.'\n    };\n  }\n}\n\n// Report a hazard\nasync function reportHazard(hazardData) {\n  try {\n    const hazards = await readJsonFile(HAZARDS_FILE, []);\n    \n    const newHazard = {\n      id: `hazard_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`,\n      type: hazardData.type,\n      severity: hazardData.severity,\n      lat: parseFloat(hazardData.lat),\n      lng: parseFloat(hazardData.lng),\n      description: hazardData.description,\n      reportedBy: hazardData.reportedBy,\n      vesselId: hazardData.vesselId,\n      timestamp: new Date().toISOString(),\n      expiresAt: new Date(Date.now() + (hazardData.expiryHours || 24) * 60 * 60 * 1000).toISOString(),\n      verified: false,\n      upvotes: 0,\n      downvotes: 0\n    };\n\n    hazards.push(newHazard);\n    await writeJsonFile(HAZARDS_FILE, hazards);\n\n    return { success: true, hazard: newHazard };\n  } catch (error) {\n    console.error('Error reporting hazard:', error);\n    return { success: false, error: error.message };\n  }\n}\n\n// Get nearby hazards\nasync function getNearbyHazards(lat, lng, radius = 50) {\n  try {\n    const hazards = await readJsonFile(HAZARDS_FILE, []);\n    const now = new Date();\n    const activeHazards = hazards.filter(h => new Date(h.expiresAt) > now);\n\n    const nearbyHazards = activeHazards\n      .map(hazard => ({\n        ...hazard,\n        distance: calculateDistanceNM({ lat, lng }, { lat: hazard.lat, lng: hazard.lng })\n      }))\n      .filter(hazard => hazard.distance <= radius)\n      .sort((a, b) => a.distance - b.distance);\n\n    return { success: true, hazards: nearbyHazards };\n  } catch (error) {\n    console.error('Error getting nearby hazards:', error);\n    return { success: false, error: error.message };\n  }\n}\n\n// Report traffic\nasync function reportTraffic(trafficData) {\n  try {\n    const traffic = await readJsonFile(TRAFFIC_FILE, []);\n    \n    const newTraffic = {\n      id: `traffic_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`,\n      lat: parseFloat(trafficData.lat),\n      lng: parseFloat(trafficData.lng),\n      density: trafficData.density,\n      vesselCount: trafficData.vesselCount || 1,\n      timestamp: new Date().toISOString(),\n      reportedBy: trafficData.reportedBy\n    };\n\n    traffic.push(newTraffic);\n    await writeJsonFile(TRAFFIC_FILE, traffic);\n\n    return { success: true, report: newTraffic };\n  } catch (error) {\n    console.error('Error reporting traffic:', error);\n    return { success: false, error: error.message };\n  }\n}\n\nmodule.exports = {\n  calculateRoute,\n  reportHazard,\n  getNearbyHazards,\n  reportTraffic\n};\n","size_bytes":11048},"attached_assets/expo_ui_reference/Expo1234/backend/server.js":{"content":"\nconst express = require('express');\nconst cors = require('cors');\nconst http = require('http');\nconst { Server } = require('socket.io');\nconst fs = require('fs').promises;\nconst path = require('path');\n\nconst app = express();\nconst server = http.createServer(app);\nconst io = new Server(server, {\n  cors: {\n    origin: '*',\n    methods: ['GET', 'POST']\n  }\n});\n\nconst PORT = process.env.PORT || 3000;\nconst DATA_DIR = path.join(__dirname, 'data');\nconst VESSELS_FILE = path.join(DATA_DIR, 'vessels.json');\nconst USERS_FILE = path.join(DATA_DIR, 'users.json');\nconst MESSAGES_FILE = path.join(DATA_DIR, 'messages.json');\nconst NOTIFICATIONS_FILE = path.join(DATA_DIR, 'notifications.json');\nconst BOAT_LIKES_FILE = path.join(DATA_DIR, 'boat_likes.json');\nconst BOAT_COMMENTS_FILE = path.join(DATA_DIR, 'boat_comments.json');\nconst PORTS_FILE = path.join(DATA_DIR, 'ports.json');\n\napp.use(cors());\napp.use(express.json());\n\nasync function ensureDataFiles() {\n  try {\n    await fs.mkdir(DATA_DIR, { recursive: true });\n    \n    const files = [\n      { path: VESSELS_FILE, data: [] },\n      { path: USERS_FILE, data: [] },\n      { path: MESSAGES_FILE, data: [] },\n      { path: NOTIFICATIONS_FILE, data: [] },\n      { path: BOAT_LIKES_FILE, data: [] },\n      { path: BOAT_COMMENTS_FILE, data: [] }\n    ];\n    \n    for (const file of files) {\n      try {\n        await fs.access(file.path);\n      } catch {\n        await fs.writeFile(file.path, JSON.stringify(file.data, null, 2));\n      }\n    }\n    \n    console.log('Data files initialized');\n  } catch (error) {\n    console.error('Error ensuring data files:', error);\n  }\n}\n\nasync function readJsonFile(filePath) {\n  try {\n    const data = await fs.readFile(filePath, 'utf8');\n    return JSON.parse(data);\n  } catch (error) {\n    console.error(`Error reading ${filePath}:`, error);\n    return [];\n  }\n}\n\nasync function writeJsonFile(filePath, data) {\n  try {\n    await fs.writeFile(filePath, JSON.stringify(data, null, 2));\n    return true;\n  } catch (error) {\n    console.error(`Error writing ${filePath}:`, error);\n    return false;\n  }\n}\n\nfunction calculateDistance(lat1, lon1, lat2, lon2) {\n  const R = 6371;\n  const dLat = (lat2 - lat1) * Math.PI / 180;\n  const dLon = (lon2 - lon1) * Math.PI / 180;\n  const a = \n    Math.sin(dLat/2) * Math.sin(dLat/2) +\n    Math.cos(lat1 * Math.PI / 180) * Math.cos(lat2 * Math.PI / 180) *\n    Math.sin(dLon/2) * Math.sin(dLon/2);\n  const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));\n  return R * c;\n}\n\napp.get('/api/health', (req, res) => {\n  res.json({ status: 'ok', message: 'MarineTrack backend server running' });\n});\n\napp.get('/api/vessels', async (req, res) => {\n  try {\n    const vessels = await readJsonFile(VESSELS_FILE);\n    res.json(vessels);\n  } catch (error) {\n    res.status(500).json({ error: 'Failed to fetch vessels' });\n  }\n});\n\napp.get('/api/vessels/nearby', async (req, res) => {\n  try {\n    const { lat, lng, radius = 100 } = req.query;\n    \n    if (!lat || !lng) {\n      return res.status(400).json({ error: 'Latitude and longitude required' });\n    }\n    \n    const vessels = await readJsonFile(VESSELS_FILE);\n    const userLat = parseFloat(lat);\n    const userLng = parseFloat(lng);\n    const radiusKm = parseFloat(radius);\n    \n    const nearbyVessels = vessels.filter(vessel => {\n      const distance = calculateDistance(\n        userLat,\n        userLng,\n        vessel.location.latitude,\n        vessel.location.longitude\n      );\n      return distance <= radiusKm;\n    });\n    \n    res.json(nearbyVessels);\n  } catch (error) {\n    res.status(500).json({ error: 'Failed to fetch nearby vessels' });\n  }\n});\n\napp.post('/api/tracking', async (req, res) => {\n  try {\n    const trackingData = req.body;\n    \n    if (!trackingData.userId || !trackingData.vesselInfo || !trackingData.location) {\n      return res.status(400).json({ error: 'Invalid tracking data' });\n    }\n    \n    const vessels = await readJsonFile(VESSELS_FILE);\n    const existingIndex = vessels.findIndex(v => v.userId === trackingData.userId);\n    \n    const vesselData = {\n      id: trackingData.userId,\n      ...trackingData,\n      lastUpdate: new Date().toISOString()\n    };\n    \n    if (existingIndex >= 0) {\n      vessels[existingIndex] = vesselData;\n    } else {\n      vessels.push(vesselData);\n    }\n    \n    await writeJsonFile(VESSELS_FILE, vessels);\n    io.emit('vessel_update', vesselData);\n    \n    res.json({ success: true, message: 'Tracking data saved' });\n  } catch (error) {\n    console.error('Error saving tracking data:', error);\n    res.status(500).json({ error: 'Failed to save tracking data' });\n  }\n});\n\napp.get('/api/messages', async (req, res) => {\n  try {\n    const messages = await readJsonFile(MESSAGES_FILE);\n    res.json(messages);\n  } catch (error) {\n    res.status(500).json({ error: 'Failed to fetch messages' });\n  }\n});\n\napp.post('/api/messages', async (req, res) => {\n  try {\n    const message = req.body;\n    const messages = await readJsonFile(MESSAGES_FILE);\n    \n    const newMessage = {\n      ...message,\n      id: Date.now().toString(),\n      timestamp: new Date().toISOString()\n    };\n    \n    messages.push(newMessage);\n    await writeJsonFile(MESSAGES_FILE, messages);\n    \n    io.emit('new_message', newMessage);\n    \n    res.json({ success: true, message: newMessage });\n  } catch (error) {\n    res.status(500).json({ error: 'Failed to save message' });\n  }\n});\n\nio.on('connection', (socket) => {\n  console.log('Client connected:', socket.id);\n  \n  socket.on('vessel_location', async (data) => {\n    try {\n      const vessels = await readJsonFile(VESSELS_FILE);\n      const existingIndex = vessels.findIndex(v => v.userId === data.userId);\n      \n      const vesselData = {\n        id: data.userId,\n        ...data,\n        lastUpdate: new Date().toISOString()\n      };\n      \n      if (existingIndex >= 0) {\n        vessels[existingIndex] = vesselData;\n      } else {\n        vessels.push(vesselData);\n      }\n      \n      await writeJsonFile(VESSELS_FILE, vessels);\n      socket.broadcast.emit('vessel_update', vesselData);\n    } catch (error) {\n      console.error('Error handling vessel location:', error);\n    }\n  });\n  \n  socket.on('chat_message', async (data) => {\n    try {\n      const messages = await readJsonFile(MESSAGES_FILE);\n      const newMessage = {\n        ...data,\n        id: Date.now().toString(),\n        timestamp: new Date().toISOString()\n      };\n      \n      messages.push(newMessage);\n      await writeJsonFile(MESSAGES_FILE, messages);\n      io.emit('new_message', newMessage);\n    } catch (error) {\n      console.error('Error handling chat message:', error);\n    }\n  });\n  \n  socket.on('disconnect', () => {\n    console.log('Client disconnected:', socket.id);\n  });\n});\n\nasync function startServer() {\n  await ensureDataFiles();\n  \n  server.listen(PORT, '0.0.0.0', () => {\n    console.log(`MarineTrack backend server running on port ${PORT}`);\n    console.log(`Health check: http://localhost:${PORT}/api/health`);\n    console.log(`Data directory: ${DATA_DIR}`);\n  });\n}\n\nstartServer();\n","size_bytes":7050},"attached_assets/expo_ui_reference/Expo1234/app/(tabs)/tasks/_layout.tsx":{"content":"import { Stack } from 'expo-router';\nimport { useColorScheme } from '@/hooks/useColorScheme';\n\nexport default function TasksLayout() {\n  const colorScheme = useColorScheme();\n  const isDark = colorScheme === 'dark';\n\n  return (\n    <Stack\n      screenOptions={{\n        headerStyle: {\n          backgroundColor: isDark ? '#1C1C1E' : '#FFF',\n        },\n        headerTintColor: isDark ? '#FFF' : '#000',\n        headerShadowVisible: false,\n      }}\n    >\n      <Stack.Screen \n        name=\"index\" \n        options={{ \n          headerShown: false\n        }} \n      />\n      <Stack.Screen \n        name=\"[id]\" \n        options={{ \n          title: 'Task Details',\n          headerBackTitle: 'Tasks'\n        }} \n      />\n    </Stack>\n  );\n}\n","size_bytes":738},"attached_assets/expo_ui_reference/Expo1234/types/maritime.ts":{"content":"\nexport interface Vessel {\n  id: string;\n  name: string;\n  mmsi: string;\n  imo?: string;\n  type: string;\n  latitude: number;\n  longitude: number;\n  speed: number;\n  heading: number;\n  lastUpdate: number;\n  distance?: number;\n}\n\nexport interface Hazard {\n  id: string;\n  type: 'debris' | 'shallow_water' | 'weather' | 'congestion' | 'restricted_zone';\n  latitude: number;\n  longitude: number;\n  severity: 'low' | 'medium' | 'high' | 'critical';\n  description: string;\n  reportedBy: string;\n  upvotes: number;\n  downvotes: number;\n  timestamp: number;\n  verified: boolean;\n}\n\nexport interface Route {\n  id: string;\n  waypoints: Array<{latitude: number; longitude: number}>;\n  distance: number;\n  estimatedTime: number;\n  safetyScore: number;\n  hazards: Hazard[];\n}\n\nexport interface WeatherData {\n  temperature: number;\n  windSpeed: number;\n  windDirection: number;\n  waveHeight: number;\n  visibility: number;\n  seaState: string;\n  timestamp: number;\n}\n\nexport interface ChatMessage {\n  id: string;\n  vesselId: string;\n  vesselName: string;\n  message: string;\n  timestamp: number;\n  distance: number;\n}\n\nexport interface SOSAlert {\n  id: string;\n  vesselId: string;\n  vesselName: string;\n  latitude: number;\n  longitude: number;\n  timestamp: number;\n  status: 'active' | 'responded' | 'resolved';\n}\n","size_bytes":1297},"attached_assets/expo_ui_reference/Expo1234/app/(tabs)/profile.tsx":{"content":"import React from 'react';\nimport { View, Text, ScrollView, TouchableOpacity, StyleSheet, Image } from 'react-native';\nimport { useColorScheme } from '@/hooks/useColorScheme';\nimport { IconSymbol } from '@/components/ui/IconSymbol';\nimport { router } from 'expo-router';\n\nexport default function ProfileScreen() {\n  const colorScheme = useColorScheme();\n  const isDark = colorScheme === 'dark';\n\n  const stats = [\n    { label: 'Tasks\\nCompleted', value: '156', color: '#34C759' },\n    { label: 'Service\\nExpenses', value: '5 yrs', color: '#007AFF' },\n    { label: 'Expenses', value: '$12.5k', color: '#FF9500' },\n  ];\n\n  const menuItems = [\n    { icon: 'house.fill', title: 'Hull Maintenance', color: '#FF3B30', badge: '' },\n    { icon: 'house.fill', title: 'Engine Fluids', color: '#007AFF', badge: '' },\n    { icon: 'house.fill', title: 'Electrical Systems', color: '#34C759', badge: '' },\n    { icon: 'house.fill', title: 'Aesthetics', color: '#FF9500', badge: '' },\n  ];\n\n  return (\n    <View style={[styles.container, { backgroundColor: isDark ? '#000' : '#F2F2F7' }]}>\n      <View style={[styles.header, { backgroundColor: isDark ? '#000' : '#F2F2F7' }]}>\n        <TouchableOpacity onPress={() => router.back()}>\n          <IconSymbol name=\"chevron.left.forwardslash.chevron.right\" size={24} color={isDark ? '#FFF' : '#000'} />\n        </TouchableOpacity>\n        <Text style={[styles.headerTitle, { color: isDark ? '#FFF' : '#000' }]}>Profile</Text>\n        <View style={{ width: 24 }} />\n      </View>\n\n      <ScrollView style={styles.content} showsVerticalScrollIndicator={false}>\n        <View style={styles.profileHeader}>\n          <Image \n            source={require('@/assets/images/partial-react-logo.png')}\n            style={styles.profileImage}\n          />\n          <View style={styles.profileInfo}>\n            <Text style={[styles.profileName, { color: isDark ? '#FFF' : '#000' }]}>Andrison Holland</Text>\n            <Text style={[styles.profileRole, { color: isDark ? '#8E8E93' : '#6C6C70' }]}>Explorer of the Waves</Text>\n            <TouchableOpacity style={styles.contactButton}>\n              <Text style={styles.contactButtonText}>Contact</Text>\n            </TouchableOpacity>\n          </View>\n        </View>\n\n        <View style={styles.categoriesRow}>\n          <TouchableOpacity style={[styles.categoryButton, { backgroundColor: isDark ? '#1C1C1E' : '#E8F4FF' }]}>\n            <Text style={[styles.categoryText, { color: '#007AFF' }]}>Hull Maintenance</Text>\n          </TouchableOpacity>\n          <TouchableOpacity style={[styles.categoryButton, { backgroundColor: isDark ? '#1C1C1E' : '#FFF' }]}>\n            <Text style={[styles.categoryText, { color: isDark ? '#8E8E93' : '#6C6C70' }]}>Engine Fluids</Text>\n          </TouchableOpacity>\n          <TouchableOpacity style={[styles.categoryButton, { backgroundColor: isDark ? '#1C1C1E' : '#FFF' }]}>\n            <Text style={[styles.categoryText, { color: isDark ? '#8E8E93' : '#6C6C70' }]}>Aesthetics</Text>\n          </TouchableOpacity>\n        </View>\n\n        <View style={styles.statsRow}>\n          {stats.map((stat, index) => (\n            <View key={index} style={[styles.statCard, { backgroundColor: isDark ? '#1C1C1E' : '#FFF' }]}>\n              <Text style={[styles.statValue, { color: stat.color }]}>{stat.value}</Text>\n              <Text style={[styles.statLabel, { color: isDark ? '#8E8E93' : '#6C6C70' }]}>{stat.label}</Text>\n            </View>\n          ))}\n        </View>\n\n        <Text style={[styles.sectionTitle, { color: isDark ? '#FFF' : '#000' }]}>About</Text>\n        <Text style={[styles.aboutText, { color: isDark ? '#8E8E93' : '#6C6C70' }]}>\n          A passionate boat enthusiast with a love for the open sea. I enjoy maintaining my vessels and exploring new waterways. With years of experience in boat maintenance and navigation, I'm always ready for the next adventure on the water.\n        </Text>\n      </ScrollView>\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n  },\n  header: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    paddingHorizontal: 20,\n    paddingTop: 60,\n    paddingBottom: 16,\n  },\n  headerTitle: {\n    fontSize: 20,\n    fontWeight: '600',\n  },\n  content: {\n    flex: 1,\n    paddingHorizontal: 20,\n  },\n  profileHeader: {\n    alignItems: 'center',\n    marginBottom: 24,\n  },\n  profileImage: {\n    width: 100,\n    height: 100,\n    borderRadius: 50,\n    marginBottom: 16,\n  },\n  profileInfo: {\n    alignItems: 'center',\n  },\n  profileName: {\n    fontSize: 24,\n    fontWeight: 'bold',\n    marginBottom: 4,\n  },\n  profileRole: {\n    fontSize: 14,\n    marginBottom: 16,\n  },\n  contactButton: {\n    backgroundColor: '#007AFF',\n    paddingHorizontal: 32,\n    paddingVertical: 10,\n    borderRadius: 20,\n  },\n  contactButtonText: {\n    color: '#FFF',\n    fontSize: 14,\n    fontWeight: '600',\n  },\n  categoriesRow: {\n    flexDirection: 'row',\n    gap: 8,\n    marginBottom: 24,\n  },\n  categoryButton: {\n    paddingHorizontal: 16,\n    paddingVertical: 8,\n    borderRadius: 20,\n  },\n  categoryText: {\n    fontSize: 12,\n    fontWeight: '500',\n  },\n  statsRow: {\n    flexDirection: 'row',\n    gap: 12,\n    marginBottom: 24,\n  },\n  statCard: {\n    flex: 1,\n    padding: 16,\n    borderRadius: 12,\n    alignItems: 'center',\n  },\n  statValue: {\n    fontSize: 24,\n    fontWeight: 'bold',\n    marginBottom: 4,\n  },\n  statLabel: {\n    fontSize: 12,\n    textAlign: 'center',\n  },\n  sectionTitle: {\n    fontSize: 18,\n    fontWeight: '600',\n    marginBottom: 12,\n  },\n  aboutText: {\n    fontSize: 14,\n    lineHeight: 20,\n    marginBottom: 24,\n  },\n});","size_bytes":5648},"attached_assets/expo_ui_reference/Expo1234/attached_assets/backend_1762898628948.ts":{"content":"\n// üåê Backend Configuration\n// Update this with your local machine's IP address\n// Example for LAN testing: 'http://192.168.1.100:3000'\n// ‚ö†Ô∏è Make sure this IP is reachable from your mobile device if using Expo!\n\n// IMPORTANT: Replace this with your actual local IP address\n// Find it by running: ipconfig (Windows) or ifconfig (Mac/Linux)\nconst LOCAL_IP = '192.168.0.194'; // <<< CHANGE THIS TO YOUR ACTUAL IP\n\nexport const BACKEND_CONFIG = {\n  // Local machine IP\n  URL: `http://${LOCAL_IP}:3000`,\n\n  // WebSocket URL (automatically derived from the HTTP URL)\n  get WS_URL() {\n    return this.URL.replace(/^http/, \"ws\");\n  },\n};\n\n// ‚úÖ Helper: Check if backend server is reachable\nexport const checkBackendConnection = async (): Promise<boolean> => {\n  const healthUrl = `${BACKEND_CONFIG.URL}/api/health`;\n\n  try {\n    console.log(\"üîç Checking backend connectivity at:\", healthUrl);\n\n    const response = await fetch(healthUrl, {\n      method: \"GET\",\n      headers: { \"Content-Type\": \"application/json\" },\n    });\n\n    if (!response.ok) {\n      console.warn(\n        \"‚ö†Ô∏è Backend health check failed with status:\",\n        response.status,\n      );\n      return false;\n    }\n\n    const data = await response.text();\n    console.log(\"‚úÖ Backend reachable. Response:\", data || \"OK\");\n    return true;\n  } catch (error) {\n    console.error(\"üö® Backend connection failed:\", error);\n    return false;\n  }\n};\n","size_bytes":1422},"components/redesign/WeatherWidget.tsx":{"content":"import React from 'react';\nimport { View, Text, StyleSheet } from 'react-native';\nimport { useColorScheme } from '@/hooks/useColorScheme';\nimport { Colors } from '@/constants/Colors';\nimport { Theme } from '@/constants/Theme';\n\ninterface WeatherWidgetProps {\n  temperature: string;\n  condition: string;\n  emoji: string;\n  subtitle?: string;\n}\n\nexport function WeatherWidget({ temperature, condition, emoji, subtitle }: WeatherWidgetProps) {\n  const colorScheme = useColorScheme();\n  const isDark = colorScheme === 'dark';\n  const colors = Colors[isDark ? 'dark' : 'light'];\n\n  return (\n    <View\n      style={[\n        styles.container,\n        { backgroundColor: isDark ? colors.card : '#E8F4FF' },\n        Theme.shadows.sm,\n      ]}\n    >\n      <View>\n        <Text style={[styles.label, { color: colors.secondaryText }]}>Today's Weather</Text>\n        <Text style={[styles.temperature, { color: colors.text }]}>{condition}, {temperature}</Text>\n        {subtitle && (\n          <Text style={[styles.subtitle, { color: colors.secondaryText }]}>{subtitle}</Text>\n        )}\n      </View>\n      <Text style={styles.emoji}>{emoji}</Text>\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    padding: Theme.spacing.lg,\n    borderRadius: Theme.radius.md,\n  },\n  label: {\n    fontSize: Theme.fonts.sizes.md,\n    marginBottom: Theme.spacing.xs,\n  },\n  temperature: {\n    fontSize: Theme.fonts.sizes.xxl,\n    fontWeight: Theme.fonts.weights.bold,\n    marginBottom: Theme.spacing.xs,\n  },\n  subtitle: {\n    fontSize: Theme.fonts.sizes.md,\n  },\n  emoji: {\n    fontSize: 48,\n  },\n});\n","size_bytes":1685},"attached_assets/expo_ui_reference/Expo1234/components/ThemedView.tsx":{"content":"import { View, type ViewProps } from 'react-native';\n\nimport { useThemeColor } from '@/hooks/useThemeColor';\n\nexport type ThemedViewProps = ViewProps & {\n  lightColor?: string;\n  darkColor?: string;\n};\n\nexport function ThemedView({ style, lightColor, darkColor, ...otherProps }: ThemedViewProps) {\n  const backgroundColor = useThemeColor({ light: lightColor, dark: darkColor }, 'background');\n\n  return <View style={[{ backgroundColor }, style]} {...otherProps} />;\n}\n","size_bytes":468},"attached_assets/expo_ui_reference/Expo1234/hooks/useThemeColor.ts":{"content":"/**\n * Learn more about light and dark modes:\n * https://docs.expo.dev/guides/color-schemes/\n */\n\nimport { Colors } from '@/constants/Colors';\nimport { useColorScheme } from '@/hooks/useColorScheme';\n\nexport function useThemeColor(\n  props: { light?: string; dark?: string },\n  colorName: keyof typeof Colors.light & keyof typeof Colors.dark\n) {\n  const theme = useColorScheme() ?? 'light';\n  const colorFromProps = props[theme];\n\n  if (colorFromProps) {\n    return colorFromProps;\n  } else {\n    return Colors[theme][colorName];\n  }\n}\n","size_bytes":536},"attached_assets/expo_ui_reference/Expo1234/app/(tabs)/_layout.tsx":{"content":"\nimport { Tabs } from 'expo-router';\nimport React from 'react';\nimport { View } from 'react-native';\n\nimport { HapticTab } from '@/components/HapticTab';\nimport { IconSymbol } from '@/components/ui/IconSymbol';\nimport { useColorScheme } from '@/hooks/useColorScheme';\n\nexport default function TabLayout() {\n  const colorScheme = useColorScheme();\n  const isDark = colorScheme === 'dark';\n\n  return (\n    <Tabs\n      screenOptions={{\n        tabBarActiveTintColor: '#007AFF',\n        tabBarInactiveTintColor: isDark ? '#8E8E93' : '#C7C7CC',\n        headerShown: false,\n        tabBarButton: HapticTab,\n        tabBarShowLabel: false,\n        tabBarStyle: {\n          backgroundColor: isDark ? '#1C1C1E' : '#FFFFFF',\n          borderTopWidth: 0,\n          height: 70,\n          paddingBottom: 10,\n          paddingTop: 10,\n          elevation: 0,\n          shadowColor: '#000',\n          shadowOffset: { width: 0, height: -2 },\n          shadowOpacity: 0.05,\n          shadowRadius: 8,\n        },\n      }}>\n      <Tabs.Screen\n        name=\"index\"\n        options={{\n          title: '',\n          tabBarIcon: ({ color }) => (\n            <View style={{ alignItems: 'center', justifyContent: 'center' }}>\n              <IconSymbol size={28} name=\"house.fill\" color={color} />\n            </View>\n          ),\n        }}\n      />\n      <Tabs.Screen\n        name=\"add\"\n        options={{\n          title: '',\n          tabBarIcon: ({ color, focused }) => (\n            <View style={{\n              width: 60,\n              height: 60,\n              borderRadius: 30,\n              backgroundColor: focused ? '#007AFF' : '#007AFF',\n              justifyContent: 'center',\n              alignItems: 'center',\n              marginBottom: 25,\n              shadowColor: '#007AFF',\n              shadowOffset: { width: 0, height: 4 },\n              shadowOpacity: 0.3,\n              shadowRadius: 8,\n              elevation: 8,\n            }}>\n              <IconSymbol size={32} name=\"plus\" color=\"#FFFFFF\" />\n            </View>\n          ),\n        }}\n      />\n      <Tabs.Screen\n        name=\"tasks\"\n        options={{\n          title: '',\n          tabBarIcon: ({ color }) => (\n            <View style={{ alignItems: 'center', justifyContent: 'center' }}>\n              <IconSymbol size={28} name=\"checklist\" color={color} />\n            </View>\n          ),\n        }}\n      />\n      <Tabs.Screen\n        name=\"navigation\"\n        options={{\n          href: null,\n        }}\n      />\n      <Tabs.Screen\n        name=\"boats\"\n        options={{\n          href: null,\n        }}\n      />\n      <Tabs.Screen\n        name=\"profile\"\n        options={{\n          href: null,\n        }}\n      />\n      <Tabs.Screen\n        name=\"chat\"\n        options={{\n          href: null,\n        }}\n      />\n    </Tabs>\n  );\n}\n","size_bytes":2803},"attached_assets/expo_ui_reference/Expo1234/components/ui/TabBarBackground.tsx":{"content":"// This is a shim for web and Android where the tab bar is generally opaque.\nexport default undefined;\n\nexport function useBottomTabOverflow() {\n  return 0;\n}\n","size_bytes":159},"components/redesign/ProfileAvatar.tsx":{"content":"import React from 'react';\nimport { View, Image, StyleSheet, ImageSourcePropType } from 'react-native';\nimport { useColorScheme } from '@/hooks/useColorScheme';\nimport { Colors } from '@/constants/Colors';\nimport { Theme } from '@/constants/Theme';\nimport { IconSymbol } from '@/components/ui/IconSymbol';\n\ninterface ProfileAvatarProps {\n  source?: ImageSourcePropType;\n  size?: number;\n}\n\nexport function ProfileAvatar({ source, size = 100 }: ProfileAvatarProps) {\n  const colorScheme = useColorScheme();\n  const isDark = colorScheme === 'dark';\n  const colors = Colors[isDark ? 'dark' : 'light'];\n\n  return (\n    <View\n      style={[\n        styles.container,\n        { width: size, height: size, borderRadius: size / 2 },\n        Theme.shadows.md,\n      ]}\n    >\n      {source ? (\n        <Image source={source} style={[styles.image, { width: size, height: size, borderRadius: size / 2 }]} />\n      ) : (\n        <View style={[styles.placeholder, { width: size, height: size, borderRadius: size / 2, backgroundColor: colors.primary }]}>\n          <IconSymbol name=\"person.fill\" size={size * 0.5} color={colors.card} />\n        </View>\n      )}\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    overflow: 'hidden',\n  },\n  image: {\n    resizeMode: 'cover',\n  },\n  placeholder: {\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n});\n","size_bytes":1369},"attached_assets/expo_ui_reference/Expo1234/components/Collapsible.tsx":{"content":"import { PropsWithChildren, useState } from 'react';\nimport { StyleSheet, TouchableOpacity } from 'react-native';\n\nimport { ThemedText } from '@/components/ThemedText';\nimport { ThemedView } from '@/components/ThemedView';\nimport { IconSymbol } from '@/components/ui/IconSymbol';\nimport { Colors } from '@/constants/Colors';\nimport { useColorScheme } from '@/hooks/useColorScheme';\n\nexport function Collapsible({ children, title }: PropsWithChildren & { title: string }) {\n  const [isOpen, setIsOpen] = useState(false);\n  const theme = useColorScheme() ?? 'light';\n\n  return (\n    <ThemedView>\n      <TouchableOpacity\n        style={styles.heading}\n        onPress={() => setIsOpen((value) => !value)}\n        activeOpacity={0.8}>\n        <IconSymbol\n          name=\"chevron.right\"\n          size={18}\n          weight=\"medium\"\n          color={theme === 'light' ? Colors.light.icon : Colors.dark.icon}\n          style={{ transform: [{ rotate: isOpen ? '90deg' : '0deg' }] }}\n        />\n\n        <ThemedText type=\"defaultSemiBold\">{title}</ThemedText>\n      </TouchableOpacity>\n      {isOpen && <ThemedView style={styles.content}>{children}</ThemedView>}\n    </ThemedView>\n  );\n}\n\nconst styles = StyleSheet.create({\n  heading: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: 6,\n  },\n  content: {\n    marginTop: 6,\n    marginLeft: 24,\n  },\n});\n","size_bytes":1358},"attached_assets/expo_ui_reference/Expo1234/hooks/useColorScheme.web.ts":{"content":"import { useEffect, useState } from 'react';\nimport { useColorScheme as useRNColorScheme } from 'react-native';\n\n/**\n * To support static rendering, this value needs to be re-calculated on the client side for web\n */\nexport function useColorScheme() {\n  const [hasHydrated, setHasHydrated] = useState(false);\n\n  useEffect(() => {\n    setHasHydrated(true);\n  }, []);\n\n  const colorScheme = useRNColorScheme();\n\n  if (hasHydrated) {\n    return colorScheme;\n  }\n\n  return 'light';\n}\n","size_bytes":480},"attached_assets/expo_ui_reference/Expo1234/attached_assets/server_1762898628947.js":{"content":"const express = require('express');\nconst cors = require('cors');\nconst http = require('http');\nconst { Server } = require('socket.io');\nconst fs = require('fs').promises;\nconst path = require('path');\nconst maritimeRoutes = require('./maritime-routes');\n\nconst app = express();\nconst server = http.createServer(app);\nconst io = new Server(server, {\n  cors: {\n    origin: '*',\n    methods: ['GET', 'POST']\n  }\n});\n\nconst PORT = process.env.PORT || 3000;\nconst DATA_DIR = path.join(__dirname, 'data');\nconst VESSELS_FILE = path.join(DATA_DIR, 'vessels.json');\nconst USERS_FILE = path.join(DATA_DIR, 'users.json');\nconst MESSAGES_FILE = path.join(DATA_DIR, 'messages.json');\nconst NOTIFICATIONS_FILE = path.join(DATA_DIR, 'notifications.json');\nconst BOAT_LIKES_FILE = path.join(DATA_DIR, 'boat_likes.json');\nconst BOAT_COMMENTS_FILE = path.join(DATA_DIR, 'boat_comments.json');\nconst PORTS_FILE = path.join(DATA_DIR, 'ports.json');\n\napp.use(cors());\napp.use(express.json());\n\n// Ensure data directory and files exist\nasync function ensureDataFiles() {\n  try {\n    await fs.mkdir(DATA_DIR, { recursive: true });\n    \n    // Initialize vessels file if it doesn't exist\n    try {\n      await fs.access(VESSELS_FILE);\n    } catch {\n      await fs.writeFile(VESSELS_FILE, JSON.stringify([], null, 2));\n    }\n    \n    // Initialize users file if it doesn't exist\n    try {\n      await fs.access(USERS_FILE);\n    } catch {\n      await fs.writeFile(USERS_FILE, JSON.stringify([], null, 2));\n    }\n    \n    // Initialize messages file if it doesn't exist\n    try {\n      await fs.access(MESSAGES_FILE);\n    } catch {\n      await fs.writeFile(MESSAGES_FILE, JSON.stringify([], null, 2));\n    }\n    \n    // Initialize notifications file if it doesn't exist\n    try {\n      await fs.access(NOTIFICATIONS_FILE);\n    } catch {\n      await fs.writeFile(NOTIFICATIONS_FILE, JSON.stringify([], null, 2));\n    }\n    \n    // Initialize boat likes file if it doesn't exist\n    try {\n      await fs.access(BOAT_LIKES_FILE);\n    } catch {\n      await fs.writeFile(BOAT_LIKES_FILE, JSON.stringify([], null, 2));\n    }\n    \n    // Initialize boat comments file if it doesn't exist\n    try {\n      await fs.access(BOAT_COMMENTS_FILE);\n    } catch {\n      await fs.writeFile(BOAT_COMMENTS_FILE, JSON.stringify([], null, 2));\n    }\n    \n    console.log('Data files initialized');\n  } catch (error) {\n    console.error('Error ensuring data files:', error);\n  }\n}\n\n// Read JSON file helper\nasync function readJsonFile(filePath) {\n  try {\n    const data = await fs.readFile(filePath, 'utf8');\n    return JSON.parse(data);\n  } catch (error) {\n    console.error(`Error reading ${filePath}:`, error);\n    return [];\n  }\n}\n\n// Write JSON file helper\nasync function writeJsonFile(filePath, data) {\n  try {\n    await fs.writeFile(filePath, JSON.stringify(data, null, 2));\n    return true;\n  } catch (error) {\n    console.error(`Error writing ${filePath}:`, error);\n    return false;\n  }\n}\n\n// API Routes\n\n// Health check\napp.get('/api/health', (req, res) => {\n  res.json({ status: 'ok', message: 'MarineTrack backend server running' });\n});\n\n// Get all vessels\napp.get('/api/vessels', async (req, res) => {\n  try {\n    const vessels = await readJsonFile(VESSELS_FILE);\n    res.json(vessels);\n  } catch (error) {\n    res.status(500).json({ error: 'Failed to fetch vessels' });\n  }\n});\n\n// Get nearby vessels\napp.get('/api/vessels/nearby', async (req, res) => {\n  try {\n    const { lat, lng, radius = 100 } = req.query;\n    \n    if (!lat || !lng) {\n      return res.status(400).json({ error: 'Latitude and longitude required' });\n    }\n    \n    const vessels = await readJsonFile(VESSELS_FILE);\n    const userLat = parseFloat(lat);\n    const userLng = parseFloat(lng);\n    const radiusKm = parseFloat(radius);\n    \n    const nearbyVessels = vessels.filter(vessel => {\n      const distance = calculateDistance(\n        userLat,\n        userLng,\n        vessel.location.latitude,\n        vessel.location.longitude\n      );\n      return distance <= radiusKm;\n    });\n    \n    res.json(nearbyVessels);\n  } catch (error) {\n    res.status(500).json({ error: 'Failed to fetch nearby vessels' });\n  }\n});\n\n// Save vessel tracking data\napp.post('/api/tracking', async (req, res) => {\n  try {\n    const trackingData = req.body;\n    \n    if (!trackingData.userId || !trackingData.vesselInfo || !trackingData.location) {\n      return res.status(400).json({ error: 'Invalid tracking data' });\n    }\n    \n    const vessels = await readJsonFile(VESSELS_FILE);\n    const existingIndex = vessels.findIndex(v => v.userId === trackingData.userId);\n    \n    const vesselData = {\n      id: trackingData.userId, // Add id field for frontend compatibility\n      ...trackingData,\n      lastUpdate: new Date().toISOString()\n    };\n    \n    if (existingIndex >= 0) {\n      vessels[existingIndex] = vesselData;\n    } else {\n      vessels.push(vesselData);\n    }\n    \n    await writeJsonFile(VESSELS_FILE, vessels);\n    \n    // Broadcast to all connected clients\n    io.emit('vessel_update', vesselData);\n    \n    res.json({ success: true, message: 'Tracking data saved' });\n  } catch (error) {\n    console.error('Error saving tracking data:', error);\n    res.status(500).json({ error: 'Failed to save tracking data' });\n  }\n});\n\n// Save user data\napp.post('/api/users', async (req, res) => {\n  try {\n    const userData = req.body;\n    \n    if (!userData.id) {\n      return res.status(400).json({ error: 'User ID required' });\n    }\n    \n    const users = await readJsonFile(USERS_FILE);\n    const existingIndex = users.findIndex(u => u.id === userData.id);\n    \n    if (existingIndex >= 0) {\n      users[existingIndex] = { ...userData, lastLogin: new Date().toISOString() };\n    } else {\n      users.push({ ...userData, createdAt: new Date().toISOString() });\n    }\n    \n    await writeJsonFile(USERS_FILE, users);\n    \n    res.json({ success: true, message: 'User data saved' });\n  } catch (error) {\n    res.status(500).json({ error: 'Failed to save user data' });\n  }\n});\n\n// Get messages\napp.get('/api/messages', async (req, res) => {\n  try {\n    const messages = await readJsonFile(MESSAGES_FILE);\n    res.json(messages);\n  } catch (error) {\n    res.status(500).json({ error: 'Failed to fetch messages' });\n  }\n});\n\n// Save message\napp.post('/api/messages', async (req, res) => {\n  try {\n    const message = req.body;\n    const messages = await readJsonFile(MESSAGES_FILE);\n    \n    const newMessage = {\n      ...message,\n      id: Date.now().toString(),\n      timestamp: new Date().toISOString()\n    };\n    \n    messages.push(newMessage);\n    await writeJsonFile(MESSAGES_FILE, messages);\n    \n    // Broadcast to all connected clients\n    io.emit('new_message', newMessage);\n    \n    // Send notification to recipient\n    io.emit('notification', {\n      type: 'chat_message',\n      title: 'New Message',\n      message: `${message.senderName} sent you a message`,\n      recipientId: message.recipientId,\n      data: newMessage\n    });\n    \n    res.json({ success: true, message: newMessage });\n  } catch (error) {\n    res.status(500).json({ error: 'Failed to save message' });\n  }\n});\n\n// Like a boat\napp.post('/api/boats/like', async (req, res) => {\n  try {\n    const { userId, boatId, userName } = req.body;\n    const likes = await readJsonFile(BOAT_LIKES_FILE);\n    \n    const existingLike = likes.find(l => l.userId === userId && l.boatId === boatId);\n    \n    if (!existingLike) {\n      const newLike = {\n        id: Date.now().toString(),\n        userId,\n        boatId,\n        userName,\n        timestamp: new Date().toISOString()\n      };\n      \n      likes.push(newLike);\n      await writeJsonFile(BOAT_LIKES_FILE, likes);\n      \n      // Send notification\n      io.emit('notification', {\n        type: 'boat_liked',\n        title: 'Boat Liked',\n        message: `${userName} liked your boat!`,\n        recipientId: boatId,\n        data: newLike\n      });\n      \n      res.json({ success: true, like: newLike });\n    } else {\n      res.json({ success: true, message: 'Already liked' });\n    }\n  } catch (error) {\n    res.status(500).json({ error: 'Failed to like boat' });\n  }\n});\n\n// Comment on a boat\napp.post('/api/boats/comment', async (req, res) => {\n  try {\n    const { userId, boatId, userName, comment } = req.body;\n    const comments = await readJsonFile(BOAT_COMMENTS_FILE);\n    \n    const newComment = {\n      id: Date.now().toString(),\n      userId,\n      boatId,\n      userName,\n      comment,\n      timestamp: new Date().toISOString()\n    };\n    \n    comments.push(newComment);\n    await writeJsonFile(BOAT_COMMENTS_FILE, comments);\n    \n    // Send notification\n    io.emit('notification', {\n      type: 'boat_commented',\n      title: 'New Comment',\n      message: `${userName} commented on your boat: \"${comment}\"`,\n      recipientId: boatId,\n      data: newComment\n    });\n    \n    res.json({ success: true, comment: newComment });\n  } catch (error) {\n    res.status(500).json({ error: 'Failed to comment on boat' });\n  }\n});\n\n// Get boat likes\napp.get('/api/boats/:boatId/likes', async (req, res) => {\n  try {\n    const { boatId } = req.params;\n    const likes = await readJsonFile(BOAT_LIKES_FILE);\n    const boatLikes = likes.filter(l => l.boatId === boatId);\n    res.json(boatLikes);\n  } catch (error) {\n    res.status(500).json({ error: 'Failed to fetch boat likes' });\n  }\n});\n\n// Get boat comments\napp.get('/api/boats/:boatId/comments', async (req, res) => {\n  try {\n    const { boatId } = req.params;\n    const comments = await readJsonFile(BOAT_COMMENTS_FILE);\n    const boatComments = comments.filter(c => c.boatId === boatId);\n    res.json(boatComments);\n  } catch (error) {\n    res.status(500).json({ error: 'Failed to fetch boat comments' });\n  }\n});\n\n// Search ports by name\napp.get('/api/ports/search', async (req, res) => {\n  try {\n    const { query } = req.query;\n    \n    if (!query || query.length < 2) {\n      return res.json([]);\n    }\n    \n    const ports = await readJsonFile(PORTS_FILE);\n    const searchTerm = query.toLowerCase();\n    \n    const results = ports.filter(port => {\n      return (\n        port.name.toLowerCase().includes(searchTerm) ||\n        port.city.toLowerCase().includes(searchTerm) ||\n        port.country.toLowerCase().includes(searchTerm) ||\n        port.id.toLowerCase().includes(searchTerm) ||\n        port.aliases.some(alias => alias.toLowerCase().includes(searchTerm))\n      );\n    }).slice(0, 10);\n    \n    res.json(results);\n  } catch (error) {\n    console.error('Port search error:', error);\n    res.status(500).json({ error: 'Failed to search ports' });\n  }\n});\n\n// Get port by ID\napp.get('/api/ports/:portId', async (req, res) => {\n  try {\n    const { portId } = req.params;\n    const ports = await readJsonFile(PORTS_FILE);\n    const port = ports.find(p => p.id === portId);\n    \n    if (!port) {\n      return res.status(404).json({ error: 'Port not found' });\n    }\n    \n    res.json(port);\n  } catch (error) {\n    res.status(500).json({ error: 'Failed to fetch port' });\n  }\n});\n\n// Maritime Routing Endpoints (using searoute-ts)\n\n// Calculate maritime route\napp.post('/api/route/calculate', async (req, res) => {\n  try {\n    const { origin, destination, preferences } = req.body;\n    \n    if (!origin || !destination) {\n      return res.status(400).json({ error: 'Origin and destination are required' });\n    }\n    \n    const result = await maritimeRoutes.calculateRoute(origin, destination, preferences);\n    \n    if (result.success) {\n      res.json(result.route);\n    } else {\n      res.status(500).json({ error: result.error });\n    }\n  } catch (error) {\n    console.error('Route calculation error:', error);\n    res.status(500).json({ error: 'Failed to calculate route' });\n  }\n});\n\n// Report a hazard\napp.post('/api/hazards/report', async (req, res) => {\n  try {\n    const result = await maritimeRoutes.reportHazard(req.body);\n    \n    if (result.success) {\n      // Broadcast hazard to all connected clients\n      io.emit('hazard_reported', result.hazard);\n      res.json(result.hazard);\n    } else {\n      res.status(500).json({ error: result.error });\n    }\n  } catch (error) {\n    console.error('Hazard report error:', error);\n    res.status(500).json({ error: 'Failed to report hazard' });\n  }\n});\n\n// Get nearby hazards\napp.get('/api/hazards/nearby', async (req, res) => {\n  try {\n    const { lat, lng, radius } = req.query;\n    \n    if (!lat || !lng) {\n      return res.status(400).json({ error: 'Latitude and longitude are required' });\n    }\n    \n    const result = await maritimeRoutes.getNearbyHazards(\n      parseFloat(lat),\n      parseFloat(lng),\n      radius ? parseFloat(radius) : 50\n    );\n    \n    if (result.success) {\n      res.json(result.hazards);\n    } else {\n      res.status(500).json({ error: result.error });\n    }\n  } catch (error) {\n    console.error('Nearby hazards error:', error);\n    res.status(500).json({ error: 'Failed to get nearby hazards' });\n  }\n});\n\n// Report traffic\napp.post('/api/traffic/report', async (req, res) => {\n  try {\n    const result = await maritimeRoutes.reportTraffic(req.body);\n    \n    if (result.success) {\n      // Broadcast traffic report to all connected clients\n      io.emit('traffic_reported', result.report);\n      res.json(result.report);\n    } else {\n      res.status(500).json({ error: result.error });\n    }\n  } catch (error) {\n    console.error('Traffic report error:', error);\n    res.status(500).json({ error: 'Failed to report traffic' });\n  }\n});\n\n// Calculate distance helper (Haversine formula)\nfunction calculateDistance(lat1, lon1, lat2, lon2) {\n  const R = 6371; // Earth's radius in km\n  const dLat = (lat2 - lat1) * Math.PI / 180;\n  const dLon = (lon2 - lon1) * Math.PI / 180;\n  const a = \n    Math.sin(dLat/2) * Math.sin(dLat/2) +\n    Math.cos(lat1 * Math.PI / 180) * Math.cos(lat2 * Math.PI / 180) *\n    Math.sin(dLon/2) * Math.sin(dLon/2);\n  const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));\n  return R * c;\n}\n\n// Socket.IO connection handling\nio.on('connection', (socket) => {\n  console.log('Client connected:', socket.id);\n  \n  socket.on('vessel_location', async (data) => {\n    try {\n      // Save vessel location\n      const vessels = await readJsonFile(VESSELS_FILE);\n      const existingIndex = vessels.findIndex(v => v.userId === data.userId);\n      \n      const vesselData = {\n        id: data.userId, // Add id field for frontend compatibility\n        ...data,\n        lastUpdate: new Date().toISOString()\n      };\n      \n      if (existingIndex >= 0) {\n        vessels[existingIndex] = vesselData;\n      } else {\n        vessels.push(vesselData);\n      }\n      \n      await writeJsonFile(VESSELS_FILE, vessels);\n      \n      // Check for nearby vessels and send notifications\n      const nearbyVessels = vessels.filter(v => {\n        if (v.userId === data.userId) return false;\n        const distance = calculateDistance(\n          data.location.latitude,\n          data.location.longitude,\n          v.location.latitude,\n          v.location.longitude\n        );\n        return distance <= 2; // Within 2km\n      });\n      \n      if (nearbyVessels.length > 0) {\n        socket.emit('notification', {\n          type: 'vessel_nearby',\n          title: 'Vessel Nearby',\n          message: `${nearbyVessels[0].vesselInfo.vesselName} is within 2km of your location`,\n          data: nearbyVessels[0]\n        });\n      }\n      \n      // Broadcast to all other clients\n      socket.broadcast.emit('vessel_update', vesselData);\n    } catch (error) {\n      console.error('Error handling vessel location:', error);\n    }\n  });\n  \n  socket.on('chat_message', async (data) => {\n    try {\n      const messages = await readJsonFile(MESSAGES_FILE);\n      const newMessage = {\n        ...data,\n        id: Date.now().toString(),\n        timestamp: new Date().toISOString()\n      };\n      \n      messages.push(newMessage);\n      await writeJsonFile(MESSAGES_FILE, messages);\n      \n      // Broadcast to all clients\n      io.emit('new_message', newMessage);\n    } catch (error) {\n      console.error('Error handling chat message:', error);\n    }\n  });\n  \n  socket.on('disconnect', () => {\n    console.log('Client disconnected:', socket.id);\n  });\n});\n\n// Start server\nasync function startServer() {\n  await ensureDataFiles();\n  \n  server.listen(PORT, '0.0.0.0', () => {\n    console.log(`MarineTrack backend server running on port ${PORT}`);\n    console.log(`Health check: http://localhost:${PORT}/api/health`);\n    console.log(`Data directory: ${DATA_DIR}`);\n  });\n}\n\nstartServer();\n","size_bytes":16501},"components/redesign/SectionHeader.tsx":{"content":"import React from 'react';\nimport { View, Text, TouchableOpacity, StyleSheet } from 'react-native';\nimport { useColorScheme } from '@/hooks/useColorScheme';\nimport { Colors } from '@/constants/Colors';\nimport { Theme } from '@/constants/Theme';\n\ninterface SectionHeaderProps {\n  title: string;\n  actionText?: string;\n  onActionPress?: () => void;\n}\n\nexport function SectionHeader({ title, actionText, onActionPress }: SectionHeaderProps) {\n  const colorScheme = useColorScheme();\n  const isDark = colorScheme === 'dark';\n  const colors = Colors[isDark ? 'dark' : 'light'];\n\n  return (\n    <View style={styles.container}>\n      <Text style={[styles.title, { color: colors.text }]}>{title}</Text>\n      {actionText && onActionPress && (\n        <TouchableOpacity onPress={onActionPress}>\n          <Text style={[styles.actionText, { color: colors.primary }]}>{actionText}</Text>\n        </TouchableOpacity>\n      )}\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    paddingHorizontal: Theme.spacing.lg,\n    marginBottom: Theme.spacing.base,\n  },\n  title: {\n    fontSize: Theme.fonts.sizes.lg,\n    fontWeight: Theme.fonts.weights.semibold,\n  },\n  actionText: {\n    fontSize: Theme.fonts.sizes.base,\n    fontWeight: Theme.fonts.weights.semibold,\n  },\n});\n","size_bytes":1364},"attached_assets/expo_ui_reference/Expo1234/components/HapticTab.tsx":{"content":"import { BottomTabBarButtonProps } from '@react-navigation/bottom-tabs';\nimport { PlatformPressable } from '@react-navigation/elements';\nimport * as Haptics from 'expo-haptics';\n\nexport function HapticTab(props: BottomTabBarButtonProps) {\n  return (\n    <PlatformPressable\n      {...props}\n      onPressIn={(ev) => {\n        if (process.env.EXPO_OS === 'ios') {\n          // Add a soft haptic feedback when pressing down on the tabs.\n          Haptics.impactAsync(Haptics.ImpactFeedbackStyle.Light);\n        }\n        props.onPressIn?.(ev);\n      }}\n    />\n  );\n}\n","size_bytes":564},"attached_assets/expo_ui_reference/Expo1234/constants/Colors.ts":{"content":"/**\n * Below are the colors that are used in the app. The colors are defined in the light and dark mode.\n * There are many other ways to style your app. For example, [Nativewind](https://www.nativewind.dev/), [Tamagui](https://tamagui.dev/), [unistyles](https://reactnativeunistyles.vercel.app), etc.\n */\n\nconst tintColorLight = '#0a7ea4';\nconst tintColorDark = '#fff';\n\nexport const Colors = {\n  light: {\n    text: '#11181C',\n    background: '#fff',\n    tint: tintColorLight,\n    icon: '#687076',\n    tabIconDefault: '#687076',\n    tabIconSelected: tintColorLight,\n  },\n  dark: {\n    text: '#ECEDEE',\n    background: '#151718',\n    tint: tintColorDark,\n    icon: '#9BA1A6',\n    tabIconDefault: '#9BA1A6',\n    tabIconSelected: tintColorDark,\n  },\n};\n","size_bytes":750},"attached_assets/expo_ui_reference/Expo1234/components/ui/IconSymbol.ios.tsx":{"content":"import { SymbolView, SymbolViewProps, SymbolWeight } from 'expo-symbols';\nimport { StyleProp, ViewStyle } from 'react-native';\n\nexport function IconSymbol({\n  name,\n  size = 24,\n  color,\n  style,\n  weight = 'regular',\n}: {\n  name: SymbolViewProps['name'];\n  size?: number;\n  color: string;\n  style?: StyleProp<ViewStyle>;\n  weight?: SymbolWeight;\n}) {\n  return (\n    <SymbolView\n      weight={weight}\n      tintColor={color}\n      resizeMode=\"scaleAspectFit\"\n      name={name}\n      style={[\n        {\n          width: size,\n          height: size,\n        },\n        style,\n      ]}\n    />\n  );\n}\n","size_bytes":598},"components/redesign/StatChip.tsx":{"content":"import React from 'react';\nimport { View, Text, StyleSheet } from 'react-native';\nimport { useColorScheme } from '@/hooks/useColorScheme';\nimport { Colors } from '@/constants/Colors';\nimport { Theme } from '@/constants/Theme';\n\ninterface StatChipProps {\n  value: string;\n  label: string;\n  color?: string;\n}\n\nexport function StatChip({ value, label, color }: StatChipProps) {\n  const colorScheme = useColorScheme();\n  const isDark = colorScheme === 'dark';\n  const colors = Colors[isDark ? 'dark' : 'light'];\n\n  return (\n    <View style={[styles.container, { backgroundColor: colors.card }, Theme.shadows.sm]}>\n      <Text style={[styles.value, { color: color || colors.primary }]}>{value}</Text>\n      <Text style={[styles.label, { color: colors.secondaryText }]}>{label}</Text>\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    padding: Theme.spacing.base,\n    borderRadius: Theme.radius.sm,\n    alignItems: 'center',\n  },\n  value: {\n    fontSize: Theme.fonts.sizes.xxl,\n    fontWeight: Theme.fonts.weights.bold,\n    marginBottom: Theme.spacing.xs,\n  },\n  label: {\n    fontSize: Theme.fonts.sizes.sm,\n    textAlign: 'center',\n  },\n});\n","size_bytes":1174},"attached_assets/expo_ui_reference/Expo1234/app/(tabs)/boats.tsx":{"content":"\nimport React, { useState } from 'react';\nimport { View, Text, ScrollView, TouchableOpacity, StyleSheet, Image, TextInput, Modal, Alert } from 'react-native';\nimport { useColorScheme } from '@/hooks/useColorScheme';\nimport { IconSymbol } from '@/components/ui/IconSymbol';\nimport { router } from 'expo-router';\n\ninterface Boat {\n  id: string;\n  name: string;\n  length: string;\n  year: string;\n  image?: string;\n}\n\nexport default function BoatsScreen() {\n  const colorScheme = useColorScheme();\n  const isDark = colorScheme === 'dark';\n  const [boats, setBoats] = useState<Boat[]>([\n    { id: '1', name: 'Sea Breeze', length: '40', year: '2015' },\n    { id: '2', name: 'Sea Breeze', length: '40', year: '2015' },\n  ]);\n  const [showAddModal, setShowAddModal] = useState(false);\n  const [showEditModal, setShowEditModal] = useState(false);\n  const [showDeleteModal, setShowDeleteModal] = useState(false);\n  const [selectedBoat, setSelectedBoat] = useState<Boat | null>(null);\n  const [formData, setFormData] = useState({\n    name: '',\n    boatType: '',\n    length: '',\n    year: '',\n  });\n\n  const handleAddBoat = () => {\n    setShowAddModal(true);\n    setFormData({ name: '', boatType: '', length: '', year: '' });\n  };\n\n  const handleEditBoat = (boat: Boat) => {\n    setSelectedBoat(boat);\n    setFormData({ name: boat.name, boatType: '', length: boat.length, year: boat.year });\n    setShowEditModal(true);\n  };\n\n  const handleDeleteBoat = (boat: Boat) => {\n    setSelectedBoat(boat);\n    setShowDeleteModal(true);\n  };\n\n  const confirmDelete = () => {\n    if (selectedBoat) {\n      setBoats(boats.filter(b => b.id !== selectedBoat.id));\n      setShowDeleteModal(false);\n      setSelectedBoat(null);\n    }\n  };\n\n  return (\n    <View style={[styles.container, { backgroundColor: isDark ? '#000' : '#F2F2F7' }]}>\n      <View style={[styles.header, { backgroundColor: isDark ? '#000' : '#F2F2F7' }]}>\n        <TouchableOpacity onPress={() => router.back()}>\n          <IconSymbol name=\"chevron.left.forwardslash.chevron.right\" size={24} color={isDark ? '#FFF' : '#000'} />\n        </TouchableOpacity>\n        <Text style={[styles.headerTitle, { color: isDark ? '#FFF' : '#000' }]}>My Boats</Text>\n        <View style={{ width: 24 }} />\n      </View>\n\n      <ScrollView style={styles.content} showsVerticalScrollIndicator={false}>\n        <Text style={[styles.subtitle, { color: isDark ? '#8E8E93' : '#6C6C70' }]}>\n          Manage your boat collections\n        </Text>\n\n        <TouchableOpacity \n          style={styles.addButton}\n          onPress={handleAddBoat}\n        >\n          <Text style={styles.addButtonText}>Add New Boat</Text>\n        </TouchableOpacity>\n\n        {boats.map((boat) => (\n          <View key={boat.id} style={[styles.boatCard, { backgroundColor: isDark ? '#1C1C1E' : '#FFF' }]}>\n            <Image \n              source={require('@/assets/images/partial-react-logo.png')} \n              style={styles.boatImage}\n            />\n            <View style={styles.boatInfo}>\n              <Text style={[styles.boatName, { color: isDark ? '#FFF' : '#000' }]}>{boat.name}</Text>\n              <View style={styles.boatDetails}>\n                <View style={styles.detailItem}>\n                  <IconSymbol name=\"house.fill\" size={16} color=\"#007AFF\" />\n                  <Text style={[styles.detailText, { color: isDark ? '#8E8E93' : '#6C6C70' }]}>\n                    {boat.length} ft\n                  </Text>\n                </View>\n                <View style={styles.detailItem}>\n                  <IconSymbol name=\"house.fill\" size={16} color=\"#007AFF\" />\n                  <Text style={[styles.detailText, { color: isDark ? '#8E8E93' : '#6C6C70' }]}>\n                    {boat.year}\n                  </Text>\n                </View>\n              </View>\n            </View>\n            <View style={styles.boatActions}>\n              <TouchableOpacity onPress={() => handleEditBoat(boat)}>\n                <IconSymbol name=\"paperplane.fill\" size={20} color=\"#007AFF\" />\n              </TouchableOpacity>\n              <TouchableOpacity onPress={() => handleDeleteBoat(boat)}>\n                <IconSymbol name=\"paperplane.fill\" size={20} color=\"#FF3B30\" />\n              </TouchableOpacity>\n            </View>\n          </View>\n        ))}\n      </ScrollView>\n\n      {/* Add Boat Modal */}\n      <Modal visible={showAddModal} animationType=\"slide\" transparent>\n        <View style={styles.modalOverlay}>\n          <View style={[styles.modalContent, { backgroundColor: isDark ? '#1C1C1E' : '#FFF' }]}>\n            <View style={styles.modalHeader}>\n              <TouchableOpacity onPress={() => setShowAddModal(false)}>\n                <IconSymbol name=\"chevron.left.forwardslash.chevron.right\" size={24} color={isDark ? '#FFF' : '#000'} />\n              </TouchableOpacity>\n              <Text style={[styles.modalTitle, { color: isDark ? '#FFF' : '#000' }]}>Add Boat</Text>\n              <View style={{ width: 24 }} />\n            </View>\n\n            <Text style={[styles.label, { color: isDark ? '#8E8E93' : '#6C6C70' }]}>Enter your boat details</Text>\n\n            <Text style={[styles.inputLabel, { color: isDark ? '#FFF' : '#000' }]}>Boat Name</Text>\n            <TextInput\n              style={[styles.input, { backgroundColor: isDark ? '#2C2C2E' : '#F2F2F7', color: isDark ? '#FFF' : '#000' }]}\n              placeholder=\"Sea Breeze\"\n              placeholderTextColor={isDark ? '#8E8E93' : '#6C6C70'}\n              value={formData.name}\n              onChangeText={(text) => setFormData({ ...formData, name: text })}\n            />\n\n            <Text style={[styles.inputLabel, { color: isDark ? '#FFF' : '#000' }]}>Boat Type</Text>\n            <TouchableOpacity style={[styles.input, styles.selectInput, { backgroundColor: isDark ? '#2C2C2E' : '#F2F2F7' }]}>\n              <Text style={{ color: isDark ? '#8E8E93' : '#6C6C70' }}>Select Boat Type</Text>\n              <IconSymbol name=\"chevron.right\" size={20} color={isDark ? '#8E8E93' : '#6C6C70'} />\n            </TouchableOpacity>\n\n            <View style={styles.row}>\n              <View style={styles.halfInput}>\n                <Text style={[styles.inputLabel, { color: isDark ? '#FFF' : '#000' }]}>Boat Length (feet)</Text>\n                <TextInput\n                  style={[styles.input, { backgroundColor: isDark ? '#2C2C2E' : '#F2F2F7', color: isDark ? '#FFF' : '#000' }]}\n                  placeholder=\"40\"\n                  placeholderTextColor={isDark ? '#8E8E93' : '#6C6C70'}\n                  keyboardType=\"numeric\"\n                  value={formData.length}\n                  onChangeText={(text) => setFormData({ ...formData, length: text })}\n                />\n              </View>\n              <View style={styles.halfInput}>\n                <Text style={[styles.inputLabel, { color: isDark ? '#FFF' : '#000' }]}>Year Build</Text>\n                <TextInput\n                  style={[styles.input, { backgroundColor: isDark ? '#2C2C2E' : '#F2F2F7', color: isDark ? '#FFF' : '#000' }]}\n                  placeholder=\"2015\"\n                  placeholderTextColor={isDark ? '#8E8E93' : '#6C6C70'}\n                  keyboardType=\"numeric\"\n                  value={formData.year}\n                  onChangeText={(text) => setFormData({ ...formData, year: text })}\n                />\n              </View>\n            </View>\n\n            <Text style={[styles.inputLabel, { color: isDark ? '#FFF' : '#000' }]}>Upload Images</Text>\n            <TouchableOpacity style={[styles.uploadBox, { backgroundColor: isDark ? '#2C2C2E' : '#F2F2F7' }]}>\n              <IconSymbol name=\"house.fill\" size={40} color=\"#007AFF\" />\n              <Text style={[styles.uploadText, { color: isDark ? '#8E8E93' : '#6C6C70' }]}>\n                Click to upload or drag image here\n              </Text>\n              <Text style={[styles.uploadSubtext, { color: isDark ? '#8E8E93' : '#6C6C70' }]}>\n                (Upload as PNG or JPEG)\n              </Text>\n            </TouchableOpacity>\n\n            <View style={styles.modalActions}>\n              <TouchableOpacity \n                style={[styles.modalButton, styles.cancelButton]}\n                onPress={() => setShowAddModal(false)}\n              >\n                <Text style={styles.cancelButtonText}>Cancel</Text>\n              </TouchableOpacity>\n              <TouchableOpacity style={[styles.modalButton, styles.saveButton]}>\n                <Text style={styles.saveButtonText}>Save</Text>\n              </TouchableOpacity>\n            </View>\n          </View>\n        </View>\n      </Modal>\n\n      {/* Delete Confirmation Modal */}\n      <Modal visible={showDeleteModal} animationType=\"fade\" transparent>\n        <View style={styles.modalOverlay}>\n          <View style={[styles.deleteModal, { backgroundColor: isDark ? '#1C1C1E' : '#FFF' }]}>\n            <View style={styles.modalHeader}>\n              <TouchableOpacity onPress={() => setShowDeleteModal(false)}>\n                <IconSymbol name=\"chevron.left.forwardslash.chevron.right\" size={24} color={isDark ? '#FFF' : '#000'} />\n              </TouchableOpacity>\n              <Text style={[styles.modalTitle, { color: isDark ? '#FFF' : '#000' }]}>Delete confirm</Text>\n              <View style={{ width: 24 }} />\n            </View>\n\n            <Text style={[styles.deleteTitle, { color: isDark ? '#FFF' : '#000' }]}>Delete Boat</Text>\n            <Text style={[styles.deleteMessage, { color: isDark ? '#8E8E93' : '#6C6C70' }]}>\n              Are you sure you want to delete this boat?\n            </Text>\n\n            <TouchableOpacity style={styles.deleteImageBox}>\n              <IconSymbol name=\"house.fill\" size={40} color=\"#007AFF\" />\n              <Text style={[styles.uploadText, { color: isDark ? '#8E8E93' : '#6C6C70' }]}>\n                Click to upload or drag image here\n              </Text>\n              <Text style={[styles.uploadSubtext, { color: isDark ? '#8E8E93' : '#6C6C70' }]}>\n                (Upload as PNG or JPEG)\n              </Text>\n            </TouchableOpacity>\n\n            <View style={styles.modalActions}>\n              <TouchableOpacity \n                style={[styles.modalButton, styles.cancelButton]}\n                onPress={() => setShowDeleteModal(false)}\n              >\n                <Text style={styles.cancelButtonText}>Cancel</Text>\n              </TouchableOpacity>\n              <TouchableOpacity \n                style={[styles.modalButton, styles.deleteButton]}\n                onPress={confirmDelete}\n              >\n                <Text style={styles.saveButtonText}>Delete</Text>\n              </TouchableOpacity>\n            </View>\n          </View>\n        </View>\n      </Modal>\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n  },\n  header: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    paddingHorizontal: 20,\n    paddingTop: 60,\n    paddingBottom: 16,\n  },\n  headerTitle: {\n    fontSize: 20,\n    fontWeight: '600',\n  },\n  content: {\n    flex: 1,\n    paddingHorizontal: 20,\n  },\n  subtitle: {\n    fontSize: 14,\n    marginBottom: 20,\n  },\n  addButton: {\n    backgroundColor: '#007AFF',\n    paddingVertical: 16,\n    borderRadius: 12,\n    alignItems: 'center',\n    marginBottom: 20,\n  },\n  addButtonText: {\n    color: '#FFF',\n    fontSize: 16,\n    fontWeight: '600',\n  },\n  boatCard: {\n    flexDirection: 'row',\n    padding: 16,\n    borderRadius: 12,\n    marginBottom: 12,\n    alignItems: 'center',\n  },\n  boatImage: {\n    width: 80,\n    height: 60,\n    borderRadius: 8,\n    marginRight: 12,\n  },\n  boatInfo: {\n    flex: 1,\n  },\n  boatName: {\n    fontSize: 16,\n    fontWeight: '600',\n    marginBottom: 8,\n  },\n  boatDetails: {\n    flexDirection: 'row',\n    gap: 16,\n  },\n  detailItem: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: 4,\n  },\n  detailText: {\n    fontSize: 14,\n  },\n  boatActions: {\n    flexDirection: 'row',\n    gap: 12,\n  },\n  modalOverlay: {\n    flex: 1,\n    backgroundColor: 'rgba(0,0,0,0.5)',\n    justifyContent: 'flex-end',\n  },\n  modalContent: {\n    borderTopLeftRadius: 20,\n    borderTopRightRadius: 20,\n    paddingBottom: 40,\n    minHeight: '80%',\n  },\n  modalHeader: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    paddingHorizontal: 20,\n    paddingTop: 20,\n    paddingBottom: 16,\n  },\n  modalTitle: {\n    fontSize: 20,\n    fontWeight: '600',\n  },\n  label: {\n    fontSize: 14,\n    paddingHorizontal: 20,\n    marginBottom: 20,\n  },\n  inputLabel: {\n    fontSize: 14,\n    fontWeight: '500',\n    paddingHorizontal: 20,\n    marginBottom: 8,\n    marginTop: 12,\n  },\n  input: {\n    marginHorizontal: 20,\n    paddingHorizontal: 16,\n    paddingVertical: 12,\n    borderRadius: 8,\n    fontSize: 16,\n  },\n  selectInput: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n  },\n  row: {\n    flexDirection: 'row',\n    gap: 12,\n    paddingHorizontal: 20,\n  },\n  halfInput: {\n    flex: 1,\n  },\n  uploadBox: {\n    marginHorizontal: 20,\n    padding: 40,\n    borderRadius: 12,\n    alignItems: 'center',\n    borderWidth: 2,\n    borderColor: '#007AFF',\n    borderStyle: 'dashed',\n  },\n  uploadText: {\n    fontSize: 14,\n    marginTop: 8,\n  },\n  uploadSubtext: {\n    fontSize: 12,\n    marginTop: 4,\n  },\n  modalActions: {\n    flexDirection: 'row',\n    gap: 12,\n    paddingHorizontal: 20,\n    marginTop: 24,\n  },\n  modalButton: {\n    flex: 1,\n    paddingVertical: 16,\n    borderRadius: 12,\n    alignItems: 'center',\n  },\n  cancelButton: {\n    backgroundColor: '#F2F2F7',\n  },\n  cancelButtonText: {\n    color: '#000',\n    fontSize: 16,\n    fontWeight: '600',\n  },\n  saveButton: {\n    backgroundColor: '#007AFF',\n  },\n  deleteButton: {\n    backgroundColor: '#FF3B30',\n  },\n  saveButtonText: {\n    color: '#FFF',\n    fontSize: 16,\n    fontWeight: '600',\n  },\n  deleteModal: {\n    borderTopLeftRadius: 20,\n    borderTopRightRadius: 20,\n    paddingBottom: 40,\n    minHeight: '50%',\n  },\n  deleteTitle: {\n    fontSize: 18,\n    fontWeight: '600',\n    paddingHorizontal: 20,\n    marginBottom: 8,\n  },\n  deleteMessage: {\n    fontSize: 14,\n    paddingHorizontal: 20,\n    marginBottom: 20,\n  },\n  deleteImageBox: {\n    marginHorizontal: 20,\n    padding: 40,\n    borderRadius: 12,\n    alignItems: 'center',\n    backgroundColor: '#F2F2F7',\n  },\n});\n","size_bytes":14293},"attached_assets/expo_ui_reference/Expo1234/components/ui/IconSymbol.tsx":{"content":"// Fallback for using MaterialIcons on Android and web.\n\nimport MaterialIcons from '@expo/vector-icons/MaterialIcons';\nimport { SymbolWeight, SymbolViewProps } from 'expo-symbols';\nimport { ComponentProps } from 'react';\nimport { OpaqueColorValue, type StyleProp, type TextStyle } from 'react-native';\n\ntype IconMapping = Record<SymbolViewProps['name'], ComponentProps<typeof MaterialIcons>['name']>;\ntype IconSymbolName = keyof typeof MAPPING;\n\n/**\n * Add your SF Symbols to Material Icons mappings here.\n * - see Material Icons in the [Icons Directory](https://icons.expo.fyi).\n * - see SF Symbols in the [SF Symbols](https://developer.apple.com/sf-symbols/) app.\n */\nconst MAPPING = {\n  'house.fill': 'home',\n  'paperplane.fill': 'send',\n  'chevron.left.forwardslash.chevron.right': 'code',\n  'chevron.right': 'chevron-right',\n} as IconMapping;\n\n/**\n * An icon component that uses native SF Symbols on iOS, and Material Icons on Android and web.\n * This ensures a consistent look across platforms, and optimal resource usage.\n * Icon `name`s are based on SF Symbols and require manual mapping to Material Icons.\n */\nexport function IconSymbol({\n  name,\n  size = 24,\n  color,\n  style,\n}: {\n  name: IconSymbolName;\n  size?: number;\n  color: string | OpaqueColorValue;\n  style?: StyleProp<TextStyle>;\n  weight?: SymbolWeight;\n}) {\n  return <MaterialIcons color={color} size={size} name={MAPPING[name]} style={style} />;\n}\n","size_bytes":1422},"components/redesign/LuxuryDrawer.tsx":{"content":"import React, { useEffect, useState } from 'react';\nimport {\n  View,\n  Text,\n  StyleSheet,\n  TouchableOpacity,\n  ScrollView,\n  Animated,\n  Dimensions,\n  StatusBar,\n} from 'react-native';\nimport { useColorScheme } from '@/hooks/useColorScheme';\nimport { Colors } from '@/constants/Colors';\nimport { Theme } from '@/constants/Theme';\nimport { IconSymbol } from '@/components/ui/IconSymbol';\nimport { QuickActionTile } from '@/components/redesign/QuickActionTile';\nimport { WeatherWidget } from '@/components/redesign/WeatherWidget';\nimport { StatChip } from '@/components/redesign/StatChip';\nimport { Card } from '@/components/redesign/Card';\nimport { SectionHeader } from '@/components/redesign/SectionHeader';\nimport { useRouter } from 'expo-router';\n\nconst { width } = Dimensions.get('window');\nconst DRAWER_WIDTH = Math.min(width * 0.85, 400);\n\ninterface LuxuryDrawerProps {\n  isOpen: boolean;\n  onClose: () => void;\n  vessels: any[];\n  weather: any;\n  hazards: any[];\n  onRefresh: () => void;\n}\n\nexport function LuxuryDrawer({\n  isOpen,\n  onClose,\n  vessels,\n  weather,\n  hazards,\n  onRefresh,\n}: LuxuryDrawerProps) {\n  const router = useRouter();\n  const colorScheme = useColorScheme();\n  const isDark = colorScheme === 'dark';\n  const colors = Colors[isDark ? 'dark' : 'light'];\n  const [slideAnim] = useState(new Animated.Value(-DRAWER_WIDTH));\n  const [overlayAnim] = useState(new Animated.Value(0));\n\n  useEffect(() => {\n    Animated.parallel([\n      Animated.spring(slideAnim, {\n        toValue: isOpen ? 0 : -DRAWER_WIDTH,\n        useNativeDriver: true,\n        damping: 20,\n        stiffness: 90,\n      }),\n      Animated.timing(overlayAnim, {\n        toValue: isOpen ? 1 : 0,\n        duration: 300,\n        useNativeDriver: true,\n      }),\n    ]).start();\n  }, [isOpen]);\n\n  const quickActions = [\n    { id: '1', icon: 'cloud.fill', label: 'Weather', color: Theme.colors.iosOrange, route: '/weather' },\n    { id: '2', icon: 'exclamationmark.triangle.fill', label: 'SOS Alert', color: Theme.colors.iosRed, route: '/sos' },\n    { id: '3', icon: 'anchor.fill', label: 'Ports', color: Theme.colors.iosPurple, route: '/ports' },\n    { id: '4', icon: 'bell.fill', label: 'Alerts', color: Theme.colors.iosTeal, route: '/notifications' },\n    { id: '5', icon: 'gear', label: 'Settings', color: Theme.colors.gray5, route: '/settings' },\n  ];\n\n  return (\n    <>\n      <Animated.View\n        style={[\n          styles.overlay,\n          {\n            opacity: overlayAnim,\n          },\n        ]}\n        pointerEvents={isOpen ? 'auto' : 'none'}\n      >\n        <TouchableOpacity\n          style={StyleSheet.absoluteFill}\n          activeOpacity={1}\n          onPress={onClose}\n        />\n      </Animated.View>\n\n      <Animated.View\n        style={[\n          styles.drawer,\n          {\n            width: DRAWER_WIDTH,\n            backgroundColor: colors.background,\n            transform: [{ translateX: slideAnim }],\n          },\n        ]}\n        pointerEvents={isOpen ? 'auto' : 'none'}\n      >\n        <StatusBar barStyle={isDark ? 'light-content' : 'dark-content'} />\n        \n        <View style={[styles.header, { backgroundColor: colors.background }]}>\n          <View>\n            <Text style={[styles.appName, { color: colors.text }]}>MarineTrack</Text>\n            <Text style={[styles.appSubtitle, { color: colors.secondaryText }]}>\n              Professional Maritime Suite\n            </Text>\n          </View>\n          <TouchableOpacity\n            style={[styles.closeButton, { backgroundColor: isDark ? 'rgba(255,255,255,0.1)' : 'rgba(0,0,0,0.05)' }]}\n            onPress={onClose}\n          >\n            <IconSymbol name=\"xmark\" size={20} color={colors.text} />\n          </TouchableOpacity>\n        </View>\n\n        <ScrollView\n          style={styles.scrollView}\n          showsVerticalScrollIndicator={false}\n        >\n          <View style={styles.welcomeSection}>\n            <Text style={[styles.welcomeTitle, { color: colors.text }]}>\n              Welcome back, Captain\n            </Text>\n            <Text style={[styles.welcomeDate, { color: colors.secondaryText }]}>\n              {new Date().toLocaleDateString('en-US', {\n                weekday: 'long',\n                month: 'long',\n                day: 'numeric',\n                year: 'numeric',\n              })}\n            </Text>\n          </View>\n\n          {weather && (\n            <View style={styles.weatherContainer}>\n              <WeatherWidget\n                temperature={`${weather.temperature}¬∞F`}\n                condition=\"Sunny\"\n                emoji=\"‚òÄÔ∏è\"\n                subtitle=\"Perfect for sailing!\"\n              />\n            </View>\n          )}\n\n          <Text style={[styles.sectionTitle, { color: colors.secondaryText }]}>\n            Quick Actions\n          </Text>\n\n          <View style={styles.quickActionsGrid}>\n            {quickActions.map((action) => (\n              <QuickActionTile\n                key={action.id}\n                icon={action.icon}\n                label={action.label}\n                color={action.color}\n                onPress={() => {\n                  onClose();\n                  action.route && router.push(action.route as any);\n                }}\n              />\n            ))}\n          </View>\n\n          <View style={styles.statsRow}>\n            <StatChip value={vessels.length.toString()} label={`Nearby\\nVessels`} color=\"#007AFF\" />\n            <StatChip value={hazards.length.toString()} label={`Active\\nHazards`} color=\"#FF9500\" />\n            <StatChip value={weather ? `${weather.windSpeed}kn` : '--'} label={`Wind\\nSpeed`} color=\"#34C759\" />\n          </View>\n\n          {vessels.length > 0 && (\n            <View style={styles.section}>\n              <SectionHeader\n                title=\"Nearby Vessels\"\n                actionText=\"View All\"\n                onActionPress={() => {\n                  onClose();\n                  router.push('/tracker');\n                }}\n              />\n              {vessels.slice(0, 3).map((vessel, index) => (\n                <Card key={index} style={styles.vesselCard}>\n                  <View style={styles.vesselHeader}>\n                    <Text style={[styles.vesselName, { color: colors.text }]}>\n                      {vessel.vesselInfo?.vesselName || 'Unknown Vessel'}\n                    </Text>\n                    <View style={[styles.statusBadge, { backgroundColor: '#34C75920' }]}>\n                      <Text style={[styles.statusBadgeText, { color: '#34C759' }]}>Live</Text>\n                    </View>\n                  </View>\n                  <Text style={[styles.vesselType, { color: colors.secondaryText }]}>\n                    {vessel.vesselInfo?.vesselType || 'Vessel'}\n                  </Text>\n                  <View style={styles.vesselMeta}>\n                    <View style={styles.vesselMetaItem}>\n                      <IconSymbol name=\"location.fill\" size={14} color={colors.primary} />\n                      <Text style={[styles.vesselMetaText, { color: colors.secondaryText }]}>\n                        {vessel.distance ? `${vessel.distance.toFixed(1)} km` : 'Nearby'}\n                      </Text>\n                    </View>\n                    <View style={styles.vesselMetaItem}>\n                      <IconSymbol name=\"speedometer\" size={14} color={colors.primary} />\n                      <Text style={[styles.vesselMetaText, { color: colors.secondaryText }]}>\n                        {vessel.location?.speed?.toFixed(1) || '0'} kn\n                      </Text>\n                    </View>\n                  </View>\n                </Card>\n              ))}\n            </View>\n          )}\n\n          {hazards.length > 0 && (\n            <View style={styles.section}>\n              <SectionHeader\n                title=\"Active Hazards\"\n                actionText=\"View All\"\n                onActionPress={() => {\n                  onClose();\n                  router.push('/notifications');\n                }}\n              />\n              {hazards.slice(0, 3).map((hazard, index) => (\n                <Card key={index} style={styles.vesselCard}>\n                  <View style={styles.vesselHeader}>\n                    <View style={styles.hazardIcon}>\n                      <Text style={styles.hazardIconText}>‚ö†Ô∏è</Text>\n                    </View>\n                    <View style={{ flex: 1, marginLeft: Theme.spacing.md }}>\n                      <Text style={[styles.vesselName, { color: colors.text }]}>\n                        {hazard.type || 'Maritime Hazard'}\n                      </Text>\n                      <Text style={[styles.vesselType, { color: colors.secondaryText }]}>\n                        {hazard.description || 'Unknown hazard in the area'}\n                      </Text>\n                    </View>\n                    <View style={[styles.statusBadge, { backgroundColor: '#FF950020' }]}>\n                      <Text style={[styles.statusBadgeText, { color: '#FF9500' }]}>\n                        {hazard.severity || 'Alert'}\n                      </Text>\n                    </View>\n                  </View>\n                  <View style={styles.vesselMeta}>\n                    <View style={styles.vesselMetaItem}>\n                      <IconSymbol name=\"location.fill\" size={14} color={Theme.colors.iosOrange} />\n                      <Text style={[styles.vesselMetaText, { color: colors.secondaryText }]}>\n                        {hazard.distance ? `${hazard.distance.toFixed(1)} km away` : 'Nearby'}\n                      </Text>\n                    </View>\n                  </View>\n                </Card>\n              ))}\n            </View>\n          )}\n\n          <View style={styles.bottomSpacing} />\n        </ScrollView>\n      </Animated.View>\n    </>\n  );\n}\n\nconst styles = StyleSheet.create({\n  overlay: {\n    ...StyleSheet.absoluteFillObject,\n    backgroundColor: 'rgba(0,0,0,0.5)',\n    zIndex: 999,\n  },\n  drawer: {\n    position: 'absolute',\n    left: 0,\n    top: 0,\n    bottom: 0,\n    zIndex: 1000,\n    shadowColor: '#000',\n    shadowOffset: { width: 4, height: 0 },\n    shadowOpacity: 0.3,\n    shadowRadius: 16,\n    elevation: 24,\n  },\n  header: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    paddingHorizontal: Theme.spacing.drawer,\n    paddingTop: 60,\n    paddingBottom: Theme.spacing.base,\n    borderBottomWidth: 0.5,\n    borderBottomColor: Theme.colors.gray9,\n  },\n  appName: {\n    fontSize: 26,\n    fontWeight: Theme.fonts.weights.bold,\n    letterSpacing: -0.5,\n  },\n  appSubtitle: {\n    fontSize: Theme.fonts.sizes.sm,\n    marginTop: 2,\n    letterSpacing: 0.5,\n    textTransform: 'uppercase',\n  },\n  closeButton: {\n    width: 40,\n    height: 40,\n    borderRadius: 20,\n    justifyContent: 'center',\n    alignItems: 'center',\n    backgroundColor: Theme.colors.gray11,\n  },\n  scrollView: {\n    flex: 1,\n  },\n  welcomeSection: {\n    paddingHorizontal: Theme.spacing.drawer,\n    marginTop: Theme.spacing.base,\n    marginBottom: Theme.spacing.base,\n  },\n  welcomeTitle: {\n    fontSize: Theme.fonts.sizes.xxl,\n    fontWeight: Theme.fonts.weights.bold,\n    marginBottom: Theme.spacing.xs,\n  },\n  welcomeDate: {\n    fontSize: Theme.fonts.sizes.base,\n  },\n  weatherContainer: {\n    paddingHorizontal: Theme.spacing.drawer,\n    marginBottom: Theme.spacing.lg,\n  },\n  sectionTitle: {\n    fontSize: Theme.fonts.sizes.base,\n    paddingHorizontal: Theme.spacing.lg,\n    marginBottom: Theme.spacing.base,\n    fontWeight: '600',\n  },\n  quickActionsGrid: {\n    flexDirection: 'row',\n    flexWrap: 'wrap',\n    paddingHorizontal: Theme.spacing.lg,\n    gap: Theme.spacing.md,\n    marginBottom: Theme.spacing.xl,\n  },\n  statsRow: {\n    flexDirection: 'row',\n    gap: Theme.spacing.md,\n    paddingHorizontal: Theme.spacing.lg,\n    marginBottom: Theme.spacing.xl,\n  },\n  section: {\n    marginBottom: Theme.spacing.xl,\n  },\n  vesselCard: {\n    marginHorizontal: Theme.spacing.lg,\n    marginBottom: Theme.spacing.md,\n  },\n  vesselHeader: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    marginBottom: Theme.spacing.xs,\n  },\n  vesselName: {\n    fontSize: Theme.fonts.sizes.base,\n    fontWeight: Theme.fonts.weights.semibold,\n    flex: 1,\n  },\n  statusBadge: {\n    paddingHorizontal: Theme.spacing.md,\n    paddingVertical: Theme.spacing.xs,\n    borderRadius: Theme.radius.sm,\n  },\n  statusBadgeText: {\n    fontSize: Theme.fonts.sizes.sm,\n    fontWeight: Theme.fonts.weights.semibold,\n  },\n  vesselType: {\n    fontSize: Theme.fonts.sizes.md,\n    marginBottom: Theme.spacing.md,\n  },\n  vesselMeta: {\n    flexDirection: 'row',\n    gap: Theme.spacing.lg,\n  },\n  vesselMetaItem: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: Theme.spacing.xs,\n  },\n  vesselMetaText: {\n    fontSize: Theme.fonts.sizes.md,\n  },\n  hazardIcon: {\n    width: 40,\n    height: 40,\n    borderRadius: 20,\n    backgroundColor: '#FF95001A',\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  hazardIconText: {\n    fontSize: 20,\n  },\n  bottomSpacing: {\n    height: 100,\n  },\n});\n","size_bytes":13052},"app/(tabs)/map_old.tsx":{"content":"import React, { useState, useEffect } from 'react';\nimport { View, Text, StyleSheet, ScrollView, TouchableOpacity, Alert } from 'react-native';\nimport { useColorScheme } from '@/hooks/useColorScheme';\nimport { Colors } from '@/constants/Colors';\nimport { Theme } from '@/constants/Theme';\nimport * as Location from 'expo-location';\nimport { WazeVesselMap } from '@/components/WazeVesselMap';\nimport { getRestrictedZones, getSafeZones } from '@/utils/zoneData';\nimport { LuxuryDrawer } from '@/components/redesign/LuxuryDrawer';\nimport { IconSymbol } from '@/components/ui/IconSymbol';\nimport { getNearbyTrackedVessels } from '@/utils/trackingService';\nimport { getCurrentWeather } from '@/utils/weatherApi';\nimport { getNearbyHazards } from '@/utils/maritimeIntelligence';\n\nexport default function MapScreen() {\n  const colorScheme = useColorScheme();\n  const colors = Colors[colorScheme ?? 'light'];\n  const isDark = colorScheme === 'dark';\n  const [currentLocation, setCurrentLocation] = useState<{ latitude: number; longitude: number } | null>(null);\n  const [selectedVessel, setSelectedVessel] = useState<any>(null);\n  const [drawerOpen, setDrawerOpen] = useState(false);\n  const [vessels, setVessels] = useState<any[]>([]);\n  const [weather, setWeather] = useState<any>(null);\n  const [hazards, setHazards] = useState<any[]>([]);\n\n  useEffect(() => {\n    getCurrentLocation();\n  }, []);\n\n  useEffect(() => {\n    if (currentLocation) {\n      loadDrawerData();\n    }\n  }, [currentLocation]);\n\n  const getCurrentLocation = async () => {\n    const { status } = await Location.requestForegroundPermissionsAsync();\n    if (status === 'granted') {\n      const location = await Location.getCurrentPositionAsync({});\n      const coords = {\n        latitude: location.coords.latitude,\n        longitude: location.coords.longitude,\n      };\n      setCurrentLocation(coords);\n    }\n  };\n\n  const loadDrawerData = async () => {\n    if (!currentLocation) return;\n    \n    try {\n      const [nearbyVessels, weatherData, hazardData] = await Promise.all([\n        getNearbyTrackedVessels(currentLocation.latitude, currentLocation.longitude, 10),\n        getCurrentWeather(currentLocation.latitude, currentLocation.longitude),\n        getNearbyHazards(currentLocation.latitude, currentLocation.longitude, 50),\n      ]);\n\n      setVessels(nearbyVessels);\n      setWeather(weatherData);\n      setHazards(hazardData);\n    } catch (error) {\n      console.error('Error loading drawer data:', error);\n    }\n  };\n\n  const restrictedZones = getRestrictedZones();\n  const safeZones = getSafeZones();\n\n  return (\n    <View style={[styles.container, { backgroundColor: colors.background }]}>\n      {/* Full Screen Map */}\n      <View style={styles.mapContainer}>\n        {currentLocation && (\n          <WazeVesselMap\n            currentLocation={currentLocation}\n            onVesselSelect={(vessel) => setSelectedVessel(vessel)}\n          />\n        )}\n      </View>\n\n      {/* Luxury Floating Menu Button - Waze Style */}\n      <TouchableOpacity\n        style={[styles.menuButton, {\n          backgroundColor: isDark ? Theme.colors.darkCard : '#FFFFFF',\n        }]}\n        onPress={() => setDrawerOpen(true)}\n        activeOpacity={0.9}\n      >\n        <IconSymbol name=\"line.3.horizontal\" size={24} color={colors.text} />\n        {hazards.length > 0 && (\n          <View style={styles.menuBadge}>\n            <Text style={styles.menuBadgeText}>{hazards.length}</Text>\n          </View>\n        )}\n      </TouchableOpacity>\n\n      {/* Luxury Drawer */}\n      <LuxuryDrawer\n        isOpen={drawerOpen}\n        onClose={() => setDrawerOpen(false)}\n        vessels={vessels}\n        weather={weather}\n        hazards={hazards}\n        onRefresh={loadDrawerData}\n      />\n\n      {/* Vessel Details Card - Instagram Story Style */}\n      {selectedVessel && (\n        <View style={[styles.vesselCard, { backgroundColor: colors.card }]}>\n          <View style={styles.cardHeader}>\n            <View style={styles.vesselAvatar}>\n              <Text style={styles.avatarIcon}>üö¢</Text>\n            </View>\n            <View style={styles.vesselInfo}>\n              <Text style={[styles.vesselName, { color: colors.text }]}>\n                {selectedVessel.vesselInfo?.vesselName || 'Unknown Vessel'}\n              </Text>\n              <Text style={[styles.vesselType, { color: colors.secondaryText }]}>\n                {selectedVessel.vesselInfo?.vesselType || 'N/A'}\n              </Text>\n            </View>\n            <TouchableOpacity onPress={() => setSelectedVessel(null)}>\n              <Text style={[styles.closeIcon, { color: colors.icon }]}>‚úï</Text>\n            </TouchableOpacity>\n          </View>\n\n          <View style={styles.statsRow}>\n            <View style={styles.statItem}>\n              <Text style={[styles.statValue, { color: colors.primary }]}>\n                {selectedVessel.status || 'Unknown'}\n              </Text>\n              <Text style={[styles.statLabel, { color: colors.tertiaryText }]}>Status</Text>\n            </View>\n            <View style={[styles.divider, { backgroundColor: colors.border }]} />\n            <View style={styles.statItem}>\n              <Text style={[styles.statValue, { color: colors.primary }]}>\n                {selectedVessel.distance ? `${selectedVessel.distance.toFixed(1)}km` : 'N/A'}\n              </Text>\n              <Text style={[styles.statLabel, { color: colors.tertiaryText }]}>Distance</Text>\n            </View>\n            <View style={[styles.divider, { backgroundColor: colors.border }]} />\n            <View style={styles.statItem}>\n              <Text style={[styles.statValue, { color: colors.primary }]}>Live</Text>\n              <Text style={[styles.statLabel, { color: colors.tertiaryText }]}>Tracking</Text>\n            </View>\n          </View>\n\n          <View style={styles.actionButtons}>\n            <TouchableOpacity style={[styles.primaryButton, { backgroundColor: colors.primary }]}>\n              <Text style={styles.buttonText}>Message</Text>\n            </TouchableOpacity>\n            <TouchableOpacity style={[styles.secondaryButton, { borderColor: colors.border }]}>\n              <Text style={[styles.secondaryButtonText, { color: colors.text }]}>Track</Text>\n            </TouchableOpacity>\n          </View>\n        </View>\n      )}\n\n      {/* Legend Pills - Twitter/X Style */}\n      <View style={styles.legendWrapper}>\n        <ScrollView \n          horizontal \n          showsHorizontalScrollIndicator={false}\n          contentContainerStyle={styles.legendScroll}\n        >\n          <View style={[styles.legendPill, { backgroundColor: colors.card }]}>\n            <View style={[styles.legendDot, { backgroundColor: '#34C759' }]} />\n            <Text style={[styles.legendLabel, { color: colors.text }]}>Safe Zones</Text>\n          </View>\n          <View style={[styles.legendPill, { backgroundColor: colors.card }]}>\n            <View style={[styles.legendDot, { backgroundColor: '#FF3B30' }]} />\n            <Text style={[styles.legendLabel, { color: colors.text }]}>Restricted</Text>\n          </View>\n          <View style={[styles.legendPill, { backgroundColor: colors.card }]}>\n            <View style={[styles.legendDot, { backgroundColor: '#007AFF' }]} />\n            <Text style={[styles.legendLabel, { color: colors.text }]}>You</Text>\n          </View>\n          <View style={[styles.legendPill, { backgroundColor: colors.card }]}>\n            <View style={[styles.legendDot, { backgroundColor: '#FF9500' }]} />\n            <Text style={[styles.legendLabel, { color: colors.text }]}>Nearby</Text>\n          </View>\n        </ScrollView>\n      </View>\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n  },\n  mapContainer: {\n    flex: 1,\n  },\n  menuButton: {\n    position: 'absolute',\n    top: 60,\n    left: 20,\n    width: 56,\n    height: 56,\n    borderRadius: 28,\n    justifyContent: 'center',\n    alignItems: 'center',\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 4 },\n    shadowOpacity: 0.3,\n    shadowRadius: 12,\n    elevation: 8,\n    zIndex: 10,\n  },\n  menuBadge: {\n    position: 'absolute',\n    top: 4,\n    right: 4,\n    backgroundColor: Theme.colors.iosRed,\n    borderRadius: 10,\n    minWidth: 20,\n    height: 20,\n    justifyContent: 'center',\n    alignItems: 'center',\n    paddingHorizontal: 4,\n    borderWidth: 2,\n    borderColor: '#FFFFFF',\n  },\n  menuBadgeText: {\n    color: '#FFFFFF',\n    fontSize: 11,\n    fontWeight: '700',\n  },\n  vesselCard: {\n    position: 'absolute',\n    bottom: 100,\n    left: 16,\n    right: 16,\n    borderRadius: 20,\n    padding: 20,\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 8 },\n    shadowOpacity: 0.15,\n    shadowRadius: 24,\n    elevation: 12,\n  },\n  cardHeader: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    marginBottom: 16,\n  },\n  vesselAvatar: {\n    width: 48,\n    height: 48,\n    borderRadius: 24,\n    backgroundColor: '#007AFF',\n    justifyContent: 'center',\n    alignItems: 'center',\n    marginRight: 12,\n  },\n  avatarIcon: {\n    fontSize: 24,\n  },\n  vesselInfo: {\n    flex: 1,\n  },\n  vesselName: {\n    fontSize: 17,\n    fontWeight: '600',\n    marginBottom: 2,\n  },\n  vesselType: {\n    fontSize: 14,\n  },\n  closeIcon: {\n    fontSize: 24,\n    fontWeight: '300',\n  },\n  statsRow: {\n    flexDirection: 'row',\n    marginBottom: 16,\n  },\n  statItem: {\n    flex: 1,\n    alignItems: 'center',\n  },\n  divider: {\n    width: 1,\n    height: '100%',\n  },\n  statValue: {\n    fontSize: 16,\n    fontWeight: '700',\n    marginBottom: 4,\n  },\n  statLabel: {\n    fontSize: 12,\n  },\n  actionButtons: {\n    flexDirection: 'row',\n    gap: 12,\n  },\n  primaryButton: {\n    flex: 1,\n    paddingVertical: 12,\n    borderRadius: 12,\n    alignItems: 'center',\n  },\n  buttonText: {\n    color: '#fff',\n    fontSize: 15,\n    fontWeight: '600',\n  },\n  secondaryButton: {\n    flex: 1,\n    paddingVertical: 12,\n    borderRadius: 12,\n    alignItems: 'center',\n    borderWidth: 1.5,\n  },\n  secondaryButtonText: {\n    fontSize: 15,\n    fontWeight: '600',\n  },\n  legendWrapper: {\n    position: 'absolute',\n    bottom: 20,\n    left: 0,\n    right: 0,\n  },\n  legendScroll: {\n    paddingHorizontal: 16,\n    gap: 8,\n  },\n  legendPill: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    paddingHorizontal: 14,\n    paddingVertical: 10,\n    borderRadius: 20,\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.08,\n    shadowRadius: 8,\n    elevation: 3,\n  },\n  legendDot: {\n    width: 10,\n    height: 10,\n    borderRadius: 5,\n    marginRight: 6,\n  },\n  legendLabel: {\n    fontSize: 13,\n    fontWeight: '600',\n  },\n});","size_bytes":10639},"components/redesign/BottomSheet.tsx":{"content":"import React, { useEffect, useRef, useState } from 'react';\nimport {\n  View,\n  Text,\n  StyleSheet,\n  Animated,\n  PanResponder,\n  Dimensions,\n  TouchableOpacity,\n  ScrollView,\n  Platform,\n} from 'react-native';\nimport { useColorScheme } from '@/hooks/useColorScheme';\nimport { Colors } from '@/constants/Colors';\nimport { Theme } from '@/constants/Theme';\n\nconst { height: SCREEN_HEIGHT } = Dimensions.get('window');\nconst TAB_BAR_HEIGHT = 70;\nconst SNAP_POINTS = {\n  collapsed: SCREEN_HEIGHT * 0.15,\n  middle: SCREEN_HEIGHT * 0.50,\n  expanded: SCREEN_HEIGHT - TAB_BAR_HEIGHT - 10,\n};\n\ninterface BottomSheetProps {\n  children: React.ReactNode;\n  onPositionChange?: (position: 'collapsed' | 'middle' | 'expanded') => void;\n}\n\nexport function BottomSheet({ children, onPositionChange }: BottomSheetProps) {\n  const colorScheme = useColorScheme();\n  const isDark = colorScheme === 'dark';\n  const colors = Colors[isDark ? 'dark' : 'light'];\n  \n  const pan = useRef(new Animated.Value(SCREEN_HEIGHT - SNAP_POINTS.middle)).current;\n  const [currentPosition, setCurrentPosition] = useState<'collapsed' | 'middle' | 'expanded'>('middle');\n  const scrollViewRef = useRef<ScrollView>(null);\n  const scrollY = useRef(new Animated.Value(0)).current;\n\n  const animateToPosition = (position: 'collapsed' | 'middle' | 'expanded') => {\n    const toValue = SCREEN_HEIGHT - SNAP_POINTS[position];\n\n    Animated.spring(pan, {\n      toValue,\n      useNativeDriver: false,\n      damping: 20,\n      stiffness: 90,\n    }).start();\n    setCurrentPosition(position);\n    onPositionChange?.(position);\n  };\n\n  const panResponder = useRef(\n    PanResponder.create({\n      onStartShouldSetPanResponder: () => true,\n      onMoveShouldSetPanResponder: (_, gestureState) => {\n        return Math.abs(gestureState.dy) > 5;\n      },\n      onPanResponderMove: (_, gestureState) => {\n        const newValue = (SCREEN_HEIGHT - SNAP_POINTS.middle) + gestureState.dy;\n        const minY = SCREEN_HEIGHT - SNAP_POINTS.expanded;\n        const maxY = SCREEN_HEIGHT - SNAP_POINTS.collapsed;\n        \n        if (newValue >= minY && newValue <= maxY) {\n          pan.setValue(newValue);\n        }\n      },\n      onPanResponderRelease: (_, gestureState) => {\n        const velocity = gestureState.vy;\n        const currentY = (SCREEN_HEIGHT - SNAP_POINTS[currentPosition]) + gestureState.dy;\n\n        if (velocity > 0.5) {\n          if (currentPosition === 'expanded') {\n            animateToPosition('middle');\n          } else if (currentPosition === 'middle') {\n            animateToPosition('collapsed');\n          }\n        } else if (velocity < -0.5) {\n          if (currentPosition === 'collapsed') {\n            animateToPosition('middle');\n          } else if (currentPosition === 'middle') {\n            animateToPosition('expanded');\n          }\n        } else {\n          const expandedThreshold = SCREEN_HEIGHT - SNAP_POINTS.expanded + 50;\n          const middleThreshold = SCREEN_HEIGHT - SNAP_POINTS.middle + 50;\n          \n          if (currentY < expandedThreshold) {\n            animateToPosition('expanded');\n          } else if (currentY < middleThreshold) {\n            animateToPosition('middle');\n          } else {\n            animateToPosition('collapsed');\n          }\n        }\n      },\n    })\n  ).current;\n\n  return (\n    <Animated.View\n      style={[\n        styles.container,\n        {\n          backgroundColor: colors.background,\n          top: pan,\n        },\n      ]}\n    >\n      <View \n        {...panResponder.panHandlers}\n        style={[styles.handle, { backgroundColor: colors.background }]}\n      >\n        <View style={[styles.handleBar, { backgroundColor: isDark ? '#666' : '#CCC' }]} />\n      </View>\n      \n      <ScrollView\n        ref={scrollViewRef}\n        style={styles.content}\n        showsVerticalScrollIndicator={false}\n        scrollEnabled={currentPosition === 'expanded'}\n        bounces={false}\n        scrollEventThrottle={16}\n        accessibilityRole=\"adjustable\"\n        accessibilityLabel={`Bottom sheet ${currentPosition}`}\n      >\n        {children}\n      </ScrollView>\n    </Animated.View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    position: 'absolute',\n    left: 0,\n    right: 0,\n    bottom: 0,\n    height: SCREEN_HEIGHT,\n    borderTopLeftRadius: 24,\n    borderTopRightRadius: 24,\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: -4 },\n    shadowOpacity: 0.3,\n    shadowRadius: 12,\n    elevation: 16,\n  },\n  handle: {\n    height: 32,\n    borderTopLeftRadius: 24,\n    borderTopRightRadius: 24,\n    justifyContent: 'center',\n    alignItems: 'center',\n    paddingTop: 8,\n  },\n  handleBar: {\n    width: 48,\n    height: 5,\n    borderRadius: 3,\n  },\n  content: {\n    flex: 1,\n  },\n});\n","size_bytes":4735},"components/redesign/MapBottomDrawer.tsx":{"content":"\nimport React from 'react';\nimport { View, Text, TextInput, TouchableOpacity, ScrollView, StyleSheet } from 'react-native';\nimport { Theme } from '@/constants/Theme';\nimport { IconSymbol } from '@/components/ui/IconSymbol';\nimport { QuickAccessButton } from './QuickAccessButton';\n\ninterface MapBottomDrawerProps {\n  searchQuery: string;\n  onSearchChange: (text: string) => void;\n  searchResults: any[];\n  onSelectPort: (port: any) => void;\n  vessels: any[];\n  onVesselPress?: (vessel: any) => void;\n  isDark?: boolean;\n}\n\nexport function MapBottomDrawer({\n  searchQuery,\n  onSearchChange,\n  searchResults,\n  onSelectPort,\n  vessels,\n  onVesselPress,\n  isDark = false,\n}: MapBottomDrawerProps) {\n  return (\n    <View style={styles.container}>\n      {/* Elegant Search Bar with Voice - Waze Style */}\n      <View style={styles.searchContainer}>\n        <View style={styles.searchBar}>\n          <View style={styles.searchIconContainer}>\n            <IconSymbol name=\"magnifyingglass\" size={18} color={Theme.colors.gray5} />\n          </View>\n          <TextInput\n            style={styles.searchInput}\n            placeholder=\"Where to?\"\n            placeholderTextColor={Theme.colors.gray6}\n            value={searchQuery}\n            onChangeText={onSearchChange}\n          />\n          <TouchableOpacity style={styles.voiceButton} activeOpacity={0.6}>\n            <IconSymbol name=\"mic.fill\" size={18} color={Theme.colors.iosBlue} />\n          </TouchableOpacity>\n        </View>\n      </View>\n\n      {/* Quick Access Buttons - Waze Style */}\n      <ScrollView \n        horizontal \n        showsHorizontalScrollIndicator={false}\n        contentContainerStyle={styles.quickAccessContainer}\n      >\n        <QuickAccessButton\n          icon=\"house.fill\"\n          label=\"Home\"\n          color=\"#FF6B35\"\n          onPress={() => {}}\n        />\n        <QuickAccessButton\n          icon=\"briefcase.fill\"\n          label=\"Work\"\n          color=\"#4A90E2\"\n          onPress={() => {}}\n        />\n        <QuickAccessButton\n          icon=\"plus.circle.fill\"\n          label=\"New\"\n          color={Theme.colors.iosBlue}\n          onPress={() => {}}\n        />\n      </ScrollView>\n\n      {/* Search Results */}\n      {searchResults.length > 0 && (\n        <ScrollView style={styles.resultsContainer} keyboardShouldPersistTaps=\"handled\">\n          {searchResults.map((port) => (\n            <TouchableOpacity\n              key={port.id}\n              style={styles.resultItem}\n              onPress={() => onSelectPort(port)}\n              activeOpacity={0.7}\n            >\n              <View style={styles.resultIconWrapper}>\n                <IconSymbol name=\"location.fill\" size={18} color={Theme.colors.iosBlue} />\n              </View>\n              <View style={styles.resultContent}>\n                <Text style={styles.resultTitle}>{port.name}</Text>\n                <Text style={styles.resultSubtitle}>{port.country}</Text>\n              </View>\n              <IconSymbol name=\"chevron.right\" size={16} color={Theme.colors.gray7} />\n            </TouchableOpacity>\n          ))}\n        </ScrollView>\n      )}\n\n      {/* Recent Section - Elegant List */}\n      {searchQuery.length === 0 && (\n        <View style={styles.recentSection}>\n          <Text style={styles.sectionLabel}>Recent</Text>\n          \n          {vessels.slice(0, 5).map((vessel, index) => (\n            <TouchableOpacity\n              key={index}\n              style={[\n                styles.recentItem,\n                index === vessels.slice(0, 5).length - 1 && styles.recentItemLast\n              ]}\n              onPress={() => onVesselPress?.(vessel)}\n              activeOpacity={0.7}\n            >\n              <View style={styles.recentIconWrapper}>\n                <IconSymbol name=\"location.fill\" size={18} color={Theme.colors.gray5} />\n              </View>\n              <View style={styles.recentContent}>\n                <Text style={styles.recentTitle}>\n                  {vessel.vesselInfo?.vesselName || 'Unknown Vessel'}\n                </Text>\n                <Text style={styles.recentSubtitle}>\n                  {vessel.vesselInfo?.vesselType || 'Vessel'} ‚Ä¢ {vessel.distance?.toFixed(1) || '0'} km\n                </Text>\n              </View>\n            </TouchableOpacity>\n          ))}\n        </View>\n      )}\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    backgroundColor: Theme.colors.white,\n    borderTopLeftRadius: Theme.radius.lg,\n    borderTopRightRadius: Theme.radius.lg,\n    paddingTop: Theme.spacing.base,\n    paddingBottom: Theme.spacing.xl,\n  },\n  searchContainer: {\n    paddingHorizontal: Theme.spacing.drawer,\n    marginBottom: Theme.spacing.base,\n  },\n  searchBar: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    backgroundColor: Theme.colors.gray11,\n    borderRadius: Theme.radius.search,\n    paddingHorizontal: Theme.spacing.base,\n    paddingVertical: 14,\n    gap: 12,\n  },\n  searchIconContainer: {\n    width: 24,\n    height: 24,\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  searchInput: {\n    flex: 1,\n    fontSize: Theme.fonts.sizes.base,\n    color: Theme.colors.gray1,\n    fontWeight: Theme.fonts.weights.regular,\n    padding: 0,\n  },\n  voiceButton: {\n    width: 32,\n    height: 32,\n    justifyContent: 'center',\n    alignItems: 'center',\n    borderRadius: 16,\n  },\n  quickAccessContainer: {\n    paddingHorizontal: Theme.spacing.drawer,\n    gap: 12,\n    marginBottom: Theme.spacing.lg,\n  },\n  resultsContainer: {\n    maxHeight: 350,\n  },\n  resultItem: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    paddingHorizontal: Theme.spacing.drawer,\n    paddingVertical: Theme.spacing.md,\n    gap: Theme.spacing.md,\n    borderBottomWidth: 0.5,\n    borderBottomColor: Theme.colors.gray9,\n  },\n  resultIconWrapper: {\n    width: 36,\n    height: 36,\n    borderRadius: 18,\n    backgroundColor: Theme.colors.gray11,\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  resultContent: {\n    flex: 1,\n  },\n  resultTitle: {\n    fontSize: Theme.fonts.sizes.base,\n    fontWeight: Theme.fonts.weights.semibold,\n    color: Theme.colors.gray1,\n    marginBottom: 2,\n  },\n  resultSubtitle: {\n    fontSize: Theme.fonts.sizes.sm,\n    color: Theme.colors.gray6,\n  },\n  recentSection: {\n    paddingTop: Theme.spacing.xs,\n  },\n  sectionLabel: {\n    fontSize: Theme.fonts.sizes.sm,\n    fontWeight: Theme.fonts.weights.semibold,\n    color: Theme.colors.gray5,\n    marginBottom: Theme.spacing.sm,\n    paddingHorizontal: Theme.spacing.drawer,\n    textTransform: 'uppercase',\n    letterSpacing: 0.5,\n  },\n  recentItem: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    paddingHorizontal: Theme.spacing.drawer,\n    paddingVertical: Theme.spacing.md,\n    gap: Theme.spacing.md,\n    borderBottomWidth: 0.5,\n    borderBottomColor: Theme.colors.gray9,\n  },\n  recentItemLast: {\n    borderBottomWidth: 0,\n  },\n  recentIconWrapper: {\n    width: 36,\n    height: 36,\n    borderRadius: 18,\n    backgroundColor: Theme.colors.gray11,\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  recentContent: {\n    flex: 1,\n  },\n  recentTitle: {\n    fontSize: Theme.fonts.sizes.base,\n    fontWeight: Theme.fonts.weights.semibold,\n    color: Theme.colors.gray1,\n    marginBottom: 2,\n  },\n  recentSubtitle: {\n    fontSize: Theme.fonts.sizes.sm,\n    color: Theme.colors.gray6,\n  },\n});\n","size_bytes":7341},"components/redesign/FloatingControlsStack.tsx":{"content":"\nimport React from 'react';\nimport { View, StyleSheet } from 'react-native';\nimport { Theme } from '@/constants/Theme';\nimport { FloatingControl } from './FloatingControl';\n\ninterface FloatingControlsStackProps {\n  onMenuPress?: () => void;\n  onLocationPress?: () => void;\n  onReportPress?: () => void;\n}\n\nexport function FloatingControlsStack({\n  onMenuPress,\n  onLocationPress,\n  onReportPress,\n}: FloatingControlsStackProps) {\n  return (\n    <View style={styles.container}>\n      {/* Menu Button */}\n      {onMenuPress && (\n        <FloatingControl \n          icon=\"line.3.horizontal\" \n          onPress={onMenuPress}\n          size={48}\n        />\n      )}\n      \n      {/* Location Button */}\n      {onLocationPress && (\n        <FloatingControl \n          icon=\"location.fill\" \n          onPress={onLocationPress}\n          size={48}\n          color={Theme.colors.iosBlue}\n        />\n      )}\n      \n      {/* Report/Alert Button */}\n      {onReportPress && (\n        <FloatingControl \n          icon=\"exclamationmark.triangle.fill\" \n          onPress={onReportPress}\n          size={48}\n          color={Theme.colors.iosOrange}\n        />\n      )}\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    position: 'absolute',\n    right: Theme.spacing.base,\n    bottom: 200,\n    gap: Theme.spacing.sm,\n    zIndex: 10,\n  },\n});\n","size_bytes":1351},"components/redesign/QuickAccessButton.tsx":{"content":"\nimport React from 'react';\nimport { TouchableOpacity, Text, StyleSheet, View } from 'react-native';\nimport { Theme } from '@/constants/Theme';\nimport { IconSymbol } from '@/components/ui/IconSymbol';\n\ninterface QuickAccessButtonProps {\n  icon: string;\n  label: string;\n  color?: string;\n  onPress?: () => void;\n}\n\nexport function QuickAccessButton({ icon, label, color = Theme.colors.iosBlue, onPress }: QuickAccessButtonProps) {\n  return (\n    <TouchableOpacity\n      style={styles.button}\n      onPress={onPress}\n      activeOpacity={0.7}\n    >\n      <View style={[styles.iconContainer, { backgroundColor: color + '15' }]}>\n        <IconSymbol name={icon} size={18} color={color} />\n      </View>\n      <Text style={styles.label}>{label}</Text>\n    </TouchableOpacity>\n  );\n}\n\nconst styles = StyleSheet.create({\n  button: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    backgroundColor: Theme.colors.white,\n    paddingHorizontal: Theme.spacing.base,\n    paddingVertical: 10,\n    borderRadius: Theme.radius.pill,\n    borderWidth: 1,\n    borderColor: Theme.colors.gray9,\n    gap: 8,\n    minWidth: 110,\n    ...Theme.shadows.sm,\n  },\n  iconContainer: {\n    width: 28,\n    height: 28,\n    borderRadius: 14,\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  label: {\n    fontSize: Theme.fonts.sizes.base,\n    fontWeight: Theme.fonts.weights.semibold,\n    color: Theme.colors.gray1,\n  },\n});\n","size_bytes":1411},"app/(tabs)/index_backup.tsx":{"content":"import React, { useState, useEffect, useRef } from 'react';\nimport { View, StyleSheet, Dimensions, Platform, TouchableOpacity, TextInput, Alert, ScrollView, Keyboard } from 'react-native';\nimport { useColorScheme } from '@/hooks/useColorScheme';\nimport { Colors } from '@/constants/Colors';\nimport { Theme } from '@/constants/Theme';\nimport * as Location from 'expo-location';\nimport { WebView } from 'react-native-webview';\nimport { BottomSheet } from '@/components/redesign/BottomSheet';\nimport { QuickActionTile } from '@/components/redesign/QuickActionTile';\nimport { WeatherWidget } from '@/components/redesign/WeatherWidget';\nimport { StatChip } from '@/components/redesign/StatChip';\nimport { Card } from '@/components/redesign/Card';\nimport { SectionHeader } from '@/components/redesign/SectionHeader';\nimport { IconSymbol } from '@/components/ui/IconSymbol';\nimport { getNearbyTrackedVessels } from '@/utils/trackingService';\nimport { getCurrentWeather } from '@/utils/weatherApi';\nimport { getNearbyHazards } from '@/utils/maritimeIntelligence';\nimport { useRouter } from 'expo-router';\nimport { Text } from 'react-native';\n\n// Port database\nconst PORTS_DATABASE = [\n  { id: '1', name: 'Port of Singapore', lat: 1.2644, lng: 103.8221, country: 'Singapore' },\n  { id: '2', name: 'Port of Shanghai', lat: 31.2304, lng: 121.4737, country: 'China' },\n  { id: '3', name: 'Port of Rotterdam', lat: 51.9244, lng: 4.4777, country: 'Netherlands' },\n  { id: '4', name: 'Port of Hong Kong', lat: 22.3193, lng: 114.1694, country: 'Hong Kong' },\n  { id: '5', name: 'Port of Chennai', lat: 13.0827, lng: 80.2707, country: 'India' },\n  { id: '6', name: 'Port of New York', lat: 40.6643, lng: -74.0395, country: 'USA' },\n  { id: '7', name: 'Port of Los Angeles', lat: 33.7405, lng: -118.2719, country: 'USA' },\n  { id: '8', name: 'Port of Dubai', lat: 25.2854, lng: 55.3607, country: 'UAE' },\n];\n\nconst { height: SCREEN_HEIGHT } = Dimensions.get('window');\n\nexport default function MapScreen() {\n  const router = useRouter();\n  const colorScheme = useColorScheme();\n  const isDark = colorScheme === 'dark';\n  const colors = Colors[isDark ? 'dark' : 'light'];\n\n  const [currentLocation, setCurrentLocation] = useState<{ latitude: number; longitude: number } | null>(null);\n  const [vessels, setVessels] = useState<any[]>([]);\n  const [weather, setWeather] = useState<any>(null);\n  const [hazards, setHazards] = useState<any[]>([]);\n  const [currentSpeed, setCurrentSpeed] = useState<number>(0);\n  const [showHazardReport, setShowHazardReport] = useState(false);\n  const [hazardType, setHazardType] = useState<string>('');\n  const [hazardDescription, setHazardDescription] = useState<string>('');\n  const [showSearch, setShowSearch] = useState(false);\n  const [searchMode, setSearchMode] = useState<'port' | 'coords'>('port');\n  const [searchQuery, setSearchQuery] = useState('');\n  const [searchResults, setSearchResults] = useState<any[]>([]);\n  const [destination, setDestination] = useState<{ lat: number; lng: number } | null>(null);\n  const [routeInfo, setRouteInfo] = useState<{ distance: number; time: number } | null>(null);\n  const webViewRef = useRef<WebView>(null);\n\n  useEffect(() => {\n    getCurrentLocation();\n  }, []);\n\n  useEffect(() => {\n    if (currentLocation) {\n      loadData();\n    }\n  }, [currentLocation]);\n\n  const getCurrentLocation = async () => {\n    try {\n      const { status } = await Location.requestForegroundPermissionsAsync();\n      if (status === 'granted') {\n        // Watch position for continuous speed updates\n        await Location.watchPositionAsync(\n          {\n            accuracy: Location.Accuracy.High,\n            timeInterval: 1000,\n            distanceInterval: 1,\n          },\n          (location) => {\n            setCurrentLocation({\n              latitude: location.coords.latitude,\n              longitude: location.coords.longitude,\n            });\n            // Speed in m/s, convert to knots (1 m/s = 1.94384 knots)\n            const speedInKnots = (location.coords.speed || 0) * 1.94384;\n            setCurrentSpeed(speedInKnots);\n          }\n        );\n      } else {\n        // Default location if permission denied\n        setCurrentLocation({\n          latitude: 13.05,\n          longitude: 80.25,\n        });\n      }\n    } catch (error) {\n      console.error('Error getting location:', error);\n      setCurrentLocation({\n        latitude: 13.05,\n        longitude: 80.25,\n      });\n    }\n  };\n\n  const handleSearch = (text: string) => {\n    setSearchQuery(text);\n    if (searchMode === 'port' && text.length > 1) {\n      const filtered = PORTS_DATABASE.filter(port =>\n        port.name.toLowerCase().includes(text.toLowerCase()) ||\n        port.country.toLowerCase().includes(text.toLowerCase())\n      );\n      setSearchResults(filtered);\n    } else {\n      setSearchResults([]);\n    }\n  };\n\n  const selectPort = (port: any) => {\n    setDestination({ lat: port.lat, lng: port.lng });\n    setSearchQuery(port.name);\n    setSearchResults([]);\n    Keyboard.dismiss();\n    calculateRoute({ lat: port.lat, lng: port.lng });\n  };\n\n  const handleCoordinatesGo = () => {\n    const coords = searchQuery.split(',').map(c => parseFloat(c.trim()));\n    if (coords.length === 2 && !isNaN(coords[0]) && !isNaN(coords[1])) {\n      const dest = { lat: coords[0], lng: coords[1] };\n      setDestination(dest);\n      Keyboard.dismiss();\n      calculateRoute(dest);\n    } else {\n      Alert.alert('Invalid Coordinates', 'Please enter valid latitude, longitude (e.g., 13.08, 80.27)');\n    }\n  };\n\n  const calculateRoute = (dest: { lat: number; lng: number }) => {\n    if (!currentLocation) return;\n\n    const R = 6371; // Earth's radius in km\n    const dLat = (dest.lat - currentLocation.latitude) * Math.PI / 180;\n    const dLng = (dest.lng - currentLocation.longitude) * Math.PI / 180;\n    const a = Math.sin(dLat/2) * Math.sin(dLat/2) +\n              Math.cos(currentLocation.latitude * Math.PI / 180) * Math.cos(dest.lat * Math.PI / 180) *\n              Math.sin(dLng/2) * Math.sin(dLng/2);\n    const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));\n    const distance = R * c;\n    const time = (distance / 20) * 60; // Assuming 20 knots speed\n\n    setRouteInfo({ distance, time });\n  };\n\n  const cancelNavigation = () => {\n    setDestination(null);\n    setRouteInfo(null);\n    setSearchQuery('');\n    setShowSearch(false);\n  };\n\n  const submitHazardReport = async () => {\n    if (!currentLocation || !hazardType || !hazardDescription) {\n      Alert.alert('Error', 'Please fill in all fields');\n      return;\n    }\n\n    try {\n      const BACKEND_URL = process.env.EXPO_PUBLIC_BACKEND_URL || 'http://localhost:3000';\n      await fetch(`${BACKEND_URL}/api/hazards/report`, {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          type: hazardType,\n          description: hazardDescription,\n          lat: currentLocation.latitude,\n          lng: currentLocation.longitude,\n          severity: 'medium',\n          timestamp: new Date().toISOString(),\n        }),\n      });\n\n      Alert.alert('Success', 'Hazard reported successfully');\n      setShowHazardReport(false);\n      setHazardType('');\n      setHazardDescription('');\n      loadData();\n    } catch (error) {\n      console.error('Error reporting hazard:', error);\n      Alert.alert('Error', 'Failed to report hazard');\n    }\n  };\n\n  const loadData = async () => {\n    if (!currentLocation) return;\n\n    try {\n      const [nearbyVessels, weatherData, hazardData] = await Promise.all([\n        getNearbyTrackedVessels(currentLocation.latitude, currentLocation.longitude, 10),\n        getCurrentWeather(currentLocation.latitude, currentLocation.longitude),\n        getNearbyHazards(currentLocation.latitude, currentLocation.longitude, 50),\n      ]);\n\n      setVessels(nearbyVessels);\n      setWeather(weatherData);\n      setHazards(hazardData);\n    } catch (error) {\n      console.error('Error loading data:', error);\n    }\n  };\n\n  const quickActions = [\n    { id: '1', icon: 'cloud.fill', label: 'Weather', color: Theme.colors.iosOrange, route: '/weather' },\n    { id: '2', icon: 'exclamationmark.triangle.fill', label: 'SOS', color: Theme.colors.iosRed, route: '/sos' },\n    { id: '3', icon: 'anchor.fill', label: 'Ports', color: Theme.colors.iosPurple, route: '/ports' },\n    { id: '4', icon: 'bell.fill', label: 'Alerts', color: Theme.colors.iosTeal, route: '/notifications' },\n  ];\n\n  const defaultLat = currentLocation?.latitude || 13.05;\n  const defaultLng = currentLocation?.longitude || 80.25;\n\n  const escapeHtml = (text: string): string => {\n    return text.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;');\n  };\n\n  const vesselsMarkersHTML = vessels.map(v => {\n    const heading = v.location?.heading || 0;\n    const speedColor = v.location?.speed && v.location.speed > 10 ? '#ef4444' : '#22c55e';\n    const name = escapeHtml(v.vesselInfo?.vesselName || 'Unknown');\n    return `\n      L.marker([${v.location?.lat || 0}, ${v.location?.lng || 0}], {\n        icon: L.divIcon({\n          html: '<div style=\"transform: rotate(${heading}deg); font-size: 24px;\">‚õµ</div>',\n          className: 'vessel-marker',\n          iconSize: [30, 30],\n          iconAnchor: [15, 15]\n        })\n      }).addTo(map).bindPopup('<b>${name}</b><br>Speed: ${v.location?.speed?.toFixed(1) || 0} kn');\n    `;\n  }).join('\\n');\n\n  const userMarkerHTML = currentLocation ? `\n    L.marker([${currentLocation.latitude}, ${currentLocation.longitude}], {\n      icon: L.divIcon({\n        html: '<div style=\"width: 20px; height: 20px; background: #3da9fc; border: 3px solid white; border-radius: 50%; box-shadow: 0 2px 8px rgba(61, 169, 252, 0.6);\"></div>',\n        className: 'user-marker',\n        iconSize: [20, 20],\n        iconAnchor: [10, 10]\n      })\n    }).addTo(map);\n  ` : '';\n\n  const routeHTML = destination && currentLocation ? `\n    L.polyline([\n      [${currentLocation.latitude}, ${currentLocation.longitude}],\n      [${destination.lat}, ${destination.lng}]\n    ], {\n      color: '#007AFF',\n      weight: 4,\n      opacity: 0.7,\n      dashArray: '10, 5'\n    }).addTo(map);\n\n    L.marker([${destination.lat}, ${destination.lng}], {\n      icon: L.divIcon({\n        html: '<div style=\"background: #34C759; color: white; padding: 8px 12px; border-radius: 8px; font-weight: bold; box-shadow: 0 2px 8px rgba(52, 199, 89, 0.6);\">üéØ Destination</div>',\n        className: 'destination-marker',\n        iconSize: [null, null]\n      })\n    }).addTo(map);\n\n    map.fitBounds([\n      [${currentLocation.latitude}, ${currentLocation.longitude}],\n      [${destination.lat}, ${destination.lng}]\n    ], { padding: [50, 50] });\n  ` : '';\n\n  const htmlContent = `\n    <!DOCTYPE html>\n    <html>\n    <head>\n      <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" />\n      <link rel=\"stylesheet\" href=\"https://unpkg.com/leaflet@1.9.4/dist/leaflet.css\" />\n      <script src=\"https://unpkg.com/leaflet@1.9.4/dist/leaflet.js\"></script>\n      <style>\n        body { margin: 0; padding: 0; background: #1a1a2e; }\n        #map { width: 100%; height: 100vh; }\n      </style>\n    </head>\n    <body>\n      <div id=\"map\"></div>\n      <script>\n        var map = L.map('map', {\n          zoomControl: true,\n          attributionControl: false\n        }).setView([${defaultLat}, ${defaultLng}], 12);\n\n        L.tileLayer('https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png', {\n          maxZoom: 20,\n          minZoom: 3\n        }).addTo(map);\n\n        ${userMarkerHTML}\n        ${vesselsMarkersHTML}\n        ${routeHTML}\n      </script>\n    </body>\n    </html>\n  `;\n\n  return (\n    <View style={styles.container}>\n      {Platform.OS === 'web' ? (\n        <View style={[styles.webMapPlaceholder, { backgroundColor: colors.background }]}>\n          <Text style={{ fontSize: 48, marginBottom: 16 }}>üó∫Ô∏è</Text>\n          <Text style={{ fontSize: 18, fontWeight: '600', color: colors.text }}>\n            Interactive Map\n          </Text>\n          <Text style={{ fontSize: 14, color: colors.secondaryText, marginTop: 8 }}>\n            Pull up the drawer to access features\n          </Text>\n        </View>\n      ) : (\n        <WebView\n          ref={webViewRef}\n          source={{ html: htmlContent }}\n          style={styles.map}\n          javaScriptEnabled={true}\n          domStorageEnabled={true}\n        />\n      )}\n\n      {/* Hazard Report Modal */}\n      {showHazardReport && (\n        <View style={[styles.hazardModal, { backgroundColor: 'rgba(0, 0, 0, 0.5)' }]}>\n          <View style={[styles.hazardModalContent, { backgroundColor: colors.background }]}>\n            <View style={styles.hazardModalHeader}>\n              <Text style={[styles.hazardModalTitle, { color: colors.text }]}>Report Hazard</Text>\n              <TouchableOpacity onPress={() => setShowHazardReport(false)}>\n                <IconSymbol name=\"xmark.circle.fill\" size={28} color={colors.secondaryText} />\n              </TouchableOpacity>\n            </View>\n\n            <Text style={[styles.hazardLabel, { color: colors.text }]}>Hazard Type</Text>\n            <View style={styles.hazardTypeGrid}>\n              {['debris', 'weather', 'wildlife', 'other'].map((type) => (\n                <TouchableOpacity\n                  key={type}\n                  style={[\n                    styles.hazardTypeButton,\n                    { \n                      backgroundColor: hazardType === type ? Theme.colors.iosBlue : (isDark ? '#2C2C2E' : '#F2F2F7'),\n                      borderColor: hazardType === type ? Theme.colors.iosBlue : 'transparent',\n                    }\n                  ]}\n                  onPress={() => setHazardType(type)}\n                >\n                  <Text style={[\n                    styles.hazardTypeText,\n                    { color: hazardType === type ? '#FFFFFF' : colors.text }\n                  ]}>\n                    {type.charAt(0).toUpperCase() + type.slice(1)}\n                  </Text>\n                </TouchableOpacity>\n              ))}\n            </View>\n\n            <Text style={[styles.hazardLabel, { color: colors.text }]}>Description</Text>\n            <TextInput\n              style={[styles.hazardInput, { \n                backgroundColor: isDark ? '#2C2C2E' : '#F2F2F7',\n                color: colors.text,\n              }]}\n              placeholder=\"Describe the hazard...\"\n              placeholderTextColor={colors.secondaryText}\n              multiline\n              numberOfLines={4}\n              value={hazardDescription}\n              onChangeText={setHazardDescription}\n            />\n\n            <TouchableOpacity\n              style={[styles.submitButton, { backgroundColor: Theme.colors.iosBlue }]}\n              onPress={submitHazardReport}\n            >\n              <Text style={styles.submitButtonText}>Submit Report</Text>\n            </TouchableOpacity>\n          </View>\n        </View>\n      )}\n\n      {/* Search Bar - Removed from here and placed inside BottomSheet */}\n      {/* Navigation Info Bar - Removed from here and placed inside BottomSheet */}\n      {/* Speed HUD - Removed from here and placed inside BottomSheet */}\n      {/* Hazard Report Button - Removed from here and placed inside BottomSheet */}\n\n      <BottomSheet>\n        <View style={styles.sheetContent}>\n          <View style={styles.drawerTopControls}>\n            <View style={[styles.searchBar, { backgroundColor: isDark ? '#2C2C2E' : '#F2F2F7' }]}>\n              <IconSymbol name=\"magnifyingglass\" size={20} color={colors.secondaryText} />\n              <TextInput\n                style={[styles.searchInput, { color: colors.text }]}\n                placeholder={searchMode === 'port' ? 'Search ports...' : 'Lat, Lng (e.g., 13.08, 80.27)'}\n                placeholderTextColor={colors.secondaryText}\n                value={searchQuery}\n                onChangeText={handleSearch}\n              />\n              {searchMode === 'coords' && searchQuery.length > 0 && (\n                <TouchableOpacity onPress={handleCoordinatesGo} style={styles.goButton}>\n                  <Text style={styles.goButtonText}>Go</Text>\n                </TouchableOpacity>\n              )}\n            </View>\n\n            <View style={styles.controlsRow}>\n              <TouchableOpacity\n                style={[styles.modeButton, searchMode === 'port' && { backgroundColor: Theme.colors.iosBlue }]}\n                onPress={() => { setSearchMode('port'); setSearchQuery(''); setSearchResults([]); }}\n              >\n                <Text style={[styles.modeText, searchMode === 'port' && { color: '#FFFFFF' }]}>Port</Text>\n              </TouchableOpacity>\n              <TouchableOpacity\n                style={[styles.modeButton, searchMode === 'coords' && { backgroundColor: Theme.colors.iosBlue }]}\n                onPress={() => { setSearchMode('coords'); setSearchQuery(''); setSearchResults([]); }}\n              >\n                <Text style={[styles.modeText, searchMode === 'coords' && { color: '#FFFFFF' }]}>Coordinates</Text>\n              </TouchableOpacity>\n\n              {/* Hazard Report Button */}\n              <TouchableOpacity\n                style={[styles.hazardButton, { backgroundColor: Theme.colors.iosRed }]}\n                onPress={() => setShowHazardReport(true)}\n              >\n                <IconSymbol name=\"exclamationmark.triangle.fill\" size={24} color=\"#FFFFFF\" />\n              </TouchableOpacity>\n            </View>\n\n            {/* Navigation Info Bar */}\n            {destination && routeInfo && (\n              <View style={[styles.navBar, { backgroundColor: Theme.colors.iosBlue }]}>\n                <View style={styles.navInfo}>\n                  <Text style={styles.navLabel}>Distance</Text>\n                  <Text style={styles.navValue}>{routeInfo.distance.toFixed(1)} km</Text>\n                </View>\n                <View style={styles.navInfo}>\n                  <Text style={styles.navLabel}>ETA</Text>\n                  <Text style={styles.navValue}>{routeInfo.time.toFixed(0)} min</Text>\n                </View>\n                <TouchableOpacity onPress={cancelNavigation} style={styles.cancelNav}>\n                  <IconSymbol name=\"xmark-circle-fill\" size={24} color=\"#FFFFFF\" />\n                </TouchableOpacity>\n              </View>\n            )}\n          </View>\n\n          {searchResults.length > 0 && (\n            <ScrollView style={styles.searchResults} keyboardShouldPersistTaps=\"handled\">\n              {searchResults.map((port) => (\n                <TouchableOpacity\n                  key={port.id}\n                  style={[styles.resultItem, { borderBottomColor: colors.border }]}\n                  onPress={() => selectPort(port)}\n                >\n                  <IconSymbol name=\"location.fill\" size={20} color={Theme.colors.iosBlue} />\n                  <View style={styles.resultInfo}>\n                    <Text style={[styles.resultName, { color: colors.text }]}>{port.name}</Text>\n                    <Text style={[styles.resultCountry, { color: colors.secondaryText }]}>{port.country}</Text>\n                  </View>\n                </TouchableOpacity>\n              ))}\n            </ScrollView>\n          )}\n\n          <Text style={[styles.welcomeTitle, { color: colors.text }]}>\n            Welcome back, Captain\n          </Text>\n          <Text style={[styles.welcomeDate, { color: colors.secondaryText }]}>\n            {new Date().toLocaleDateString('en-US', {\n              weekday: 'long',\n              month: 'long',\n              day: 'numeric',\n              year: 'numeric',\n            })}\n          </Text>\n\n          {weather && (\n            <View style={styles.weatherContainer}>\n              <WeatherWidget\n                temperature={`${weather.temperature}¬∞F`}\n                condition=\"Sunny\"\n                emoji=\"‚òÄÔ∏è\"\n                subtitle=\"Perfect for sailing!\"\n              />\n            </View>\n          )}\n\n          <View style={styles.statsRow}>\n            <StatChip value={vessels.length.toString()} label={`Nearby\\nVessels`} color=\"#007AFF\" />\n            <StatChip value={hazards.length.toString()} label={`Active\\nHazards`} color=\"#FF9500\" />\n            <StatChip value={weather ? `${weather.windSpeed}kn` : '--'} label={`Wind\\nSpeed`} color=\"#34C759\" />\n          </View>\n\n          <Text style={[styles.sectionTitle, { color: colors.secondaryText }]}>\n            Quick Actions\n          </Text>\n\n          <View style={styles.quickActionsGrid}>\n            {quickActions.map((action) => (\n              <QuickActionTile\n                key={action.id}\n                icon={action.icon}\n                label={action.label}\n                color={action.color}\n                onPress={() => action.route && router.push(action.route as any)}\n              />\n            ))}\n          </View>\n\n          {vessels.length > 0 && (\n            <View style={styles.section}>\n              <SectionHeader\n                title=\"Nearby Vessels\"\n                actionText=\"View All\"\n                onActionPress={() => router.push('/tracker')}\n              />\n              {vessels.slice(0, 3).map((vessel, index) => (\n                <Card key={index} style={styles.vesselCard}>\n                  <View style={styles.vesselHeader}>\n                    <Text style={[styles.vesselName, { color: colors.text }]}>\n                      {vessel.vesselInfo?.vesselName || 'Unknown Vessel'}\n                    </Text>\n                    <View style={[styles.statusBadge, { backgroundColor: '#34C75920' }]}>\n                      <Text style={[styles.statusBadgeText, { color: '#34C759' }]}>Live</Text>\n                    </View>\n                  </View>\n                  <Text style={[styles.vesselType, { color: colors.secondaryText }]}>\n                    {vessel.vesselInfo?.vesselType || 'Vessel'}\n                  </Text>\n                  <View style={styles.vesselMeta}>\n                    <View style={styles.vesselMetaItem}>\n                      <IconSymbol name=\"location.fill\" size={14} color={colors.primary} />\n                      <Text style={[styles.vesselMetaText, { color: colors.secondaryText }]}>\n                        {vessel.distance ? `${vessel.distance.toFixed(1)} km` : 'Nearby'}\n                      </Text>\n                    </View>\n                  </View>\n                </Card>\n              ))}\n            </View>\n          )}\n\n          <View style={styles.bottomSpacing} />\n        </View>\n      </BottomSheet>\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n  },\n  map: {\n    ...StyleSheet.absoluteFillObject,\n  },\n  webMapPlaceholder: {\n    ...StyleSheet.absoluteFillObject,\n    justifyContent: 'center',\n    alignItems: 'center',\n    padding: 32,\n  },\n  // Search and Navigation controls moved into BottomSheet\n  searchContainer: {\n    position: 'absolute',\n    top: 60,\n    left: 20,\n    right: 20,\n    borderRadius: 16,\n    padding: 16,\n    ...Theme.shadows.lg,\n    zIndex: 100,\n  },\n  searchModeToggle: {\n    flexDirection: 'row',\n    backgroundColor: 'rgba(0,0,0,0.05)',\n    borderRadius: 8,\n    padding: 4,\n    marginBottom: 12,\n  },\n  modeButton: {\n    flex: 1,\n    paddingVertical: 8,\n    alignItems: 'center',\n    borderRadius: 6,\n  },\n  modeText: {\n    fontSize: 14,\n    fontWeight: '600',\n    color: '#666',\n  },\n  searchInputRow: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: 12,\n  },\n  searchInput: {\n    flex: 1,\n    fontSize: 16,\n    paddingVertical: 4,\n  },\n  goButton: {\n    backgroundColor: Theme.colors.iosBlue,\n    paddingHorizontal: 16,\n    paddingVertical: 8,\n    borderRadius: 8,\n  },\n  goButtonText: {\n    color: '#FFFFFF',\n    fontWeight: '600',\n  },\n  searchResults: {\n    marginTop: 12,\n    maxHeight: 200,\n  },\n  resultItem: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    paddingVertical: 12,\n    borderBottomWidth: 1,\n    gap: 12,\n  },\n  resultInfo: {\n    flex: 1,\n  },\n  resultName: {\n    fontSize: 16,\n    fontWeight: '600',\n  },\n  resultCountry: {\n    fontSize: 14,\n    marginTop: 2,\n  },\n  navBar: {\n    position: 'absolute',\n    top: 60,\n    left: 20,\n    right: 20,\n    flexDirection: 'row',\n    alignItems: 'center',\n    padding: 16,\n    borderRadius: 16,\n    ...Theme.shadows.lg,\n    zIndex: 100,\n  },\n  navInfo: {\n    flex: 1,\n    alignItems: 'center',\n  },\n  navLabel: {\n    color: 'rgba(255,255,255,0.8)',\n    fontSize: 12,\n    fontWeight: '600',\n  },\n  navValue: {\n    color: '#FFFFFF',\n    fontSize: 18,\n    fontWeight: 'bold',\n    marginTop: 2,\n  },\n  cancelNav: {\n    marginLeft: 12,\n  },\n  speedHUD: {\n    position: 'absolute',\n    bottom: 140,\n    left: 20,\n    paddingHorizontal: 20,\n    paddingVertical: 12,\n    borderRadius: 16,\n    alignItems: 'center',\n    ...Theme.shadows.lg,\n    zIndex: 10,\n  },\n  speedValue: {\n    fontSize: 32,\n    fontWeight: Theme.fonts.weights.bold,\n  },\n  speedUnit: {\n    fontSize: 14,\n    fontWeight: Theme.fonts.weights.medium,\n    marginTop: -4,\n  },\n  hazardButton: {\n    position: 'absolute',\n    bottom: 140,\n    right: 20,\n    width: 56,\n    height: 56,\n    borderRadius: 28,\n    justifyContent: 'center',\n    alignItems: 'center',\n    ...Theme.shadows.lg,\n    zIndex: 10,\n  },\n  hazardModal: {\n    ...StyleSheet.absoluteFillObject,\n    justifyContent: 'center',\n    alignItems: 'center',\n    zIndex: 1000,\n  },\n  hazardModalContent: {\n    width: '90%',\n    maxWidth: 400,\n    borderRadius: 20,\n    padding: 24,\n    ...Theme.shadows.xl,\n  },\n  hazardModalHeader: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    marginBottom: 24,\n  },\n  hazardModalTitle: {\n    fontSize: 24,\n    fontWeight: Theme.fonts.weights.bold,\n  },\n  hazardLabel: {\n    fontSize: 16,\n    fontWeight: Theme.fonts.weights.semibold,\n    marginBottom: 12,\n    marginTop: 16,\n  },\n  hazardTypeGrid: {\n    flexDirection: 'row',\n    flexWrap: 'wrap',\n    gap: 12,\n  },\n  hazardTypeButton: {\n    paddingHorizontal: 20,\n    paddingVertical: 12,\n    borderRadius: 12,\n    borderWidth: 2,\n  },\n  hazardTypeText: {\n    fontSize: 14,\n    fontWeight: Theme.fonts.weights.semibold,\n  },\n  hazardInput: {\n    borderRadius: 12,\n    padding: 16,\n    fontSize: 16,\n    textAlignVertical: 'top',\n    minHeight: 100,\n  },\n  submitButton: {\n    marginTop: 24,\n    paddingVertical: 16,\n    borderRadius: 12,\n    alignItems: 'center',\n  },\n  submitButtonText: {\n    color: '#FFFFFF',\n    fontSize: 16,\n    fontWeight: Theme.fonts.weights.bold,\n  },\n  // Styles for controls within the BottomSheet\n  sheetContent: {\n    paddingHorizontal: Theme.spacing.lg,\n    paddingTop: Theme.spacing.md,\n  },\n  drawerTopControls: {\n    paddingHorizontal: 20,\n    paddingTop: 16,\n    paddingBottom: 12,\n    gap: 12,\n  },\n  searchBar: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    paddingHorizontal: 16,\n    paddingVertical: 12,\n    borderRadius: 12,\n    gap: 12,\n    ...Theme.shadows.sm,\n  },\n  searchInput: {\n    flex: 1,\n    fontSize: 16,\n    fontWeight: '500',\n  },\n  controlsRow: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    gap: 12,\n  },\n  speedHUD: {\n    flex: 1,\n    paddingHorizontal: 20,\n    paddingVertical: 12,\n    borderRadius: 16,\n    alignItems: 'center',\n    ...Theme.shadows.lg,\n  },\n  speedValue: {\n    fontSize: 32,\n    fontWeight: Theme.fonts.weights.bold,\n  },\n  speedUnit: {\n    fontSize: 14,\n    fontWeight: Theme.fonts.weights.medium,\n    marginTop: -4,\n  },\n  hazardButton: {\n    width: 56,\n    height: 56,\n    borderRadius: 28,\n    justifyContent: 'center',\n    alignItems: 'center',\n    ...Theme.shadows.lg,\n  },\n  welcomeTitle: {\n    fontSize: Theme.fonts.sizes.xxl,\n    fontWeight: Theme.fonts.weights.bold,\n    marginBottom: Theme.spacing.xs,\n  },\n  welcomeDate: {\n    fontSize: Theme.fonts.sizes.base,\n    marginBottom: Theme.spacing.lg,\n  },\n  weatherContainer: {\n    marginBottom: Theme.spacing.xl,\n  },\n  statsRow: {\n    flexDirection: 'row',\n    gap: Theme.spacing.md,\n    marginBottom: Theme.spacing.xl,\n  },\n  sectionTitle: {\n    fontSize: Theme.fonts.sizes.base,\n    marginBottom: Theme.spacing.base,\n    fontWeight: '600',\n  },\n  quickActionsGrid: {\n    flexDirection: 'row',\n    flexWrap: 'wrap',\n    gap: Theme.spacing.md,\n    marginBottom: Theme.spacing.xl,\n  },\n  section: {\n    marginBottom: Theme.spacing.xl,\n  },\n  vesselCard: {\n    marginBottom: Theme.spacing.md,\n  },\n  vesselHeader: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    marginBottom: Theme.spacing.xs,\n  },\n  vesselName: {\n    fontSize: Theme.fonts.sizes.base,\n    fontWeight: Theme.fonts.weights.semibold,\n    flex: 1,\n  },\n  statusBadge: {\n    paddingHorizontal: Theme.spacing.md,\n    paddingVertical: Theme.spacing.xs,\n    borderRadius: Theme.radius.sm,\n  },\n  statusBadgeText: {\n    fontSize: Theme.fonts.sizes.sm,\n    fontWeight: Theme.fonts.weights.semibold,\n  },\n  vesselType: {\n    fontSize: Theme.fonts.sizes.md,\n    marginBottom: Theme.spacing.md,\n  },\n  vesselMeta: {\n    flexDirection: 'row',\n    gap: Theme.spacing.lg,\n  },\n  vesselMetaItem: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: Theme.spacing.xs,\n  },\n  vesselMetaText: {\n    fontSize: Theme.fonts.sizes.md,\n  },\n  bottomSpacing: {\n    height: 100,\n  },\n});","size_bytes":29278},"app/(tabs)/dashboard.tsx":{"content":"import React, { useEffect, useState } from 'react';\nimport { StyleSheet, View, Text, ScrollView, RefreshControl, StatusBar, TouchableOpacity, Alert, Image } from 'react-native';\nimport { useRouter } from 'expo-router';\nimport { useColorScheme } from '@/hooks/useColorScheme';\nimport { Colors } from '@/constants/Colors';\nimport { Theme } from '@/constants/Theme';\nimport { IconSymbol } from '@/components/ui/IconSymbol';\nimport { QuickActionTile } from '@/components/redesign/QuickActionTile';\nimport { WeatherWidget } from '@/components/redesign/WeatherWidget';\nimport { StatChip } from '@/components/redesign/StatChip';\nimport { Card } from '@/components/redesign/Card';\nimport { SectionHeader } from '@/components/redesign/SectionHeader';\nimport { Badge } from '@/components/redesign/Badge';\nimport { getNearbyTrackedVessels } from '@/utils/trackingService';\nimport { getCurrentWeather } from '@/utils/weatherApi';\nimport { getNearbyHazards } from '@/utils/maritimeIntelligence';\nimport * as Location from 'expo-location';\n\nexport default function HomeScreen() {\n  const router = useRouter();\n  const colorScheme = useColorScheme();\n  const isDark = colorScheme === 'dark';\n  const colors = Colors[isDark ? 'dark' : 'light'];\n\n  const [vessels, setVessels] = useState<any[]>([]);\n  const [weather, setWeather] = useState<any>(null);\n  const [hazards, setHazards] = useState<any[]>([]);\n  const [userLocation, setUserLocation] = useState<{ lat: number; lng: number } | null>(null);\n  const [refreshing, setRefreshing] = useState(false);\n\n  useEffect(() => {\n    requestLocationAndLoadData();\n\n    let locationSubscription: any;\n    const watchLocation = async () => {\n      const { status } = await Location.requestForegroundPermissionsAsync();\n      if (status === 'granted') {\n        locationSubscription = await Location.watchPositionAsync(\n          {\n            accuracy: Location.Accuracy.High,\n            timeInterval: 30000,\n            distanceInterval: 100,\n          },\n          (location) => {\n            const coords = {\n              lat: location.coords.latitude,\n              lng: location.coords.longitude,\n            };\n            setUserLocation(coords);\n            loadData(coords);\n          }\n        );\n      }\n    };\n\n    watchLocation();\n\n    return () => {\n      if (locationSubscription) {\n        locationSubscription.remove();\n      }\n    };\n  }, []);\n\n  const requestLocationAndLoadData = async () => {\n    try {\n      const { status } = await Location.requestForegroundPermissionsAsync();\n      if (status !== 'granted') {\n        console.log('Location permission denied');\n        Alert.alert(\n          'Location Permission Required',\n          'Please enable location services to see real-time weather and maritime data for your area.'\n        );\n        return;\n      }\n\n      const location = await Location.getCurrentPositionAsync({\n        accuracy: Location.Accuracy.High,\n      });\n\n      const coords = {\n        lat: location.coords.latitude,\n        lng: location.coords.longitude,\n      };\n\n      setUserLocation(coords);\n      await loadData(coords);\n    } catch (error) {\n      console.error('Error getting location:', error);\n      Alert.alert('Location Error', 'Could not get your current location. Please try again.');\n    }\n  };\n\n  const loadData = async (coords: { lat: number; lng: number }) => {\n    try {\n      const [nearbyVessels, weatherData, hazardData] = await Promise.all([\n        getNearbyTrackedVessels(coords.lat, coords.lng, 10),\n        getCurrentWeather(coords.lat, coords.lng),\n        getNearbyHazards(coords.lat, coords.lng, 50),\n      ]);\n\n      setVessels(nearbyVessels);\n      setWeather(weatherData);\n      setHazards(hazardData);\n    } catch (error) {\n      console.error('Error loading data:', error);\n    }\n  };\n\n  const onRefresh = async () => {\n    setRefreshing(true);\n    if (userLocation) {\n      await loadData(userLocation);\n    }\n    setRefreshing(false);\n  };\n\n  const quickActions = [\n    { id: '1', icon: 'cloud.fill', label: 'Weather', color: Theme.colors.iosOrange, route: '/weather' },\n    { id: '2', icon: 'exclamationmark.triangle.fill', label: 'SOS', color: Theme.colors.iosRed, route: '/sos' },\n    { id: '3', icon: 'anchor.fill', label: 'Ports', color: Theme.colors.iosPurple, route: '/ports' },\n    { id: '4', icon: 'bell.fill', label: 'Alerts', color: Theme.colors.iosTeal, route: '/notifications' },\n    { id: '5', icon: 'map.fill', label: 'Map', color: Theme.colors.iosBlue, route: '/' },\n    { id: '6', icon: 'location.fill', label: 'Tracker', color: Theme.colors.iosGreen, route: '/tracker' },\n  ];\n\n  return (\n    <View style={[styles.container, { backgroundColor: colors.background }]}>\n      <StatusBar barStyle={isDark ? 'light-content' : 'dark-content'} />\n\n      <View style={[styles.header, { backgroundColor: colors.background }]}>\n        <View>\n          <Text style={[styles.appName, { color: colors.text }]}>MarineTrack</Text>\n          <Text style={[styles.appSubtitle, { color: colors.secondaryText }]}>Professional Maritime Suite</Text>\n        </View>\n        <View style={styles.headerIcons}>\n          <TouchableOpacity \n            style={[styles.headerIconButton, { backgroundColor: isDark ? 'rgba(255,255,255,0.1)' : 'rgba(0,0,0,0.05)' }]} \n            onPress={() => router.push('/notifications')}\n          >\n            <IconSymbol name=\"bell.fill\" size={20} color={colors.text} />\n            {hazards.length > 0 && (\n              <View style={styles.notificationBadge}>\n                <Text style={styles.notificationBadgeText}>{hazards.length}</Text>\n              </View>\n            )}\n          </TouchableOpacity>\n        </View>\n      </View>\n\n      <ScrollView\n        style={styles.scrollView}\n        showsVerticalScrollIndicator={false}\n        refreshControl={\n          <RefreshControl refreshing={refreshing} onRefresh={onRefresh} tintColor={colors.primary} />\n        }\n      >\n        <View style={styles.welcomeSection}>\n          <Text style={[styles.welcomeTitle, { color: colors.text }]}>\n            Welcome back, Captain\n          </Text>\n          <Text style={[styles.welcomeDate, { color: colors.secondaryText }]}>\n            {new Date().toLocaleDateString('en-US', { \n              weekday: 'long', \n              month: 'long', \n              day: 'numeric', \n              year: 'numeric' \n            })}\n          </Text>\n        </View>\n\n        {weather && (\n          <View style={styles.weatherContainer}>\n            <WeatherWidget\n              temperature={`${weather.temperature}¬∞F`}\n              condition=\"Sunny\"\n              emoji=\"‚òÄÔ∏è\"\n              subtitle=\"Perfect for sailing!\"\n            />\n          </View>\n        )}\n\n        <Text style={[styles.sectionTitle, { color: colors.secondaryText }]}>\n          What would you like to do today?\n        </Text>\n\n        <View style={styles.quickActionsGrid}>\n          {quickActions.map((action) => (\n            <QuickActionTile\n              key={action.id}\n              icon={action.icon}\n              label={action.label}\n              color={action.color}\n              onPress={() => action.route && router.push(action.route as any)}\n            />\n          ))}\n        </View>\n\n        <View style={styles.statsRow}>\n          <StatChip value={vessels.length.toString()} label={`Nearby\\nVessels`} color=\"#007AFF\" />\n          <StatChip value={hazards.length.toString()} label={`Active\\nHazards`} color=\"#FF9500\" />\n          <StatChip value={weather ? `${weather.windSpeed}kn` : '--'} label={`Wind\\nSpeed`} color=\"#34C759\" />\n        </View>\n\n        {vessels.length > 0 && (\n          <View style={styles.section}>\n            <SectionHeader\n              title=\"Nearby Vessels\"\n              actionText=\"View All\"\n              onActionPress={() => router.push('/tracker')}\n            />\n            {vessels.slice(0, 3).map((vessel, index) => (\n              <Card key={index} style={styles.vesselCard}>\n                <View style={styles.vesselHeader}>\n                  <Text style={[styles.vesselName, { color: colors.text }]}>\n                    {vessel.vesselInfo?.vesselName || 'Unknown Vessel'}\n                  </Text>\n                  <View style={[styles.statusBadge, { backgroundColor: '#34C75920' }]}>\n                    <Text style={[styles.statusBadgeText, { color: '#34C759' }]}>Live</Text>\n                  </View>\n                </View>\n                <Text style={[styles.vesselType, { color: colors.secondaryText }]}>\n                  {vessel.vesselInfo?.vesselType || 'Vessel'}\n                </Text>\n                <View style={styles.vesselMeta}>\n                  <View style={styles.vesselMetaItem}>\n                    <IconSymbol name=\"location.fill\" size={14} color={colors.primary} />\n                    <Text style={[styles.vesselMetaText, { color: colors.secondaryText }]}>\n                      {vessel.distance ? `${vessel.distance.toFixed(1)} km` : 'Nearby'}\n                    </Text>\n                  </View>\n                  <View style={styles.vesselMetaItem}>\n                    <IconSymbol name=\"speedometer\" size={14} color={colors.primary} />\n                    <Text style={[styles.vesselMetaText, { color: colors.secondaryText }]}>\n                      {vessel.location?.speed?.toFixed(1) || '0'} kn\n                    </Text>\n                  </View>\n                </View>\n              </Card>\n            ))}\n          </View>\n        )}\n\n        <View style={styles.bottomSpacing} />\n      </ScrollView>\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n  },\n  header: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    paddingHorizontal: Theme.spacing.lg,\n    paddingTop: 60,\n    paddingBottom: Theme.spacing.lg,\n  },\n  appName: {\n    fontSize: 32,\n    fontWeight: '700',\n    letterSpacing: -0.5,\n  },\n  appSubtitle: {\n    fontSize: Theme.fonts.sizes.sm,\n    marginTop: 2,\n    letterSpacing: 0.5,\n    textTransform: 'uppercase',\n  },\n  headerIcons: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: Theme.spacing.sm,\n  },\n  headerIconButton: {\n    width: 40,\n    height: 40,\n    borderRadius: 20,\n    justifyContent: 'center',\n    alignItems: 'center',\n    position: 'relative',\n  },\n  notificationBadge: {\n    position: 'absolute',\n    top: -2,\n    right: -2,\n    backgroundColor: Theme.colors.iosRed,\n    borderRadius: 10,\n    minWidth: 20,\n    height: 20,\n    justifyContent: 'center',\n    alignItems: 'center',\n    paddingHorizontal: 4,\n  },\n  notificationBadgeText: {\n    color: '#FFFFFF',\n    fontSize: 11,\n    fontWeight: '700',\n  },\n  scrollView: {\n    flex: 1,\n  },\n  welcomeSection: {\n    paddingHorizontal: Theme.spacing.lg,\n    marginBottom: Theme.spacing.lg,\n  },\n  welcomeTitle: {\n    fontSize: Theme.fonts.sizes.xxxl,\n    fontWeight: Theme.fonts.weights.bold,\n    marginBottom: Theme.spacing.xs,\n  },\n  welcomeDate: {\n    fontSize: Theme.fonts.sizes.base,\n  },\n  weatherContainer: {\n    paddingHorizontal: Theme.spacing.lg,\n    marginBottom: Theme.spacing.xl,\n  },\n  sectionTitle: {\n    fontSize: Theme.fonts.sizes.lg,\n    paddingHorizontal: Theme.spacing.lg,\n    marginBottom: Theme.spacing.base,\n  },\n  quickActionsGrid: {\n    flexDirection: 'row',\n    flexWrap: 'wrap',\n    paddingHorizontal: Theme.spacing.lg,\n    gap: Theme.spacing.md,\n    marginBottom: Theme.spacing.xxl,\n  },\n  statsRow: {\n    flexDirection: 'row',\n    gap: Theme.spacing.md,\n    paddingHorizontal: Theme.spacing.lg,\n    marginBottom: Theme.spacing.xxl,\n  },\n  section: {\n    marginBottom: Theme.spacing.xl,\n  },\n  vesselCard: {\n    marginHorizontal: Theme.spacing.lg,\n    marginBottom: Theme.spacing.md,\n  },\n  vesselHeader: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    marginBottom: Theme.spacing.xs,\n  },\n  vesselName: {\n    fontSize: Theme.fonts.sizes.base,\n    fontWeight: Theme.fonts.weights.semibold,\n    flex: 1,\n  },\n  statusBadge: {\n    paddingHorizontal: Theme.spacing.md,\n    paddingVertical: Theme.spacing.xs,\n    borderRadius: Theme.radius.sm,\n  },\n  statusBadgeText: {\n    fontSize: Theme.fonts.sizes.sm,\n    fontWeight: Theme.fonts.weights.semibold,\n  },\n  vesselType: {\n    fontSize: Theme.fonts.sizes.md,\n    marginBottom: Theme.spacing.md,\n  },\n  vesselMeta: {\n    flexDirection: 'row',\n    gap: Theme.spacing.lg,\n  },\n  vesselMetaItem: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: Theme.spacing.xs,\n  },\n  vesselMetaText: {\n    fontSize: Theme.fonts.sizes.md,\n  },\n  bottomSpacing: {\n    height: 100,\n  },\n});","size_bytes":12602},"components/redesign/FloatingControl.tsx":{"content":"import React from 'react';\nimport { TouchableOpacity, StyleSheet, View } from 'react-native';\nimport { Theme } from '@/constants/Theme';\nimport { IconSymbol } from '@/components/ui/IconSymbol';\n\ninterface FloatingControlProps {\n  icon: string;\n  onPress?: () => void;\n  size?: number;\n  color?: string;\n  backgroundColor?: string;\n}\n\nexport function FloatingControl({ \n  icon, \n  onPress, \n  size = 44,\n  color = Theme.colors.gray1,\n  backgroundColor = Theme.colors.white,\n}: FloatingControlProps) {\n  return (\n    <TouchableOpacity\n      style={[\n        styles.button,\n        { \n          width: size, \n          height: size, \n          borderRadius: size / 2,\n          backgroundColor \n        }\n      ]}\n      onPress={onPress}\n      activeOpacity={0.7}\n    >\n      <IconSymbol name={icon} size={20} color={color} />\n    </TouchableOpacity>\n  );\n}\n\nconst styles = StyleSheet.create({\n  button: {\n    justifyContent: 'center',\n    alignItems: 'center',\n    ...Theme.shadows.md,\n    borderWidth: 0.5,\n    borderColor: Theme.colors.gray9,\n  },\n});","size_bytes":1051}},"version":2}